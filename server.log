
> rest-express@1.0.0 dev
> NODE_ENV=development tsx server/index.ts

[dotenv@17.2.0] injecting env (28) from .env (tip: âš™ï¸  suppress all logs with { quiet: true })
ğŸ” Using DATABASE_URL: postgresql://postgres.tbvugytmskxxyqfvqmup:gps110601ysw@[HIDDEN]
ğŸ”„ Creating PostgreSQL connection pool with URL: postgresql://postgres.tbvugytmskxxyqfvqmup:gps110601ysw@[HIDDEN]
âœ… Database connected successfully (PostgreSQL pool)
[dotenv@17.2.0] injecting env (0) from .env (tip: ğŸ” prevent building .env in docker: https://dotenvx.com/prebuild)
ğŸ”§ Force-set DATABASE_URL: postgresql://postgres.tbvugytmskxxyqfvqmup:gps110601ysw@[HIDDEN]
8:53:22 AM [express] serving on port 3000
ğŸ“„ PDF ìƒì„± ìš”ì²­: ë°œì£¼ì„œ PO-2025-0001
âœ… PDF ìƒì„± ì™„ë£Œ: /api/orders/download-pdf/1754438013917
8:53:40 AM [express] POST /api/orders/generate-pdf 200 in 6497ms :: {"success":true,"pdfUrl":"/api/oâ€¦
8:53:48 AM [express] GET /api/orders/download-pdf/1754438013917 200 in 4ms
Browserslist: browsers data (caniuse-lite) is 10 months old. Please run:
  npx update-browserslist-db@latest
  Why you should do it regularly: https://github.com/browserslist/update-db#readme
getCurrentUser - Session ID: Rw5d6OeIMKNf2JPo_XNMlHCwGni6Jo4Y
getCurrentUser - Session userId: test_admin_001
getCurrentUser - User found: test_admin_001
8:55:50 AM [express] GET /api/auth/user 304 in 837ms :: {"id":"test_admin_001","email":"test@ikjin.câ€¦
getCurrentUser - Session ID: Rw5d6OeIMKNf2JPo_XNMlHCwGni6Jo4Y
getCurrentUser - Session userId: test_admin_001
8:55:50 AM [express] GET /api/positions 304 in 190ms :: [{"id":1,"name":"í˜„ì¥ì†Œì¥","code":"site_manager"â€¦
8:55:50 AM [express] GET /api/companies 304 in 276ms :: [{"id":1,"companyName":"(ì£¼)ìµì§„ì—”ì§€ë‹ˆì–´ë§","businesâ€¦
ğŸ” Starting getUnifiedDashboardData query...
ğŸ“Š Order stats query result: Result {
  command: 'SELECT',
  rowCount: 1,
  oid: null,
  rows: [ { totalOrders: '86', totalAmount: '1887408084.93' } ],
  fields: [
    Field {
      name: 'totalOrders',
      tableID: 0,
      columnID: 0,
      dataTypeID: 20,
      dataTypeSize: 8,
      dataTypeModifier: -1,
      format: 'text'
    },
    Field {
      name: 'totalAmount',
      tableID: 0,
      columnID: 0,
      dataTypeID: 1700,
      dataTypeSize: -1,
      dataTypeModifier: -1,
      format: 'text'
    }
  ],
  _parsers: [ [Function: parseBigInteger], [Function: noParse] ],
  _types: { getTypeParser: [Function: getTypeParser] },
  RowCtor: null,
  rowAsArray: false,
  _prebuiltEmptyResultObject: { totalOrders: null, totalAmount: null }
}
getCurrentUser - User found: test_admin_001
Database error in getUiTerms: error: column "id" does not exist
    at /Users/davidyang/workspace/20250713_PO_Mgmt/node_modules/pg-pool/index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async <anonymous> (/Users/davidyang/workspace/20250713_PO_Mgmt/node_modules/src/node-postgres/session.ts:104:19)
    at async DatabaseStorage.getUiTerms (/Users/davidyang/workspace/20250713_PO_Mgmt/server/storage.ts:1724:14)
    at async <anonymous> (/Users/davidyang/workspace/20250713_PO_Mgmt/server/routes/admin.ts:28:19) {
  length: 101,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '8',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3716',
  routine: 'errorMissingColumn'
}
8:55:51 AM [express] GET /api/auth/me 304 in 771ms :: {"id":"test_admin_001","email":"test@ikjin.co.â€¦
8:55:51 AM [express] GET /api/items/categories 304 in 774ms :: [{"id":6,"categoryType":"major","cateâ€¦
8:55:51 AM [express] GET /api/ui-terms 304 in 787ms :: []
8:55:51 AM [express] GET /api/auth/permissions/test_admin_001 304 in 249ms :: {"userId":"test_admin_â€¦
âœ… Dashboard data compiled successfully: { totalOrders: 86, activeProjects: 11 }
8:55:51 AM [express] GET /api/dashboard/unified 304 in 929ms :: {"statistics":{"totalOrders":86,"totâ€¦
ğŸš€ Optimized orders request: {
  filters: { page: 1, limit: 20, sortOrder: 'desc' },
  timestamp: '2025-08-05T23:55:54.021Z'
}
8:55:54 AM [express] GET /api/projects/active 304 in 268ms :: [{"id":17,"projectName":"(ì£¼)ìµì§„","projeâ€¦
8:55:54 AM [express] GET /api/vendors 304 in 338ms :: [{"id":3,"name":"(ì£¼)ëŒ€í•œì•Œë£¨ë¯¸ëŠ„ì••ì¶œ","vendorCode":nulâ€¦
âœ… Optimized orders response: {
  ordersCount: 20,
  total: 86,
  page: 1,
  totalPages: 5,
  vendorsCount: 51,
  projectsCount: 11
}
ğŸŒ Slow query detected: orders-optimized took 668.84ms
8:55:54 AM [express] GET /api/orders-optimized 200 in 846ms :: {"orders":[{"id":114,"orderNumber":"Pâ€¦
8:56:14 AM [express] POST /api/po-template/upload 200 in 546ms :: {"success":true,"message":"íŒŒì¼ íŒŒì‹± ì™„â€¦
ğŸ”¥ğŸ”¥ğŸ”¥ /save ì—”ë“œí¬ì¸íŠ¸ í˜¸ì¶œë¨ - ìƒˆë¡œìš´ ë””ë²„ê¹… ì½”ë“œ ì ìš©ë¨
ğŸ“‹ ìµœì¢… ë°œì£¼ë²ˆí˜¸: PO-20250805-ì´ë…¸ì—-466 (ì›ë³¸: PO-20250805-ì´ë…¸ì—-466)
ğŸ“… ë°œì£¼ì¼ì ë””ë²„ê¹…: orderData.orderDate="2025-08-05", type=string
ğŸ“… ë‚©ê¸°ì¼ì ë””ë²„ê¹…: orderData.dueDate="", type=string
ğŸ”¥ğŸ”¥ğŸ”¥ ë‚ ì§œ ë³€í™˜ í•¨ìˆ˜ ì‹œì‘ - ìƒˆ ì½”ë“œ ì‹¤í–‰ë¨
ğŸ”¥ğŸ“… parseDate ì…ë ¥ê°’: "2025-08-05", type=string, isEmpty=false
ğŸ”¥ğŸ“… parseDate ê²°ê³¼: "2025-08-05" -> 2025-08-05T00:00:00.000Z (valid: true)
ğŸ”¥ğŸ“… parseDate ì…ë ¥ê°’: "", type=string, isEmpty=true
ğŸ”¥ğŸ“… parseDate ê²°ê³¼: null (ë¹ˆ ë¬¸ìì—´)
ğŸ“… ìµœì¢… ì €ì¥í•  ë‚ ì§œë“¤: {
  orderDate: 2025-08-05T00:00:00.000Z,
  deliveryDate: null,
  orderDateISO: '2025-08-05T00:00:00.000Z',
  deliveryDateISO: null
}
ğŸ“… DBì— ì €ì¥ëœ ë°œì£¼ì„œ: {
  id: 115,
  orderNumber: 'PO-20250805-ì´ë…¸ì—-466',
  orderDate: '2025-08-05',
  deliveryDate: null
}
ğŸ“‹ ìµœì¢… ë°œì£¼ë²ˆí˜¸: PO-20240805-ìš¸íŠ¸ë¼-856 (ì›ë³¸: PO-20240805-ìš¸íŠ¸ë¼-856)
ğŸ“… ë°œì£¼ì¼ì ë””ë²„ê¹…: orderData.orderDate="2024-08-05", type=string
ğŸ“… ë‚©ê¸°ì¼ì ë””ë²„ê¹…: orderData.dueDate="", type=string
ğŸ”¥ğŸ”¥ğŸ”¥ ë‚ ì§œ ë³€í™˜ í•¨ìˆ˜ ì‹œì‘ - ìƒˆ ì½”ë“œ ì‹¤í–‰ë¨
ğŸ”¥ğŸ“… parseDate ì…ë ¥ê°’: "2024-08-05", type=string, isEmpty=false
ğŸ”¥ğŸ“… parseDate ê²°ê³¼: "2024-08-05" -> 2024-08-05T00:00:00.000Z (valid: true)
ğŸ”¥ğŸ“… parseDate ì…ë ¥ê°’: "", type=string, isEmpty=true
ğŸ”¥ğŸ“… parseDate ê²°ê³¼: null (ë¹ˆ ë¬¸ìì—´)
ğŸ“… ìµœì¢… ì €ì¥í•  ë‚ ì§œë“¤: {
  orderDate: 2024-08-05T00:00:00.000Z,
  deliveryDate: null,
  orderDateISO: '2024-08-05T00:00:00.000Z',
  deliveryDateISO: null
}
ğŸ“… DBì— ì €ì¥ëœ ë°œì£¼ì„œ: {
  id: 116,
  orderNumber: 'PO-20240805-ìš¸íŠ¸ë¼-856',
  orderDate: '2024-08-05',
  deliveryDate: null
}
ğŸ“‹ ìµœì¢… ë°œì£¼ë²ˆí˜¸: PO-20240805-ë”ê³¨ì°½-686 (ì›ë³¸: PO-20240805-ë”ê³¨ì°½-686)
ğŸ“… ë°œì£¼ì¼ì ë””ë²„ê¹…: orderData.orderDate="2024-08-05", type=string
ğŸ“… ë‚©ê¸°ì¼ì ë””ë²„ê¹…: orderData.dueDate="", type=string
ğŸ”¥ğŸ”¥ğŸ”¥ ë‚ ì§œ ë³€í™˜ í•¨ìˆ˜ ì‹œì‘ - ìƒˆ ì½”ë“œ ì‹¤í–‰ë¨
ğŸ”¥ğŸ“… parseDate ì…ë ¥ê°’: "2024-08-05", type=string, isEmpty=false
ğŸ”¥ğŸ“… parseDate ê²°ê³¼: "2024-08-05" -> 2024-08-05T00:00:00.000Z (valid: true)
ğŸ”¥ğŸ“… parseDate ì…ë ¥ê°’: "", type=string, isEmpty=true
ğŸ”¥ğŸ“… parseDate ê²°ê³¼: null (ë¹ˆ ë¬¸ìì—´)
ğŸ“… ìµœì¢… ì €ì¥í•  ë‚ ì§œë“¤: {
  orderDate: 2024-08-05T00:00:00.000Z,
  deliveryDate: null,
  orderDateISO: '2024-08-05T00:00:00.000Z',
  deliveryDateISO: null
}
ğŸ“… DBì— ì €ì¥ëœ ë°œì£¼ì„œ: {
  id: 117,
  orderNumber: 'PO-20240805-ë”ê³¨ì°½-686',
  orderDate: '2024-08-05',
  deliveryDate: null
}
8:56:15 AM [express] POST /api/po-template/save 200 in 1438ms :: {"success":true,"message":"ì‹¤ì œ DB ì €ì¥â€¦
ğŸ” [EXECUTION PATH]
   API: /api/po-template/extract-sheets
   ì‹¤ì œ í˜¸ì¶œ: POTemplateProcessorMock.extractSheetsToFile
   ì‹œê°„: 2025-08-05T23:56:16.062Z
   ===============================
ğŸ”§ [ENTRY] POTemplateProcessorMock.extractSheetsToFile
   ì‹œê°„: 2025-08-05T23:56:16.063Z
   íŒŒë¼ë¯¸í„°: {
  "sourcePath": "/Users/davidyang/workspace/20250713_PO_Mgmt/uploads/1754438174403-PO_Excel_InputSheet_Template_updated.xlsx",
  "targetPath": "/Users/davidyang/workspace/20250713_PO_Mgmt/uploads/extracted-1754438176063.xlsx",
  "sheetNames": [
    "ê°‘ì§€",
    "ì„ì§€"
  ]
}
   ===============================
ğŸ”§ Input ì‹œíŠ¸ ì™„ì „ ì œê±° ì‹œì‘: /Users/davidyang/workspace/20250713_PO_Mgmt/uploads/1754438174403-PO_Excel_InputSheet_Template_updated.xlsx -> /Users/davidyang/workspace/20250713_PO_Mgmt/uploads/extracted-1754438176063.xlsx
ğŸ“‹ ë°œê²¬ëœ ëª¨ë“  ì‹œíŠ¸: Input
ğŸ¯ ì œê±°í•  Input ì‹œíŠ¸ë“¤: Input
ğŸ“‹ ë³´ì¡´í•  ì‹œíŠ¸ë“¤: 
ğŸ” ë§¤í•‘ í™•ì¸: Input -> sheet1.xml
ğŸ—‘ï¸ [Content_Types].xmlì—ì„œ ì œê±°: /xl/worksheets/sheet1.xml
ğŸ—‘ï¸ ê´€ê³„ ì œê±°: rId1
ğŸ—‘ï¸ íŒŒì¼ ì œê±°: xl/worksheets/sheet1.xml
âœ… Input ì‹œíŠ¸ ì™„ì „ ì œê±° ì™„ë£Œ: /Users/davidyang/workspace/20250713_PO_Mgmt/uploads/extracted-1754438176063.xlsx
ğŸ“Š ì œê±°ëœ ì‹œíŠ¸: Input
ğŸ“Š ë³´ì¡´ëœ ì‹œíŠ¸: 
âœ… [EXIT] POTemplateProcessorMock.extractSheetsToFile
   ì‹œê°„: 2025-08-05T23:56:16.101Z
   ê²°ê³¼: {
  "success": true,
  "extractedSheets": []
}
   ===============================
8:56:16 AM [express] POST /api/po-template/extract-sheets 200 in 204ms :: {"success":true,"message":â€¦
ğŸ“„ PDF ìƒì„± ìš”ì²­: ë°œì£¼ì„œ N/A
âœ… PDF ìƒì„± ì™„ë£Œ: /api/orders/download-pdf/1754438201335
8:56:45 AM [express] POST /api/orders/generate-pdf 200 in 4244ms :: {"success":true,"pdfUrl":"/api/oâ€¦
8:56:45 AM [express] GET /api/orders/download-pdf/1754438201335 200 in 175ms
9:00:13 AM [vite] hmr update /src/components/workflow/completion/ActionButtons.tsx, /src/index.css?v=sIrDNQuwPrNAX3ik2GukX
9:00:36 AM [vite] hmr update /src/components/workflow/preview/PDFPreviewModal.tsx, /src/index.css?v=sIrDNQuwPrNAX3ik2GukX
9:01:03 AM [vite] hmr update /src/components/workflow/preview/PDFPreviewModal.tsx, /src/index.css?v=sIrDNQuwPrNAX3ik2GukX
9:04:18 AM [vite] hmr update /src/components/workflow/excel/ExcelUploadComponent.tsx, /src/index.css?v=sIrDNQuwPrNAX3ik2GukX
9:04:27 AM [vite] hmr update /src/components/workflow/excel/ExcelUploadComponent.tsx, /src/index.css?v=sIrDNQuwPrNAX3ik2GukX
9:04:46 AM [vite] hmr update /src/components/workflow/excel/ExcelUploadComponent.tsx, /src/index.css?v=sIrDNQuwPrNAX3ik2GukX
9:05:06 AM [vite] hmr update /src/components/workflow/excel/ExcelUploadComponent.tsx, /src/index.css?v=sIrDNQuwPrNAX3ik2GukX
9:05:26 AM [vite] hmr update /src/components/workflow/excel/ExcelUploadComponent.tsx, /src/index.css?v=sIrDNQuwPrNAX3ik2GukX
9:06:07 AM [vite] hmr update /src/components/workflow/excel/ExcelUploadComponent.tsx, /src/index.css?v=sIrDNQuwPrNAX3ik2GukX
