import{n as u,r as k,q as j,j as e,ak as d,ad as y,H as f,ae as N,o as v,a3 as C,a as w,B as S,t as P,v as q,P as A,Q as E,b as M,X as T,c as H,M as R,F as B,T as F,R as I,k as O}from"./index-BHt0qwks-1757339502088.js";import{H as X}from"./history-BMOz0vy5-1757339502088.js";import{A as x}from"./activity-DGQ3i4Ja-1757339502088.js";import{S as $}from"./square-pen-C9nAC1Ev-1757339502088.js";import{S as D}from"./send-c2KtboCf-1757339502088.js";import{R as L}from"./refresh-cw-DVZYynIf-1757339502088.js";import{P as z}from"./paperclip-jgiG0bQj-1757339502088.js";import{P as Q}from"./package-BjkBv3OQ-1757339502088.js";import{f as U}from"./format-DNthd0aY-1757339502088.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=u("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]),J={Plus:A,Edit:$,Check:E,CheckCheck:G,CheckCircle:M,X:T,XCircle:H,Send:D,Mail:R,RefreshCw:L,FileText:B,Paperclip:z,Trash2:F,Package:Q,Activity:x},o={gray:"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200",blue:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",green:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",teal:"bg-teal-100 text-teal-800 dark:bg-teal-900 dark:text-teal-200",red:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",indigo:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200",purple:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",cyan:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900 dark:text-cyan-200",orange:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200"},n={gray:"border-gray-300 dark:border-gray-600",blue:"border-blue-300 dark:border-blue-600",green:"border-green-300 dark:border-green-600",teal:"border-teal-300 dark:border-teal-600",red:"border-red-300 dark:border-red-600",indigo:"border-indigo-300 dark:border-indigo-600",purple:"border-purple-300 dark:border-purple-600",cyan:"border-cyan-300 dark:border-cyan-600",orange:"border-orange-300 dark:border-orange-600"};function se({orderId:l}){const[g,m]=k.useState(new Set),{data:s,isLoading:h,error:b}=j({queryKey:[`/api/orders/${l}/status-history`],queryFn:async()=>await O("GET",`/api/orders/${l}/status-history`)}),p=a=>{m(t=>{const r=new Set(t);return r.has(a)?r.delete(a):r.add(a),r})};return h?e.jsxs("div",{className:"space-y-4",children:[e.jsx(d,{className:"h-20 w-full"}),e.jsx(d,{className:"h-20 w-full"}),e.jsx(d,{className:"h-20 w-full"})]}):b?e.jsxs(y,{variant:"destructive",children:[e.jsx(f,{className:"h-4 w-4"}),e.jsx(N,{children:"상태 변경 이력을 불러오는 중 오류가 발생했습니다."})]}):!s||s.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(X,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"변경 이력이 없습니다."})]}):e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-8 top-0 bottom-0 w-0.5 bg-gray-200 dark:bg-gray-700"}),e.jsx("div",{className:"space-y-4",children:s.map((a,t)=>{const r=J[a.actionIcon]||x,i=g.has(a.id),c=a.changes&&Object.keys(a.changes).length>0;return e.jsxs("div",{className:"relative flex items-start",children:[e.jsx("div",{className:`relative z-10 flex h-16 w-16 items-center justify-center rounded-full border-4 border-white dark:border-gray-900 ${o[a.actionColor]||o.gray}`,children:e.jsx(r,{className:"h-6 w-6"})}),e.jsx("div",{className:"ml-4 flex-1",children:e.jsxs("div",{className:`rounded-lg border p-4 ${n[a.actionColor]||n.gray} bg-white dark:bg-gray-800`,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-semibold text-lg",children:a.actionText}),t===0&&e.jsx(v,{variant:"outline",className:"text-xs",children:"최신"})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(C,{className:"h-3 w-3"}),e.jsx("span",{children:a.user.name}),a.user.position&&e.jsxs("span",{className:"text-xs",children:["(",a.user.position,")"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(w,{className:"h-3 w-3"}),e.jsx("span",{children:U(new Date(a.createdAt),"yyyy년 MM월 dd일 HH:mm",{locale:I})})]})]})]}),c&&e.jsx(S,{variant:"ghost",size:"sm",onClick:()=>p(a.id),className:"ml-2",children:i?e.jsx(P,{className:"h-4 w-4"}):e.jsx(q,{className:"h-4 w-4"})})]}),c&&i&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsx("div",{className:"font-medium mb-2",children:"변경 내용:"}),e.jsx("pre",{className:"bg-gray-50 dark:bg-gray-900 p-2 rounded text-xs overflow-x-auto",children:JSON.stringify(a.changes,null,2)})]})})]})})]},a.id)})})]})}export{se as O};
