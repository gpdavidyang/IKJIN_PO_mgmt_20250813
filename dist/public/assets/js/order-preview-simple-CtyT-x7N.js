import{v as ce,c as oe,d as xe,r as A,m as te,o as k,j as e,p as V,A as W,D as U,F as se,s as G,B as p,L as o,I as N,w as u,y as P,X as H,n as b,bm as ie,P as ye}from"./index-CT0ftmgw.js";import{S as R,a as B,b as O,c as K,d as q}from"./select-i-FUF4r3.js";import{T as I}from"./textarea-_3whHVQG.js";import{D as Y,f as fe,a as Z,b as X,c as J}from"./dialog-Dx9IY5aH.js";import{U as ve}from"./upload-DF-_7XK_.js";import{C as ne}from"./calendar-CMHFh0dj.js";import{D as ae}from"./dollar-sign-D9eoG0SM.js";import{f as D}from"./format-BqlaHE6C.js";import{k as F}from"./ko-DHTEdlBI.js";import{C as re}from"./checkbox-BJHnt2OS.js";import{P as le}from"./package-DpMh3BfY.js";import{P as be}from"./pen-C9NBTkH-.js";import{T as Ne}from"./trash-2-CyJH5Th9.js";import{C as we}from"./clock-zyLY6hwp.js";import{T as Se}from"./triangle-alert-9mAzq6ST.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=ce("ReceiptText",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M14 8H8",key:"1l3xfs"}],["path",{d:"M16 12H8",key:"1fr5h0"}],["path",{d:"M13 16H8",key:"wsln4y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=ce("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);function Oe({orderId:n}){const{toast:a}=oe(),d=xe(),[j,x]=A.useState(!1),[f,g]=A.useState(null),{data:h=[],isLoading:z}=te({queryKey:["/api/invoices",n],queryFn:async()=>await(await b("GET",`/api/invoices?orderId=${n}`)).json()}),{data:w=[]}=te({queryKey:["/api/verification-logs",n],queryFn:async()=>await(await b("GET",`/api/verification-logs?orderId=${n}`)).json()}),v=k({mutationFn:async t=>{const m=await fetch("/api/invoices",{method:"POST",body:t});if(!m.ok)throw new Error("Failed to upload invoice");return m.json()},onSuccess:()=>{d.invalidateQueries({queryKey:["/api/invoices",n]}),d.invalidateQueries({queryKey:["/api/verification-logs",n]}),x(!1),g(null),a({title:"ì„±ê³µ",description:"ì²­êµ¬ì„œê°€ ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤."})},onError:()=>{a({title:"ì˜¤ë¥˜",description:"ì²­êµ¬ì„œ ì—…ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",variant:"destructive"})}}),T=k({mutationFn:async t=>await(await b("POST",`/api/invoices/${t}/verify`)).json(),onSuccess:()=>{d.invalidateQueries({queryKey:["/api/invoices",n]}),d.invalidateQueries({queryKey:["/api/verification-logs",n]}),a({title:"ì„±ê³µ",description:"ì²­êµ¬ì„œê°€ ê²€ì¦ë˜ì—ˆìŠµë‹ˆë‹¤."})},onError:()=>{a({title:"ì˜¤ë¥˜",description:"ì²­êµ¬ì„œ ê²€ì¦ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",variant:"destructive"})}}),S=k({mutationFn:async t=>await(await b("POST",`/api/invoices/${t}/issue-tax`)).json(),onSuccess:()=>{d.invalidateQueries({queryKey:["/api/invoices",n]}),a({title:"ì„±ê³µ",description:"ì„¸ê¸ˆê³„ì‚°ì„œê°€ ë°œí–‰ë˜ì—ˆìŠµë‹ˆë‹¤."})},onError:()=>{a({title:"ì˜¤ë¥˜",description:"ì„¸ê¸ˆê³„ì‚°ì„œ ë°œí–‰ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",variant:"destructive"})}}),y=k({mutationFn:async t=>await(await b("POST",`/api/invoices/${t}/cancel-tax`)).json(),onSuccess:()=>{d.invalidateQueries({queryKey:["/api/invoices",n]}),a({title:"ì„±ê³µ",description:"ì„¸ê¸ˆê³„ì‚°ì„œ ë°œí–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤."})},onError:()=>{a({title:"ì˜¤ë¥˜",description:"ì„¸ê¸ˆê³„ì‚°ì„œ ë°œí–‰ ì·¨ì†Œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",variant:"destructive"})}}),E=t=>{t.preventDefault();const m=new FormData(t.currentTarget);m.set("orderId",n.toString()),f&&m.set("file",f),v.mutate(m)},_=t=>{switch(t){case"pending":return e.jsx(u,{variant:"secondary",children:"ê²€í† ì¤‘"});case"verified":return e.jsx(u,{variant:"default",children:"ê²€ì¦ì™„ë£Œ"});case"paid":return e.jsx(u,{variant:"outline",children:"ì§€ê¸‰ì™„ë£Œ"});default:return e.jsx(u,{variant:"secondary",children:t})}},Q=t=>{switch(t){case"invoice":return e.jsx(u,{variant:"outline",children:"ì²­êµ¬ì„œ"});case"tax_invoice":return e.jsx(u,{variant:"outline",children:"ì„¸ê¸ˆê³„ì‚°ì„œ"});default:return e.jsx(u,{variant:"outline",children:t})}};return z?e.jsxs(V,{children:[e.jsx(W,{children:e.jsxs(U,{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-5 w-5"}),"ì²­êµ¬ì„œ ê´€ë¦¬"]})}),e.jsx(G,{children:e.jsx("div",{className:"text-center py-4",children:"ë¡œë”© ì¤‘..."})})]}):e.jsxs(V,{children:[e.jsx(W,{className:"pb-2",children:e.jsxs(U,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(se,{className:"h-4 w-4"}),"ì²­êµ¬ì„œ ê´€ë¦¬"]}),e.jsxs(Y,{open:j,onOpenChange:x,children:[e.jsx(fe,{asChild:!0,children:e.jsxs(p,{size:"sm",children:[e.jsx(ve,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"text-xs",children:"ì²­êµ¬ì„œ ì—…ë¡œë“œ"})]})}),e.jsxs(Z,{children:[e.jsx(X,{children:e.jsx(J,{children:"ì²­êµ¬ì„œ ì—…ë¡œë“œ"})}),e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"invoiceNumber",children:"ì²­êµ¬ì„œ ë²ˆí˜¸"}),e.jsx(N,{id:"invoiceNumber",name:"invoiceNumber",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"invoiceType",children:"ìœ í˜•"}),e.jsxs(R,{name:"invoiceType",defaultValue:"invoice",children:[e.jsx(B,{children:e.jsx(O,{})}),e.jsxs(K,{children:[e.jsx(q,{value:"invoice",children:"ì²­êµ¬ì„œ"}),e.jsx(q,{value:"tax_invoice",children:"ì„¸ê¸ˆê³„ì‚°ì„œ"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"issueDate",children:"ë°œí–‰ì¼"}),e.jsx(N,{id:"issueDate",name:"issueDate",type:"date",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"dueDate",children:"ë§ˆê°ì¼"}),e.jsx(N,{id:"dueDate",name:"dueDate",type:"date"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"totalAmount",children:"ì´ê¸ˆì•¡"}),e.jsx(N,{id:"totalAmount",name:"totalAmount",type:"number",step:"0.01",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"vatAmount",children:"ë¶€ê°€ì„¸"}),e.jsx(N,{id:"vatAmount",name:"vatAmount",type:"number",step:"0.01",defaultValue:"0"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"file",children:"ì²¨ë¶€íŒŒì¼"}),e.jsx(N,{id:"file",type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:t=>g(t.target.files?.[0]||null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"notes",children:"ë©”ëª¨"}),e.jsx(I,{id:"notes",name:"notes",rows:3})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(p,{type:"button",variant:"outline",onClick:()=>x(!1),children:"ì·¨ì†Œ"}),e.jsx(p,{type:"submit",disabled:v.isPending,children:v.isPending?"ì—…ë¡œë“œ ì¤‘...":"ì—…ë¡œë“œ"})]})]})]})]})]})}),e.jsxs(G,{className:"p-3",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"border-2 border-blue-200 rounded-lg p-3 bg-blue-50 dark:bg-blue-900/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-semibold text-blue-800 dark:text-blue-200",children:"ì„¸ê¸ˆê³„ì‚°ì„œ ë°œí–‰ ê´€ë¦¬"}),h.length===0?e.jsx(u,{variant:"outline",className:"text-xs border-blue-300 text-blue-700",children:"ì²­êµ¬ì„œ ì—…ë¡œë“œ í•„ìš”"}):h.some(t=>t.taxInvoiceIssued)?e.jsxs(u,{variant:"default",className:"text-xs bg-green-600",children:[e.jsx(de,{className:"h-2 w-2 mr-1"}),"ë°œí–‰ì™„ë£Œ"]}):e.jsx(u,{variant:"secondary",className:"text-xs",children:"ë¯¸ë°œí–‰"})]}),e.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-300",children:h.length===0?"ì²­êµ¬ì„œë¥¼ ë¨¼ì € ì—…ë¡œë“œí•˜ê³  ê²€ì¦í•´ì£¼ì„¸ìš”":h.some(t=>t.status==="verified")?"ë°œí–‰ ì¤€ë¹„ ì™„ë£Œ":"ì²­êµ¬ì„œ ê²€ì¦ í•„ìš”"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-xs text-gray-600",children:h.length===0?"ì„¸ê¸ˆê³„ì‚°ì„œ ë°œí–‰ ê´€ë¦¬ë¥¼ ìœ„í•´ì„œëŠ” ì²­êµ¬ì„œë¥¼ ì—…ë¡œë“œí•´ì£¼ì„¸ìš”.":h.some(t=>t.taxInvoiceIssued)?"ì„¸ê¸ˆê³„ì‚°ì„œê°€ ë°œí–‰ë˜ì—ˆìŠµë‹ˆë‹¤.":"ì„¸ê¸ˆê³„ì‚°ì„œ ë°œí–‰ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤."}),e.jsx("div",{className:"flex gap-2",children:h.length>0&&h.some(t=>t.status==="verified")?e.jsx(e.Fragment,{children:h.some(t=>t.taxInvoiceIssued)?e.jsxs(p,{size:"sm",variant:"destructive",onClick:()=>{const t=h.find(m=>m.taxInvoiceIssued);t&&y.mutate(t.id)},disabled:y.isPending,children:[e.jsx(H,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"text-xs",children:"ë¯¸í™•ì¸"})]}):e.jsxs(p,{size:"sm",variant:"default",onClick:()=>{const t=h.find(m=>m.status==="verified"&&!m.taxInvoiceIssued);t&&S.mutate(t.id)},disabled:S.isPending,children:[e.jsx(P,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"text-xs",children:"í™•ì¸"})]})}):e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(p,{size:"sm",variant:"outline",disabled:!0,children:[e.jsx(P,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"text-xs",children:"í™•ì¸"})]}),e.jsxs(p,{size:"sm",variant:"outline",disabled:!0,children:[e.jsx(H,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"text-xs",children:"ë¯¸í™•ì¸"})]})]})})]})]}),h.length===0?e.jsx("div",{className:"text-center py-4 text-muted-foreground text-xs",children:"ì•„ì§ ì—…ë¡œë“œëœ ì²­êµ¬ì„œê°€ ì—†ìŠµë‹ˆë‹¤."}):e.jsx("div",{className:"space-y-2",children:h.map(t=>e.jsxs("div",{className:"border rounded-lg p-2 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("h4",{className:"font-medium text-xs",children:t.invoiceNumber}),Q(t.invoiceType),_(t.status)]}),t.status==="pending"&&e.jsxs(p,{size:"sm",onClick:()=>T.mutate(t.id),disabled:T.isPending,children:[e.jsx(P,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"text-xs",children:"ê²€ì¦"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ne,{className:"h-3 w-3 text-muted-foreground"}),e.jsxs("span",{children:["ë°œí–‰ì¼: ",D(new Date(t.issueDate),"yyyy-MM-dd",{locale:F})]})]}),t.dueDate&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ne,{className:"h-3 w-3 text-muted-foreground"}),e.jsxs("span",{children:["ë§ˆê°ì¼: ",D(new Date(t.dueDate),"yyyy-MM-dd",{locale:F})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ae,{className:"h-3 w-3 text-muted-foreground"}),e.jsxs("span",{children:["ì´ì•¡: â‚©",Math.round(t.totalAmount||0).toLocaleString("ko-KR")]})]}),t.vatAmount>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ae,{className:"h-3 w-3 text-muted-foreground"}),e.jsxs("span",{children:["ë¶€ê°€ì„¸: â‚©",Math.round(t.vatAmount||0).toLocaleString("ko-KR")]})]})]}),t.notes&&e.jsx("div",{className:"text-xs text-muted-foreground bg-muted p-2 rounded",children:t.notes}),e.jsxs("div",{className:"border-t pt-2 space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx($,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"text-xs font-medium",children:"ì„¸ê¸ˆê³„ì‚°ì„œ"}),t.taxInvoiceIssued?e.jsxs(u,{variant:"default",className:"text-xs",children:[e.jsx(de,{className:"h-2 w-2 mr-1"}),"ë°œí–‰ì™„ë£Œ"]}):e.jsx(u,{variant:"secondary",className:"text-xs",children:"ë¯¸ë°œí–‰"})]}),e.jsxs("div",{className:"flex gap-1",children:[t.status==="verified"&&e.jsx(e.Fragment,{children:t.taxInvoiceIssued?e.jsxs(p,{size:"sm",variant:"destructive",onClick:()=>y.mutate(t.id),disabled:y.isPending,children:[e.jsx(H,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"text-xs",children:y.isPending?"ì·¨ì†Œ ì¤‘...":"ë°œí–‰ ì·¨ì†Œ"})]}):e.jsxs(p,{size:"sm",variant:"outline",onClick:()=>S.mutate(t.id),disabled:S.isPending,children:[e.jsx($,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"text-xs",children:S.isPending?"ì²˜ë¦¬ ì¤‘...":"ë°œí–‰ í™•ì¸"})]})}),t.status!=="verified"&&e.jsx("div",{className:"text-xs text-muted-foreground",children:"ì²­êµ¬ì„œ ê²€ì¦ í›„ ë°œí–‰ ê°€ëŠ¥"})]})]}),t.status==="verified"&&t.taxInvoiceIssued&&t.taxInvoiceIssuedDate&&e.jsxs("div",{className:"text-xs text-muted-foreground bg-green-50 dark:bg-green-900/20 p-2 rounded",children:["ë°œí–‰ì¼: ",D(new Date(t.taxInvoiceIssuedDate),"yyyy-MM-dd HH:mm",{locale:F}),t.taxInvoiceIssuedBy&&` | ë°œí–‰ì: ${t.taxInvoiceIssuedBy}`]})]}),t.verifiedBy&&t.verifiedAt&&e.jsxs("div",{className:"text-xs text-muted-foreground border-t pt-1",children:["ê²€ì¦ì: ",t.verifiedBy," | ê²€ì¦ì¼: ",D(new Date(t.verifiedAt),"yyyy-MM-dd HH:mm",{locale:F})]})]},t.id))})]}),w.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("h4",{className:"font-medium mb-2 text-xs",children:"ê²€ì¦ ë¡œê·¸"}),e.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:w.map(t=>e.jsxs("div",{className:"text-xs p-2 bg-muted rounded",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("span",{children:t.details}),e.jsx("span",{className:"text-xs text-muted-foreground",children:D(new Date(t.createdAt),"MM-dd HH:mm",{locale:F})})]}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:t.performedBy})]},t.id))})]})]})]})}function Ke({orderItems:n,orderId:a}){const{toast:d}=oe(),j=xe(),[x,f]=A.useState(!1),[g,h]=A.useState(null),[z,w]=A.useState(!1),[v,T]=A.useState(null),[,S]=A.useState(0),y=ie(["/api/item-receipts",a],{queryFn:async()=>{const s=await b("GET","/api/item-receipts"),i=n.map(l=>l.id);return s.filter(l=>i.includes(l.orderItemId))},cacheType:"DYNAMIC",enabled:n.length>0}),{data:E=[]}=ie(["/api/invoices",a],{queryFn:()=>b("GET",`/api/invoices?orderId=${a}`),cacheType:"MASTER",enabled:!!a}),_=k({mutationFn:async s=>{console.log("Sending receipt data to API:",s);try{const i=await b("POST","/api/item-receipts",s);return console.log("API response:",i),i}catch(i){throw console.error("API request failed:",i),i}},onSuccess:async s=>{console.log("ğŸ’¥ Receipt creation successful, forcing refetch:",s),j.resetQueries({queryKey:["/api/item-receipts",a]}),j.invalidateQueries({queryKey:["/api/item-receipts"]}),await y.refetch(),S(i=>i+1),j.invalidateQueries({queryKey:["/api/verification-logs",a]}),f(!1),h(null),d({title:"ì„±ê³µ",description:"ìˆ˜ë ¹ í™•ì¸ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤."})},onError:s=>{console.error("Receipt creation mutation error:",s);const i=s?.message||"ìˆ˜ë ¹ í™•ì¸ ë“±ë¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.";d({title:"ì˜¤ë¥˜",description:i,variant:"destructive"})}}),Q=k({mutationFn:async s=>{const{id:i,...r}=s;return await(await b("PATCH",`/api/item-receipts/${i}`,r)).json()},onSuccess:async s=>{console.log("ğŸ’¥ Receipt update successful:",s),j.resetQueries({queryKey:["/api/item-receipts",a]}),j.invalidateQueries({queryKey:["/api/item-receipts"]}),await y.refetch(),S(i=>i+1),j.invalidateQueries({queryKey:["/api/verification-logs",a]}),w(!1),T(null),d({title:"ìˆ˜ë ¹ ì •ë³´ ìˆ˜ì • ì™„ë£Œ",description:"ìˆ˜ë ¹ ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤."})},onError:s=>{d({title:"ìˆ˜ì • ì‹¤íŒ¨",description:s.message||"ìˆ˜ë ¹ ì •ë³´ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",variant:"destructive"})}}),t=k({mutationFn:async s=>await b("DELETE",`/api/item-receipts/${s}`),onSuccess:async()=>{console.log("ğŸ’¥ Receipt deletion successful"),j.resetQueries({queryKey:["/api/item-receipts",a]}),j.invalidateQueries({queryKey:["/api/item-receipts"]}),await y.refetch(),S(s=>s+1),j.invalidateQueries({queryKey:["/api/verification-logs",a]}),d({title:"ìˆ˜ë ¹ ì •ë³´ ì‚­ì œ ì™„ë£Œ",description:"ìˆ˜ë ¹ ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤."})},onError:s=>{d({title:"ì‚­ì œ ì‹¤íŒ¨",description:s.message||"ìˆ˜ë ¹ ì •ë³´ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",variant:"destructive"})}}),m=k({mutationFn:async s=>{const i=s.map(r=>b("POST","/api/item-receipts",r));return await Promise.all(i)},onSuccess:()=>{j.invalidateQueries({queryKey:["/api/item-receipts"]}),j.invalidateQueries({queryKey:["/api/verification-logs",a]}),d({title:"ì„±ê³µ",description:"ì¼ê´„ ìˆ˜ë ¹ ë“±ë¡ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤."})},onError:()=>{d({title:"ì˜¤ë¥˜",description:"ì¼ê´„ ìˆ˜ë ¹ ë“±ë¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",variant:"destructive"})}}),he=s=>{s.preventDefault();const i=new FormData(s.currentTarget),r={orderItemId:g.id,invoiceId:i.get("invoiceId")?parseInt(i.get("invoiceId")):void 0,receivedQuantity:parseFloat(i.get("receivedQuantity")),receivedDate:i.get("receivedDate"),qualityCheck:i.get("qualityCheck")==="on",qualityNotes:i.get("qualityNotes")||"",status:i.get("status")||"approved",notes:i.get("notes")||""};console.log("Submitting receipt data:",r),_.mutate(r)},ue=s=>{if(s.preventDefault(),!v){d({title:"ì˜¤ë¥˜",description:"ì„ íƒëœ ìˆ˜ë ¹ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.",variant:"destructive"});return}const i=new FormData(s.currentTarget),r={id:v.id,receivedQuantity:parseFloat(i.get("receivedQuantity")),receivedDate:i.get("receivedDate"),qualityCheck:i.get("qualityCheck")==="on",qualityNotes:i.get("qualityNotes")||"",status:i.get("status")||"pending",notes:i.get("notes")||""};console.log("Submitting updated receipt data:",r),Q.mutate(r)},pe=()=>{const s=new Date().toISOString().split("T")[0],i=n.filter(l=>M(l.id)<l.quantity);if(i.length===0){d({title:"ì•Œë¦¼",description:"ëª¨ë“  í•­ëª©ì´ ì´ë¯¸ ìˆ˜ë ¹ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤."});return}const r=i.map(l=>({orderItemId:l.id,receivedQuantity:l.quantity-M(l.id),receivedDate:s,qualityCheck:!0,status:"approved",notes:"ì¼ê´„ ìˆ˜ë ¹ ë“±ë¡"}));m.mutate(r)},ee=s=>{if(y.status==="error")return console.log(`âŒ Query in error state for item ${s}, triggering fresh fetch`),y.refetch(),[];const i=y.data||[];console.log(`ğŸ” Looking for receipts for item ${s}`),console.log(`ğŸ” Current query data length: ${i.length}`),console.log(`ğŸ” Query status: ${y.status}, isFetching: ${y.isFetching}`);const r=i.filter(l=>l.orderItemId===s);return console.log(`ğŸ“‹ Found ${r.length} receipts for item ${s}:`,r),r},M=s=>{const r=ee(s).reduce((l,C)=>{const c=typeof C.receivedQuantity=="string"?parseFloat(C.receivedQuantity):C.receivedQuantity;return l+(c||0)},0);return console.log(`ğŸ’¯ Total received for item ${s}: ${r}`),r},me=s=>{const l=(y.data||[]).filter(c=>c.orderItemId===s.id).reduce((c,L)=>{const ge=typeof L.receivedQuantity=="string"?parseFloat(L.receivedQuantity):L.receivedQuantity;return c+(ge||0)},0),C=s.quantity;return l===0?{status:"pending",label:"ë¯¸ìˆ˜ë ¹",icon:we,color:"secondary"}:l<C?{status:"partial",label:"ë¶€ë¶„ìˆ˜ë ¹",icon:Se,color:"warning"}:{status:"complete",label:"ìˆ˜ë ¹ì™„ë£Œ",icon:P,color:"default"}},je=s=>{switch(s){case"pending":return e.jsx(u,{variant:"secondary",children:"ëŒ€ê¸°ì¤‘"});case"approved":return e.jsx(u,{variant:"default",children:"ìŠ¹ì¸ë¨"});case"rejected":return e.jsx(u,{variant:"destructive",children:"ë°˜ë ¤ë¨"});default:return e.jsx(u,{variant:"secondary",children:s})}};return e.jsxs(V,{children:[e.jsx(W,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(U,{className:"flex items-center gap-1 text-sm",children:[e.jsx(le,{className:"h-4 w-4"}),"ìì¬ ìˆ˜ë ¹ í™•ì¸"]}),e.jsxs(p,{onClick:pe,disabled:m.isPending,className:"bg-blue-600 hover:bg-blue-700",size:"sm",children:[e.jsx(le,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"text-xs",children:"ì¼ê´„ ìˆ˜ë ¹ ë“±ë¡"})]})]})}),e.jsxs(G,{className:"p-3",children:[e.jsx("div",{className:"space-y-2",children:n.map(s=>{const i=ee(s.id),r=M(s.id),l=me(s),C=l.icon;return e.jsxs("div",{className:"border rounded-lg p-2 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx("h4",{className:"font-medium text-xs",children:s.itemName}),e.jsxs(u,{variant:l.color,className:"flex items-center gap-1 text-xs",children:[e.jsx(C,{className:"h-3 w-3"}),l.label]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-xs text-muted-foreground",children:[e.jsxs("div",{children:["ë°œì£¼ìˆ˜ëŸ‰: ",s.quantity.toLocaleString(),s.unit]}),e.jsxs("div",{children:["ìˆ˜ë ¹ìˆ˜ëŸ‰: ",r.toLocaleString(),s.unit]}),e.jsxs("div",{children:["ë¯¸ìˆ˜ë ¹: ",(s.quantity-r).toLocaleString(),s.unit]}),e.jsxs("div",{children:["ë‹¨ê°€: â‚©",Math.round(s.unitPrice||0).toLocaleString("ko-KR")]})]}),s.notes&&e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:s.notes})]}),e.jsxs(p,{size:"sm",onClick:()=>{h(s),f(!0)},disabled:r>=s.quantity,children:[e.jsx(ye,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"text-xs",children:"ìˆ˜ë ¹ë“±ë¡"})]})]}),i.length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx("h5",{className:"text-xs font-medium mb-1",children:"ìˆ˜ë ¹ ì´ë ¥"}),e.jsx("div",{className:"space-y-1",children:i.map(c=>e.jsx("div",{className:"bg-muted p-2 rounded text-xs",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{className:"font-medium text-xs",children:[(typeof c.receivedQuantity=="string"?parseFloat(c.receivedQuantity):c.receivedQuantity).toLocaleString(),s.unit," ìˆ˜ë ¹"]}),je(c.status),c.qualityCheck&&e.jsxs(u,{variant:"outline",className:"text-xs",children:[e.jsx(P,{className:"h-2 w-2 mr-1"}),"í’ˆì§ˆê²€ì‚¬"]})]}),e.jsxs("div",{className:"text-muted-foreground text-xs",children:["ìˆ˜ë ¹ì¼: ",D(new Date(c.receivedDate),"yyyy-MM-dd",{locale:F})]}),c.qualityNotes&&e.jsxs("div",{className:"text-muted-foreground text-xs",children:["í’ˆì§ˆë©”ëª¨: ",c.qualityNotes]}),c.notes&&e.jsxs("div",{className:"text-muted-foreground text-xs",children:["ë©”ëª¨: ",c.notes]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(p,{size:"sm",variant:"ghost",onClick:()=>{T(c),w(!0)},className:"h-6 w-6 p-0 hover:bg-blue-50",children:e.jsx(be,{className:"h-3 w-3 text-blue-600"})}),e.jsx(p,{size:"sm",variant:"ghost",onClick:()=>{confirm("ì´ ìˆ˜ë ¹ ê¸°ë¡ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&t.mutate(c.id)},className:"h-6 w-6 p-0 hover:bg-red-50",disabled:t.isPending,children:e.jsx(Ne,{className:"h-3 w-3 text-red-600"})})]}),e.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[e.jsxs("div",{children:["ë“±ë¡ì: ",c.verifiedBy]}),e.jsx("div",{children:D(new Date(c.createdAt),"MM-dd HH:mm",{locale:F})})]})]})]})},c.id))})]})]},s.id)})}),e.jsx(Y,{open:x,onOpenChange:f,children:e.jsxs(Z,{children:[e.jsx(X,{children:e.jsx(J,{children:"ìì¬ ìˆ˜ë ¹ ë“±ë¡"})}),g&&e.jsxs("form",{onSubmit:he,className:"space-y-4",children:[e.jsxs("div",{className:"bg-muted p-3 rounded",children:[e.jsx("div",{className:"font-medium",children:g.itemName}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["ë°œì£¼ìˆ˜ëŸ‰: ",g.quantity.toLocaleString(),g.unit," | ìˆ˜ë ¹ê°€ëŠ¥: ",(g.quantity-M(g.id)).toLocaleString(),g.unit]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"receivedQuantity",children:"ìˆ˜ë ¹ ìˆ˜ëŸ‰"}),e.jsx(N,{id:"receivedQuantity",name:"receivedQuantity",type:"number",step:"0.01",max:g.quantity-M(g.id),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"receivedDate",children:"ìˆ˜ë ¹ ì¼ì"}),e.jsx(N,{id:"receivedDate",name:"receivedDate",type:"date",defaultValue:new Date().toISOString().split("T")[0],required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"invoiceId",children:"ì—°ê²°ëœ ì²­êµ¬ì„œ (ì„ íƒ)"}),e.jsxs(R,{name:"invoiceId",children:[e.jsx(B,{children:e.jsx(O,{placeholder:"ì²­êµ¬ì„œ ì„ íƒ"})}),e.jsx(K,{children:E.map(s=>e.jsxs(q,{value:s.id.toString(),children:[s.invoiceNumber," - â‚©",s.totalAmount.toLocaleString()]},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"status",children:"ìƒíƒœ"}),e.jsxs(R,{name:"status",defaultValue:"pending",children:[e.jsx(B,{children:e.jsx(O,{})}),e.jsxs(K,{children:[e.jsx(q,{value:"pending",children:"ëŒ€ê¸°ì¤‘"}),e.jsx(q,{value:"approved",children:"ìŠ¹ì¸ë¨"}),e.jsx(q,{value:"rejected",children:"ë°˜ë ¤ë¨"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(re,{id:"qualityCheck",name:"qualityCheck"}),e.jsx(o,{htmlFor:"qualityCheck",className:"text-sm",children:"í’ˆì§ˆ ê²€ì‚¬ ì™„ë£Œ"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"qualityNotes",children:"í’ˆì§ˆ ê²€ì‚¬ ë©”ëª¨"}),e.jsx(I,{id:"qualityNotes",name:"qualityNotes",rows:2,placeholder:"í’ˆì§ˆ ê²€ì‚¬ ê²°ê³¼ë‚˜ íŠ¹ì´ì‚¬í•­ì„ ì…ë ¥í•˜ì„¸ìš”"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"notes",children:"ì¶”ê°€ ë©”ëª¨"}),e.jsx(I,{id:"notes",name:"notes",rows:2,placeholder:"ê¸°íƒ€ ë©”ëª¨ì‚¬í•­ì„ ì…ë ¥í•˜ì„¸ìš”"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(p,{type:"button",variant:"outline",onClick:()=>f(!1),children:"ì·¨ì†Œ"}),e.jsx(p,{type:"submit",disabled:_.isPending,children:_.isPending?"ë“±ë¡ ì¤‘...":"ë“±ë¡"})]})]})]})}),e.jsx(Y,{open:z,onOpenChange:w,children:e.jsxs(Z,{children:[e.jsx(X,{children:e.jsx(J,{children:"ìˆ˜ë ¹ ì •ë³´ ìˆ˜ì •"})}),v&&e.jsxs("form",{onSubmit:ue,className:"space-y-4",children:[e.jsx("div",{className:"bg-muted p-3 rounded",children:e.jsxs("div",{className:"text-sm text-muted-foreground",children:["ìˆ˜ë ¹ ê¸°ë¡ ID: ",v.id]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"edit-receivedQuantity",children:"ìˆ˜ë ¹ ìˆ˜ëŸ‰"}),e.jsx(N,{id:"edit-receivedQuantity",name:"receivedQuantity",type:"number",step:"0.01",defaultValue:v.receivedQuantity,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"edit-receivedDate",children:"ìˆ˜ë ¹ ì¼ì"}),e.jsx(N,{id:"edit-receivedDate",name:"receivedDate",type:"date",defaultValue:new Date(v.receivedDate).toISOString().split("T")[0],required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"edit-status",children:"ìƒíƒœ"}),e.jsxs(R,{name:"status",defaultValue:v.status,children:[e.jsx(B,{children:e.jsx(O,{})}),e.jsxs(K,{children:[e.jsx(q,{value:"pending",children:"ëŒ€ê¸°ì¤‘"}),e.jsx(q,{value:"approved",children:"ìŠ¹ì¸ë¨"}),e.jsx(q,{value:"rejected",children:"ë°˜ë ¤ë¨"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(re,{id:"edit-qualityCheck",name:"qualityCheck",defaultChecked:v.qualityCheck}),e.jsx(o,{htmlFor:"edit-qualityCheck",className:"text-sm",children:"í’ˆì§ˆ ê²€ì‚¬ ì™„ë£Œ"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"edit-qualityNotes",children:"í’ˆì§ˆ ê²€ì‚¬ ë©”ëª¨"}),e.jsx(I,{id:"edit-qualityNotes",name:"qualityNotes",rows:2,defaultValue:v.qualityNotes,placeholder:"í’ˆì§ˆ ê²€ì‚¬ ê²°ê³¼ë‚˜ íŠ¹ì´ì‚¬í•­ì„ ì…ë ¥í•˜ì„¸ìš”"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"edit-notes",children:"ì¶”ê°€ ë©”ëª¨"}),e.jsx(I,{id:"edit-notes",name:"notes",rows:2,defaultValue:v.notes,placeholder:"ê¸°íƒ€ ë©”ëª¨ì‚¬í•­ì„ ì…ë ¥í•˜ì„¸ìš”"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(p,{type:"button",variant:"outline",onClick:()=>w(!1),children:"ì·¨ì†Œ"}),e.jsx(p,{type:"submit",disabled:Q.isPending,children:Q.isPending?"ìˆ˜ì • ì¤‘...":"ìˆ˜ì • ì™„ë£Œ"})]})]})]})})]})]})}function Ee({order:n}){const a=x=>`â‚©${Math.round(x).toLocaleString("ko-KR")}`,d=x=>D(new Date(x),"yyyyë…„ MMì›” ddì¼"),j=()=>!n.items||n.items.length===0?0:n.items.reduce((x,f)=>{const g=parseFloat(f.quantity)||0,h=parseFloat(f.unitPrice)||0,z=f.totalAmount||g*h,w=parseFloat(z)||0;return x+w},0);return e.jsxs("div",{style:{fontFamily:'"Noto Sans KR", "Malgun Gothic", sans-serif',fontSize:"11px",lineHeight:"1.3",color:"#000",backgroundColor:"#fff",width:"210mm",minHeight:"297mm",padding:"10mm",margin:"0 auto",boxShadow:"0 0 10px rgba(0,0,0,0.1)"},children:[e.jsx("table",{style:{width:"100%",marginBottom:"15px",borderCollapse:"collapse"},children:e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{style:{textAlign:"left",borderBottom:"2px solid #333",paddingBottom:"8px"},children:e.jsx("h1",{style:{margin:"0",fontSize:"18px",fontWeight:"bold",color:"#333"},children:"ë°œì£¼ì„œ Purchase Order"})}),e.jsxs("td",{style:{textAlign:"right",borderBottom:"2px solid #333",paddingBottom:"8px",fontSize:"10px",color:"#666"},children:["ë°œì£¼ë²ˆí˜¸: ",n.orderNumber||"PO-2025-0612-001"]})]})})}),e.jsx("table",{style:{width:"100%",marginBottom:"15px",borderCollapse:"collapse"},children:e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{style:{width:"50%",verticalAlign:"top",paddingRight:"10px"},children:e.jsxs("table",{style:{width:"100%",border:"1px solid #666",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{children:e.jsx("th",{style:{backgroundColor:"#f0f0f0",border:"1px solid #666",padding:"5px",fontSize:"11px",fontWeight:"bold",textAlign:"center"},children:"ë°œì£¼ì ì •ë³´"})})}),e.jsx("tbody",{children:e.jsx("tr",{children:e.jsxs("td",{style:{border:"1px solid #666",padding:"8px",fontSize:"10px"},children:[e.jsxs("div",{style:{marginBottom:"2px"},children:[e.jsx("strong",{children:"íšŒì‚¬ëª…:"})," ë°œì£¼ ì‹œìŠ¤í…œ"]}),e.jsxs("div",{style:{marginBottom:"2px"},children:[e.jsx("strong",{children:"ë‹´ë‹¹ì:"})," David Yang"]}),e.jsxs("div",{style:{marginBottom:"2px"},children:[e.jsx("strong",{children:"ì´ë©”ì¼:"})," davidswyang@gmail.com"]}),e.jsxs("div",{style:{marginBottom:"2px"},children:[e.jsx("strong",{children:"ì—°ë½ì²˜:"})," 031-000-0000"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"ì£¼ì†Œ:"})," ê²½ê¸°ë„ ì„±ë‚¨ì‹œ ë¶„ë‹¹êµ¬"]})]})})})]})}),e.jsx("td",{style:{width:"50%",verticalAlign:"top",paddingLeft:"10px"},children:e.jsxs("table",{style:{width:"100%",border:"1px solid #666",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{children:e.jsx("th",{style:{backgroundColor:"#f0f0f0",border:"1px solid #666",padding:"5px",fontSize:"11px",fontWeight:"bold",textAlign:"center"},children:"ê±°ë˜ì²˜ ì •ë³´"})})}),e.jsx("tbody",{children:e.jsx("tr",{children:e.jsxs("td",{style:{border:"1px solid #666",padding:"8px",fontSize:"10px"},children:[e.jsxs("div",{style:{marginBottom:"2px"},children:[e.jsx("strong",{children:"íšŒì‚¬ëª…:"})," ",n.vendor?.name||"ìµì§„íŒŒíŠ¸ë„ˆìŠ¤"]}),e.jsxs("div",{style:{marginBottom:"2px"},children:[e.jsx("strong",{children:"ì‚¬ì—…ì:"})," ",n.vendor?.businessNumber||"123-45-67890"]}),e.jsxs("div",{style:{marginBottom:"2px"},children:[e.jsx("strong",{children:"ë‹´ë‹¹ì:"})," í™ê¸¸ë™"]}),e.jsxs("div",{style:{marginBottom:"2px"},children:[e.jsx("strong",{children:"ì—°ë½ì²˜:"})," 031-000-0000"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"ì£¼ì†Œ:"})," ê²½ê¸°ë„ ì„±ë‚¨ì‹œ ë¶„ë‹¹êµ¬"]})]})})})]})})]})})}),e.jsxs("table",{style:{width:"100%",marginBottom:"15px",border:"1px solid #666",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{children:e.jsx("th",{style:{backgroundColor:"#f0f0f0",border:"1px solid #666",padding:"5px",fontSize:"11px",fontWeight:"bold",textAlign:"center"},children:"ë°œì£¼ ì •ë³´"})})}),e.jsx("tbody",{children:e.jsx("tr",{children:e.jsx("td",{style:{border:"1px solid #666",padding:"8px"},children:e.jsx("table",{style:{width:"100%",borderCollapse:"collapse"},children:e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsxs("td",{style:{width:"33%",fontSize:"10px",padding:"2px"},children:[e.jsx("strong",{children:"ë°œì£¼ë²ˆí˜¸:"})," ",n.orderNumber||"PO-2025-0612-001"]}),e.jsxs("td",{style:{width:"33%",fontSize:"10px",padding:"2px"},children:[e.jsx("strong",{children:"ë°œì£¼ì¼ì:"})," ",n.orderDate?d(n.orderDate):"2025ë…„ 06ì›” 12ì¼"]}),e.jsxs("td",{style:{width:"33%",fontSize:"10px",padding:"2px"},children:[e.jsx("strong",{children:"ë‚©ê¸°ì¼ì:"})," ",n.deliveryDate?d(n.deliveryDate):"2025ë…„ 06ì›” 30ì¼"]})]})})})})})})]}),e.jsxs("table",{style:{width:"100%",marginBottom:"15px",border:"1px solid #666",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{children:e.jsx("th",{style:{backgroundColor:"#f0f0f0",border:"1px solid #666",padding:"5px",fontSize:"11px",fontWeight:"bold",textAlign:"center"},children:"ë°œì£¼ í•­ëª©"})})}),e.jsx("tbody",{children:e.jsx("tr",{children:e.jsx("td",{style:{border:"1px solid #666",padding:"0"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f8f8f8"},children:[e.jsx("th",{style:{border:"1px solid #666",padding:"4px",fontSize:"10px",textAlign:"center",width:"8%"},children:"ìˆœë²ˆ"}),e.jsx("th",{style:{border:"1px solid #666",padding:"4px",fontSize:"10px",textAlign:"center",width:"25%"},children:"í’ˆëª©ëª…"}),e.jsx("th",{style:{border:"1px solid #666",padding:"4px",fontSize:"10px",textAlign:"center",width:"15%"},children:"ê·œê²©"}),e.jsx("th",{style:{border:"1px solid #666",padding:"4px",fontSize:"10px",textAlign:"center",width:"8%"},children:"ìˆ˜ëŸ‰"}),e.jsx("th",{style:{border:"1px solid #666",padding:"4px",fontSize:"10px",textAlign:"center",width:"12%"},children:"ë‹¨ê°€"}),e.jsx("th",{style:{border:"1px solid #666",padding:"4px",fontSize:"10px",textAlign:"center",width:"12%"},children:"ê¸ˆì•¡"}),e.jsx("th",{style:{border:"1px solid #666",padding:"4px",fontSize:"10px",textAlign:"center",width:"20%"},children:"ë¹„ê³ "})]})}),e.jsxs("tbody",{children:[n.items&&n.items.length>0?n.items.map((x,f)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #666",padding:"4px",fontSize:"10px",textAlign:"center"},children:f+1}),e.jsx("td",{style:{border:"1px solid #666",padding:"4px",fontSize:"10px"},children:x.itemName}),e.jsx("td",{style:{border:"1px solid #666",padding:"4px",fontSize:"10px",textAlign:"center"},children:x.specification||"-"}),e.jsx("td",{style:{border:"1px solid #666",padding:"4px",fontSize:"10px",textAlign:"center"},children:parseFloat(x.quantity).toLocaleString()}),e.jsx("td",{style:{border:"1px solid #666",padding:"4px",fontSize:"10px",textAlign:"right"},children:a(x.unitPrice)}),e.jsx("td",{style:{border:"1px solid #666",padding:"4px",fontSize:"10px",textAlign:"right",fontWeight:"bold"},children:a(x.totalAmount)}),e.jsx("td",{style:{border:"1px solid #666",padding:"4px",fontSize:"10px",textAlign:"center"},children:x.notes||"-"})]},x.id||f)):e.jsx("tr",{children:e.jsx("td",{colSpan:7,style:{border:"1px solid #666",padding:"20px",fontSize:"10px",textAlign:"center",color:"#666"},children:"ë°œì£¼ í•­ëª©ì´ ì—†ìŠµë‹ˆë‹¤."})}),e.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[e.jsx("td",{colSpan:6,style:{border:"1px solid #666",padding:"6px",fontSize:"11px",textAlign:"right",fontWeight:"bold"},children:"ì´ ê¸ˆì•¡:"}),e.jsxs("td",{style:{border:"1px solid #666",padding:"6px",fontSize:"11px",textAlign:"right",fontWeight:"bold"},children:[a(j())," (VAT í¬í•¨)"]})]})]})]})})})})]}),e.jsxs("table",{style:{width:"100%",marginBottom:"15px",border:"1px solid #666",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{children:e.jsx("th",{style:{backgroundColor:"#f0f0f0",border:"1px solid #666",padding:"5px",fontSize:"11px",fontWeight:"bold",textAlign:"center"},children:"íŠ¹ì´ì‚¬í•­"})})}),e.jsx("tbody",{children:e.jsx("tr",{children:e.jsx("td",{style:{border:"1px solid #666",padding:"10px",fontSize:"10px",minHeight:"40px"},children:n.notes||"ë³¸ ë°œì£¼ì„œëŠ” ì •ê¸° ë°œì£¼ì— ë”°ë¥¸ ë°œìƒ ê±´ìœ¼ë¡œ, í’ˆì§ˆ ë° ë‚©ê¸°ì¼ì •ì„ ì¤€ìˆ˜í•˜ì—¬ ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤."})})})]}),e.jsx("table",{style:{width:"100%",marginBottom:"20px",borderCollapse:"collapse"},children:e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{style:{width:"50%",verticalAlign:"top",paddingRight:"10px"},children:e.jsxs("table",{style:{width:"100%",border:"1px solid #666",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{children:e.jsx("th",{style:{backgroundColor:"#f0f0f0",border:"1px solid #666",padding:"5px",fontSize:"11px",fontWeight:"bold",textAlign:"center"},children:"ë°œì£¼ì"})})}),e.jsx("tbody",{children:e.jsx("tr",{children:e.jsxs("td",{style:{border:"1px solid #666",padding:"15px",fontSize:"10px",textAlign:"center"},children:[e.jsxs("div",{style:{marginBottom:"10px"},children:["ë‚ ì§œ: ",n.orderDate?d(n.orderDate):"2025ë…„ 06ì›” 12ì¼"]}),e.jsx("div",{children:"ì„œëª…: _______________"})]})})})]})}),e.jsx("td",{style:{width:"50%",verticalAlign:"top",paddingLeft:"10px"},children:e.jsxs("table",{style:{width:"100%",border:"1px solid #666",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{children:e.jsx("th",{style:{backgroundColor:"#f0f0f0",border:"1px solid #666",padding:"5px",fontSize:"11px",fontWeight:"bold",textAlign:"center"},children:"ìŠ¹ì¸ì"})})}),e.jsx("tbody",{children:e.jsx("tr",{children:e.jsxs("td",{style:{border:"1px solid #666",padding:"15px",fontSize:"10px",textAlign:"center"},children:[e.jsx("div",{style:{marginBottom:"10px"},children:"ë‚ ì§œ: _______________"}),e.jsx("div",{children:"ì„œëª…: _______________"})]})})})]})})]})})}),e.jsx("div",{style:{marginTop:"20px",paddingTop:"10px",borderTop:"1px solid #999",fontSize:"9px",color:"#666"},children:e.jsx("table",{style:{width:"100%"},children:e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsxs("td",{style:{textAlign:"left"},children:["ë³¸ ë°œì£¼ì„œëŠ” ìì¬ ë°œì£¼ ê´€ë¦¬ ì‹œìŠ¤í…œì—ì„œ ìë™ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤. ìƒì„±ì¼ì‹œ: ",D(new Date,"yyyyë…„ MMì›” ddì¼ HH:mm")]}),e.jsx("td",{style:{textAlign:"right"},children:"í˜ì´ì§€ 1"})]})})})})]})}export{Oe as I,Ee as O,Ke as R};
