import{v as p,j as e,p as j,a8 as h,A as N,D as y,B as f,s as v,w as k,aj as d,E as z,bu as M}from"./index-BprjEF15.js";import{R as w}from"./refresh-cw-x4FhIUhI.js";import{T as S}from"./trending-up-CxZk25ep.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=p("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=p("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=p("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=p("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=p("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),D=(s,r="number",a)=>{if(typeof s=="string")return s;switch(r){case"currency":return`₩${s.toLocaleString()}`;case"percentage":return`${s.toFixed(1)}%`;default:return`${s.toLocaleString()}${a?` ${a}`:""}`}},E=(s,r)=>{if(!r||r===0)return{trend:"neutral",percentage:0};const a=(s-r)/r*100;return{trend:a>0?"up":a<0?"down":"neutral",percentage:Math.abs(a)}};function I({data:s,className:r,showTrend:a=!0,showDescription:l=!0,onRefresh:t,onClick:c,loading:x=!1}){const{trend:n,percentage:o}=s.previousValue?E(Number(s.value),s.previousValue):{trend:s.trend||"neutral",percentage:s.trendValue||0},i={normal:"",warning:"border-l-4 border-l-warning-500",critical:"border-l-4 border-l-error-500",success:"border-l-4 border-l-success-500"},u={up:e.jsx(S,{className:"h-4 w-4 text-success-600"}),down:e.jsx(R,{className:"h-4 w-4 text-error-600"}),neutral:e.jsx(C,{className:"h-4 w-4 text-muted-foreground"})},b={up:"text-success-600 bg-success-50",down:"text-error-600 bg-error-50",neutral:"text-muted-foreground bg-muted"};return e.jsxs(j,{className:h("relative transition-all duration-200 hover:shadow-md",i[s.status||"normal"],c&&"cursor-pointer hover:bg-accent/50",r),onClick:c,children:[x&&e.jsx("div",{className:"absolute inset-0 bg-background/50 flex items-center justify-center z-10 rounded-lg",children:e.jsx(w,{className:"h-4 w-4 animate-spin"})}),e.jsxs(N,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(y,{className:"text-sm font-medium text-muted-foreground",children:s.title}),t&&e.jsx(f,{variant:"ghost",size:"sm",onClick:g=>{g.stopPropagation(),t()},className:"h-8 w-8 p-0",children:e.jsx(w,{className:"h-3 w-3"})})]}),e.jsxs(v,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-foreground",children:D(s.value,s.format,s.unit)}),a&&o>0&&e.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[u[n],e.jsxs(k,{variant:"secondary",className:h("text-xs",b[n]),children:[o.toFixed(1),"%"]})]})]}),s.category&&e.jsx(k,{variant:"outline",className:"text-xs",children:s.category})]}),l&&s.description&&e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:s.description}),s.lastUpdated&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["업데이트: ",s.lastUpdated.toLocaleString()]})]})]})}function A({data:s,className:r,height:a=300,showControls:l=!0,onRefresh:t,onExpand:c,onToggleVisibility:x,loading:n=!1,visible:o=!0}){const[i,u]=d.useState(!o);return i?e.jsx(j,{className:h("transition-all duration-200",r),children:e.jsxs(N,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(y,{className:"text-sm font-medium text-muted-foreground",children:s.title}),e.jsx("div",{className:"flex items-center space-x-1",children:e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>u(!1),className:"h-8 w-8 p-0",children:e.jsx(z,{className:"h-3 w-3"})})})]})}):e.jsxs(j,{className:h("transition-all duration-200",r),children:[n&&e.jsx("div",{className:"absolute inset-0 bg-background/50 flex items-center justify-center z-10 rounded-lg",children:e.jsx(w,{className:"h-4 w-4 animate-spin"})}),e.jsxs(N,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsxs("div",{children:[e.jsx(y,{className:"text-sm font-medium text-muted-foreground",children:s.title}),s.description&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:s.description})]}),l&&e.jsxs("div",{className:"flex items-center space-x-1",children:[t&&e.jsx(f,{variant:"ghost",size:"sm",onClick:t,className:"h-8 w-8 p-0",children:e.jsx(w,{className:"h-3 w-3"})}),c&&e.jsx(f,{variant:"ghost",size:"sm",onClick:c,className:"h-8 w-8 p-0",children:e.jsx(L,{className:"h-3 w-3"})}),e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>u(!0),className:"h-8 w-8 p-0",children:e.jsx(M,{className:"h-3 w-3"})})]})]}),e.jsxs(v,{children:[e.jsx("div",{style:{height:a},children:e.jsx("div",{className:"w-full h-full bg-muted/20 rounded-md flex items-center justify-center",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.chartType.toUpperCase()," 차트 (",s.chartData.length," 데이터 포인트)"]})})}),s.lastUpdated&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["업데이트: ",s.lastUpdated.toLocaleString()]})]})]})}function F({widgets:s,columns:r=4,className:a,onWidgetClick:l,onWidgetRefresh:t,loadingWidgets:c=[]}){const x={1:"grid-cols-1",2:"grid-cols-1 md:grid-cols-2",3:"grid-cols-1 md:grid-cols-2 xl:grid-cols-3",4:"grid-cols-1 md:grid-cols-2 xl:grid-cols-4",5:"grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-5",6:"grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-6"};return e.jsx("div",{className:h("grid gap-4",x[r]||"grid-cols-1 md:grid-cols-2 xl:grid-cols-4",a),children:s.map(n=>{const o="chartData"in n,i=c.includes(n.id);return o?e.jsx(A,{data:n,loading:i,onRefresh:()=>t?.(n.id),onExpand:()=>l?.(n)},n.id):e.jsx(I,{data:n,loading:i,onRefresh:()=>t?.(n.id),onClick:()=>l?.(n)},n.id)})})}function H({title:s,metrics:r,className:a,showTrends:l=!0}){return e.jsxs(j,{className:a,children:[e.jsx(N,{children:e.jsx(y,{className:"text-lg font-semibold",children:s})}),e.jsx(v,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:r.map((t,c)=>e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:t.label}),e.jsx("p",{className:"text-xl font-bold text-foreground",children:D(t.value,t.format,t.unit)}),l&&t.change!==void 0&&e.jsxs("div",{className:"flex items-center space-x-1",children:[t.change>0?e.jsx(T,{className:"h-3 w-3 text-success-600"}):t.change<0?e.jsx(U,{className:"h-3 w-3 text-error-600"}):e.jsx(C,{className:"h-3 w-3 text-muted-foreground"}),e.jsxs("span",{className:h("text-xs font-medium",t.change>0?"text-success-600":t.change<0?"text-error-600":"text-muted-foreground"),children:[Math.abs(t.change).toFixed(1),"%"]})]})]},c))})})]})}function P(s,r,a=3e4,l=!0){const[t,c]=d.useState(s),[x,n]=d.useState(!1),[o,i]=d.useState(null),[u,b]=d.useState(new Date),g=d.useCallback(async()=>{if(l)try{n(!0),i(null);const m=await r();c(m),b(new Date)}catch(m){i(m instanceof Error?m.message:"데이터 업데이트 실패")}finally{n(!1)}},[r,l]);return d.useEffect(()=>{if(!l)return;const m=setInterval(g,a);return()=>clearInterval(m)},[g,a,l]),{data:t,loading:x,error:o,lastUpdated:u,refresh:g}}export{A as ChartWidget,F as DashboardGrid,I as KPIWidget,H as SummaryCard,P as useRealTimeData};
