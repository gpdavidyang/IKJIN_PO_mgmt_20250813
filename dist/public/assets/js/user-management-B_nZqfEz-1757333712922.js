import{n as O,r as m,aG as Q,j as e,ap as q,aq as Qe,am as Ke,cb as Se,b3 as p,bo as Be,cc as He,cd as Xe,al as K,ce as We,d as Ye,e as Je,g as Ze,u as es,h as ss,aQ as ts,aY as as,q as le,s as V,k as C,B as j,P as ce,y as A,w as de,x as rs,o as R,T as ge,aR as os,aS as T,aT as I,aU as G,aV as S,aW as P,S as xe,z as me,A as ue,D as he,G as M,ac as pe,ad as ye,af as ns,aX as N}from"./index-GjFQBII2-1757333712922.js";import{D as je,a as ve,b as be,c as fe,d as is,e as ls}from"./dialog-CQkP5LA1-1757333712922.js";import{R as U,a as cs}from"./role-display-XVOvmKcZ-1757333712922.js";import{U as Ne}from"./user-x-HPadCRIt-1757333712922.js";import{U as we}from"./users-CguWUHhH-1757333712922.js";import{L as ds}from"./list-CQ-kKQ0N-1757333712922.js";import{S as $e}from"./square-pen-D10ozRh9-1757333712922.js";import{T as Ce}from"./triangle-alert-u7HuRStw-1757333712922.js";import"./index-L5NObD3h-1757333712922.js";import"./use-ui-terms-CkyxzVSz-1757333712922.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=O("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=O("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=O("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);var xs="Toggle",B=m.forwardRef((a,r)=>{const{pressed:o,defaultPressed:l=!1,onPressedChange:c,...t}=a,[n=!1,d]=Q({prop:o,onChange:c,defaultProp:l});return e.jsx(q.button,{type:"button","aria-pressed":n,"data-state":n?"on":"off","data-disabled":a.disabled?"":void 0,...t,ref:r,onClick:Qe(a.onClick,()=>{a.disabled||d(!n)})})});B.displayName=xs;var Pe=B,w="ToggleGroup",[ke,Ss]=Ke(w,[Se]),Ae=Se(),H=p.forwardRef((a,r)=>{const{type:o,...l}=a;if(o==="single"){const c=l;return e.jsx(ms,{...c,ref:r})}if(o==="multiple"){const c=l;return e.jsx(us,{...c,ref:r})}throw new Error(`Missing prop \`type\` expected on \`${w}\``)});H.displayName=w;var[Re,De]=ke(w),ms=p.forwardRef((a,r)=>{const{value:o,defaultValue:l,onValueChange:c=()=>{},...t}=a,[n,d]=Q({prop:o,defaultProp:l,onChange:c});return e.jsx(Re,{scope:a.__scopeToggleGroup,type:"single",value:n?[n]:[],onItemActivate:d,onItemDeactivate:p.useCallback(()=>d(""),[d]),children:e.jsx(_e,{...t,ref:r})})}),us=p.forwardRef((a,r)=>{const{value:o,defaultValue:l,onValueChange:c=()=>{},...t}=a,[n=[],d]=Q({prop:o,defaultProp:l,onChange:c}),h=p.useCallback(y=>d((x=[])=>[...x,y]),[d]),$=p.useCallback(y=>d((x=[])=>x.filter(v=>v!==y)),[d]);return e.jsx(Re,{scope:a.__scopeToggleGroup,type:"multiple",value:n,onItemActivate:h,onItemDeactivate:$,children:e.jsx(_e,{...t,ref:r})})});H.displayName=w;var[hs,ps]=ke(w),_e=p.forwardRef((a,r)=>{const{__scopeToggleGroup:o,disabled:l=!1,rovingFocus:c=!0,orientation:t,dir:n,loop:d=!0,...h}=a,$=Ae(o),y=Be(n),x={role:"group",dir:y,...h};return e.jsx(hs,{scope:o,rovingFocus:c,disabled:l,children:c?e.jsx(He,{asChild:!0,...$,orientation:t,dir:y,loop:d,children:e.jsx(q.div,{...x,ref:r})}):e.jsx(q.div,{...x,ref:r})})}),D="ToggleGroupItem",Ee=p.forwardRef((a,r)=>{const o=De(D,a.__scopeToggleGroup),l=ps(D,a.__scopeToggleGroup),c=Ae(a.__scopeToggleGroup),t=o.value.includes(a.value),n=l.disabled||a.disabled,d={...a,pressed:t,disabled:n},h=p.useRef(null);return l.rovingFocus?e.jsx(Xe,{asChild:!0,...c,focusable:!n,active:t,ref:h,children:e.jsx(Ge,{...d,ref:r})}):e.jsx(Ge,{...d,ref:r})});Ee.displayName=D;var Ge=p.forwardRef((a,r)=>{const{__scopeToggleGroup:o,value:l,...c}=a,t=De(D,o),n={role:"radio","aria-checked":a.pressed,"aria-pressed":void 0},d=t.type==="single"?n:void 0;return e.jsx(B,{...d,...c,ref:r,onPressedChange:h=>{h?t.onItemActivate(l):t.onItemDeactivate(l)}})}),Fe=H,Le=Ee;const Ve=We("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3 min-w-10",sm:"h-9 px-2.5 min-w-9",lg:"h-11 px-5 min-w-11"}},defaultVariants:{variant:"default",size:"default"}}),ys=m.forwardRef(({className:a,variant:r,size:o,...l},c)=>e.jsx(Pe,{ref:c,className:K(Ve({variant:r,size:o,className:a})),...l}));ys.displayName=Pe.displayName;const Me=m.createContext({size:"default",variant:"default"}),Ue=m.forwardRef(({className:a,variant:r,size:o,children:l,...c},t)=>e.jsx(Fe,{ref:t,className:K("flex items-center justify-center gap-1",a),...c,children:e.jsx(Me.Provider,{value:{variant:r,size:o},children:l})}));Ue.displayName=Fe.displayName;const z=m.forwardRef(({className:a,children:r,variant:o,size:l,...c},t)=>{const n=m.useContext(Me);return e.jsx(Le,{ref:t,className:K(Ve({variant:n.variant||o,size:n.size||l}),a),...c,children:r})});z.displayName=Le.displayName;const js=N.object({email:N.string().email("올바른 이메일 주소를 입력하세요"),name:N.string().optional(),positionId:N.string().optional(),phoneNumber:N.string().optional(),role:N.enum(["user","manager","admin"]).default("user")});function Ps(){const{user:a}=Ye(),{toast:r}=Je(),o=Ze(),[,l]=es(),{theme:c}=ss(),t=c==="dark",[n,d]=m.useState(""),[h,$]=m.useState("list"),[y,x]=m.useState(!1),[v,_]=m.useState(null),[g,b]=m.useState({open:!1,user:null}),[k,X]=m.useState(!1),u=ts({resolver:as(js),defaultValues:{email:"",name:"",positionId:"",phoneNumber:"",role:"user"}}),{data:qe=[],isLoading:W}=le({queryKey:["/api/users"]}),{data:Y=[]}=le({queryKey:["/api/positions"]}),J=V({mutationFn:async s=>{const i={...s,positionId:s.positionId&&s.positionId!==""&&s.positionId!=="none"?parseInt(s.positionId):null};return await C("POST","/api/users",i)},onSuccess:()=>{o.invalidateQueries({queryKey:["/api/users"]}),x(!1),u.reset(),r({title:"성공",description:"사용자가 추가되었습니다."})},onError:s=>{r({title:"오류",description:s.message||"사용자 추가에 실패했습니다.",variant:"destructive"})}}),Z=V({mutationFn:async({id:s,...i})=>{const f={...i,positionId:i.positionId&&i.positionId!==""&&i.positionId!=="none"?parseInt(i.positionId):null};return await C("PATCH",`/api/users/${s}`,f)},onSuccess:()=>{o.invalidateQueries({queryKey:["/api/users"]}),x(!1),_(null),u.reset(),r({title:"성공",description:"사용자 정보가 수정되었습니다."})},onError:s=>{r({title:"오류",description:s.message||"사용자 수정에 실패했습니다.",variant:"destructive"})}});V({mutationFn:async s=>await C("DELETE",`/api/users/${s}`),onSuccess:()=>{o.invalidateQueries({queryKey:["/api/users"]}),r({title:"성공",description:"사용자가 삭제되었습니다."})},onError:s=>{r({title:"오류",description:s.message||"사용자 삭제에 실패했습니다.",variant:"destructive"})}});const ze=s=>{v?Z.mutate({id:v.id,...s}):J.mutate(s)},E=qe.filter(s=>s.email?.toLowerCase().includes(n.toLowerCase())||s.name?.toLowerCase().includes(n.toLowerCase())||s.position?.toLowerCase().includes(n.toLowerCase())),ee=s=>{_(s);const i=s.role;u.reset({email:s.email||"",name:s.name||"",positionId:s.positionId?String(s.positionId):"none",phoneNumber:s.phoneNumber||"",role:i||"user"}),x(!0)},se=s=>{b({open:!0,user:s,error:null})},Oe=async()=>{if(g.user){X(!0);try{const s=await C("DELETE",`/api/users/${g.user.id}`);o.invalidateQueries({queryKey:["/api/users"]}),r({title:"성공",description:s.message||"사용자가 삭제되었습니다."}),b({open:!1,user:null})}catch(s){s.reason==="has_references"?b(i=>({...i,error:s})):(r({title:"오류",description:s.message||"사용자 삭제에 실패했습니다.",variant:"destructive"}),s.reason!=="self_deletion"&&b({open:!1,user:null}))}finally{X(!1)}}},F=async s=>{try{const i=!s.isActive;await C("PATCH",`/api/users/${s.id}/toggle-active`,{isActive:i}),o.invalidateQueries({queryKey:["/api/users"]}),r({title:"성공",description:`사용자가 ${i?"활성화":"비활성화"}되었습니다.`})}catch(i){r({title:"오류",description:i.message||"상태 변경에 실패했습니다.",variant:"destructive"})}},te=s=>s.name?s.name:s.email?.split("@")[0]||"사용자명 없음",ae=s=>s&&Y.find(f=>f.id===s)?.positionName||"-",re=s=>{switch(s){case"admin":return"destructive";case"manager":return"default";case"user":return"secondary";default:return"outline"}},L=a?.role;if(W)return e.jsx("div",{className:`container mx-auto py-8 transition-colors ${t?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:`transition-colors ${t?"text-gray-400":"text-muted-foreground"}`,children:"사용자 정보를 확인하고 있습니다..."})]})});if(!a)return e.jsx("div",{className:`container mx-auto py-8 transition-colors ${t?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ne,{className:`mx-auto h-12 w-12 mb-4 transition-colors ${t?"text-gray-400":"text-muted-foreground"}`}),e.jsx("h2",{className:`text-2xl font-bold mb-2 transition-colors ${t?"text-white":"text-gray-900"}`,children:"로그인이 필요합니다"}),e.jsx("p",{className:`transition-colors ${t?"text-gray-400":"text-muted-foreground"}`,children:"사용자 관리 기능을 사용하려면 먼저 로그인하세요."}),e.jsx(j,{onClick:()=>l("/login"),className:"mt-4",children:"로그인하기"})]})});const oe=L==="admin",ne=!1,ie=oe||ne;return console.log("User management access check:",{userRole:L,isAdmin:oe,isDevelopment:ne,allowAccess:ie,currentUser:a}),ie?e.jsx("div",{className:`min-h-screen transition-colors ${t?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("div",{className:"max-w-[1366px] mx-auto p-6 space-y-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(we,{className:"h-6 w-6 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl font-bold transition-colors ${t?"text-white":"text-gray-900"}`,children:"사용자 관리"}),e.jsx("p",{className:`text-sm mt-1 transition-colors ${t?"text-gray-400":"text-gray-600"}`,children:"시스템 사용자를 관리하고 권한을 설정합니다"})]})]}),e.jsxs(j,{onClick:()=>{_(null),u.reset(),x(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(ce,{className:"h-4 w-4 mr-2"}),"사용자 추가"]})]})}),e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[e.jsx(A,{placeholder:"이메일, 이름, 직책으로 검색...",value:n,onChange:s=>d(s.target.value),className:`h-7 text-xs max-w-xs transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-100 placeholder:text-gray-400":"bg-white border-gray-300"}`}),e.jsxs(Ue,{type:"single",value:h,onValueChange:s=>s&&$(s),children:[e.jsx(z,{value:"list","aria-label":"목록 보기",className:"h-7 px-2",children:e.jsx(ds,{className:"h-3 w-3"})}),e.jsx(z,{value:"grid","aria-label":"카드 보기",className:"h-7 px-2",children:e.jsx(gs,{className:"h-3 w-3"})})]})]}),e.jsx(de,{className:`shadow-sm transition-colors ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:e.jsx(rs,{className:"p-0",children:W?e.jsx("div",{className:"space-y-1 p-2",children:[...Array(6)].map((s,i)=>e.jsxs("div",{className:"flex items-center justify-between py-1 px-2 animate-pulse",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:`h-3 rounded w-1/4 mb-1 ${t?"bg-gray-600":"bg-gray-200"}`}),e.jsx("div",{className:`h-2 rounded w-1/3 ${t?"bg-gray-600":"bg-gray-200"}`})]}),e.jsx("div",{className:`h-3 rounded w-16 ${t?"bg-gray-600":"bg-gray-200"}`})]},i))}):E.length===0?e.jsxs("div",{className:"text-center py-6",children:[e.jsx(we,{className:`mx-auto h-8 w-8 mb-2 transition-colors ${t?"text-gray-500":"text-gray-400"}`}),e.jsx("p",{className:`text-xs mb-2 transition-colors ${t?"text-gray-400":"text-gray-500"}`,children:n?"검색 조건에 맞는 사용자가 없습니다.":"등록된 사용자가 없습니다."}),!n&&e.jsxs(j,{size:"sm",onClick:()=>x(!0),className:"h-6 px-2 text-xs",children:[e.jsx(ce,{className:"h-3 w-3 mr-1"}),"첫 번째 사용자 추가"]})]}):e.jsx(e.Fragment,{children:h==="list"?e.jsxs("div",{className:"divide-y",children:[e.jsxs("div",{className:`grid grid-cols-12 gap-2 px-2 py-1 text-xs font-medium transition-colors ${t?"bg-gray-700 text-gray-300":"bg-gray-50 text-gray-600"}`,children:[e.jsx("div",{className:"col-span-2",children:"사용자명"}),e.jsx("div",{className:"col-span-3",children:"이메일"}),e.jsx("div",{className:"col-span-2",children:"전화번호"}),e.jsx("div",{className:"col-span-2",children:"직함"}),e.jsx("div",{className:"col-span-2",children:"권한"}),e.jsx("div",{className:"col-span-1 text-center",children:"작업"})]}),E.map(s=>e.jsxs("div",{className:`grid grid-cols-12 gap-2 px-2 py-1 transition-colors text-xs ${s.isActive?t?"hover:bg-gray-700":"hover:bg-gray-50":t?"bg-gray-800/50 opacity-60":"bg-gray-100/50 opacity-60"}`,children:[e.jsxs("div",{className:"col-span-2 flex items-center gap-1",children:[e.jsx("span",{className:`font-medium truncate transition-colors ${s.isActive?t?"text-gray-100":"text-gray-900":t?"text-gray-500":"text-gray-400"}`,children:te(s)}),!s.isActive&&e.jsx(R,{variant:"outline",className:"text-xs px-1 py-0",children:"비활성"})]}),e.jsx("div",{className:"col-span-3 flex items-center",children:e.jsx("span",{className:`truncate transition-colors ${t?"text-gray-300":"text-gray-600"}`,children:s.email})}),e.jsx("div",{className:"col-span-2 flex items-center",children:e.jsx("span",{className:`truncate transition-colors ${t?"text-gray-300":"text-gray-600"}`,children:s.phoneNumber||"-"})}),e.jsx("div",{className:"col-span-2 flex items-center",children:e.jsx("span",{className:`truncate transition-colors ${t?"text-gray-300":"text-gray-600"}`,children:ae(s.positionId)})}),e.jsx("div",{className:"col-span-2 flex items-center",children:e.jsx(R,{variant:re(s.role||"user"),className:"text-xs px-1 py-0",children:e.jsx(U,{role:s.role||"user"})})}),e.jsxs("div",{className:"col-span-1 flex items-center justify-center gap-1",children:[e.jsx("button",{onClick:()=>ee(s),className:`inline-flex items-center justify-center w-5 h-5 rounded transition-colors ${t?"hover:bg-gray-600 text-gray-400":"hover:bg-gray-100 text-gray-600"}`,title:"수정",children:e.jsx($e,{className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>F(s),className:`inline-flex items-center justify-center w-5 h-5 rounded transition-colors ${s.isActive?t?"hover:bg-orange-900/20 text-orange-500":"hover:bg-orange-100 text-orange-600":t?"hover:bg-green-900/20 text-green-500":"hover:bg-green-100 text-green-600"}`,title:s.isActive?"비활성화":"활성화",children:s.isActive?e.jsx(Ie,{className:"h-3 w-3"}):e.jsx(Te,{className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>se(s),className:`inline-flex items-center justify-center w-5 h-5 rounded text-red-600 transition-colors ${t?"hover:bg-red-900/20":"hover:bg-red-100"}`,title:"삭제",disabled:s.id===a?.id,children:e.jsx(ge,{className:"h-3 w-3"})})]})]},s.id))]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-2 p-2",children:E.map(s=>e.jsxs(de,{className:`p-3 hover:shadow-md transition-shadow shadow-sm ${s.isActive?t?"bg-gray-700 border-gray-600":"bg-white border-gray-200":t?"bg-gray-800/50 border-gray-700 opacity-70":"bg-gray-50 border-gray-300 opacity-70"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx("h4",{className:`font-medium text-sm truncate transition-colors ${s.isActive?t?"text-gray-100":"text-gray-900":t?"text-gray-400":"text-gray-500"}`,children:te(s)}),!s.isActive&&e.jsx(R,{variant:"outline",className:"text-xs px-1 py-0",children:"비활성"})]}),e.jsx("p",{className:`text-xs truncate transition-colors ${t?"text-gray-300":"text-gray-600"}`,children:s.email})]}),e.jsxs("div",{className:"flex gap-1 ml-2",children:[e.jsx("button",{onClick:()=>ee(s),className:`inline-flex items-center justify-center w-6 h-6 rounded transition-colors ${t?"hover:bg-gray-600 text-gray-400":"hover:bg-gray-100 text-gray-600"}`,title:"수정",children:e.jsx($e,{className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>F(s),className:`inline-flex items-center justify-center w-6 h-6 rounded transition-colors ${s.isActive?t?"hover:bg-orange-900/20 text-orange-500":"hover:bg-orange-100 text-orange-600":t?"hover:bg-green-900/20 text-green-500":"hover:bg-green-100 text-green-600"}`,title:s.isActive?"비활성화":"활성화",children:s.isActive?e.jsx(Ie,{className:"h-3 w-3"}):e.jsx(Te,{className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>se(s),className:`inline-flex items-center justify-center w-6 h-6 rounded text-red-600 transition-colors ${t?"hover:bg-red-900/20":"hover:bg-red-100"}`,title:"삭제",disabled:s.id===a?.id,children:e.jsx(ge,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:`transition-colors ${t?"text-gray-400":"text-gray-500"}`,children:"전화번호:"}),e.jsx("span",{className:`transition-colors ${t?"text-gray-200":"text-gray-700"}`,children:s.phoneNumber||"-"})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:`transition-colors ${t?"text-gray-400":"text-gray-500"}`,children:"직함:"}),e.jsx("span",{className:`transition-colors ${t?"text-gray-200":"text-gray-700"}`,children:ae(s.positionId)})]}),e.jsxs("div",{className:"flex justify-between text-xs items-center",children:[e.jsx("span",{className:`transition-colors ${t?"text-gray-400":"text-gray-500"}`,children:"권한:"}),e.jsx(R,{variant:re(s.role||"user"),className:"text-xs px-1 py-0",children:e.jsx(U,{role:s.role||"user"})})]})]})]},s.id))})})})}),e.jsx(je,{open:y,onOpenChange:x,children:e.jsxs(ve,{className:`max-w-md transition-colors ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsx(be,{children:e.jsx(fe,{className:`transition-colors ${t?"text-white":"text-gray-900"}`,children:v?"사용자 수정":"새 사용자 추가"})}),e.jsx(os,{...u,children:e.jsxs("form",{onSubmit:u.handleSubmit(ze),className:"space-y-4",children:[e.jsx(T,{control:u.control,name:"email",render:({field:s})=>e.jsxs(I,{children:[e.jsx(G,{className:`transition-colors ${t?"text-gray-300":"text-gray-700"}`,children:"이메일 *"}),e.jsx(S,{children:e.jsx(A,{placeholder:"user@company.com",...s,disabled:!!v,className:`transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-100 placeholder:text-gray-400":"bg-white border-gray-300"}`})}),e.jsx(P,{})]})}),e.jsx(T,{control:u.control,name:"name",render:({field:s})=>e.jsxs(I,{children:[e.jsx(G,{className:`transition-colors ${t?"text-gray-300":"text-gray-700"}`,children:"사용자명"}),e.jsx(S,{children:e.jsx(A,{placeholder:"홍길동",...s,className:`transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-100 placeholder:text-gray-400":"bg-white border-gray-300"}`})}),e.jsx(P,{})]})}),e.jsx(T,{control:u.control,name:"positionId",render:({field:s})=>e.jsxs(I,{children:[e.jsx(G,{className:`transition-colors ${t?"text-gray-300":"text-gray-700"}`,children:"직책"}),e.jsxs(xe,{onValueChange:s.onChange,value:s.value,children:[e.jsx(S,{children:e.jsx(me,{className:`transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300"}`,children:e.jsx(ue,{placeholder:"직책을 선택하세요"})})}),e.jsxs(he,{className:`transition-colors ${t?"bg-gray-700 border-gray-600":"bg-white border-gray-200"}`,children:[e.jsx(M,{value:"none",children:"직책 없음"}),Y.map(i=>e.jsx(M,{value:String(i.id),children:i.positionName},i.id))]})]}),e.jsx(P,{})]})}),e.jsx(T,{control:u.control,name:"phoneNumber",render:({field:s})=>e.jsxs(I,{children:[e.jsx(G,{className:`transition-colors ${t?"text-gray-300":"text-gray-700"}`,children:"연락처"}),e.jsx(S,{children:e.jsx(A,{placeholder:"010-1234-5678",...s,className:`transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-100 placeholder:text-gray-400":"bg-white border-gray-300"}`})}),e.jsx(P,{})]})}),e.jsx(T,{control:u.control,name:"role",render:({field:s})=>e.jsxs(I,{children:[e.jsx(G,{className:`transition-colors ${t?"text-gray-300":"text-gray-700"}`,children:"역할 *"}),e.jsxs(xe,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(S,{children:e.jsx(me,{className:`transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300"}`,children:e.jsx(ue,{placeholder:"역할을 선택하세요"})})}),e.jsx(he,{className:`transition-colors ${t?"bg-gray-700 border-gray-600":"bg-white border-gray-200"}`,children:e.jsx(cs,{children:i=>i.map(f=>e.jsx(M,{value:f.value,children:f.label},f.value))})})]}),e.jsx(P,{})]})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(j,{type:"button",variant:"outline",onClick:()=>x(!1),children:"취소"}),e.jsx(j,{type:"submit",disabled:J.isPending||Z.isPending,children:v?"수정":"추가"})]})]})})]})}),e.jsx(je,{open:g.open,onOpenChange:s=>!k&&b({open:s,user:null}),children:e.jsxs(ve,{className:`max-w-md transition-colors ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsxs(be,{children:[e.jsxs(fe,{className:`flex items-center gap-2 transition-colors ${t?"text-white":"text-gray-900"}`,children:[e.jsx(Ce,{className:"h-5 w-5 text-red-600"}),"사용자 삭제 확인"]}),e.jsx(is,{className:`transition-colors ${t?"text-gray-400":"text-gray-600"}`,children:"이 작업은 되돌릴 수 없습니다. 신중하게 결정해주세요."})]}),g.user&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`p-3 rounded-lg transition-colors ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("p",{className:`text-sm font-medium mb-1 transition-colors ${t?"text-gray-200":"text-gray-700"}`,children:"삭제할 사용자:"}),e.jsx("p",{className:`text-sm transition-colors ${t?"text-gray-300":"text-gray-600"}`,children:g.user.name||g.user.email}),e.jsx("p",{className:`text-xs transition-colors ${t?"text-gray-400":"text-gray-500"}`,children:g.user.email})]}),g.error&&e.jsxs(pe,{className:`border-red-200 ${t?"bg-red-900/20":"bg-red-50"}`,children:[e.jsx(Ce,{className:"h-4 w-4 text-red-600"}),e.jsxs(ye,{className:"space-y-2",children:[e.jsx("p",{className:"font-medium text-red-800",children:g.error.message}),g.error.details&&e.jsx("p",{className:"text-sm text-red-700",children:g.error.details}),g.error.suggestion&&e.jsxs("p",{className:"text-sm text-red-600 italic",children:["💡 ",g.error.suggestion]})]})]}),g.user.id===a?.id&&e.jsxs(pe,{className:`border-yellow-200 ${t?"bg-yellow-900/20":"bg-yellow-50"}`,children:[e.jsx(ns,{className:"h-4 w-4 text-yellow-600"}),e.jsx(ye,{className:"text-sm text-yellow-800",children:"자기 자신은 삭제할 수 없습니다. 다른 관리자가 삭제해야 합니다."})]})]}),e.jsxs(ls,{children:[e.jsx(j,{variant:"outline",onClick:()=>b({open:!1,user:null}),disabled:k,children:"취소"}),g.error?.reason==="has_references"?e.jsx(j,{onClick:()=>{F(g.user),b({open:!1,user:null})},className:"bg-orange-600 hover:bg-orange-700 text-white",children:"대신 비활성화"}):e.jsx(j,{variant:"destructive",onClick:Oe,disabled:k||g.user?.id===a?.id,children:k?"삭제 중...":"삭제"})]})]})})]})}):e.jsx("div",{className:`container mx-auto py-8 transition-colors ${t?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ne,{className:`mx-auto h-12 w-12 mb-4 transition-colors ${t?"text-gray-400":"text-muted-foreground"}`}),e.jsx("h2",{className:`text-2xl font-bold mb-2 transition-colors ${t?"text-white":"text-gray-900"}`,children:"접근 권한이 없습니다"}),e.jsx("p",{className:`transition-colors ${t?"text-gray-400":"text-muted-foreground"}`,children:"사용자 관리 기능은 관리자만 사용할 수 있습니다."}),e.jsxs("p",{className:`text-sm mt-2 transition-colors ${t?"text-gray-400":"text-muted-foreground"}`,children:["현재 권한: ",e.jsx(U,{role:L||"user"})]})]})})}export{Ps as default};
