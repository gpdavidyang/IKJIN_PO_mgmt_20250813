import{i as B,j as e,o as S,y as k,z as P,B as H,q as I,L as j,I as D,m as N,ae as se,r as v,k as F,w as ae,a6 as re,ac as le,ad as te,ag as V,n as L,a as ce,F as T,E as ne}from"./index-CKOkJa8a.js";import{S as y,a as f,b as w,c as C,d as l}from"./select-DmFFwEDq.js";import{C as de}from"./checkbox-CLetaLPZ.js";import{P as ie,a as oe,b as xe}from"./popover-D8cWzLx-.js";import{C as he,a as me,b as je,c as pe,d as ge}from"./command-CqESrift.js";import{f as q,r as ue,c as G,a as M,g as Ne}from"./order-utils-C4eLdozv.js";import{T as W}from"./trash-2-CvqwPzWA.js";import{P as ve}from"./package-DVdn3byl.js";import{C as be}from"./chevrons-up-down-Bou6GOnM.js";import{P as ye}from"./paperclip-BjCx_o-z.js";import{U as z}from"./upload-BY32MIAA.js";import{D as fe,a as we,b as Ce,c as Se}from"./dialog-CV4umqpv.js";import{P as ke}from"./printer-zUj_zQ-w.js";import{A as Pe}from"./arrow-left-BWU8ue7L.js";import{S as Ie}from"./save-Cr1utZ58.js";import{M as De}from"./mail-DzL2Osuv.js";import{T as O}from"./triangle-alert-BBaPDX6h.js";import{C as K}from"./clock-De_6yytQ.js";import"./index-CAd-gX2w.js";import"./chevron-down-DecYLFH6.js";import"./chevron-up-BJNKxpa8.js";import"./index-B9HGYmaA.js";import"./search-TK8I58x6.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=B("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=B("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);function Le({formData:c,onFormDataChange:p,projects:n,users:x,poNumber:g}){const h=(s,a)=>{p({...c,[s]:a})};return e.jsxs(S,{className:"shadow-sm hover:shadow-md transition-shadow",children:[e.jsx(k,{className:"bg-gray-50 border-b",children:e.jsxs(P,{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5 text-blue-600"}),"발주서 기본 정보"]})}),e.jsx(I,{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(j,{className:"text-sm font-medium",children:"발주서 번호"}),e.jsx("div",{className:"h-10 px-3 py-2 text-sm font-semibold text-blue-600 bg-gray-50 border rounded-md flex items-center",children:g})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(j,{className:"text-sm font-medium",children:"작성일"}),e.jsx("div",{className:"h-10 px-3 py-2 text-sm bg-gray-50 border rounded-md flex items-center",children:new Date().toLocaleDateString("ko-KR")})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(j,{htmlFor:"site",className:"text-sm font-medium",children:"현장 선택"}),e.jsxs(y,{value:c.site,onValueChange:s=>h("site",s),children:[e.jsx(f,{className:"h-10",children:e.jsx(w,{placeholder:"현장을 선택하세요"})}),e.jsx(C,{children:n.map(s=>e.jsx(l,{value:s.projectName,children:s.projectName},s.id))})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(j,{htmlFor:"deliveryDate",className:"text-sm font-medium",children:"납품 희망일"}),e.jsx(D,{type:"date",id:"deliveryDate",className:"h-10",value:c.deliveryDate,onChange:s=>h("deliveryDate",s.target.value)}),e.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[e.jsx(de,{id:"isNegotiable",checked:c.isNegotiable,onCheckedChange:s=>h("isNegotiable",s)}),e.jsx(j,{htmlFor:"isNegotiable",className:"text-sm text-gray-600",children:"협의 가능"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(j,{htmlFor:"receiver",className:"text-sm font-medium",children:"자재 인수자"}),e.jsxs(y,{value:c.receiver,onValueChange:s=>h("receiver",s),children:[e.jsx(f,{className:"h-10",children:e.jsx(w,{placeholder:"인수자 선택"})}),e.jsx(C,{children:x.map(s=>e.jsx(l,{value:s.email||"",children:s.email},s.id))})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(j,{htmlFor:"manager",className:"text-sm font-medium",children:"본사 담당자"}),e.jsxs(y,{value:c.manager,onValueChange:s=>h("manager",s),children:[e.jsx(f,{className:"h-10",children:e.jsx(w,{placeholder:"담당자 선택"})}),e.jsx(C,{children:x.map(s=>e.jsx(l,{value:s.email||"",children:s.email},s.id))})]})]})]})})]})}function Te({value:c,onChange:p,placeholder:n="품목명을 입력하세요"}){const[x,g]=v.useState(!1),[h,s]=v.useState(c),{data:a}=F({queryKey:["/api/items"],enabled:!0}),r=a?.items||[],t=Array.isArray(r)?r.filter(o=>o.name&&o.name.toLowerCase().includes(h.toLowerCase())):[],i=o=>{s(o),p(o),g(!1)},u=o=>{s(o),p(o)};return e.jsxs(ie,{open:x,onOpenChange:g,children:[e.jsx(oe,{asChild:!0,children:e.jsxs("div",{className:"relative",children:[e.jsx(D,{value:h,onChange:o=>u(o.target.value),placeholder:n,className:"h-8 text-sm pr-8",onFocus:()=>g(!0)}),e.jsx(N,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-8 w-8 p-0 hover:bg-transparent",onClick:()=>g(!x),children:e.jsx(be,{className:"h-3 w-3 shrink-0 opacity-50"})})]})}),e.jsx(xe,{className:"w-full p-0",align:"start",children:e.jsxs(he,{children:[e.jsx(me,{placeholder:"품목명 검색...",value:h,onValueChange:u}),e.jsx(je,{children:e.jsx("div",{className:"p-2 text-sm text-gray-500",children:"검색 결과가 없습니다. 직접 입력하시면 새 품목으로 추가됩니다."})}),e.jsx(pe,{className:"max-h-48 overflow-auto",children:t.map(o=>e.jsxs(ge,{value:o.name,onSelect:()=>i(o.name),className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:o.name}),e.jsx("span",{className:"text-xs text-gray-500",children:o.category})]}),e.jsx(ae,{className:re("ml-auto h-4 w-4",h===o.name?"opacity-100":"opacity-0")})]},o.id))})]})})]})}function qe({items:c,onItemChange:p,onAddItem:n,onRemoveItem:x,onCopyItem:g,vendors:h}){c.reduce((a,r)=>a+(r.price||0),0);const s=(a,r,t)=>{if(r==="quantity"||r==="unitPrice"){const i=[...c],u=ue(t);i[a]={...i[a],[r]:u};const o=G(r==="quantity"?u:i[a].quantity,r==="unitPrice"?u:i[a].unitPrice);i[a].price=o,p(a,r,u)}else p(a,r,t)};return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{}),e.jsxs(N,{onClick:n,variant:"outline",size:"sm",className:"gap-2 h-8 px-3 text-sm bg-transparent",children:[e.jsx(U,{className:"w-3 h-3"}),"품목 추가"]})]}),c.map((a,r)=>e.jsxs("div",{className:"border rounded-lg p-3 bg-white shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("h4",{className:"text-xs font-medium text-gray-700",children:["품목 #",r+1]}),e.jsxs("div",{className:"flex gap-1 -space-x-1",children:[e.jsx(N,{size:"sm",variant:"ghost",onClick:()=>g(r),className:"h-6 w-6 p-0 text-blue-600 hover:text-blue-800 hover:bg-blue-50",title:"품목 복사",children:e.jsx(se,{className:"w-3 h-3"})}),e.jsx(N,{size:"sm",variant:"ghost",onClick:()=>x(r),disabled:c.length===1,className:"h-8 w-8 p-0 text-red-600 hover:text-red-800 hover:bg-red-50 disabled:opacity-50",title:"품목 삭제",children:e.jsx(W,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h5",{className:"text-sm font-medium text-gray-700 border-b pb-1 flex items-center gap-2",children:[e.jsx(U,{className:"h-4 w-4 text-blue-600"}),"분류 정보"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx(j,{className:"text-xs text-gray-600",children:"대분류"}),e.jsxs(y,{value:a.category,onValueChange:t=>s(r,"category",t),children:[e.jsx(f,{className:"h-8",children:e.jsx(w,{placeholder:"선택"})}),e.jsxs(C,{children:[e.jsx(l,{value:"1.원자재",children:"1.원자재"}),e.jsx(l,{value:"2.부자재",children:"2.부자재"}),e.jsx(l,{value:"3.시공노무비",children:"3.시공노무비"}),e.jsx(l,{value:"4.장비비",children:"4.장비비"}),e.jsx(l,{value:"5.운반비",children:"5.운반비"}),e.jsx(l,{value:"6.안전관리비",children:"6.안전관리비"}),e.jsx(l,{value:"7.폐기물처리비",children:"7.폐기물처리비"}),e.jsx(l,{value:"8.현장관리비",children:"8.현장관리비"})]})]})]}),e.jsxs("div",{children:[e.jsx(j,{className:"text-xs text-gray-600",children:"중분류"}),e.jsxs(y,{value:a.subCategory1,onValueChange:t=>s(r,"subCategory1",t),children:[e.jsx(f,{className:"h-8",children:e.jsx(w,{placeholder:"선택"})}),e.jsxs(C,{children:[e.jsx(l,{value:"ALUM.SHEET",children:"ALUM.SHEET"}),e.jsx(l,{value:"ALUM.창호",children:"ALUM.창호"}),e.jsx(l,{value:"판넬",children:"판넬"}),e.jsx(l,{value:"창호",children:"창호"}),e.jsx(l,{value:"기타",children:"기타"}),e.jsx(l,{value:"창호,판넬",children:"창호,판넬"}),e.jsx(l,{value:"조립비",children:"조립비"}),e.jsx(l,{value:"유리",children:"유리"}),e.jsx(l,{value:"장비비",children:"장비비"}),e.jsx(l,{value:"신호수 외",children:"신호수 외"}),e.jsx(l,{value:"안전장비",children:"안전장비"}),e.jsx(l,{value:"건강검진",children:"건강검진"})]})]})]}),e.jsxs("div",{children:[e.jsx(j,{className:"text-xs text-gray-600",children:"소분류"}),e.jsxs(y,{value:a.subCategory2,onValueChange:t=>s(r,"subCategory2",t),children:[e.jsx(f,{className:"h-8",children:e.jsx(w,{placeholder:"선택"})}),e.jsxs(C,{children:[e.jsx(l,{value:"원자재",children:"원자재"}),e.jsx(l,{value:"가공",children:"가공"}),e.jsx(l,{value:"도장",children:"도장"}),e.jsx(l,{value:"압출",children:"압출"}),e.jsx(l,{value:"단열",children:"단열"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h5",{className:"text-sm font-medium text-gray-700 border-b pb-1 flex items-center gap-2",children:[e.jsx(ve,{className:"h-4 w-4 text-blue-600"}),"품목 및 수량"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx(j,{className:"text-xs text-gray-600",children:"품목명"}),e.jsx(Te,{value:a.name,onChange:t=>s(r,"name",t),placeholder:"품목명을 선택하거나 입력하세요"})]}),e.jsxs("div",{children:[e.jsx(j,{className:"text-xs text-gray-600",children:"수량"}),e.jsx(D,{type:"number",value:a.quantity,onChange:t=>s(r,"quantity",t.target.value),placeholder:"수량",className:"h-8 text-sm"})]}),e.jsxs("div",{children:[e.jsx(j,{className:"text-xs text-gray-600",children:"단위"}),e.jsxs(y,{value:a.unit,onValueChange:t=>s(r,"unit",t),children:[e.jsx(f,{className:"h-8",children:e.jsx(w,{placeholder:"단위"})}),e.jsxs(C,{children:[e.jsx(l,{value:"EA",children:"EA"}),e.jsx(l,{value:"M",children:"M"}),e.jsx(l,{value:"SET",children:"SET"}),e.jsx(l,{value:"KG",children:"KG"}),e.jsx(l,{value:"TON",children:"TON"})]})]})]}),e.jsxs("div",{children:[e.jsx(j,{className:"text-xs text-gray-600",children:"단가"}),e.jsx(D,{type:"number",value:a.unitPrice,onChange:t=>s(r,"unitPrice",t.target.value),placeholder:"단가",className:"h-8 text-sm"})]}),e.jsxs("div",{children:[e.jsx(j,{className:"text-xs text-gray-600",children:"금액"}),e.jsx("div",{className:"h-8 px-3 py-1 text-sm font-semibold text-blue-600 bg-gray-50 border rounded-md flex items-center",children:q(a.price||0)})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h5",{className:"text-sm font-medium text-gray-700 border-b pb-1 flex items-center gap-2",children:[e.jsx(H,{className:"h-4 w-4 text-blue-600"}),"거래처 및 납품 정보"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx(j,{className:"text-xs text-gray-600",children:"거래처"}),e.jsxs(y,{value:a.vendorId?.toString(),onValueChange:t=>s(r,"vendorId",t),children:[e.jsx(f,{className:"h-8",children:e.jsx(w,{placeholder:"거래처 선택"})}),e.jsx(C,{children:h.map(t=>e.jsx(l,{value:t.id.toString(),children:t.name},t.id))})]})]}),e.jsxs("div",{children:[e.jsx(j,{className:"text-xs text-gray-600",children:"납품장소"}),e.jsx(D,{value:a.deliveryLocation||"",onChange:t=>s(r,"deliveryLocation",t.target.value),placeholder:"납품장소",className:"h-8 text-sm"})]})]})]})]})]},r)),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"총 금액"}),e.jsx("span",{className:"text-lg font-bold text-blue-600",children:q(c.reduce((a,r)=>a+(r.price||0),0))})]})})]})}function Fe({uploadedFiles:c,onFilesChange:p}){const[n,x]=v.useState(!1),g=v.useRef(null),h=i=>{i.preventDefault(),i.stopPropagation(),x(!0)},s=i=>{i.preventDefault(),i.stopPropagation(),x(!1)},a=i=>{i.preventDefault(),i.stopPropagation(),x(!1);const u=Array.from(i.dataTransfer.files);u.length>0&&p([...c,...u])},r=i=>{if(i.target.files){const u=Array.from(i.target.files);p([...c,...u])}},t=()=>{g.current?.click()};return e.jsxs(S,{className:"shadow-sm hover:shadow-md transition-shadow",children:[e.jsx(k,{className:"bg-gray-50 border-b",children:e.jsxs(P,{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(ye,{className:"h-5 w-5 text-blue-600"}),"파일 첨부 및 기타 정보"]})}),e.jsxs(I,{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(j,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(z,{className:"h-4 w-4"}),"첨부파일"]}),e.jsxs("div",{className:`relative border-2 border-dashed rounded-lg p-6 text-center transition-colors cursor-pointer ${n?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400 hover:bg-gray-50"}`,onDragOver:h,onDragLeave:s,onDrop:a,onClick:t,children:[e.jsx(z,{className:"mx-auto h-8 w-8 text-gray-400 mb-2"}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"파일을 선택하거나 여기에 드래그하세요"}),e.jsx("p",{className:"text-xs text-gray-500",children:"PDF, Word, Excel, 이미지 파일 지원"}),e.jsx(D,{ref:g,type:"file",multiple:!0,className:"hidden",onChange:r,accept:".pdf,.doc,.docx,.xls,.xlsx,.png,.jpg,.jpeg,.gif"})]})]}),c.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{className:"text-sm font-medium",children:"첨부된 파일"}),e.jsx("div",{className:"space-y-1",children:c.map((i,u)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-sm",children:i.name}),e.jsx("button",{onClick:()=>{const o=c.filter((R,E)=>E!==u);p(o)},className:"text-red-500 hover:text-red-700",children:e.jsx(W,{className:"h-4 w-4"})})]},u))})]}),c.length>0&&e.jsx("div",{className:"space-y-1 p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("p",{className:"text-sm font-medium text-green-800",children:["✅ ",c.length,"개의 파일이 첨부되었습니다."]})})]})]})}function Ee({isOpen:c,onClose:p,formData:n,items:x,poNumber:g}){const h=x.reduce((s,a)=>s+(a.price||0),0);return e.jsx(fe,{open:c,onOpenChange:p,children:e.jsxs(we,{className:"max-w-4xl max-h-[90vh] overflow-auto",children:[e.jsx(Ce,{children:e.jsxs(Se,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"PDF 미리보기"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{variant:"outline",size:"sm",children:e.jsx(le,{className:"h-4 w-4"})}),e.jsx(N,{variant:"outline",size:"sm",children:e.jsx(te,{className:"h-4 w-4"})}),e.jsx(N,{variant:"outline",size:"sm",children:e.jsx(Ae,{className:"h-4 w-4"})}),e.jsx(N,{variant:"outline",size:"sm",children:e.jsx(ke,{className:"h-4 w-4"})}),e.jsx(N,{variant:"outline",size:"sm",onClick:p,children:e.jsx(Pe,{className:"h-4 w-4"})})]})]})}),e.jsx("div",{className:"bg-white p-8 shadow-lg",style:{width:"190mm",minHeight:"297mm",margin:"0 auto"},children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-xl font-bold",children:"구매 발주서"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Purchase Order"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"발주서 번호:"})," ",g]}),e.jsxs("p",{children:[e.jsx("strong",{children:"작성일:"})," ",new Date().toLocaleDateString("ko-KR")]}),e.jsxs("p",{children:[e.jsx("strong",{children:"현장:"})," ",n.site]})]}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"납품 희망일:"})," ",n.deliveryDate]}),e.jsxs("p",{children:[e.jsx("strong",{children:"자재 인수자:"})," ",n.receiver]}),e.jsxs("p",{children:[e.jsx("strong",{children:"본사 담당자:"})," ",n.manager]})]})]}),e.jsx("div",{className:"border border-gray-300",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border border-gray-300 p-1",children:"No"}),e.jsx("th",{className:"border border-gray-300 p-1",children:"대분류"}),e.jsx("th",{className:"border border-gray-300 p-1",children:"중분류"}),e.jsx("th",{className:"border border-gray-300 p-1",children:"소분류"}),e.jsx("th",{className:"border border-gray-300 p-1",children:"품목명"}),e.jsx("th",{className:"border border-gray-300 p-1",children:"규격"}),e.jsx("th",{className:"border border-gray-300 p-1",children:"수량"}),e.jsx("th",{className:"border border-gray-300 p-1",children:"단위"}),e.jsx("th",{className:"border border-gray-300 p-1",children:"단가"}),e.jsx("th",{className:"border border-gray-300 p-1",children:"금액"}),e.jsx("th",{className:"border border-gray-300 p-1",children:"납품처"})]})}),e.jsxs("tbody",{children:[x.map((s,a)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 p-1 text-center",children:a+1}),e.jsx("td",{className:"border border-gray-300 p-1",children:s.category}),e.jsx("td",{className:"border border-gray-300 p-1",children:s.subCategory1}),e.jsx("td",{className:"border border-gray-300 p-1",children:s.subCategory2}),e.jsx("td",{className:"border border-gray-300 p-1",children:s.item}),e.jsx("td",{className:"border border-gray-300 p-1",children:s.name}),e.jsx("td",{className:"border border-gray-300 p-1 text-right",children:s.quantity}),e.jsx("td",{className:"border border-gray-300 p-1 text-center",children:s.unit}),e.jsx("td",{className:"border border-gray-300 p-1 text-right",children:q(parseInt(s.unitPrice)||0)}),e.jsx("td",{className:"border border-gray-300 p-1 text-right",children:q(s.price)}),e.jsx("td",{className:"border border-gray-300 p-1",children:s.deliveryLocation})]},a)),e.jsxs("tr",{className:"bg-gray-50 font-semibold",children:[e.jsx("td",{colSpan:9,className:"border border-gray-300 p-1 text-center",children:"합계"}),e.jsx("td",{className:"border border-gray-300 p-1 text-right",children:q(h)}),e.jsx("td",{className:"border border-gray-300 p-1"})]})]})]})}),n.notes&&e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{children:e.jsx("strong",{children:"특이사항:"})}),e.jsx("p",{className:"mt-1 p-2 bg-gray-50 border",children:n.notes})]}),e.jsxs("div",{className:"grid grid-cols-5 gap-4 text-xs mt-8",children:[e.jsxs("div",{className:"border border-gray-300 p-2 text-center",children:[e.jsx("p",{className:"font-semibold",children:"담당"}),e.jsx("div",{className:"h-12"})]}),e.jsxs("div",{className:"border border-gray-300 p-2 text-center",children:[e.jsx("p",{className:"font-semibold",children:"공무"}),e.jsx("div",{className:"h-12"})]}),e.jsxs("div",{className:"border border-gray-300 p-2 text-center",children:[e.jsx("p",{className:"font-semibold",children:"팀장"}),e.jsx("div",{className:"h-12"})]}),e.jsxs("div",{className:"border border-gray-300 p-2 text-center",children:[e.jsx("p",{className:"font-semibold",children:"임원"}),e.jsx("div",{className:"h-12"})]}),e.jsxs("div",{className:"border border-gray-300 p-2 text-center",children:[e.jsx("p",{className:"font-semibold",children:"사장"}),e.jsx("div",{className:"h-12"})]})]}),e.jsxs("div",{className:"text-center text-sm mt-8",children:[e.jsx("p",{className:"font-semibold",children:"회사명"}),e.jsx("p",{children:"주소: 서울특별시 강남구"}),e.jsx("p",{children:"전화: 02-1234-5678 | 팩스: 02-1234-5679"})]})]})})]})})}function Oe({approvalStatus:c,onStatusChange:p,onSaveDraft:n,onSendEmail:x,onRequestApproval:g,onSkipApproval:h}){const s=a=>{switch(a){case"draft":return e.jsxs(L,{variant:"secondary",className:"gap-1",children:[e.jsx(K,{className:"h-3 w-3"}),"작성중"]});case"pending":return e.jsxs(L,{variant:"outline",className:"gap-1",children:[e.jsx(K,{className:"h-3 w-3"}),"승인 대기중"]});case"approved":return e.jsxs(L,{variant:"default",className:"gap-1 bg-green-500",children:[e.jsx(V,{className:"h-3 w-3"}),"승인 완료"]});case"rejected":return e.jsxs(L,{variant:"destructive",className:"gap-1",children:[e.jsx(O,{className:"h-3 w-3"}),"승인 반려"]});case"skipped":return e.jsxs(L,{variant:"outline",className:"gap-1",children:[e.jsx(O,{className:"h-3 w-3"}),"승인 생략"]});default:return null}};return e.jsxs(S,{className:"shadow-sm hover:shadow-md transition-shadow",children:[e.jsx(k,{className:"bg-gray-50 border-b",children:e.jsxs(P,{className:"text-lg font-semibold text-gray-900 flex items-center justify-between",children:["승인 워크플로우",s(c)]})}),e.jsx(I,{className:"p-4",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(N,{variant:"outline",onClick:n,className:"gap-2",children:[e.jsx(Ie,{className:"h-4 w-4"}),"임시저장"]}),e.jsxs(N,{variant:"outline",onClick:x,className:"gap-2",children:[e.jsx(De,{className:"h-4 w-4"}),"이메일 발송"]}),e.jsxs(N,{variant:"default",onClick:g,className:"gap-2",children:[e.jsx(O,{className:"h-4 w-4"}),"승인 요청"]}),e.jsxs(N,{variant:"default",onClick:h,className:"gap-2",children:[e.jsx(V,{className:"h-4 w-4"}),"승인 생략"]})]})})]})}function cs(){ce();const[c,p]=v.useState({site:"",deliveryDate:"",isNegotiable:!1,receiver:"",manager:"",notes:"",items:[]}),[n,x]=v.useState([M()]),[g,h]=v.useState([]);v.useState(!1);const[s,a]=v.useState("draft"),[r]=v.useState(Ne());v.useState(!0);const[t,i]=v.useState(!1);v.useState(100);const{data:u=[]}=F({queryKey:["/api/projects"],select:d=>d?.filter(m=>m.isActive)||[]}),{data:o=[]}=F({queryKey:["/api/users"],select:d=>d?.filter(m=>m.isActive)||[]}),{data:R=[]}=F({queryKey:["/api/vendors"],select:d=>d?.filter(m=>m.isActive)||[]}),E=d=>{p(m=>({...m,...d}))},Z=(d,m,A)=>{const b=[...n];b[d]={...b[d],[m]:A},(m==="quantity"||m==="unitPrice")&&(b[d].price=G(b[d].quantity,b[d].unitPrice)),x(b)},_=()=>{const d=n[n.length-1],m=d?{...d,quantity:"",unitPrice:"",price:0}:M();x([...n,m])},Q=d=>{if(n.length>1){const m=n.filter((A,b)=>b!==d);x(m)}},$=d=>{const m={...n[d]},A=[...n];A.splice(d+1,0,m),x(A)},J=d=>{h(d)},X=()=>{p(d=>({...d,items:n})),i(!0)},Y=d=>{a(d)};n.reduce((d,m)=>d+(m.price||0),0);const ee=()=>{switch(s){case"draft":return e.jsxs("div",{className:"bg-gray-100 text-gray-800 px-2 py-1 rounded text-xs font-medium flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full"}),"작성중"]});case"pending":return e.jsxs("div",{className:"bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs font-medium flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),"승인 대기중"]});case"approved":return e.jsxs("div",{className:"bg-green-100 text-green-800 px-2 py-1 rounded text-xs font-medium flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"승인 완료"]});case"skipped":return e.jsxs("div",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs font-medium flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),"승인 생략"]});default:return null}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-[1366px] mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(T,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"표준 발주서 작성"}),e.jsx("p",{className:"text-sm text-gray-600",children:"통합된 표준 발주서를 작성합니다"})]}),ee()]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-white border px-2 py-1 rounded text-xs",children:r}),e.jsx("div",{className:"bg-white border px-2 py-1 rounded text-xs",children:new Date().toLocaleDateString("ko-KR")})]})]}),e.jsxs(S,{className:"shadow-sm",children:[e.jsx(k,{className:"bg-gray-50 border-b p-3",children:e.jsxs(P,{className:"text-base font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(T,{className:"h-4 w-4 text-blue-600"}),"기본 정보 입력"]})}),e.jsx(I,{className:"p-3",children:e.jsx(Le,{formData:c,onFormDataChange:E,projects:u,users:o,poNumber:r})})]}),e.jsxs(S,{className:"shadow-sm",children:[e.jsx(k,{className:"bg-gray-50 border-b p-3",children:e.jsxs(P,{className:"text-base font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(T,{className:"h-4 w-4 text-blue-600"}),"품목 정보 입력"]})}),e.jsx(I,{className:"p-3",children:e.jsx(qe,{items:n,onItemChange:Z,onAddItem:_,onRemoveItem:Q,onCopyItem:$,vendors:R})})]}),e.jsxs(S,{className:"shadow-sm",children:[e.jsx(k,{className:"bg-gray-50 border-b p-3",children:e.jsxs(P,{className:"text-base font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(T,{className:"h-4 w-4 text-blue-600"}),"파일 첨부"]})}),e.jsx(I,{className:"p-3",children:e.jsx(Fe,{uploadedFiles:g,onFilesChange:J})})]}),e.jsxs(S,{className:"shadow-sm",children:[e.jsx(k,{className:"bg-gray-50 border-b p-3",children:e.jsxs(P,{className:"text-base font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(T,{className:"h-4 w-4 text-blue-600"}),"승인 및 제출 관리"]})}),e.jsx(I,{className:"p-3",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(Oe,{approvalStatus:s,onStatusChange:Y,onSaveDraft:()=>console.log("Save draft"),onSendEmail:()=>console.log("Send email"),onRequestApproval:()=>console.log("Request approval"),onSkipApproval:()=>console.log("Skip approval")}),e.jsx("div",{className:"pt-3 border-t",children:e.jsxs(N,{onClick:X,className:"w-full gap-2",size:"lg",children:[e.jsx(ne,{className:"w-4 h-4"}),"PDF 미리보기"]})})]})})]})]})}),e.jsx(Ee,{isOpen:t,onClose:()=>i(!1),formData:c,items:n,poNumber:r})]})}export{cs as default};
