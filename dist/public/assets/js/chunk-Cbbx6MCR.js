import{r as i,u as Y,a as U,j as e,S as ys,C as Pe,U as Ne,D as fs,R as bs,b as Ye,c as xe,B as Le,d as ze,e as ws,F as Re,f as X,X as Cs,L as es,G as ss,P as ue,g as Oe,T as ie,M as Ss,h as As,i as ks,k as Ts,l as Ls,m as Us,n as Qe,o as Fs,p as Is,I as Es,q as qs,Z as Ds,s as _s}from"./chunk-Dd62wDmJ.js";import{u as Ue,a as w,q as E,C as q,b as H,c as me,d as he,e as Ks,L as ye,T as as,f as ts,g as Z,h as J,A as $e,i as Be,S as ge,B as ce,I as d,j as Ms,k as n,l as ls,F as je,m as o,n as x,o as m,p as h,r as j,s as Vs,t as Ps,v as He,w as de,x as zs,y as oe,z as Ge,D as We,R as re,E as Xe,G as Rs,H as Os,J as Qs,K as $s,M as Bs,N as Hs,O as Gs,P as Ws,Q as Xs,U as Zs,V as fe,W as be,X as we,Y as Ce,Z as Se,_ as Ae,$ as ke,a0 as Te,a1 as ns,a2 as B,a3 as Js,a4 as Ze,a5 as Ys}from"./index-Bmw6lq1s.js";import{u as is}from"./chunk-CztufZQ6.js";import{t as pe,z as t}from"./chunk-Szeu1KvF.js";const Je=[{value:"field_worker",label:"í˜„ì¥ ì‹¤ë¬´ì",color:"bg-gray-100"},{value:"project_manager",label:"í˜„ì¥ ê´€ë¦¬ì",color:"bg-blue-100"},{value:"hq_management",label:"ë³¸ì‚¬ ê´€ë¦¬ë¶€",color:"bg-orange-100"},{value:"executive",label:"ì„ì›",color:"bg-purple-100"},{value:"admin",label:"ì‹œìŠ¤í…œ ê´€ë¦¬ì",color:"bg-red-100"}];function ea(){const{toast:y}=Ue(),[A,D]=i.useState("staged"),[r,S]=i.useState([]),[_,F]=i.useState({field_worker:0,project_manager:5e6,hq_management:3e7,executive:1e8,admin:999999999}),[ee,G]=i.useState(!0),[f,k]=i.useState(!1),{data:p,isLoading:u}=Y({queryKey:["/api/admin/approval-workflow-settings"]}),g=U({mutationFn:async l=>await w("PUT","/api/admin/approval-workflow-settings",l),onSuccess:()=>{y({title:"ì„±ê³µ",description:"ìŠ¹ì¸ ì›Œí¬í”Œë¡œìš° ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤."}),E.invalidateQueries({queryKey:["/api/admin/approval-workflow-settings"]})},onError:()=>{y({title:"ì˜¤ë¥˜",description:"ì„¤ì • ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",variant:"destructive"})}});i.useEffect(()=>{p&&(D(p.approvalMode),S(p.directApprovalRoles||[]),F(p.stagedApprovalThresholds||_),G(p.requireAllStages??!0),k(p.skipLowerStages??!1))},[p]);const I=l=>{S(C=>C.includes(l)?C.filter(M=>M!==l):[...C,l])},se=(l,C)=>{const M=parseInt(C.replace(/[^0-9]/g,""))||0;F(ae=>({...ae,[l]:M}))},K=()=>{g.mutate({approvalMode:A,directApprovalRoles:r,stagedApprovalThresholds:_,requireAllStages:ee,skipLowerStages:f})},N=()=>{p&&(D(p.approvalMode),S(p.directApprovalRoles||[]),F(p.stagedApprovalThresholds||_),G(p.requireAllStages??!0),k(p.skipLowerStages??!1))};return u?e.jsx(q,{children:e.jsx(H,{className:"p-6",children:e.jsx("div",{className:"text-center text-gray-500",children:"ì„¤ì •ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."})})}):e.jsxs(q,{children:[e.jsxs(me,{children:[e.jsxs(he,{className:"flex items-center gap-2",children:[e.jsx(ys,{className:"h-5 w-5"}),"ìŠ¹ì¸ ì›Œí¬í”Œë¡œìš° ì„¤ì •"]}),e.jsx(Ks,{children:"ë°œì£¼ì„œ ìŠ¹ì¸ í”„ë¡œì„¸ìŠ¤ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. ì§ì ‘ ìŠ¹ì¸ ë˜ëŠ” ë‹¨ê³„ë³„ ìŠ¹ì¸ ë°©ì‹ì„ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."})]}),e.jsxs(H,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(ye,{children:"ìŠ¹ì¸ ë°©ì‹"}),e.jsxs(as,{value:A,onValueChange:l=>D(l),children:[e.jsxs(ts,{className:"grid w-full grid-cols-2",children:[e.jsx(Z,{value:"direct",children:"ì§ì ‘ ìŠ¹ì¸"}),e.jsx(Z,{value:"staged",children:"ë‹¨ê³„ë³„ ìŠ¹ì¸"})]}),e.jsxs(J,{value:"direct",className:"space-y-4",children:[e.jsxs($e,{children:[e.jsx(Pe,{className:"h-4 w-4"}),e.jsx(Be,{children:"ì§ì ‘ ìŠ¹ì¸ ë°©ì‹ì—ì„œëŠ” ì„ íƒëœ ì—­í• ì´ ê¸ˆì•¡ ì œí•œ ì—†ì´ ë°”ë¡œ ìŠ¹ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(ye,{children:"ì§ì ‘ ìŠ¹ì¸ ê°€ëŠ¥ ì—­í• "}),e.jsx("div",{className:"space-y-2",children:Je.map(l=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ge,{checked:r.includes(l.value),onCheckedChange:()=>I(l.value)}),e.jsx("span",{className:"font-medium",children:l.label})]}),e.jsx(ce,{className:l.color,variant:"secondary",children:r.includes(l.value)?"ìŠ¹ì¸ ê°€ëŠ¥":"ìŠ¹ì¸ ë¶ˆê°€"})]},l.value))})]})]}),e.jsxs(J,{value:"staged",className:"space-y-4",children:[e.jsxs($e,{children:[e.jsx(Pe,{className:"h-4 w-4"}),e.jsx(Be,{children:"ë‹¨ê³„ë³„ ìŠ¹ì¸ ë°©ì‹ì—ì„œëŠ” ê° ì—­í• ë³„ ìŠ¹ì¸ ê¸ˆì•¡ í•œë„ê°€ ì ìš©ë©ë‹ˆë‹¤."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(ye,{children:"ì—­í• ë³„ ìŠ¹ì¸ ê¸ˆì•¡ í•œë„"}),e.jsx("div",{className:"space-y-2",children:Je.map(l=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ne,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-medium min-w-[120px]",children:l.label})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fs,{className:"h-4 w-4 text-gray-500"}),e.jsx(d,{type:"text",value:Ms(_[l.value]||0),onChange:C=>se(l.value,C.target.value),className:"w-40 text-right",disabled:l.value==="field_worker"})]})]},l.value))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(ye,{children:"ì¶”ê°€ ì˜µì…˜"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium",children:"ëª¨ë“  ë‹¨ê³„ ìŠ¹ì¸ í•„ìš”"}),e.jsx("div",{className:"text-sm text-gray-500",children:"ëª¨ë“  í•„ìš”í•œ ìŠ¹ì¸ ë‹¨ê³„ë¥¼ ê±°ì³ì•¼ ìµœì¢… ìŠ¹ì¸ë©ë‹ˆë‹¤."})]}),e.jsx(ge,{checked:ee,onCheckedChange:G})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium",children:"ìƒìœ„ ì—­í•  í•˜ìœ„ ë‹¨ê³„ ê±´ë„ˆë›°ê¸°"}),e.jsx("div",{className:"text-sm text-gray-500",children:"ìƒìœ„ ì—­í• ì´ í•˜ìœ„ ë‹¨ê³„ì˜ ìŠ¹ì¸ì„ ê±´ë„ˆë›¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤."})]}),e.jsx(ge,{checked:f,onCheckedChange:k})]})]})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsxs(n,{variant:"outline",onClick:N,children:[e.jsx(bs,{className:"h-4 w-4 mr-2"}),"ì´ˆê¸°í™”"]}),e.jsxs(n,{onClick:K,disabled:g.isPending,children:[e.jsx(Ye,{className:"h-4 w-4 mr-2"}),g.isPending?"ì €ì¥ ì¤‘...":"ì„¤ì • ì €ì¥"]})]})]})]})}const sa=t.object({companyName:t.string().min(1,"íšŒì‚¬ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”"),businessNumber:t.string().min(1,"ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”"),address:t.string().min(1,"ì£¼ì†Œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”"),phone:t.string().min(1,"ì „í™”ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”"),fax:t.string().optional(),email:t.string().email("ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì„ ì…ë ¥í•´ì£¼ì„¸ìš”").optional().or(t.literal("")),website:t.string().optional(),representative:t.string().min(1,"ëŒ€í‘œìëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”")}),aa=t.object({name:t.string().min(1,"ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”"),email:t.string().email("ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì„ ì…ë ¥í•´ì£¼ì„¸ìš”"),phoneNumber:t.string().min(1,"ì „í™”ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”"),role:t.enum(["field_worker","project_manager","hq_management","executive","admin"])}),ta=t.object({termKey:t.string().min(1,"ìš©ì–´ í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”"),termValue:t.string().min(1,"ìš©ì–´ ê°’ì„ ì…ë ¥í•´ì£¼ì„¸ìš”"),category:t.string().min(1,"ì¹´í…Œê³ ë¦¬ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”"),description:t.string().optional(),isActive:t.boolean().default(!0)}),la=t.object({role:t.enum(["field_worker","project_manager","hq_management","executive"]),maxAmount:t.number().min(0,"ê¸ˆì•¡ì€ 0 ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤"),description:t.string().optional()});function na(){const{user:y,isAuthenticated:A,isLoading:D}=ls(),{toast:r}=Ue(),[,S]=is(),[_,F]=i.useState(!1);i.useState(null);const[ee,G]=i.useState("company"),[f,k]=i.useState(""),[p,u]=i.useState(!1),[g,I]=i.useState(null),[se,K]=i.useState(!1),[N,l]=i.useState(null),[C,M]=i.useState(""),[ae,O]=i.useState(!1),[V,W]=i.useState(null);i.useState(null);const[te,le]=i.useState("list"),[Q,ve]=i.useState(null),[ne,a]=i.useState("asc"),{data:c=[],isLoading:P}=Y({queryKey:["/api/users"],enabled:!!y&&y.role==="admin"}),{data:rs=[],isLoading:da}=Y({queryKey:["/api/companies"],enabled:!!y&&y.role==="admin"}),{data:Fe=[],isLoading:cs}=Y({queryKey:["/api/terminology"],enabled:!!y&&y.role==="admin"}),{data:Ie=[],isLoading:ds}=Y({queryKey:["/api/approval-authorities"],enabled:!!y&&y.role==="admin"}),v=rs[0],z=xe({resolver:pe(sa),defaultValues:{companyName:"",businessNumber:"",address:"",phone:"",fax:"",email:"",website:"",representative:""}}),T=xe({resolver:pe(aa),defaultValues:{name:"",email:"",phoneNumber:"",role:"field_worker"}}),L=xe({resolver:pe(ta),defaultValues:{termKey:"",termValue:"",category:"",description:"",isActive:!0}}),R=xe({resolver:pe(la),defaultValues:{role:"field_worker",maxAmount:0,description:""}});if(i.useEffect(()=>{v&&z.reset({companyName:v.companyName||"",businessNumber:v.businessNumber||"",address:v.address||"",phone:v.phone||"",fax:v.fax||"",email:v.email||"",website:v.website||"",representative:v.representative||""})},[v,z]),i.useEffect(()=>{g&&T.reset({name:g.name||"",email:g.email||"",phoneNumber:g.phoneNumber||"",role:g.role||"field_worker"})},[g,T]),i.useEffect(()=>{N&&L.reset({termKey:N.termKey||"",termValue:N.termValue||"",category:N.category||"",description:N.description||"",isActive:N.isActive??!0})},[N,L]),D)return e.jsx("div",{className:"flex justify-center items-center h-screen",children:"ë¡œë”© ì¤‘..."});if(!A||!y||y.role!=="admin")return S("/login"),null;const Ee=c.filter(s=>(s.name?.toLowerCase()||"").includes(f.toLowerCase())||(s.email?.toLowerCase()||"").includes(f.toLowerCase())||(s.phoneNumber?.toLowerCase()||"").includes(f.toLowerCase())).sort((s,b)=>{if(!Q)return 0;const $=s[Q]??"",Ve=b[Q]??"";return ne==="asc"?String($).localeCompare(String(Ve)):String(Ve).localeCompare(String($))}),os=Fe.filter(s=>s.termKey.toLowerCase().includes(C.toLowerCase())||s.termValue.toLowerCase().includes(C.toLowerCase())||s.category.toLowerCase().includes(C.toLowerCase())),qe=U({mutationFn:s=>v?w("PUT",`/api/companies/${v.id}`,s):w("POST","/api/companies",s),onSuccess:()=>{r({title:"ì„±ê³µ",description:"íšŒì‚¬ ì •ë³´ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤."}),E.invalidateQueries({queryKey:["/api/companies"]}),F(!1)},onError:()=>{r({title:"ì˜¤ë¥˜",description:"íšŒì‚¬ ì •ë³´ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",variant:"destructive"})}}),De=U({mutationFn:s=>g?w("PUT",`/api/users/${g.id}`,s):w("POST","/api/users",s),onSuccess:()=>{r({title:"ì„±ê³µ",description:g?"ì‚¬ìš©ìê°€ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.":"ì‚¬ìš©ìê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤."}),E.invalidateQueries({queryKey:["/api/users"]}),u(!1),I(null),T.reset()},onError:()=>{r({title:"ì˜¤ë¥˜",description:"ì‚¬ìš©ì ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",variant:"destructive"})}}),_e=U({mutationFn:s=>N?w("PUT",`/api/terminology/${N.id}`,s):w("POST","/api/terminology",s),onSuccess:()=>{r({title:"ì„±ê³µ",description:N?"ìš©ì–´ê°€ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.":"ìš©ì–´ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤."}),E.invalidateQueries({queryKey:["/api/terminology"]}),K(!1),l(null),L.reset()},onError:()=>{r({title:"ì˜¤ë¥˜",description:"ìš©ì–´ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",variant:"destructive"})}}),xs=U({mutationFn:s=>w("DELETE",`/api/terminology/${s}`),onSuccess:()=>{r({title:"ì„±ê³µ",description:"ìš©ì–´ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤."}),E.invalidateQueries({queryKey:["/api/terminology"]})},onError:()=>{r({title:"ì˜¤ë¥˜",description:"ìš©ì–´ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",variant:"destructive"})}}),Ke=U({mutationFn:({userId:s,isActive:b})=>w("PATCH",`/api/users/${s}/toggle-active`,{isActive:b}),onSuccess:()=>{r({title:"ì„±ê³µ",description:"ì‚¬ìš©ì ìƒíƒœê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤."}),E.invalidateQueries({queryKey:["/api/users"]})},onError:()=>{r({title:"ì˜¤ë¥˜",description:"ì‚¬ìš©ì ìƒíƒœ ë³€ê²½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",variant:"destructive"})}}),Me=U({mutationFn:s=>s.id?w("PUT",`/api/approval-authorities/${s.id}`,s):w("POST","/api/approval-authorities",s),onSuccess:()=>{r({title:"ì„±ê³µ",description:V?"ìŠ¹ì¸ ê¶Œí•œì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.":"ìŠ¹ì¸ ê¶Œí•œì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤."}),E.invalidateQueries({queryKey:["/api/approval-authorities"]}),O(!1),W(null),R.reset()},onError:()=>{r({title:"ì˜¤ë¥˜",description:"ìŠ¹ì¸ ê¶Œí•œ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",variant:"destructive"})}}),ms=U({mutationFn:s=>w("DELETE",`/api/approval-authorities/${s}`),onSuccess:()=>{r({title:"ì„±ê³µ",description:"ìŠ¹ì¸ ê¶Œí•œì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤."}),E.invalidateQueries({queryKey:["/api/approval-authorities"]})},onError:()=>{r({title:"ì˜¤ë¥˜",description:"ìŠ¹ì¸ ê¶Œí•œ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",variant:"destructive"})}}),hs=s=>{qe.mutate(s)},js=s=>{De.mutate(s)},ps=s=>{_e.mutate(s)},us=s=>{const b=V?{...s,id:V.id}:s;Me.mutate(b)},gs=s=>{W(s),R.reset({role:s.role,maxAmount:parseFloat(s.maxAmount),description:s.description||""}),O(!0)},Ns=s=>{Q===s?a(ne==="asc"?"desc":"asc"):(ve(s),a("asc"))},vs=(s,b,$)=>b!==s?null:$==="asc"?e.jsx(Ts,{className:"h-3 w-3"}):e.jsx(Ls,{className:"h-3 w-3"});return e.jsxs("div",{className:"p-6 max-w-[1366px] mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(Le,{className:"h-6 w-6"}),"ì‹œìŠ¤í…œ ê´€ë¦¬"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"ì‚¬ìš©ì ë° ì‹œìŠ¤í…œ ì„¤ì •ì„ ê´€ë¦¬í•˜ì„¸ìš”"})]}),e.jsxs(as,{value:ee,onValueChange:G,className:"w-full",children:[e.jsxs(ts,{className:"grid w-full grid-cols-5",children:[e.jsxs(Z,{value:"company",className:"flex items-center gap-2 text-sm",children:[e.jsx(Le,{className:"h-4 w-4"}),"íšŒì‚¬ ì •ë³´"]}),e.jsxs(Z,{value:"users",className:"flex items-center gap-2 text-sm",children:[e.jsx(Ne,{className:"h-4 w-4"}),"ì‚¬ìš©ì ê´€ë¦¬"]}),e.jsxs(Z,{value:"approval",className:"flex items-center gap-2 text-sm",children:[e.jsx(ze,{className:"h-4 w-4"}),"ìŠ¹ì¸ ê¶Œí•œ"]}),e.jsxs(Z,{value:"workflow",className:"flex items-center gap-2 text-sm",children:[e.jsx(ws,{className:"h-4 w-4"}),"ì›Œí¬í”Œë¡œìš°"]}),e.jsxs(Z,{value:"terminology",className:"flex items-center gap-2 text-sm",children:[e.jsx(Re,{className:"h-4 w-4"}),"ìš©ì–´ì§‘ ê´€ë¦¬"]})]}),e.jsx(J,{value:"company",className:"mt-2",children:e.jsxs(q,{children:[e.jsx(me,{className:"pb-1",children:e.jsxs(he,{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Le,{className:"h-4 w-4"}),e.jsx("span",{children:"íšŒì‚¬ ì •ë³´"})]}),!_&&e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>F(!0),className:"gap-1 h-6 px-2 text-xs",children:[e.jsx(X,{className:"h-3 w-3"}),"ìˆ˜ì •"]})]})}),e.jsx(H,{className:"pt-1",children:_?e.jsx(je,{...z,children:e.jsxs("form",{onSubmit:z.handleSubmit(hs),className:"space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(o,{control:z.control,name:"companyName",render:({field:s})=>e.jsxs(x,{children:[e.jsx(m,{className:"text-xs",children:"íšŒì‚¬ëª…"}),e.jsx(h,{children:e.jsx(d,{...s,className:"h-7 text-xs"})}),e.jsx(j,{className:"text-xs"})]})}),e.jsx(o,{control:z.control,name:"businessNumber",render:({field:s})=>e.jsxs(x,{children:[e.jsx(m,{className:"text-xs",children:"ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸"}),e.jsx(h,{children:e.jsx(d,{...s,className:"h-7 text-xs"})}),e.jsx(j,{className:"text-xs"})]})}),e.jsx(o,{control:z.control,name:"representative",render:({field:s})=>e.jsxs(x,{children:[e.jsx(m,{className:"text-xs",children:"ëŒ€í‘œì"}),e.jsx(h,{children:e.jsx(d,{...s,className:"h-7 text-xs"})}),e.jsx(j,{className:"text-xs"})]})}),e.jsx(o,{control:z.control,name:"phone",render:({field:s})=>e.jsxs(x,{children:[e.jsx(m,{className:"text-xs",children:"ì „í™”ë²ˆí˜¸"}),e.jsx(h,{children:e.jsx(d,{...s,className:"h-7 text-xs"})}),e.jsx(j,{className:"text-xs"})]})}),e.jsx(o,{control:z.control,name:"address",render:({field:s})=>e.jsxs(x,{className:"col-span-2",children:[e.jsx(m,{className:"text-xs",children:"ì£¼ì†Œ"}),e.jsx(h,{children:e.jsx(d,{...s,className:"h-7 text-xs"})}),e.jsx(j,{className:"text-xs"})]})})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(n,{type:"submit",size:"sm",disabled:qe.isPending,className:"gap-1 h-6 px-2 text-xs",children:[e.jsx(Ye,{className:"h-3 w-3"}),"ì €ì¥"]}),e.jsxs(n,{type:"button",variant:"outline",size:"sm",onClick:()=>F(!1),className:"gap-1 h-6 px-2 text-xs",children:[e.jsx(Cs,{className:"h-3 w-3"}),"ì·¨ì†Œ"]})]})]})}):e.jsx("div",{className:"space-y-3",children:v?e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"font-medium text-gray-500 min-w-[60px]",children:"íšŒì‚¬ëª…:"}),e.jsx("span",{className:"text-gray-900",children:v.companyName})]}),e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"font-medium text-gray-500 min-w-[80px]",children:"ì‚¬ì—…ìë²ˆí˜¸:"}),e.jsx("span",{className:"text-gray-900",children:v.businessNumber})]}),e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"font-medium text-gray-500 min-w-[60px]",children:"ëŒ€í‘œì:"}),e.jsx("span",{className:"text-gray-900",children:v.representative})]}),e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"font-medium text-gray-500 min-w-[60px]",children:"ì „í™”ë²ˆí˜¸:"}),e.jsx("span",{className:"text-gray-900",children:v.phone})]}),e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded col-span-2",children:[e.jsx("span",{className:"font-medium text-gray-500 min-w-[40px]",children:"ì£¼ì†Œ:"}),e.jsx("span",{className:"text-gray-900",children:v.address})]})]}):e.jsx("div",{className:"text-xs text-center py-4 text-gray-500",children:"íšŒì‚¬ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤. ì¶”ê°€í•´ì£¼ì„¸ìš”."})})})]})}),e.jsx(J,{value:"users",className:"mt-2",children:e.jsxs(q,{children:[e.jsx(me,{className:"pb-1",children:e.jsxs(he,{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ne,{className:"h-4 w-4"}),e.jsx("span",{children:"ì‚¬ìš©ì ê´€ë¦¬"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center bg-gray-100 rounded p-1",children:[e.jsx(n,{variant:te==="list"?"default":"ghost",size:"sm",onClick:()=>le("list"),className:"h-8 w-8 p-0",title:"ë¦¬ìŠ¤íŠ¸ ë³´ê¸°",children:e.jsx(es,{className:"h-4 w-4"})}),e.jsx(n,{variant:te==="card"?"default":"ghost",size:"sm",onClick:()=>le("card"),className:"h-8 w-8 p-0",title:"ì¹´ë“œ ë³´ê¸°",children:e.jsx(ss,{className:"h-4 w-4"})})]}),e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>u(!0),className:"gap-1 h-6 px-2 text-xs",children:[e.jsx(ue,{className:"h-3 w-3"}),"ì‚¬ìš©ì ì¶”ê°€"]})]})]})}),e.jsx(H,{className:"pt-1",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Oe,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-3 w-3 text-gray-400"}),e.jsx(d,{placeholder:"ì‚¬ìš©ì ê²€ìƒ‰...",value:f,onChange:s=>k(s.target.value),className:"h-7 text-xs pl-7"})]})}),P?e.jsx("div",{className:"text-xs text-center py-4",children:"ì‚¬ìš©ì ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."}):te==="list"?e.jsxs(Vs,{children:[e.jsx(Ps,{children:e.jsxs(He,{children:[e.jsx(de,{className:"px-3 py-3 text-xs cursor-pointer hover:bg-gray-50",onClick:()=>Ns("name"),children:e.jsxs("div",{className:"flex items-center gap-1",children:["ì´ë¦„",vs("name",Q,ne)]})}),e.jsx(de,{className:"px-3 py-3 text-xs",children:"ì—­í• "}),e.jsx(de,{className:"px-3 py-3 text-xs",children:"ì—°ë½ì²˜"}),e.jsx(de,{className:"px-3 py-3 text-xs",children:"ìƒíƒœ"}),e.jsx(de,{className:"px-3 py-3 text-xs text-center",children:"ì‘ì—…"})]})}),e.jsx(zs,{children:Ee.map(s=>e.jsxs(He,{className:"hover:bg-gray-50",children:[e.jsx(oe,{className:"px-3 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"h-6 w-6",children:e.jsx(We,{className:"text-xs",children:s.name?.[0]||"U"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-xs text-gray-900",children:s.name}),e.jsx("div",{className:"text-xs text-gray-500",children:s.email})]})]})}),e.jsx(oe,{className:"px-3 py-3",children:e.jsx(re,{role:s.role})}),e.jsx(oe,{className:"px-3 py-3 text-xs",children:s.phoneNumber}),e.jsx(oe,{className:"px-3 py-3",children:e.jsx(ge,{checked:s.isActive??!0,onCheckedChange:b=>Ke.mutate({userId:s.id,isActive:b}),className:"h-4 w-7"})}),e.jsx(oe,{className:"px-3 py-3",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>I(s),className:"h-6 w-6 p-0",title:"ìˆ˜ì •",children:e.jsx(X,{className:"h-3 w-3"})}),e.jsx(Xe,{user:s,onDeleteSuccess:()=>{E.invalidateQueries({queryKey:["/api/users"]}),r({title:"ì„±ê³µ",description:"ì‚¬ìš©ìê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤."})},trigger:e.jsx(n,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-red-600 hover:text-red-700",title:"ì‚­ì œ",children:e.jsx(ie,{className:"h-3 w-3"})})})]})})]},s.id))})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-3",children:Ee.map(s=>e.jsxs(q,{className:"p-3",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(Ge,{className:"h-8 w-8",children:e.jsx(We,{className:"text-sm",children:s.name?.[0]||"U"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-sm text-gray-900",children:s.name}),e.jsx(re,{role:s.role})]})]}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ss,{className:"h-3 w-3 text-gray-400"}),e.jsx("span",{className:"text-gray-600",children:s.email})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(As,{className:"h-3 w-3 text-gray-400"}),e.jsx("span",{className:"text-gray-600",children:s.phoneNumber})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ks,{className:"h-3 w-3 text-gray-400"}),e.jsx("span",{className:"text-gray-600",children:new Date(s.createdAt).toLocaleDateString("ko-KR")})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t",children:[e.jsx(ge,{checked:s.isActive??!0,onCheckedChange:b=>Ke.mutate({userId:s.id,isActive:b}),className:"h-4 w-7"}),e.jsxs("div",{className:"flex items-center -space-x-1",children:[e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>I(s),className:"h-8 w-8 p-0 hover:bg-blue-50",title:"ìˆ˜ì •",children:e.jsx(X,{className:"h-4 w-4 text-blue-600"})}),e.jsx(Xe,{user:s,onDeleteSuccess:()=>{E.invalidateQueries({queryKey:["/api/users"]}),r({title:"ì„±ê³µ",description:"ì‚¬ìš©ìê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤."})},trigger:e.jsx(n,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-red-50",title:"ì‚­ì œ",children:e.jsx(ie,{className:"h-4 w-4 text-red-600"})})})]})]})]},s.id))}),e.jsxs("div",{className:"text-xs text-gray-500 pt-1",children:["ì´ ",c.length,"ëª…ì˜ ì‚¬ìš©ìê°€ ë“±ë¡ë˜ì–´ ìˆìŠµë‹ˆë‹¤."]})]})})]})}),e.jsx(J,{value:"terminology",className:"mt-2",children:e.jsxs(q,{children:[e.jsx(me,{className:"pb-1",children:e.jsxs(he,{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Re,{className:"h-4 w-4"}),e.jsx("span",{children:"ìš©ì–´ì§‘ ê´€ë¦¬"})]}),e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>K(!0),className:"gap-1 h-6 px-2 text-xs",children:[e.jsx(ue,{className:"h-3 w-3"}),"ìš©ì–´ ì¶”ê°€"]})]})}),e.jsx(H,{className:"pt-1",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Oe,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-3 w-3 text-gray-400"}),e.jsx(d,{placeholder:"ìš©ì–´ ê²€ìƒ‰...",value:C,onChange:s=>M(s.target.value),className:"h-7 text-xs pl-7"})]})}),cs?e.jsx("div",{className:"text-xs text-center py-4",children:"ìš©ì–´ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."}):e.jsxs("div",{className:"border rounded-md overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-12 gap-2 px-2 py-1 bg-gray-50 text-xs font-medium text-gray-600 border-b",children:[e.jsx("div",{className:"col-span-2",children:"ìš©ì–´ í‚¤"}),e.jsx("div",{className:"col-span-3",children:"ìš©ì–´ ê°’"}),e.jsx("div",{className:"col-span-2",children:"ì¹´í…Œê³ ë¦¬"}),e.jsx("div",{className:"col-span-3",children:"ì„¤ëª…"}),e.jsx("div",{className:"col-span-1",children:"ìƒíƒœ"}),e.jsx("div",{className:"col-span-1 text-center",children:"ì‘ì—…"})]}),os.map(s=>e.jsxs("div",{className:"grid grid-cols-12 gap-2 px-2 py-2 text-xs hover:bg-gray-50 border-b last:border-b-0",children:[e.jsx("div",{className:"col-span-2 font-medium text-gray-900 truncate",children:s.termKey}),e.jsx("div",{className:"col-span-3 text-gray-600 truncate",children:s.termValue}),e.jsx("div",{className:"col-span-2 text-gray-600 truncate",children:s.category}),e.jsx("div",{className:"col-span-3 text-gray-600 truncate",children:s.description||"-"}),e.jsx("div",{className:"col-span-1",children:e.jsx(ce,{variant:s.isActive?"outline":"secondary",children:s.isActive?"í™œì„±":"ë¹„í™œì„±"})}),e.jsxs("div",{className:"col-span-1 flex items-center justify-center gap-1",children:[e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>l(s),className:"h-5 w-5 p-0",title:"ìˆ˜ì •",children:e.jsx(X,{className:"h-3 w-3"})}),e.jsxs(Rs,{children:[e.jsx(Os,{asChild:!0,children:e.jsx(n,{variant:"ghost",size:"sm",className:"h-5 w-5 p-0 text-red-600 hover:text-red-700",title:"ì‚­ì œ",children:e.jsx(ie,{className:"h-3 w-3"})})}),e.jsxs(Qs,{children:[e.jsxs($s,{children:[e.jsx(Bs,{children:"ìš©ì–´ ì‚­ì œ"}),e.jsxs(Hs,{children:[s.termKey," ìš©ì–´ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."]})]}),e.jsxs(Gs,{children:[e.jsx(Ws,{children:"ì·¨ì†Œ"}),e.jsx(Xs,{onClick:()=>xs.mutate(s.id),className:"bg-red-600 hover:bg-red-700",children:"ì‚­ì œ"})]})]})]})]})]},s.id))]}),e.jsxs("div",{className:"text-xs text-gray-500 pt-1",children:["ì´ ",Fe.length,"ê°œì˜ ìš©ì–´ê°€ ë“±ë¡ë˜ì–´ ìˆìŠµë‹ˆë‹¤."]})]})})]})}),e.jsx(J,{value:"approval",className:"mt-2",children:e.jsxs(q,{children:[e.jsx(me,{className:"pb-1",children:e.jsxs(he,{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ze,{className:"h-4 w-4"}),e.jsx("span",{children:"ìŠ¹ì¸ ê¶Œí•œ ì„¤ì •"})]}),e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>O(!0),className:"gap-1 h-6 px-2 text-xs",children:[e.jsx(ue,{className:"h-3 w-3"}),"ê¶Œí•œ ì¶”ê°€"]})]})}),e.jsx(H,{className:"pt-1",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs text-gray-600 mb-3",children:"ê° ì—­í• ë³„ ìŠ¹ì¸ ê¶Œí•œ í•œë„ë¥¼ ì„¤ì •í•˜ì—¬ ë°œì£¼ì„œ ìŠ¹ì¸ í”„ë¡œì„¸ìŠ¤ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤."}),ds?e.jsx("div",{className:"text-center py-4 text-xs text-gray-500",children:"ë¡œë”© ì¤‘..."}):Ie.length===0?e.jsx("div",{className:"text-center py-4 text-xs text-gray-500",children:"ì„¤ì •ëœ ìŠ¹ì¸ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤."}):e.jsx("div",{className:"space-y-1",children:Ie.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded-md",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-xs",children:e.jsx(re,{role:s.role})}),e.jsx("span",{className:"text-blue-600 font-semibold text-xs",children:Zs(parseInt(s.maxAmount))})]}),s.description&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:s.description})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>gs(s),className:"h-6 w-6 p-0 hover:bg-blue-50",children:e.jsx(X,{className:"h-3 w-3"})}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>ms.mutate(s.id),className:"h-6 w-6 p-0 hover:bg-red-50",children:e.jsx(ie,{className:"h-3 w-3 text-red-500"})})]})]},s.id))})]})})]})}),e.jsx(J,{value:"workflow",className:"mt-2",children:e.jsx(ea,{})})]}),(p||g)&&e.jsx(fe,{open:!0,onOpenChange:()=>{u(!1),I(null),T.reset()},children:e.jsxs(be,{children:[e.jsx(we,{children:e.jsx(Ce,{children:g?"ì‚¬ìš©ì ìˆ˜ì •":"ì‚¬ìš©ì ì¶”ê°€"})}),e.jsx(je,{...T,children:e.jsxs("form",{onSubmit:T.handleSubmit(js),className:"space-y-4",children:[e.jsx(o,{control:T.control,name:"name",render:({field:s})=>e.jsxs(x,{children:[e.jsx(m,{children:"ì´ë¦„"}),e.jsx(h,{children:e.jsx(d,{...s})}),e.jsx(j,{})]})}),e.jsx(o,{control:T.control,name:"email",render:({field:s})=>e.jsxs(x,{children:[e.jsx(m,{children:"ì´ë©”ì¼"}),e.jsx(h,{children:e.jsx(d,{...s,type:"email"})}),e.jsx(j,{})]})}),e.jsx(o,{control:T.control,name:"phoneNumber",render:({field:s})=>e.jsxs(x,{children:[e.jsx(m,{children:"ì „í™”ë²ˆí˜¸"}),e.jsx(h,{children:e.jsx(d,{...s})}),e.jsx(j,{})]})}),e.jsx(o,{control:T.control,name:"role",render:({field:s})=>e.jsxs(x,{children:[e.jsx(m,{children:"ì—­í• "}),e.jsxs(Se,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(h,{children:e.jsx(Ae,{children:e.jsx(ke,{placeholder:"ì—­í• ì„ ì„ íƒí•˜ì„¸ìš”"})})}),e.jsx(Te,{children:e.jsx(ns,{children:b=>b.map($=>e.jsx(B,{value:$.value,children:$.label},$.value))})})]}),e.jsx(j,{})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(n,{type:"button",variant:"outline",onClick:()=>{u(!1),I(null),T.reset()},children:"ì·¨ì†Œ"}),e.jsx(n,{type:"submit",disabled:De.isPending,children:g?"ìˆ˜ì •":"ì¶”ê°€"})]})]})})]})}),(se||N)&&e.jsx(fe,{open:!0,onOpenChange:()=>{K(!1),l(null),L.reset()},children:e.jsxs(be,{children:[e.jsx(we,{children:e.jsx(Ce,{children:N?"ìš©ì–´ ìˆ˜ì •":"ìš©ì–´ ì¶”ê°€"})}),e.jsx(je,{...L,children:e.jsxs("form",{onSubmit:L.handleSubmit(ps),className:"space-y-4",children:[e.jsx(o,{control:L.control,name:"termKey",render:({field:s})=>e.jsxs(x,{children:[e.jsx(m,{children:"ìš©ì–´ í‚¤"}),e.jsx(h,{children:e.jsx(d,{...s})}),e.jsx(j,{})]})}),e.jsx(o,{control:L.control,name:"termValue",render:({field:s})=>e.jsxs(x,{children:[e.jsx(m,{children:"ìš©ì–´ ê°’"}),e.jsx(h,{children:e.jsx(d,{...s})}),e.jsx(j,{})]})}),e.jsx(o,{control:L.control,name:"category",render:({field:s})=>e.jsxs(x,{children:[e.jsx(m,{children:"ì¹´í…Œê³ ë¦¬"}),e.jsx(h,{children:e.jsx(d,{...s})}),e.jsx(j,{})]})}),e.jsx(o,{control:L.control,name:"description",render:({field:s})=>e.jsxs(x,{children:[e.jsx(m,{children:"ì„¤ëª…"}),e.jsx(h,{children:e.jsx(d,{...s})}),e.jsx(j,{})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(n,{type:"button",variant:"outline",onClick:()=>{K(!1),l(null),L.reset()},children:"ì·¨ì†Œ"}),e.jsx(n,{type:"submit",disabled:_e.isPending,children:N?"ìˆ˜ì •":"ì¶”ê°€"})]})]})})]})}),(ae||V)&&e.jsx(fe,{open:!0,onOpenChange:()=>{O(!1),W(null),R.reset()},children:e.jsxs(be,{children:[e.jsx(we,{children:e.jsx(Ce,{children:V?"ìŠ¹ì¸ ê¶Œí•œ ìˆ˜ì •":"ìŠ¹ì¸ ê¶Œí•œ ì¶”ê°€"})}),e.jsx(je,{...R,children:e.jsxs("form",{onSubmit:R.handleSubmit(us),className:"space-y-4",children:[e.jsx(o,{control:R.control,name:"role",render:({field:s})=>e.jsxs(x,{children:[e.jsx(m,{children:"ì—­í• "}),e.jsxs(Se,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(h,{children:e.jsx(Ae,{children:e.jsx(ke,{placeholder:"ì—­í• ì„ ì„ íƒí•˜ì„¸ìš”"})})}),e.jsxs(Te,{children:[e.jsx(B,{value:"field_worker",children:"í˜„ì¥ ì‹¤ë¬´ì"}),e.jsx(B,{value:"project_manager",children:"í˜„ì¥ ê´€ë¦¬ì"}),e.jsx(B,{value:"hq_management",children:"ë³¸ì‚¬ ê´€ë¦¬ë¶€"}),e.jsx(B,{value:"executive",children:"ì„ì›/ëŒ€í‘œ"})]})]}),e.jsx(j,{})]})}),e.jsx(o,{control:R.control,name:"maxAmount",render:({field:s})=>e.jsxs(x,{children:[e.jsx(m,{children:"ìµœëŒ€ ìŠ¹ì¸ í•œë„ (ì›)"}),e.jsx(h,{children:e.jsx(d,{...s,type:"number",placeholder:"0",onChange:b=>s.onChange(parseInt(b.target.value)||0)})}),e.jsx(j,{})]})}),e.jsx(o,{control:R.control,name:"description",render:({field:s})=>e.jsxs(x,{children:[e.jsx(m,{children:"ì„¤ëª… (ì„ íƒì‚¬í•­)"}),e.jsx(h,{children:e.jsx(d,{...s,placeholder:"ê¶Œí•œì— ëŒ€í•œ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”"})}),e.jsx(j,{})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(n,{type:"button",variant:"outline",onClick:()=>{O(!1),W(null),R.reset()},children:"ì·¨ì†Œ"}),e.jsx(n,{type:"submit",disabled:Me.isPending,children:V?"ìˆ˜ì •":"ì¶”ê°€"})]})]})})]})})]})}const ja=Object.freeze(Object.defineProperty({__proto__:null,default:na},Symbol.toStringTag,{value:"Module"})),ia=t.object({email:t.string().email("ì˜¬ë°”ë¥¸ ì´ë©”ì¼ ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”"),name:t.string().optional(),positionId:t.string().optional(),phoneNumber:t.string().optional(),role:t.enum(["user","manager","admin"]).default("user")});function ra(){const{user:y}=ls(),{toast:A}=Ue(),D=Us(),[,r]=is(),[S,_]=i.useState(""),[F,ee]=i.useState("list"),[G,f]=i.useState(!1),[k,p]=i.useState(null),u=xe({resolver:pe(ia),defaultValues:{email:"",name:"",positionId:"",phoneNumber:"",role:"user"}}),{data:g=[],isLoading:I}=Y({queryKey:["/api/users"]}),{data:se=[]}=Y({queryKey:["/api/positions"]}),K=U({mutationFn:async a=>{const c={...a,positionId:a.positionId&&a.positionId!==""&&a.positionId!=="none"?parseInt(a.positionId):null};return await w("POST","/api/users",c)},onSuccess:()=>{D.invalidateQueries({queryKey:["/api/users"]}),f(!1),u.reset(),A({title:"ì„±ê³µ",description:"ì‚¬ìš©ìê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤."})},onError:a=>{A({title:"ì˜¤ë¥˜",description:a.message||"ì‚¬ìš©ì ì¶”ê°€ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",variant:"destructive"})}}),N=U({mutationFn:async({id:a,...c})=>{const P={...c,positionId:c.positionId&&c.positionId!==""&&c.positionId!=="none"?parseInt(c.positionId):null};return await w("PATCH",`/api/users/${a}`,P)},onSuccess:()=>{D.invalidateQueries({queryKey:["/api/users"]}),f(!1),p(null),u.reset(),A({title:"ì„±ê³µ",description:"ì‚¬ìš©ì ì •ë³´ê°€ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤."})},onError:a=>{A({title:"ì˜¤ë¥˜",description:a.message||"ì‚¬ìš©ì ìˆ˜ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",variant:"destructive"})}}),l=U({mutationFn:async a=>await w("DELETE",`/api/users/${a}`),onSuccess:()=>{D.invalidateQueries({queryKey:["/api/users"]}),A({title:"ì„±ê³µ",description:"ì‚¬ìš©ìê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤."})},onError:a=>{A({title:"ì˜¤ë¥˜",description:a.message||"ì‚¬ìš©ì ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",variant:"destructive"})}}),C=a=>{k?N.mutate({id:k.id,...a}):K.mutate(a)},M=g.filter(a=>a.email?.toLowerCase().includes(S.toLowerCase())||a.name?.toLowerCase().includes(S.toLowerCase())||a.position?.toLowerCase().includes(S.toLowerCase())),ae=a=>{p(a);const c=a.role;u.reset({email:a.email||"",name:a.name||"",positionId:a.positionId?String(a.positionId):"none",phoneNumber:a.phoneNumber||"",role:c||"user"}),f(!0)},O=a=>{confirm(`${a.email} ì‚¬ìš©ìë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)&&l.mutate(a.id)},V=a=>a.name?a.name:a.email?.split("@")[0]||"ì‚¬ìš©ìëª… ì—†ìŒ",W=a=>a&&se.find(P=>P.id===a)?.positionName||"-",te=a=>{switch(a){case"admin":return"destructive";case"manager":return"default";case"user":return"secondary";default:return"outline"}},le=y?.role;if(I)return e.jsx("div",{className:"container mx-auto py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"ì‚¬ìš©ì ì •ë³´ë¥¼ í™•ì¸í•˜ê³  ìˆìŠµë‹ˆë‹¤..."})]})});if(!y)return e.jsx("div",{className:"container mx-auto py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Qe,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤"}),e.jsx("p",{className:"text-muted-foreground",children:"ì‚¬ìš©ì ê´€ë¦¬ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë ¤ë©´ ë¨¼ì € ë¡œê·¸ì¸í•˜ì„¸ìš”."}),e.jsx(n,{onClick:()=>r("/login"),className:"mt-4",children:"ë¡œê·¸ì¸í•˜ê¸°"})]})});const Q=le==="admin",ve=!1,ne=Q||ve;return console.log("User management access check:",{userRole:le,isAdmin:Q,isDevelopment:ve,allowAccess:ne,currentUser:y}),ne?e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ne,{className:"h-6 w-6 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"ì‚¬ìš©ì ê´€ë¦¬"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"ì‹œìŠ¤í…œ ì‚¬ìš©ìë¥¼ ê´€ë¦¬í•˜ê³  ê¶Œí•œì„ ì„¤ì •í•©ë‹ˆë‹¤"})]})]}),e.jsxs(n,{onClick:()=>{p(null),u.reset(),f(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(ue,{className:"h-4 w-4 mr-2"}),"ì‚¬ìš©ì ì¶”ê°€"]})]})}),e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[e.jsx(d,{placeholder:"ì´ë©”ì¼, ì´ë¦„, ì§ì±…ìœ¼ë¡œ ê²€ìƒ‰...",value:S,onChange:a=>_(a.target.value),className:"h-7 text-xs max-w-xs"}),e.jsxs(Js,{type:"single",value:F,onValueChange:a=>a&&ee(a),children:[e.jsx(Ze,{value:"list","aria-label":"ëª©ë¡ ë³´ê¸°",className:"h-7 px-2",children:e.jsx(es,{className:"h-3 w-3"})}),e.jsx(Ze,{value:"grid","aria-label":"ì¹´ë“œ ë³´ê¸°",className:"h-7 px-2",children:e.jsx(Fs,{className:"h-3 w-3"})})]})]}),e.jsx(q,{children:e.jsx(H,{className:"p-0",children:I?e.jsx("div",{className:"space-y-1 p-2",children:[...Array(6)].map((a,c)=>e.jsxs("div",{className:"flex items-center justify-between py-1 px-2 animate-pulse",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/4 mb-1"}),e.jsx("div",{className:"h-2 bg-gray-200 rounded w-1/3"})]}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"})]},c))}):M.length===0?e.jsxs("div",{className:"text-center py-6",children:[e.jsx(Ne,{className:"mx-auto h-8 w-8 text-gray-400 mb-2"}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:S?"ê²€ìƒ‰ ì¡°ê±´ì— ë§ëŠ” ì‚¬ìš©ìê°€ ì—†ìŠµë‹ˆë‹¤.":"ë“±ë¡ëœ ì‚¬ìš©ìê°€ ì—†ìŠµë‹ˆë‹¤."}),!S&&e.jsxs(n,{size:"sm",onClick:()=>f(!0),className:"h-6 px-2 text-xs",children:[e.jsx(ue,{className:"h-3 w-3 mr-1"}),"ì²« ë²ˆì§¸ ì‚¬ìš©ì ì¶”ê°€"]})]}):e.jsx(e.Fragment,{children:F==="list"?e.jsxs("div",{className:"divide-y",children:[e.jsxs("div",{className:"grid grid-cols-12 gap-2 px-2 py-1 bg-gray-50 text-xs font-medium text-gray-600",children:[e.jsx("div",{className:"col-span-2",children:"ì‚¬ìš©ìëª…"}),e.jsx("div",{className:"col-span-3",children:"ì´ë©”ì¼"}),e.jsx("div",{className:"col-span-2",children:"ì „í™”ë²ˆí˜¸"}),e.jsx("div",{className:"col-span-2",children:"ì§í•¨"}),e.jsx("div",{className:"col-span-2",children:"ê¶Œí•œ"}),e.jsx("div",{className:"col-span-1 text-center",children:"ì‘ì—…"})]}),M.map(a=>e.jsxs("div",{className:"grid grid-cols-12 gap-2 px-2 py-1 hover:bg-gray-50 transition-colors text-xs",children:[e.jsx("div",{className:"col-span-2 flex items-center",children:e.jsx("span",{className:"font-medium text-gray-900 truncate",children:V(a)})}),e.jsx("div",{className:"col-span-3 flex items-center",children:e.jsx("span",{className:"text-gray-600 truncate",children:a.email})}),e.jsx("div",{className:"col-span-2 flex items-center",children:e.jsx("span",{className:"text-gray-600 truncate",children:a.phoneNumber||"-"})}),e.jsx("div",{className:"col-span-2 flex items-center",children:e.jsx("span",{className:"text-gray-600 truncate",children:W(a.positionId)})}),e.jsx("div",{className:"col-span-2 flex items-center",children:e.jsx(ce,{variant:te(a.role||"user"),className:"text-xs px-1 py-0",children:e.jsx(re,{role:a.role||"user"})})}),e.jsxs("div",{className:"col-span-1 flex items-center justify-center gap-1",children:[e.jsx("button",{onClick:()=>ae(a),className:"inline-flex items-center justify-center w-5 h-5 rounded hover:bg-gray-100 text-gray-600",title:"ìˆ˜ì •",children:e.jsx(X,{className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>O(a),className:"inline-flex items-center justify-center w-5 h-5 rounded hover:bg-red-100 text-red-600",title:"ì‚­ì œ",children:e.jsx(ie,{className:"h-3 w-3"})})]})]},a.id))]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-2 p-2",children:M.map(a=>e.jsxs(q,{className:"p-3 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-sm text-gray-900 truncate",children:V(a)}),e.jsx("p",{className:"text-xs text-gray-600 truncate",children:a.email})]}),e.jsxs("div",{className:"flex gap-1 ml-2",children:[e.jsx("button",{onClick:()=>ae(a),className:"inline-flex items-center justify-center w-6 h-6 rounded hover:bg-gray-100 text-gray-600",title:"ìˆ˜ì •",children:e.jsx(X,{className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>O(a),className:"inline-flex items-center justify-center w-6 h-6 rounded hover:bg-red-100 text-red-600",title:"ì‚­ì œ",children:e.jsx(ie,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-500",children:"ì „í™”ë²ˆí˜¸:"}),e.jsx("span",{className:"text-gray-700",children:a.phoneNumber||"-"})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-500",children:"ì§í•¨:"}),e.jsx("span",{className:"text-gray-700",children:W(a.positionId)})]}),e.jsxs("div",{className:"flex justify-between text-xs items-center",children:[e.jsx("span",{className:"text-gray-500",children:"ê¶Œí•œ:"}),e.jsx(ce,{variant:te(a.role||"user"),className:"text-xs px-1 py-0",children:e.jsx(re,{role:a.role||"user"})})]})]})]},a.id))})})})}),e.jsx(fe,{open:G,onOpenChange:f,children:e.jsxs(be,{className:"max-w-md",children:[e.jsx(we,{children:e.jsx(Ce,{children:k?"ì‚¬ìš©ì ìˆ˜ì •":"ìƒˆ ì‚¬ìš©ì ì¶”ê°€"})}),e.jsx(je,{...u,children:e.jsxs("form",{onSubmit:u.handleSubmit(C),className:"space-y-4",children:[e.jsx(o,{control:u.control,name:"email",render:({field:a})=>e.jsxs(x,{children:[e.jsx(m,{children:"ì´ë©”ì¼ *"}),e.jsx(h,{children:e.jsx(d,{placeholder:"user@company.com",...a,disabled:!!k})}),e.jsx(j,{})]})}),e.jsx(o,{control:u.control,name:"name",render:({field:a})=>e.jsxs(x,{children:[e.jsx(m,{children:"ì‚¬ìš©ìëª…"}),e.jsx(h,{children:e.jsx(d,{placeholder:"í™ê¸¸ë™",...a})}),e.jsx(j,{})]})}),e.jsx(o,{control:u.control,name:"positionId",render:({field:a})=>e.jsxs(x,{children:[e.jsx(m,{children:"ì§ì±…"}),e.jsxs(Se,{onValueChange:a.onChange,value:a.value,children:[e.jsx(h,{children:e.jsx(Ae,{children:e.jsx(ke,{placeholder:"ì§ì±…ì„ ì„ íƒí•˜ì„¸ìš”"})})}),e.jsxs(Te,{children:[e.jsx(B,{value:"none",children:"ì§ì±… ì—†ìŒ"}),se.map(c=>e.jsx(B,{value:String(c.id),children:c.positionName},c.id))]})]}),e.jsx(j,{})]})}),e.jsx(o,{control:u.control,name:"phoneNumber",render:({field:a})=>e.jsxs(x,{children:[e.jsx(m,{children:"ì—°ë½ì²˜"}),e.jsx(h,{children:e.jsx(d,{placeholder:"010-1234-5678",...a})}),e.jsx(j,{})]})}),e.jsx(o,{control:u.control,name:"role",render:({field:a})=>e.jsxs(x,{children:[e.jsx(m,{children:"ì—­í•  *"}),e.jsxs(Se,{onValueChange:a.onChange,defaultValue:a.value,children:[e.jsx(h,{children:e.jsx(Ae,{children:e.jsx(ke,{placeholder:"ì—­í• ì„ ì„ íƒí•˜ì„¸ìš”"})})}),e.jsx(Te,{children:e.jsx(ns,{children:c=>c.map(P=>e.jsx(B,{value:P.value,children:P.label},P.value))})})]}),e.jsx(j,{})]})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(n,{type:"button",variant:"outline",onClick:()=>f(!1),children:"ì·¨ì†Œ"}),e.jsx(n,{type:"submit",disabled:K.isPending||N.isPending,children:k?"ìˆ˜ì •":"ì¶”ê°€"})]})]})})]})})]}):e.jsx("div",{className:"container mx-auto py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Qe,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤"}),e.jsx("p",{className:"text-muted-foreground",children:"ì‚¬ìš©ì ê´€ë¦¬ ê¸°ëŠ¥ì€ ê´€ë¦¬ìë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["í˜„ì¬ ê¶Œí•œ: ",e.jsx(re,{role:le||"user"})]})]})})}const pa=Object.freeze(Object.defineProperty({__proto__:null,default:ra},Symbol.toStringTag,{value:"Module"}));function ca(){return e.jsxs("div",{className:"h-full flex flex-col space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"ë¶„ë¥˜ ê´€ë¦¬ ì‹œìŠ¤í…œ"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"í’ˆëª© ë¶„ë¥˜ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•˜ì„¸ìš”"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ce,{variant:"secondary",className:"bg-gradient-to-r from-blue-100 to-purple-100 text-blue-800 border-blue-200",children:[e.jsx(Is,{className:"w-3 h-3 mr-1"}),"í˜ì‹ ì  UI"]}),e.jsx(ce,{variant:"outline",className:"text-green-600 border-green-200",children:"v2.0 Beta"})]})]}),e.jsx("div",{className:"flex-1",children:e.jsx(Ys,{})}),e.jsx(q,{className:"border-blue-200 bg-blue-50",children:e.jsx(H,{className:"pt-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Es,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-blue-900 mb-2",children:"ğŸ’¡ ì‚¬ìš© íŒ:"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"font-medium text-blue-800 mb-1",children:"ğŸš€ ì£¼ìš” ê¸°ëŠ¥:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-xs text-blue-700",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qs,{className:"w-3 h-3"}),e.jsxs("span",{children:[e.jsx("strong",{children:"ë“œë˜ê·¸ ì•¤ ë“œë¡­:"})," ì§ê´€ì ì¸ ì¬ë°°ì—´"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ds,{className:"w-3 h-3"}),e.jsxs("span",{children:[e.jsx("strong",{children:"ì‹¤ì‹œê°„ í¸ì§‘:"})," ì¦‰ì‹œ ë°˜ì˜ë˜ëŠ” ë³€ê²½ì‚¬í•­"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ss,{className:"w-3 h-3"}),e.jsxs("span",{children:[e.jsx("strong",{children:"ë‹¤ì¤‘ ì„ íƒ:"})," ì¼ê´„ ì‘ì—… ì§€ì›"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_s,{className:"w-3 h-3"}),e.jsxs("span",{children:[e.jsx("strong",{children:"ìŠ¤ë§ˆíŠ¸ ê²€ìƒ‰:"})," ê³ ê¸‰ í•„í„°ë§"]})]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-800 mb-1",children:"âŒ¨ï¸ ë‹¨ì¶•í‚¤ ë° ì¡°ì‘ë²•:"}),e.jsxs("ul",{className:"text-blue-800 space-y-1 text-xs",children:[e.jsxs("li",{children:["â€¢ ",e.jsx("kbd",{className:"bg-white px-1 rounded",children:"Ctrl+F"}),"ë¡œ ë¹ ë¥¸ ê²€ìƒ‰, ",e.jsx("kbd",{className:"bg-white px-1 rounded",children:"Ctrl+A"}),"ë¡œ ì „ì²´ ì„ íƒ"]}),e.jsx("li",{children:"â€¢ ë¶„ë¥˜ë¥¼ ë“œë˜ê·¸í•˜ì—¬ ê³„ì¸µêµ¬ì¡° ë³€ê²½, ìš°í´ë¦­ìœ¼ë¡œ ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´ ì‚¬ìš©"}),e.jsxs("li",{children:["â€¢ ",e.jsx("kbd",{className:"bg-white px-1 rounded",children:"Delete"}),"í‚¤ë¡œ ì„ íƒëœ í•­ëª© ì‚­ì œ, ",e.jsx("kbd",{className:"bg-white px-1 rounded",children:"Esc"}),"ë¡œ ì„ íƒ í•´ì œ"]}),e.jsx("li",{children:"â€¢ ì¤Œ ì¡°ì ˆë¡œ ë” ë‚˜ì€ ê°€ì‹œì„± í™•ë³´, ë‹¤ì¤‘ ì„ íƒ ëª¨ë“œë¡œ ì¼ê´„ ì‘ì—… ìˆ˜í–‰"})]})]})]})]})})})]})}const ua=Object.freeze(Object.defineProperty({__proto__:null,default:ca},Symbol.toStringTag,{value:"Module"}));export{ja as a,ua as c,pa as u};
