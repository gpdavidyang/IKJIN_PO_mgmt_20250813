import{j as e,c as ee,d as te,u as se,y as re,r as F,g as ae,o as L,p as C,t as N,v as j,B as h,F as f,f as u,A as ie,E as k,U as P,a as ne,D as O}from"./index-DEIaJJ5q-1757067074997.js";import{T as le,a as oe,b as B,c as p,d as de,e as y}from"./table-6MvZbm99-1757067074997.js";import{D as ce,a as xe,b as ge,c as he}from"./dialog-Bhxsb4TE-1757067074997.js";import{A as me,I as pe,R as ye}from"./attached-files-info-DaqxOkxA-1757067074997.js";import{f as b}from"./format-ClDxeV3E-1757067074997.js";import{A as I}from"./arrow-left-CmlBJzZV-1757067074997.js";import{S as be}from"./square-pen-CIfB339b-1757067074997.js";import{S as je}from"./send-Bqd9ziaP-1757067074997.js";import{T as ue}from"./trash-2-Bn01Ql9y-1757067074997.js";import{D as ve}from"./dollar-sign-CNQGCDWj-1757067074997.js";import{P as _}from"./package-D7yjdyln-1757067074997.js";import{C as Ne}from"./calendar-B374xWml-1757067074997.js";import{M as z}from"./map-pin-PAgcArau-1757067074997.js";import{M as q}from"./mail-BCwxa8Kl-1757067074997.js";import{P as fe}from"./phone-Dy161wGD-1757067074997.js";import{D as W}from"./download-DPSSkvUH-1757067074997.js";import{A as we}from"./archive-ByJWa1iM-1757067074997.js";import{P as $e}from"./printer-BJFgNZiJ-1757067074997.js";import"./index-Cfx5_uxI-1757067074997.js";import"./select-aspvbWfH-1757067074997.js";import"./index-Bf_gSxjP-1757067074997.js";import"./chevron-down-Bcq1M5eI-1757067074997.js";import"./chevron-up-Bw2FpqMs-1757067074997.js";import"./textarea-BI1rbKpi-1757067074997.js";import"./checkbox-BpUikUKY-1757067074997.js";import"./pen-CcM06JOu-1757067074997.js";import"./triangle-alert-C048vKhd-1757067074997.js";import"./info-CS5DMQ9N-1757067074997.js";function ke({order:i}){const o=l=>`â‚©${Math.round(l).toLocaleString("ko-KR")}`,c=l=>b(new Date(l),"yyyyë…„ MMì›” ddì¼"),A=()=>!i.items||i.items.length===0?0:i.items.reduce((l,x)=>{const w=parseFloat(x.quantity)||0,$=parseFloat(x.unitPrice)||0,D=x.totalAmount||w*$,t=parseFloat(D)||0;return l+t},0);return e.jsxs("div",{style:{fontFamily:'"Noto Sans KR", "Malgun Gothic", sans-serif',fontSize:"11px",lineHeight:"1.3",color:"#000",backgroundColor:"#fff",width:"210mm",minHeight:"297mm",padding:"10mm",margin:"0 auto",boxShadow:"0 0 10px rgba(0,0,0,0.1)"},children:[e.jsx("table",{style:{width:"100%",marginBottom:"15px",borderCollapse:"collapse"},children:e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{style:{textAlign:"left",borderBottom:"2px solid #333",paddingBottom:"8px"},children:e.jsx("h1",{style:{margin:"0",fontSize:"18px",fontWeight:"bold",color:"#333"},children:"ë°œì£¼ì„œ Purchase Order"})}),e.jsxs("td",{style:{textAlign:"right",borderBottom:"2px solid #333",paddingBottom:"8px",fontSize:"10px",color:"#666"},children:["ë°œì£¼ë²ˆí˜¸: ",i.orderNumber||"PO-2025-0612-001"]})]})})}),e.jsx("table",{style:{width:"100%",marginBottom:"15px",borderCollapse:"collapse"},children:e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{style:{width:"50%",verticalAlign:"top",paddingRight:"10px"},children:e.jsxs("table",{style:{width:"100%",border:"1px solid #666",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{children:e.jsx("th",{style:{backgroundColor:"#f0f0f0",border:"1px solid #666",padding:"5px",fontSize:"11px",fontWeight:"bold",textAlign:"center"},children:"ë°œì£¼ìž ì •ë³´"})})}),e.jsx("tbody",{children:e.jsx("tr",{children:e.jsxs("td",{style:{border:"1px solid #666",padding:"8px",fontSize:"10px"},children:[e.jsxs("div",{style:{marginBottom:"2px"},children:[e.jsx("strong",{children:"íšŒì‚¬ëª…:"})," ",i.company?.companyName||"(ì£¼)ìµì§„ì—”ì§€ë‹ˆì–´ë§"]}),e.jsxs("div",{style:{marginBottom:"2px"},children:[e.jsx("strong",{children:"ë‹´ë‹¹ìž:"})," ",i.user?.name||i.createdBy||"ì‹œìŠ¤í…œ"]}),e.jsxs("div",{style:{marginBottom:"2px"},children:[e.jsx("strong",{children:"ì´ë©”ì¼:"})," ",i.user?.email||"-"]}),e.jsxs("div",{style:{marginBottom:"2px"},children:[e.jsx("strong",{children:"ì—°ë½ì²˜:"})," ",i.user?.phone||"-"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"ì£¼ì†Œ:"})," ",i.company?.address||"-"]})]})})})]})}),e.jsx("td",{style:{width:"50%",verticalAlign:"top",paddingLeft:"10px"},children:e.jsxs("table",{style:{width:"100%",border:"1px solid #666",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{children:e.jsx("th",{style:{backgroundColor:"#f0f0f0",border:"1px solid #666",padding:"5px",fontSize:"11px",fontWeight:"bold",textAlign:"center"},children:"ê±°ëž˜ì²˜ ì •ë³´"})})}),e.jsx("tbody",{children:e.jsx("tr",{children:e.jsxs("td",{style:{border:"1px solid #666",padding:"8px",fontSize:"10px"},children:[e.jsxs("div",{style:{marginBottom:"2px"},children:[e.jsx("strong",{children:"íšŒì‚¬ëª…:"})," ",i.vendor?.name||"ê±°ëž˜ì²˜ëª…"]}),e.jsxs("div",{style:{marginBottom:"2px"},children:[e.jsx("strong",{children:"ì‚¬ì—…ìž:"})," ",i.vendor?.businessNumber||"-"]}),e.jsxs("div",{style:{marginBottom:"2px"},children:[e.jsx("strong",{children:"ë‹´ë‹¹ìž:"})," ",i.vendor?.contactPerson||"-"]}),e.jsxs("div",{style:{marginBottom:"2px"},children:[e.jsx("strong",{children:"ì—°ë½ì²˜:"})," ",i.vendor?.phone||"-"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"ì£¼ì†Œ:"})," ",i.vendor?.address||"-"]})]})})})]})})]})})}),e.jsxs("table",{style:{width:"100%",marginBottom:"15px",border:"1px solid #666",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{children:e.jsx("th",{style:{backgroundColor:"#f0f0f0",border:"1px solid #666",padding:"5px",fontSize:"11px",fontWeight:"bold",textAlign:"center"},children:"ë°œì£¼ ì •ë³´"})})}),e.jsx("tbody",{children:e.jsx("tr",{children:e.jsx("td",{style:{border:"1px solid #666",padding:"8px"},children:e.jsx("table",{style:{width:"100%",borderCollapse:"collapse"},children:e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsxs("td",{style:{width:"33%",fontSize:"10px",padding:"2px"},children:[e.jsx("strong",{children:"ë°œì£¼ë²ˆí˜¸:"})," ",i.orderNumber||"PO-2025-0612-001"]}),e.jsxs("td",{style:{width:"33%",fontSize:"10px",padding:"2px"},children:[e.jsx("strong",{children:"ë°œì£¼ì¼ìž:"})," ",i.orderDate?c(i.orderDate):"2025ë…„ 06ì›” 12ì¼"]}),e.jsxs("td",{style:{width:"33%",fontSize:"10px",padding:"2px"},children:[e.jsx("strong",{children:"ë‚©ê¸°ì¼ìž:"})," ",i.deliveryDate?c(i.deliveryDate):"2025ë…„ 06ì›” 30ì¼"]})]})})})})})})]}),e.jsxs("table",{style:{width:"100%",marginBottom:"15px",border:"1px solid #666",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{children:e.jsx("th",{style:{backgroundColor:"#f0f0f0",border:"1px solid #666",padding:"5px",fontSize:"11px",fontWeight:"bold",textAlign:"center"},children:"ë°œì£¼ í•­ëª©"})})}),e.jsx("tbody",{children:e.jsx("tr",{children:e.jsx("td",{style:{border:"1px solid #666",padding:"0"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f8f8f8"},children:[e.jsx("th",{style:{border:"1px solid #666",padding:"4px",fontSize:"10px",textAlign:"center",width:"8%"},children:"ìˆœë²ˆ"}),e.jsx("th",{style:{border:"1px solid #666",padding:"4px",fontSize:"10px",textAlign:"center",width:"25%"},children:"í’ˆëª©ëª…"}),e.jsx("th",{style:{border:"1px solid #666",padding:"4px",fontSize:"10px",textAlign:"center",width:"15%"},children:"ê·œê²©"}),e.jsx("th",{style:{border:"1px solid #666",padding:"4px",fontSize:"10px",textAlign:"center",width:"8%"},children:"ìˆ˜ëŸ‰"}),e.jsx("th",{style:{border:"1px solid #666",padding:"4px",fontSize:"10px",textAlign:"center",width:"12%"},children:"ë‹¨ê°€"}),e.jsx("th",{style:{border:"1px solid #666",padding:"4px",fontSize:"10px",textAlign:"center",width:"12%"},children:"ê¸ˆì•¡"}),e.jsx("th",{style:{border:"1px solid #666",padding:"4px",fontSize:"10px",textAlign:"center",width:"20%"},children:"ë¹„ê³ "})]})}),e.jsxs("tbody",{children:[i.items&&i.items.length>0?i.items.map((l,x)=>e.jsxs("tr",{children:[e.jsx("td",{style:{border:"1px solid #666",padding:"4px",fontSize:"10px",textAlign:"center"},children:x+1}),e.jsx("td",{style:{border:"1px solid #666",padding:"4px",fontSize:"10px"},children:l.itemName}),e.jsx("td",{style:{border:"1px solid #666",padding:"4px",fontSize:"10px",textAlign:"center"},children:l.specification||"-"}),e.jsx("td",{style:{border:"1px solid #666",padding:"4px",fontSize:"10px",textAlign:"center"},children:Math.round(parseFloat(l.quantity)).toLocaleString("ko-KR")}),e.jsx("td",{style:{border:"1px solid #666",padding:"4px",fontSize:"10px",textAlign:"right"},children:o(l.unitPrice)}),e.jsx("td",{style:{border:"1px solid #666",padding:"4px",fontSize:"10px",textAlign:"right",fontWeight:"bold"},children:o(l.totalAmount)}),e.jsx("td",{style:{border:"1px solid #666",padding:"4px",fontSize:"10px",textAlign:"center"},children:l.notes||"-"})]},l.id||x)):e.jsx("tr",{children:e.jsx("td",{colSpan:7,style:{border:"1px solid #666",padding:"20px",fontSize:"10px",textAlign:"center",color:"#666"},children:"ë°œì£¼ í•­ëª©ì´ ì—†ìŠµë‹ˆë‹¤."})}),e.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[e.jsx("td",{colSpan:6,style:{border:"1px solid #666",padding:"6px",fontSize:"11px",textAlign:"right",fontWeight:"bold"},children:"ì´ ê¸ˆì•¡:"}),e.jsxs("td",{style:{border:"1px solid #666",padding:"6px",fontSize:"11px",textAlign:"right",fontWeight:"bold"},children:[o(A())," (VAT í¬í•¨)"]})]})]})]})})})})]}),e.jsxs("table",{style:{width:"100%",marginBottom:"15px",border:"1px solid #666",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{children:e.jsx("th",{style:{backgroundColor:"#f0f0f0",border:"1px solid #666",padding:"5px",fontSize:"11px",fontWeight:"bold",textAlign:"center"},children:"íŠ¹ì´ì‚¬í•­"})})}),e.jsx("tbody",{children:e.jsx("tr",{children:e.jsx("td",{style:{border:"1px solid #666",padding:"10px",fontSize:"10px",minHeight:"40px"},children:i.notes||"ë³¸ ë°œì£¼ì„œëŠ” ì •ê¸° ë°œì£¼ì— ë”°ë¥¸ ë°œìƒ ê±´ìœ¼ë¡œ, í’ˆì§ˆ ë° ë‚©ê¸°ì¼ì •ì„ ì¤€ìˆ˜í•˜ì—¬ ì£¼ì‹œê¸° ë°”ëžë‹ˆë‹¤."})})})]}),e.jsx("table",{style:{width:"100%",marginBottom:"20px",borderCollapse:"collapse"},children:e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{style:{width:"50%",verticalAlign:"top",paddingRight:"10px"},children:e.jsxs("table",{style:{width:"100%",border:"1px solid #666",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{children:e.jsx("th",{style:{backgroundColor:"#f0f0f0",border:"1px solid #666",padding:"5px",fontSize:"11px",fontWeight:"bold",textAlign:"center"},children:"ë°œì£¼ìž"})})}),e.jsx("tbody",{children:e.jsx("tr",{children:e.jsxs("td",{style:{border:"1px solid #666",padding:"15px",fontSize:"10px",textAlign:"center"},children:[e.jsxs("div",{style:{marginBottom:"10px"},children:["ë‚ ì§œ: ",i.orderDate?c(i.orderDate):"2025ë…„ 06ì›” 12ì¼"]}),e.jsx("div",{children:"ì„œëª…: _______________"})]})})})]})}),e.jsx("td",{style:{width:"50%",verticalAlign:"top",paddingLeft:"10px"},children:e.jsxs("table",{style:{width:"100%",border:"1px solid #666",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{children:e.jsx("th",{style:{backgroundColor:"#f0f0f0",border:"1px solid #666",padding:"5px",fontSize:"11px",fontWeight:"bold",textAlign:"center"},children:"ìŠ¹ì¸ìž"})})}),e.jsx("tbody",{children:e.jsx("tr",{children:e.jsxs("td",{style:{border:"1px solid #666",padding:"15px",fontSize:"10px",textAlign:"center"},children:[e.jsx("div",{style:{marginBottom:"10px"},children:"ë‚ ì§œ: _______________"}),e.jsx("div",{children:"ì„œëª…: _______________"})]})})})]})})]})})}),e.jsx("div",{style:{marginTop:"20px",paddingTop:"10px",borderTop:"1px solid #999",fontSize:"9px",color:"#666"},children:e.jsx("table",{style:{width:"100%"},children:e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsxs("td",{style:{textAlign:"left"},children:["ë³¸ ë°œì£¼ì„œëŠ” ìžìž¬ ë°œì£¼ ê´€ë¦¬ ì‹œìŠ¤í…œì—ì„œ ìžë™ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤. ìƒì„±ì¼ì‹œ: ",b(new Date,"yyyyë…„ MMì›” ddì¼ HH:mm")]}),e.jsx("td",{style:{textAlign:"right"},children:"íŽ˜ì´ì§€ 1"})]})})})})]})}function et(){const{user:i}=ee(),{toast:o}=te(),[,c]=se(),A=re(),[l,x]=F.useState(!1),[w,$]=F.useState(!1),{theme:D}=ae(),t=D==="dark",n=parseInt(A.id),H=r=>{if(!r)return{deliveryPlace:null,deliveryEmail:null};const a=r.match(/ë‚©í’ˆì²˜:\s*([^\n]+)/),d=r.match(/ë‚©í’ˆì²˜ ì´ë©”ì¼:\s*([^\n]+)/);return{deliveryPlace:a?a[1].trim():null,deliveryEmail:d?d[1].trim():null}},{data:s,isLoading:K}=L({queryKey:[`/api/orders/${n}`],queryFn:()=>N("GET",`/api/orders/${n}`)});console.log("ðŸ”´ ORDER DETAIL PAGE - Full order data:",s),console.log("ðŸ”´ ORDER DETAIL PAGE - Attachments:",s?.attachments),console.log("ðŸ”´ ORDER DETAIL PAGE - Attachments count:",s?.attachments?.length),console.log("ðŸ”´ ORDER DETAIL PAGE - Items:",s?.items),console.log("Order detail - attachments check:",{hasOrder:!!s,hasAttachments:!!s?.attachments,attachmentsLength:s?.attachments?.length,attachments:s?.attachments});const{data:G}=L({queryKey:["/api/order-statuses"]}),E=C({mutationFn:async()=>{await N("POST",`/api/orders/${n}/approve`)},onSuccess:()=>{o({title:"ë°œì£¼ì„œ ìŠ¹ì¸",description:"ë°œì£¼ì„œê°€ ì„±ê³µì ìœ¼ë¡œ ìŠ¹ì¸ë˜ì—ˆìŠµë‹ˆë‹¤."}),j.invalidateQueries({queryKey:["/api/orders"]}),j.invalidateQueries({queryKey:[`/api/orders/${n}`]})},onError:r=>{o({title:"ìŠ¹ì¸ ì‹¤íŒ¨",description:r.message,variant:"destructive"})}}),T=C({mutationFn:async()=>{await N("POST",`/api/orders/${n}/send`)},onSuccess:()=>{o({title:"ë°œì£¼ì„œ ë°œì†¡",description:"ë°œì£¼ì„œê°€ ì„±ê³µì ìœ¼ë¡œ ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤."}),j.invalidateQueries({queryKey:["/api/orders"]}),j.invalidateQueries({queryKey:[`/api/orders/${n}`]})},onError:r=>{o({title:"ë°œì†¡ ì‹¤íŒ¨",description:r.message,variant:"destructive"})}}),S=C({mutationFn:async()=>{await N("DELETE",`/api/orders/${n}`)},onSuccess:()=>{o({title:"ë°œì£¼ì„œ ì‚­ì œ",description:"ë°œì£¼ì„œê°€ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤."}),j.invalidateQueries({queryKey:["/api/orders"]}),c("/orders")},onError:r=>{o({title:"ì‚­ì œ ì‹¤íŒ¨",description:r.message,variant:"destructive"})}}),U=async()=>{if(s?.attachments?.find(a=>a.mimeType==="application/pdf"&&a.originalName?.startsWith("PO_"))){x(!0);return}$(!0);try{(await N("POST",`/api/orders/${n}/regenerate-pdf`)).success&&(o({title:"PDF ìƒì„± ì™„ë£Œ",description:"PDFê°€ ìƒì„±ë˜ì–´ ì²¨ë¶€íŒŒì¼ì— ì €ìž¥ë˜ì—ˆìŠµë‹ˆë‹¤."}),j.invalidateQueries({queryKey:[`/api/orders/${n}`]}),x(!0))}catch(a){o({title:"PDF ìƒì„± ì‹¤íŒ¨",description:a.message||"PDF ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",variant:"destructive"})}finally{$(!1)}},R=r=>{const a=G?.find(m=>m.code===r),d=a?a.name:r,v=m=>{switch(m){case"pending_approval":return t?"bg-yellow-900/20 text-yellow-400 border-yellow-700":"bg-yellow-100 text-yellow-800 border-yellow-200";case"approved":return t?"bg-green-900/20 text-green-400 border-green-700":"bg-green-100 text-green-800 border-green-200";case"sent":return t?"bg-blue-900/20 text-blue-400 border-blue-700":"bg-blue-100 text-blue-800 border-blue-200";case"rejected":return t?"bg-red-900/20 text-red-400 border-red-700":"bg-red-100 text-red-800 border-red-200";default:return t?"bg-gray-700 text-gray-300 border-gray-600":"bg-gray-100 text-gray-800 border-gray-200"}};return e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium border transition-colors ${v(r)}`,children:d})},Q=()=>{confirm("ì´ ë°œì£¼ì„œë¥¼ ìŠ¹ì¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&E.mutate()},V=()=>{confirm("ì´ ë°œì£¼ì„œë¥¼ ê±°ëž˜ì²˜ì— ë°œì†¡í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&T.mutate()},J=()=>{confirm(`ì´ ë°œì£¼ì„œë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?

ì‚­ì œëœ ë°œì£¼ì„œëŠ” ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`)&&S.mutate()};if(K)return e.jsx("div",{className:`min-h-screen transition-colors ${t?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("div",{className:"max-w-[1366px] mx-auto",children:[e.jsx("div",{className:`border-b transition-colors ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"animate-pulse space-y-2",children:[e.jsx("div",{className:`h-4 rounded w-1/4 transition-colors ${t?"bg-gray-700":"bg-gray-200"}`}),e.jsx("div",{className:`h-8 rounded w-1/2 transition-colors ${t?"bg-gray-700":"bg-gray-200"}`})]})})}),e.jsx("div",{className:"px-6 py-6 space-y-6",children:e.jsxs("div",{className:"animate-pulse space-y-6",children:[e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[...Array(4)].map((r,a)=>e.jsx("div",{className:`h-20 rounded transition-colors ${t?"bg-gray-800":"bg-gray-200"}`},a))}),e.jsx("div",{className:`h-32 rounded transition-colors ${t?"bg-gray-800":"bg-gray-200"}`}),e.jsx("div",{className:`h-48 rounded transition-colors ${t?"bg-gray-800":"bg-gray-200"}`})]})})]})});if(!s)return e.jsx("div",{className:`min-h-screen flex items-center justify-center transition-colors ${t?"bg-gray-900":"bg-gray-50"}`,children:e.jsx("div",{className:"max-w-[1366px] mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:`text-xl font-semibold mb-2 transition-colors ${t?"text-white":"text-gray-900"}`,children:"ë°œì£¼ì„œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"}),e.jsx("p",{className:`mb-4 transition-colors ${t?"text-gray-400":"text-gray-600"}`,children:"ìš”ì²­í•˜ì‹  ë°œì£¼ì„œê°€ ì¡´ìž¬í•˜ì§€ ì•Šê±°ë‚˜ ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤."}),e.jsxs(h,{onClick:()=>c("/orders"),className:`shadow-md hover:shadow-lg transition-all duration-200 ${t?"bg-blue-600 hover:bg-blue-500 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"ë°œì£¼ì„œ ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°"]})]})})})});const X=i?.role==="admin"&&s.status==="pending_approval",Y=s.status==="approved",Z=s.status!=="sent"&&s.status!=="received",M=i?.role==="admin"||i?.role==="hq_management"&&s.status!=="sent"&&s.status!=="received";return console.log("Delete button visibility check:",{userRole:i?.role,orderStatus:s.status,canDelete:M,isAdmin:i?.role==="admin",isHqManagement:i?.role==="hq_management",orderStatusValue:s.status,isNotSent:s.status!=="sent",isNotReceived:s.status!=="received",user:i,order:s}),e.jsx("div",{className:`min-h-screen transition-colors ${t?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("div",{className:"max-w-[1366px] mx-auto",children:[e.jsx("div",{className:`shadow-sm border-b transition-colors ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:e.jsxs("div",{className:"px-6 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>c("/orders"),className:`no-print h-8 px-2 transition-colors ${t?"text-gray-300 hover:text-gray-100 hover:bg-gray-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,"aria-label":"ë°œì£¼ì„œ ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°",children:e.jsx(I,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg transition-colors ${t?"bg-blue-900/20":"bg-blue-50"}`,children:e.jsx(f,{className:`h-5 w-5 transition-colors ${t?"text-blue-400":"text-blue-600"}`})}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-lg font-bold transition-colors ${t?"text-white":"text-gray-900"}`,children:s.orderNumber}),e.jsxs("p",{className:`text-sm transition-colors ${t?"text-gray-400":"text-gray-500"}`,children:[s.vendor?.name," â€¢ ",s.orderDate?b(new Date(s.orderDate),"MM.dd"):"ë‚ ì§œ ë¯¸ì •"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[R(s.status),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:`text-sm transition-colors ${t?"text-gray-400":"text-gray-500"}`,children:"ì´ ë°œì£¼ê¸ˆì•¡"}),e.jsx("p",{className:`text-lg font-bold transition-colors ${t?"text-white":"text-gray-900"}`,children:u(s.totalAmount)})]})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4 no-print",children:[Z&&e.jsxs(h,{variant:"outline",size:"sm",onClick:()=>c(`/orders/${n}/edit`),className:`h-8 px-3 text-xs transition-colors ${t?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(be,{className:"h-4 w-4 mr-1"}),"ìˆ˜ì •"]}),X&&e.jsxs(h,{size:"sm",onClick:Q,disabled:E.isPending,className:`h-8 px-3 text-xs shadow-md hover:shadow-lg transition-all duration-200 ${t?"bg-blue-600 hover:bg-blue-500 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:[e.jsx(ie,{className:"h-4 w-4 mr-1"}),"ìŠ¹ì¸"]}),Y&&e.jsxs(h,{size:"sm",onClick:V,disabled:T.isPending,className:`h-8 px-3 text-xs shadow-md hover:shadow-lg transition-all duration-200 ${t?"bg-blue-600 hover:bg-blue-500 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:[e.jsx(je,{className:"h-4 w-4 mr-1"}),"ë°œì†¡"]}),e.jsx(h,{variant:"outline",size:"sm",onClick:U,disabled:w,className:`h-8 px-3 text-xs transition-colors ${t?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:w?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin h-3 w-3 mr-1 border border-gray-300 border-t-transparent rounded-full"}),"ìƒì„± ì¤‘..."]}):s?.attachments?.find(a=>a.mimeType==="application/pdf"&&a.originalName?.startsWith("PO_"))?e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"h-4 w-4 mr-1"}),"PDF ë¯¸ë¦¬ë³´ê¸°"]}):e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"h-4 w-4 mr-1"}),"PDF ìƒì„± ë° ë¯¸ë¦¬ë³´ê¸°"]})}),M&&e.jsx(h,{variant:"outline",size:"sm",onClick:J,disabled:S.isPending,className:`h-8 px-3 text-xs transition-colors ${t?"border-red-800 text-red-400 hover:bg-red-950 hover:border-red-700":"border-red-300 text-red-700 hover:bg-red-50"}`,children:S.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin h-3 w-3 mr-1 border border-red-400 border-t-transparent rounded-full"}),"ì‚­ì œ ì¤‘..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ue,{className:"h-4 w-4 mr-1"}),"ì‚­ì œ"]})})]})]})}),e.jsxs("div",{className:"px-6 py-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[e.jsx("div",{className:`shadow-sm rounded-lg border transition-colors ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:e.jsxs("div",{className:"p-3",children:[e.jsx("span",{className:`text-xs block mb-1 transition-colors ${t?"text-gray-400":"text-gray-600"}`,children:"ì§„í–‰ ìƒíƒœ"}),e.jsx("div",{children:R(s.status)})]})}),e.jsx("div",{className:`shadow-sm rounded-lg border transition-colors ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:e.jsx("div",{className:"p-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:`text-xs block mb-1 transition-colors ${t?"text-gray-400":"text-gray-600"}`,children:"ë°œì£¼ ê¸ˆì•¡"}),e.jsx("span",{className:`text-lg font-bold transition-colors ${t?"text-blue-400":"text-blue-600"}`,children:u(s.totalAmount)})]}),e.jsx(ve,{className:`h-4 w-4 mt-0.5 transition-colors ${t?"text-gray-500":"text-gray-400"}`})]})})}),e.jsx("div",{className:`shadow-sm rounded-lg border transition-colors ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:e.jsx("div",{className:"p-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:`text-xs block mb-1 transition-colors ${t?"text-gray-400":"text-gray-600"}`,children:"í’ˆëª© ìˆ˜"}),e.jsxs("span",{className:`text-lg font-bold transition-colors ${t?"text-white":"text-gray-900"}`,children:[s.items?.length||0,"ê°œ"]})]}),e.jsx(_,{className:`h-4 w-4 mt-0.5 transition-colors ${t?"text-gray-500":"text-gray-400"}`})]})})}),e.jsx("div",{className:`shadow-sm rounded-lg border transition-colors ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:e.jsx("div",{className:"p-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:`text-xs block mb-1 transition-colors ${t?"text-gray-400":"text-gray-600"}`,children:"ë‚©ê¸°ì¼"}),e.jsx("span",{className:`text-lg font-bold transition-colors ${t?"text-white":"text-gray-900"}`,children:s.deliveryDate?b(new Date(s.deliveryDate),"MM.dd"):"ë¯¸ì •"})]}),e.jsx(Ne,{className:`h-4 w-4 mt-0.5 transition-colors ${t?"text-gray-500":"text-gray-400"}`})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:`shadow-sm rounded-lg border transition-colors ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsx("div",{className:`p-4 border-b transition-colors ${t?"border-gray-700":"border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-2 rounded-lg mr-3 transition-colors ${t?"bg-blue-900/20":"bg-blue-50"}`,children:e.jsx(f,{className:`h-5 w-5 transition-colors ${t?"text-blue-400":"text-blue-600"}`})}),e.jsx("h3",{className:`text-lg font-semibold transition-colors ${t?"text-white":"text-gray-900"}`,children:"ë°œì£¼ì„œ ì •ë³´"})]})}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:`block transition-colors ${t?"text-gray-400":"text-gray-600"}`,children:"ë°œì£¼ë²ˆí˜¸"}),e.jsx("span",{className:`font-semibold transition-colors ${t?"text-gray-200":"text-gray-900"}`,children:s.orderNumber})]}),e.jsxs("div",{children:[e.jsx("span",{className:`block transition-colors ${t?"text-gray-400":"text-gray-600"}`,children:"ë°œì£¼ì¼"}),e.jsx("span",{className:`transition-colors ${t?"text-gray-200":"text-gray-900"}`,children:s.orderDate?b(new Date(s.orderDate),"yyyy.MM.dd"):"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-xs transition-colors text-gray-500",children:"ì‹œìŠ¤í…œ ë“±ë¡ì¼"}),e.jsx("span",{className:`text-xs transition-colors ${t?"text-gray-400":"text-gray-600"}`,children:s.createdAt?b(new Date(s.createdAt),"yyyy.MM.dd HH:mm"):"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:`block transition-colors ${t?"text-gray-400":"text-gray-600"}`,children:"ë‹´ë‹¹ìž"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(P,{className:`h-4 w-4 transition-colors ${t?"text-blue-400":"text-blue-600"}`}),e.jsx("span",{className:`transition-colors ${t?"text-gray-200":"text-gray-900"}`,children:s.user?.firstName&&s.user?.lastName?`${s.user.lastName}${s.user.firstName}`:s.user?.email||"ì•Œ ìˆ˜ ì—†ìŒ"})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:`block transition-colors ${t?"text-gray-400":"text-gray-600"}`,children:"ë‚©ê¸°ì¼"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ne,{className:`h-4 w-4 transition-colors ${t?"text-blue-400":"text-blue-600"}`}),e.jsx("span",{className:`transition-colors ${t?"text-gray-200":"text-gray-900"}`,children:s.deliveryDate?b(new Date(s.deliveryDate),"yyyy.MM.dd"):"-"})]})]})]}),(()=>{const r=H(s.notes);return r.deliveryPlace||r.deliveryEmail?e.jsxs("div",{className:`pt-3 mt-3 border-t transition-colors ${t?"border-gray-700":"border-gray-100"}`,children:[e.jsx("span",{className:`text-sm block mb-2 transition-colors ${t?"text-gray-400":"text-gray-600"}`,children:"ë‚©í’ˆì²˜ ì •ë³´"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.deliveryPlace&&e.jsxs("div",{children:[e.jsx("span",{className:`block transition-colors ${t?"text-gray-400":"text-gray-600"}`,children:"ë‚©í’ˆì²˜ëª…"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(z,{className:`h-4 w-4 transition-colors ${t?"text-blue-400":"text-blue-600"}`}),e.jsx("span",{className:`transition-colors ${t?"text-gray-200":"text-gray-900"}`,children:r.deliveryPlace})]})]}),r.deliveryEmail&&e.jsxs("div",{children:[e.jsx("span",{className:`block transition-colors ${t?"text-gray-400":"text-gray-600"}`,children:"ë‚©í’ˆì²˜ ì´ë©”ì¼"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(q,{className:`h-4 w-4 transition-colors ${t?"text-blue-400":"text-blue-600"}`}),e.jsx("span",{className:`transition-colors ${t?"text-gray-200":"text-gray-900"}`,children:r.deliveryEmail})]})]})]})]}):null})(),s.notes&&e.jsxs("div",{className:`pt-4 border-t transition-colors ${t?"border-gray-700":"border-gray-100"}`,children:[e.jsx("span",{className:`text-sm block mb-2 transition-colors ${t?"text-gray-400":"text-gray-600"}`,children:"ë¹„ê³ "}),e.jsx("div",{className:`text-sm p-3 rounded transition-colors ${t?"bg-gray-700 text-gray-200":"bg-gray-50 text-gray-700"}`,children:s.notes})]})]})]}),s.vendor&&e.jsxs("div",{className:`shadow-sm rounded-lg border transition-colors ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsx("div",{className:`p-4 border-b transition-colors ${t?"border-gray-700":"border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-2 rounded-lg mr-3 transition-colors ${t?"bg-blue-900/20":"bg-blue-50"}`,children:e.jsx(O,{className:`h-5 w-5 transition-colors ${t?"text-blue-400":"text-blue-600"}`})}),e.jsx("h3",{className:`text-lg font-semibold transition-colors ${t?"text-white":"text-gray-900"}`,children:"ê±°ëž˜ì²˜ ì •ë³´"})]})}),e.jsx("div",{className:"p-4 space-y-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:`text-xs block transition-colors ${t?"text-gray-400":"text-gray-600"}`,children:"ì—…ì²´ëª…"}),e.jsx("button",{className:`text-sm font-medium cursor-pointer focus:outline-none focus:ring-1 rounded transition-all text-left ${t?"text-blue-400 hover:text-blue-300 focus:ring-blue-400":"text-blue-600 hover:text-blue-700 focus:ring-blue-500"}`,onClick:()=>s.vendor?.id&&c(`/vendors/${s.vendor.id}`),title:"ê±°ëž˜ì²˜ ìƒì„¸ë³´ê¸°","aria-label":`ê±°ëž˜ì²˜ ${s.vendor.name} ìƒì„¸ë³´ê¸°`,tabIndex:0,onKeyDown:r=>{(r.key==="Enter"||r.key===" ")&&(r.preventDefault(),s.vendor?.id&&c(`/vendors/${s.vendor.id}`))},children:s.vendor.name})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:`block transition-colors ${t?"text-gray-400":"text-gray-600"}`,children:"ë‹´ë‹¹ìž"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(P,{className:`h-3 w-3 transition-colors ${t?"text-blue-400":"text-blue-600"}`}),e.jsx("span",{className:`transition-colors ${t?"text-gray-200":"text-gray-900"}`,children:s.vendor.contact||"-"})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:`block transition-colors ${t?"text-gray-400":"text-gray-600"}`,children:"ì „í™”ë²ˆí˜¸"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(fe,{className:`h-3 w-3 transition-colors ${t?"text-blue-400":"text-blue-600"}`}),e.jsx("span",{className:`transition-colors ${t?"text-gray-200":"text-gray-900"}`,children:s.vendor.phone||"-"})]})]})]}),s.vendor.email&&e.jsxs("div",{children:[e.jsx("span",{className:`text-xs block transition-colors ${t?"text-gray-400":"text-gray-600"}`,children:"ì´ë©”ì¼"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(q,{className:`h-3 w-3 transition-colors ${t?"text-blue-400":"text-blue-600"}`}),e.jsx("span",{className:`text-xs transition-colors ${t?"text-gray-200":"text-gray-900"}`,children:s.vendor.email})]})]}),s.vendor.address&&e.jsxs("div",{children:[e.jsx("span",{className:`text-xs block transition-colors ${t?"text-gray-400":"text-gray-600"}`,children:"ì£¼ì†Œ"}),e.jsxs("div",{className:"flex items-start gap-1",children:[e.jsx(z,{className:`h-3 w-3 mt-0.5 flex-shrink-0 transition-colors ${t?"text-blue-400":"text-blue-600"}`}),e.jsx("span",{className:`text-xs transition-colors ${t?"text-gray-200":"text-gray-900"}`,children:s.vendor.address})]})]})]})})]}),s.project&&e.jsxs("div",{className:`shadow-sm rounded-lg border transition-colors ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsx("div",{className:`p-4 border-b transition-colors ${t?"border-gray-700":"border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-2 rounded-lg mr-3 transition-colors ${t?"bg-blue-900/20":"bg-blue-50"}`,children:e.jsx(O,{className:`h-5 w-5 transition-colors ${t?"text-blue-400":"text-blue-600"}`})}),e.jsx("h3",{className:`text-lg font-semibold transition-colors ${t?"text-white":"text-gray-900"}`,children:"í˜„ìž¥ ì •ë³´"})]})}),e.jsx("div",{className:"p-4 space-y-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:`text-xs block transition-colors ${t?"text-gray-400":"text-gray-600"}`,children:"í˜„ìž¥ëª…"}),e.jsx("button",{className:`text-sm font-medium cursor-pointer focus:outline-none focus:ring-1 rounded transition-all text-left ${t?"text-blue-400 hover:text-blue-300 focus:ring-blue-400":"text-blue-600 hover:text-blue-700 focus:ring-blue-500"}`,onClick:()=>c(`/projects/${s.project.id}`),title:"í˜„ìž¥ ìƒì„¸ë³´ê¸°","aria-label":`í˜„ìž¥ ${s.project.projectName} ìƒì„¸ë³´ê¸°`,tabIndex:0,onKeyDown:r=>{(r.key==="Enter"||r.key===" ")&&(r.preventDefault(),c(`/projects/${s.project.id}`))},children:s.project.projectName}),e.jsxs("span",{className:`text-xs block transition-colors ${t?"text-gray-400":"text-gray-500"}`,children:["(",s.project.projectCode,")"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:`block transition-colors ${t?"text-gray-400":"text-gray-600"}`,children:"ë‹´ë‹¹ìž"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(P,{className:`h-3 w-3 transition-colors ${t?"text-blue-400":"text-blue-600"}`}),e.jsx("span",{className:`transition-colors ${t?"text-gray-200":"text-gray-900"}`,children:s.project.projectManager||"-"})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:`block transition-colors ${t?"text-gray-400":"text-gray-600"}`,children:"ìœ„ì¹˜"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(z,{className:`h-3 w-3 transition-colors ${t?"text-blue-400":"text-blue-600"}`}),e.jsx("span",{className:`transition-colors ${t?"text-gray-200":"text-gray-900"}`,children:s.project.location||"-"})]})]})]}),s.project.description&&e.jsxs("div",{children:[e.jsx("span",{className:`text-xs block mb-1 transition-colors ${t?"text-gray-400":"text-gray-600"}`,children:"ì„¤ëª…"}),e.jsx("div",{className:`text-xs p-2 rounded transition-colors ${t?"bg-gray-700 text-gray-200":"bg-gray-50 text-gray-700"}`,children:s.project.description})]})]})})]})]}),e.jsxs("div",{className:`shadow-sm rounded-lg border transition-colors ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsx("div",{className:`p-4 border-b transition-colors ${t?"border-gray-700":"border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-2 rounded-lg mr-3 transition-colors ${t?"bg-blue-900/20":"bg-blue-50"}`,children:e.jsx(_,{className:`h-5 w-5 transition-colors ${t?"text-blue-400":"text-blue-600"}`})}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold transition-colors ${t?"text-white":"text-gray-900"}`,children:"ë°œì£¼ í’ˆëª©"}),e.jsxs("span",{className:`text-sm transition-colors ${t?"text-gray-400":"text-gray-500"}`,children:["ì´ ",s.items?.length||0,"ê°œ í’ˆëª©"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:`text-xs block transition-colors ${t?"text-gray-400":"text-gray-500"}`,children:"ì´ ë°œì£¼ê¸ˆì•¡"}),e.jsx("span",{className:`text-sm font-semibold transition-colors ${t?"text-blue-400":"text-blue-600"}`,children:u(s.totalAmount)})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(le,{children:[e.jsx(oe,{children:e.jsxs(B,{className:`border-b transition-colors ${t?"border-gray-600":"border-blue-100"}`,children:[e.jsx(p,{className:`text-xs py-1.5 px-2 font-medium transition-colors ${t?"text-gray-300":"text-gray-600"}`,children:"í’ˆëª©ëª…"}),e.jsx(p,{className:`text-xs py-1.5 px-2 font-medium transition-colors ${t?"text-gray-300":"text-gray-600"}`,children:"ëŒ€ë¶„ë¥˜"}),e.jsx(p,{className:`text-xs py-1.5 px-2 font-medium transition-colors ${t?"text-gray-300":"text-gray-600"}`,children:"ì¤‘ë¶„ë¥˜"}),e.jsx(p,{className:`text-xs py-1.5 px-2 font-medium transition-colors ${t?"text-gray-300":"text-gray-600"}`,children:"ì†Œë¶„ë¥˜"}),e.jsx(p,{className:`text-xs py-1.5 px-2 font-medium transition-colors ${t?"text-gray-300":"text-gray-600"}`,children:"ê·œê²©"}),e.jsx(p,{className:`text-xs text-center py-2 px-2 font-medium transition-colors ${t?"text-gray-300":"text-gray-600"}`,children:"ìˆ˜ëŸ‰"}),e.jsx(p,{className:`text-xs text-right py-2 px-2 font-medium transition-colors ${t?"text-gray-300":"text-gray-600"}`,children:"ë‹¨ê°€"}),e.jsx(p,{className:`text-xs text-right py-2 px-2 font-medium transition-colors ${t?"text-gray-300":"text-gray-600"}`,children:"ê¸ˆì•¡"}),e.jsx(p,{className:`text-xs py-1.5 px-2 font-medium transition-colors ${t?"text-gray-300":"text-gray-600"}`,children:"ë¹„ê³ "})]})}),e.jsx(de,{children:s.items?.map((r,a)=>e.jsxs(B,{className:`border-b transition-colors ${t?"border-gray-600 hover:bg-gray-700/30":"border-blue-100 hover:bg-blue-50/30"}`,children:[e.jsx(y,{className:"py-1.5 px-2",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(_,{className:`h-3 w-3 flex-shrink-0 transition-colors ${t?"text-gray-500":"text-gray-400"}`}),e.jsxs("div",{children:[e.jsx("span",{className:`font-medium text-xs block transition-colors ${t?"text-gray-200":"text-gray-900"}`,children:r.itemName}),r.specification&&e.jsx("span",{className:`text-xs transition-colors ${t?"text-gray-400":"text-gray-500"}`,children:r.specification})]})]})}),e.jsx(y,{className:`py-2 px-2 text-xs transition-colors ${t?"text-gray-300":"text-gray-700"}`,children:r.majorCategory&&r.majorCategory.trim()?r.majorCategory:"-"}),e.jsx(y,{className:`py-2 px-2 text-xs transition-colors ${t?"text-gray-300":"text-gray-700"}`,children:r.middleCategory&&r.middleCategory.trim()?r.middleCategory:"-"}),e.jsx(y,{className:`py-2 px-2 text-xs transition-colors ${t?"text-gray-300":"text-gray-700"}`,children:r.minorCategory&&r.minorCategory.trim()?r.minorCategory:"-"}),e.jsx(y,{className:`py-2 px-2 text-xs transition-colors ${t?"text-gray-300":"text-gray-700"}`,children:r.specification||"-"}),e.jsx(y,{className:"text-center py-2 px-2",children:e.jsx("span",{className:`inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium transition-colors ${t?"bg-gray-700 text-gray-200":"bg-gray-100 text-gray-800"}`,children:typeof r.quantity=="number"?r.quantity.toLocaleString():r.quantity||"-"})}),e.jsx(y,{className:`text-right py-2 px-2 font-medium text-xs transition-colors ${t?"text-blue-400":"text-blue-600"}`,children:u(r.unitPrice)}),e.jsx(y,{className:"text-right py-2 px-2",children:e.jsx("span",{className:`font-semibold text-xs transition-colors ${t?"text-blue-400":"text-blue-600"}`,children:u(r.totalAmount)})}),e.jsx(y,{className:`py-2 px-2 text-xs transition-colors ${t?"text-gray-300":"text-gray-700"}`,children:r.notes||"-"})]},a))})]})}),e.jsx("div",{className:`mt-4 pt-4 border-t transition-colors ${t?"border-gray-700":"border-gray-200"}`,children:e.jsx("div",{className:"flex justify-end",children:e.jsx("div",{className:`rounded p-3 min-w-[160px] transition-colors ${t?"bg-gray-700":"bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-xs font-medium transition-colors ${t?"text-gray-400":"text-gray-600"}`,children:"ì´ ë°œì£¼ê¸ˆì•¡"}),e.jsx("span",{className:`text-sm font-semibold transition-colors ${t?"text-blue-400":"text-blue-600"}`,children:u(s.totalAmount)})]})})})})]})]}),(console.log("ðŸ” ORDER DETAIL - Debug Excel Section:",{hasOrder:!!s,attachments:s?.attachments,attachmentsLength:s?.attachments?.length,orderId:n,shouldRender:!!(s?.attachments&&s.attachments.length>0)}),s?.attachments&&s.attachments.length>0?(console.log("âœ… ORDER DETAIL - Rendering AttachedFilesInfo with:",s.attachments),e.jsx(me,{attachments:s.attachments,orderId:n})):(console.log("âš ï¸ ORDER DETAIL - NOT rendering AttachedFilesInfo"),null)),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-3",children:[e.jsx("div",{children:e.jsx(pe,{orderId:n})}),s.items&&s.items.length>0&&e.jsx("div",{children:e.jsx(ye,{orderItems:s.items,orderId:n})})]}),s.attachments&&s.attachments.length>0&&(()=>{const r=s.attachments.filter(a=>a.mimeType==="application/pdf"&&a.originalName?.startsWith("PO_"));return r.length>0?e.jsxs("div",{className:`shadow-sm rounded-lg border transition-colors ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsx("div",{className:`p-6 border-b transition-colors ${t?"border-gray-700":"border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-2 rounded-lg mr-3 transition-colors ${t?"bg-green-900/20":"bg-green-50"}`,children:e.jsx(f,{className:`h-5 w-5 transition-colors ${t?"text-green-400":"text-green-600"}`})}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold transition-colors ${t?"text-white":"text-gray-900"}`,children:"ë°œì£¼ì„œ PDF"}),e.jsx("span",{className:`text-sm transition-colors ${t?"text-gray-400":"text-gray-500"}`,children:"ìžë™ ìƒì„±ëœ PDF ë¬¸ì„œ"})]})]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-3",children:r.map(a=>e.jsxs("div",{className:`flex items-center justify-between p-4 border rounded-lg transition-all ${t?"border-gray-600 hover:border-gray-500 hover:bg-gray-700":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[e.jsx("div",{className:`p-2 rounded ${t?"bg-red-900/20":"bg-red-50"}`,children:e.jsx(f,{className:`h-5 w-5 transition-colors ${t?"text-red-400":"text-red-600"}`})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("span",{className:`text-sm font-medium truncate block transition-colors ${t?"text-gray-200":"text-gray-900"}`,title:a.originalName,children:a.originalName}),e.jsxs("span",{className:`text-xs transition-colors ${t?"text-gray-400":"text-gray-500"}`,children:["ìƒì„±ì¼: ",a.uploadedAt?b(new Date(a.uploadedAt),"yyyy.MM.dd HH:mm"):"-"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(h,{variant:"outline",size:"sm",className:`flex-shrink-0 h-8 px-3 text-xs transition-colors ${t?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,onClick:()=>x(!0),children:[e.jsx(k,{className:"h-3 w-3 mr-1"}),"ë¯¸ë¦¬ë³´ê¸°"]}),e.jsxs(h,{variant:"outline",size:"sm",className:`flex-shrink-0 h-8 px-3 text-xs transition-colors ${t?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,onClick:async()=>{try{const d=await fetch(`/api/orders/${n}/attachments/${a.id}/download`,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!d.ok)throw new Error("Download failed");const v=await d.blob(),m=window.URL.createObjectURL(v),g=document.createElement("a");g.href=m,g.download=a.originalName,document.body.appendChild(g),g.click(),document.body.removeChild(g),window.URL.revokeObjectURL(m),o({title:"ë‹¤ìš´ë¡œë“œ ì™„ë£Œ",description:"PDF íŒŒì¼ì´ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤."})}catch{o({title:"ë‹¤ìš´ë¡œë“œ ì‹¤íŒ¨",description:"íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",variant:"destructive"})}},children:[e.jsx(W,{className:"h-3 w-3 mr-1"}),"ë‹¤ìš´ë¡œë“œ"]})]})]},a.id))})})]}):null})(),s.attachments&&s.attachments.length>0&&(()=>{const r=s.attachments.filter(a=>!a.mimeType?.includes("excel")&&!a.mimeType?.includes("spreadsheet")&&!a.originalName?.toLowerCase().endsWith(".xlsx")&&!a.originalName?.toLowerCase().endsWith(".xls")&&!(a.mimeType==="application/pdf"&&a.originalName?.startsWith("PO_")));return r.length===0?null:e.jsxs("div",{className:`shadow-sm rounded-lg border transition-colors ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsx("div",{className:`p-6 border-b transition-colors ${t?"border-gray-700":"border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-2 rounded-lg mr-3 transition-colors ${t?"bg-blue-900/20":"bg-blue-50"}`,children:e.jsx(we,{className:`h-5 w-5 transition-colors ${t?"text-blue-400":"text-blue-600"}`})}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold transition-colors ${t?"text-white":"text-gray-900"}`,children:"ê¸°íƒ€ ì²¨ë¶€íŒŒì¼"}),e.jsxs("span",{className:`text-sm transition-colors ${t?"text-gray-400":"text-gray-500"}`,children:["ì´ ",r.length,"ê°œ íŒŒì¼"]})]})]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:r.map(a=>e.jsxs("div",{className:`flex items-center justify-between p-3 border rounded-lg transition-all ${t?"border-gray-600 hover:border-gray-500 hover:bg-gray-700":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[e.jsx(f,{className:`h-4 w-4 transition-colors ${t?"text-gray-500":"text-gray-400"}`}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("span",{className:`text-xs font-medium truncate block transition-colors ${t?"text-gray-200":"text-gray-900"}`,title:a.originalName||a.filename,children:a.originalName||a.filename}),e.jsx("span",{className:`text-xs transition-colors ${t?"text-gray-400":"text-gray-500"}`,children:"ì²¨ë¶€íŒŒì¼"})]})]}),e.jsxs(h,{variant:"outline",size:"sm",className:`ml-2 flex-shrink-0 h-7 px-2 text-xs transition-colors ${t?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,onClick:async()=>{try{const d=await fetch(`/api/orders/${n}/attachments/${a.id}/download`,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!d.ok)throw new Error("íŒŒì¼ ë‹¤ìš´ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤");const v=await d.blob(),m=window.URL.createObjectURL(v),g=document.createElement("a");g.href=m,g.download=a.originalName||a.filename,document.body.appendChild(g),g.click(),document.body.removeChild(g),window.URL.revokeObjectURL(m)}catch(d){console.error("Download error:",d)}},children:[e.jsx(W,{className:"h-3 w-3 mr-1"}),"ë‹¤ìš´ë¡œë“œ"]})]},a.id))})})]})})(),e.jsx(ce,{open:l,onOpenChange:x,children:e.jsxs(xe,{className:`max-w-[1366px] max-h-[90vh] overflow-y-auto transition-colors ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsx(ge,{children:e.jsxs(he,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:`h-4 w-4 transition-colors ${t?"text-gray-400":"text-gray-600"}`}),e.jsxs("div",{children:[e.jsx("span",{className:`text-sm font-semibold transition-colors ${t?"text-white":"text-gray-900"}`,children:"ë°œì£¼ì„œ ë¯¸ë¦¬ë³´ê¸°"}),e.jsx("span",{className:`text-xs block transition-colors ${t?"text-gray-400":"text-gray-500"}`,children:s?.orderNumber})]})]}),e.jsx("div",{className:"flex space-x-1",children:e.jsxs(h,{variant:"outline",size:"sm",onClick:()=>{const r=window.open("","_blank");r&&(r.document.write(`
                          <html>
                            <head>
                              <title>ë°œì£¼ì„œ - ${s?.orderNumber}</title>
                              <style>
                                body { margin: 0; font-family: Arial, sans-serif; }
                                @media print {
                                  body { margin: 0; }
                                  .no-print { display: none !important; }
                                }
                              </style>
                            </head>
                            <body>
                              ${document.querySelector(".order-preview-content")?.innerHTML||""}
                            </body>
                          </html>
                        `),r.document.close(),r.print())},className:`h-8 px-2 text-xs transition-colors ${t?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[e.jsx($e,{className:"h-4 w-4 mr-1"}),"PDF ì¶œë ¥"]})})]})}),e.jsx("div",{className:"order-preview-content mt-2",children:s&&e.jsx(ke,{order:s})})]})})]})]})})}export{et as default};
