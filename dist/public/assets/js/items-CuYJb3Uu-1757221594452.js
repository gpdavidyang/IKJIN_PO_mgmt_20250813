var fo=Object.defineProperty;var ho=(t,e,r)=>e in t?fo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var s=(t,e,r)=>ho(t,typeof e!="symbol"?e+"":e,r);import{aC as f,h as ai,av as yo,aD as _o,q as qe,j as i,aw as xo,ax as H,ay as W,az as Y,aA as Z,I as Ve,aB as ae,S as Fe,x as Le,y as ze,z as Me,A as ve,B as X,k as oi,d as No,e as bo,u as vo,r as J,p as Ye,P as wo,v as _e,w as Ze,n as Ce,f as et,aE as tt,s as So,t as Ao,G as rt}from"./index-C9dLx8QI-1757221594452.js";import{T as jo,a as Io,b as xe,c as ee,d as To,e as M}from"./table-m3P_xiSo-1757221594452.js";import{P as Po}from"./page-header-m1D63LC9-1757221594452.js";import{T as nt}from"./textarea-CDQQvCks-1757221594452.js";import{S as Co}from"./switch-DthorLXk-1757221594452.js";import{D as Do,a as $o,b as Bo,c as qo}from"./dialog-rX2sQmq6-1757221594452.js";import{S as Vo}from"./search-H2Ti2hqC-1757221594452.js";import{L as Fo}from"./list-BXadb8g9-1757221594452.js";import{G as Lo}from"./grid-3x3-3f1uXJQL-1757221594452.js";import{S as st}from"./square-pen-D0RTwtaQ-1757221594452.js";import{T as it}from"./trash-2-6RiWJZEb-1757221594452.js";import{R as zo,S as Mo}from"./scale-CYfSis7b-1757221594452.js";import{D as Eo}from"./dollar-sign-DkLObQHg-1757221594452.js";import"./index-C2ywu0zP-1757221594452.js";const l=Symbol.for("drizzle:entityKind");function V(t,e){if(!t||typeof t!="object")return!1;if(t instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,l))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let r=Object.getPrototypeOf(t).constructor;if(r)for(;r;){if(l in r&&r[l]===e[l])return!0;r=Object.getPrototypeOf(r)}return!1}var mt;mt=l;class de{constructor(e,r){s(this,"name");s(this,"keyAsName");s(this,"primary");s(this,"notNull");s(this,"default");s(this,"defaultFn");s(this,"onUpdateFn");s(this,"hasDefault");s(this,"isUnique");s(this,"uniqueName");s(this,"uniqueType");s(this,"dataType");s(this,"columnType");s(this,"enumValues");s(this,"generated");s(this,"generatedIdentity");s(this,"config");this.table=e,this.config=r,this.name=r.name,this.keyAsName=r.keyAsName,this.notNull=r.notNull,this.default=r.default,this.defaultFn=r.defaultFn,this.onUpdateFn=r.onUpdateFn,this.hasDefault=r.hasDefault,this.primary=r.primaryKey,this.isUnique=r.isUnique,this.uniqueName=r.uniqueName,this.uniqueType=r.uniqueType,this.dataType=r.dataType,this.columnType=r.columnType,this.generated=r.generated,this.generatedIdentity=r.generatedIdentity}mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}s(de,mt,"Column");var pt;pt=l;class li{constructor(e,r,n){s(this,"config");s(this,"$default",this.$defaultFn);s(this,"$onUpdate",this.$onUpdateFn);this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:r,columnType:n,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}}s(li,pt,"ColumnBuilder");const oe=Symbol.for("drizzle:Name");var gt;gt=l;class di{constructor(e,r){s(this,"reference");s(this,"_onUpdate","no action");s(this,"_onDelete","no action");this.reference=()=>{const{name:n,columns:a,foreignColumns:d}=e();return{name:n,columns:a,foreignTable:d[0].table,foreignColumns:d}},r&&(this._onUpdate=r.onUpdate,this._onDelete=r.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new ui(e,this)}}s(di,gt,"PgForeignKeyBuilder");var ft;ft=l;class ui{constructor(e,r){s(this,"reference");s(this,"onUpdate");s(this,"onDelete");this.table=e,this.reference=r.reference,this.onUpdate=r._onUpdate,this.onDelete=r._onDelete}getName(){const{name:e,columns:r,foreignColumns:n}=this.reference(),a=r.map(y=>y.name),d=n.map(y=>y.name),g=[this.table[oe],...a,n[0].table[oe],...d];return e??`${g.join("_")}_fk`}}s(ui,ft,"PgForeignKey");function Qo(t,...e){return t(...e)}function ci(t){return new gi(t)}function mi(t,e){return`${t[oe]}_${e.join("_")}_unique`}var ht;ht=l;class pi{constructor(e,r){s(this,"columns");s(this,"nullsNotDistinctConfig",!1);this.name=r,this.columns=e}nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(e){return new fi(e,this.columns,this.nullsNotDistinctConfig,this.name)}}s(pi,ht,"PgUniqueConstraintBuilder");var yt;yt=l;class gi{constructor(e){s(this,"name");this.name=e}on(...e){return new pi(e,this.name)}}s(gi,yt,"PgUniqueOnConstraintBuilder");var _t;_t=l;class fi{constructor(e,r,n,a){s(this,"columns");s(this,"name");s(this,"nullsNotDistinct",!1);this.table=e,this.columns=r,this.name=a??mi(this.table,this.columns.map(d=>d.name)),this.nullsNotDistinct=n}getName(){return this.name}}s(fi,_t,"PgUniqueConstraint");function at(t,e,r){for(let n=e;n<t.length;n++){const a=t[n];if(a==="\\"){n++;continue}if(a==='"')return[t.slice(e,n).replace(/\\/g,""),n+1];if(!r&&(a===","||a==="}"))return[t.slice(e,n).replace(/\\/g,""),n]}return[t.slice(e).replace(/\\/g,""),t.length]}function hi(t,e=0){const r=[];let n=e,a=!1;for(;n<t.length;){const d=t[n];if(d===","){(a||n===e)&&r.push(""),a=!0,n++;continue}if(a=!1,d==="\\"){n+=2;continue}if(d==='"'){const[S,v]=at(t,n+1,!0);r.push(S),n=v;continue}if(d==="}")return[r,n+1];if(d==="{"){const[S,v]=hi(t,n+1);r.push(S),n=v;continue}const[g,y]=at(t,n,!1);r.push(g),n=y}return[r,n]}function Uo(t){const[e]=hi(t,1);return e}function yi(t){return`{${t.map(e=>Array.isArray(e)?yi(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}var xt,Nt;class I extends(Nt=li,xt=l,Nt){constructor(){super(...arguments);s(this,"foreignKeyConfigs",[])}array(r){return new xi(this.config.name,this,r)}references(r,n={}){return this.foreignKeyConfigs.push({ref:r,actions:n}),this}unique(r,n){return this.config.isUnique=!0,this.config.uniqueName=r,this.config.uniqueType=n?.nulls,this}generatedAlwaysAs(r){return this.config.generated={as:r,type:"always",mode:"stored"},this}buildForeignKeys(r,n){return this.foreignKeyConfigs.map(({ref:a,actions:d})=>Qo((g,y)=>{const S=new di(()=>{const v=g();return{columns:[r],foreignColumns:[v]}});return y.onUpdate&&S.onUpdate(y.onUpdate),y.onDelete&&S.onDelete(y.onDelete),S.build(n)},a,d))}buildExtraConfigColumn(r){return new _i(r,this.config)}}s(I,xt,"PgColumnBuilder");var bt,vt;class _ extends(vt=de,bt=l,vt){constructor(e,r){r.uniqueName||(r.uniqueName=mi(e,[r.name])),super(e,r),this.table=e}}s(_,bt,"PgColumn");var wt,St;class _i extends(St=_,wt=l,St){constructor(){super(...arguments);s(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass});s(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(r){return this.indexConfig.opClass=r,this}}s(_i,wt,"ExtraConfigColumn");var At;At=l;class Ne{constructor(e,r,n,a){s(this,"name");s(this,"keyAsName");s(this,"type");s(this,"indexConfig");this.name=e,this.keyAsName=r,this.type=n,this.indexConfig=a}}s(Ne,At,"IndexedColumn");var jt,It;class xi extends(It=I,jt=l,It){constructor(e,r,n){super(e,"array","PgArray"),this.config.baseBuilder=r,this.config.size=n}build(e){const r=this.config.baseBuilder.build(e);return new Ee(e,this.config,r)}}s(xi,jt,"PgArrayBuilder");var Tt,Pt;const Ie=class Ie extends(Pt=_,Tt=l,Pt){constructor(r,n,a,d){super(r,n);s(this,"size");this.baseColumn=a,this.range=d,this.size=n.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(r){return typeof r=="string"&&(r=Uo(r)),r.map(n=>this.baseColumn.mapFromDriverValue(n))}mapToDriverValue(r,n=!1){const a=r.map(d=>d===null?null:V(this.baseColumn,Ie)?this.baseColumn.mapToDriverValue(d,!0):this.baseColumn.mapToDriverValue(d));return n?a:yi(a)}};s(Ie,Tt,"PgArray");let Ee=Ie;const Qe=Symbol.for("drizzle:isPgEnum");function Oo(t){return!!t&&typeof t=="function"&&Qe in t&&t[Qe]===!0}var Ct,Dt;class Ni extends(Dt=I,Ct=l,Dt){constructor(e,r){super(e,"string","PgEnumColumn"),this.config.enum=r}build(e){return new bi(e,this.config)}}s(Ni,Ct,"PgEnumColumnBuilder");var $t,Bt;class bi extends(Bt=_,$t=l,Bt){constructor(r,n){super(r,n);s(this,"enum",this.config.enum);s(this,"enumValues",this.config.enum.enumValues);this.enum=n.enum}getSQLType(){return this.enum.enumName}}s(bi,$t,"PgEnumColumn");function Q(t,e){return Ko(t,e,void 0)}function Ko(t,e,r){const n=Object.assign(a=>new Ni(a??"",n),{enumName:t,enumValues:e,schema:r,[Qe]:!0});return n}var qt;qt=l;class Oe{constructor(e,r,n,a=!1){this._={brand:"Subquery",sql:e,selectedFields:r,alias:n,isWith:a}}}s(Oe,qt,"Subquery");const Ro={startActiveSpan(t,e){return e()}},le=Symbol.for("drizzle:ViewBaseConfig"),De=Symbol.for("drizzle:Schema"),ot=Symbol.for("drizzle:Columns"),lt=Symbol.for("drizzle:ExtraConfigColumns"),$e=Symbol.for("drizzle:OriginalName"),Be=Symbol.for("drizzle:BaseName"),we=Symbol.for("drizzle:IsAlias"),dt=Symbol.for("drizzle:ExtraConfigBuilder"),vi=Symbol.for("drizzle:IsDrizzleTable");var Vt,Ft,Lt,zt,Mt,Et,Qt,Ut,Ot,Kt;Kt=l,Ot=oe,Ut=$e,Qt=De,Et=ot,Mt=lt,zt=Be,Lt=we,Ft=vi,Vt=dt;class E{constructor(e,r,n){s(this,Ot);s(this,Ut);s(this,Qt);s(this,Et);s(this,Mt);s(this,zt);s(this,Lt,!1);s(this,Ft,!0);s(this,Vt);this[oe]=this[$e]=e,this[De]=r,this[Be]=n}}s(E,Kt,"Table"),s(E,"Symbol",{Name:oe,Schema:De,OriginalName:$e,Columns:ot,ExtraConfigColumns:lt,BaseName:Be,IsAlias:we,ExtraConfigBuilder:dt});function wi(t){return typeof t=="object"&&t!==null&&vi in t}function Go(t){return t!=null&&typeof t.getSQL=="function"}function Xo(t){const e={sql:"",params:[]};for(const r of t)e.sql+=r.sql,e.params.push(...r.params),r.typings?.length&&(e.typings||(e.typings=[]),e.typings.push(...r.typings));return e}var Rt;Rt=l;class R{constructor(e){s(this,"value");this.value=Array.isArray(e)?e:[e]}getSQL(){return new B([this])}}s(R,Rt,"StringChunk");var Gt;Gt=l;const te=class te{constructor(e){s(this,"decoder",Si);s(this,"shouldInlineParams",!1);this.queryChunks=e}append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return Ro.startActiveSpan("drizzle.buildSQL",r=>{const n=this.buildQueryFromSourceParams(this.queryChunks,e);return r?.setAttributes({"drizzle.query.text":n.sql,"drizzle.query.params":JSON.stringify(n.params)}),n})}buildQueryFromSourceParams(e,r){const n=Object.assign({},r,{inlineParams:r.inlineParams||this.shouldInlineParams,paramStartIndex:r.paramStartIndex||{value:0}}),{casing:a,escapeName:d,escapeParam:g,prepareTyping:y,inlineParams:S,paramStartIndex:v}=n;return Xo(e.map(c=>{if(V(c,R))return{sql:c.value.join(""),params:[]};if(V(c,Se))return{sql:d(c.value),params:[]};if(c===void 0)return{sql:"",params:[]};if(Array.isArray(c)){const A=[new R("(")];for(const[C,G]of c.entries())A.push(G),C<c.length-1&&A.push(new R(", "));return A.push(new R(")")),this.buildQueryFromSourceParams(A,n)}if(V(c,te))return this.buildQueryFromSourceParams(c.queryChunks,{...n,inlineParams:S||c.shouldInlineParams});if(V(c,E)){const A=c[E.Symbol.Schema],C=c[E.Symbol.Name];return{sql:A===void 0||c[we]?d(C):d(A)+"."+d(C),params:[]}}if(V(c,de)){const A=a.getColumnCasing(c);if(r.invokeSource==="indexes")return{sql:d(A),params:[]};const C=c.table[E.Symbol.Schema];return{sql:c.table[we]||C===void 0?d(c.table[E.Symbol.Name])+"."+d(A):d(C)+"."+d(c.table[E.Symbol.Name])+"."+d(A),params:[]}}if(V(c,Ii)){const A=c[le].schema,C=c[le].name;return{sql:A===void 0||c[le].isAlias?d(C):d(A)+"."+d(C),params:[]}}if(V(c,Ke)){if(V(c.value,je))return{sql:g(v.value++,c),params:[c],typings:["none"]};const A=c.value===null?null:c.encoder.mapToDriverValue(c.value);if(V(A,te))return this.buildQueryFromSourceParams([A],n);if(S)return{sql:this.mapInlineParam(A,n),params:[]};let C=["none"];return y&&(C=[y(c.encoder)]),{sql:g(v.value++,A),params:[A],typings:C}}return V(c,je)?{sql:g(v.value++,c),params:[c],typings:["none"]}:V(c,te.Aliased)&&c.fieldAlias!==void 0?{sql:d(c.fieldAlias),params:[]}:V(c,Oe)?c._.isWith?{sql:d(c._.alias),params:[]}:this.buildQueryFromSourceParams([new R("("),c._.sql,new R(") "),new Se(c._.alias)],n):Oo(c)?c.schema?{sql:d(c.schema)+"."+d(c.enumName),params:[]}:{sql:d(c.enumName),params:[]}:Go(c)?c.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([c.getSQL()],n):this.buildQueryFromSourceParams([new R("("),c.getSQL(),new R(")")],n):S?{sql:this.mapInlineParam(c,n),params:[]}:{sql:g(v.value++,c),params:[c],typings:["none"]}}))}mapInlineParam(e,{escapeString:r}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return r(e);if(typeof e=="object"){const n=e.toString();return r(n==="[object Object]"?JSON.stringify(e):n)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new te.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}};s(te,Gt,"SQL");let B=te;var Xt;Xt=l;class Se{constructor(e){s(this,"brand");this.value=e}getSQL(){return new B([this])}}s(Se,Xt,"Name");const Si={mapFromDriverValue:t=>t},Ai={mapToDriverValue:t=>t};({...Si,...Ai});var Jt;Jt=l;class Ke{constructor(e,r=Ai){s(this,"brand");this.value=e,this.encoder=r}getSQL(){return new B([this])}}s(Ke,Jt,"Param");function Ae(t,...e){const r=[];(e.length>0||t.length>0&&t[0]!=="")&&r.push(new R(t[0]));for(const[n,a]of e.entries())r.push(a,new R(t[n+1]));return new B(r)}(t=>{function e(){return new B([])}t.empty=e;function r(S){return new B(S)}t.fromList=r;function n(S){return new B([new R(S)])}t.raw=n;function a(S,v){const c=[];for(const[A,C]of S.entries())A>0&&v!==void 0&&c.push(v),c.push(C);return new B(c)}t.join=a;function d(S){return new Se(S)}t.identifier=d;function g(S){return new je(S)}t.placeholder=g;function y(S,v){return new Ke(S,v)}t.param=y})(Ae||(Ae={}));(t=>{var r;r=l;const n=class n{constructor(d,g){s(this,"isSelectionField",!1);this.sql=d,this.fieldAlias=g}getSQL(){return this.sql}clone(){return new n(this.sql,this.fieldAlias)}};s(n,r,"SQL.Aliased");let e=n;t.Aliased=e})(B||(B={}));var kt;kt=l;class je{constructor(e){this.name=e}getSQL(){return new B([this])}}s(je,kt,"Placeholder");const ji=Symbol.for("drizzle:IsDrizzleView");var Ht,Wt,Yt;Yt=l,Wt=le,Ht=ji;class Ii{constructor({name:e,schema:r,selectedFields:n,query:a}){s(this,Wt);s(this,Ht,!0);this[le]={name:e,originalName:e,schema:r,selectedFields:n,query:a,isExisting:!a,isAlias:!1}}getSQL(){return new B([this])}}s(Ii,Yt,"View");function Jo(t){return typeof t=="object"&&t!==null&&ji in t}de.prototype.getSQL=function(){return new B([this])};E.prototype.getSQL=function(){return new B([this])};Oe.prototype.getSQL=function(){return new B([this])};function ko(t){return t[E.Symbol.Columns]}function Ho(t){return t[le].selectedFields}function F(t,e){return{name:typeof t=="string"&&t.length>0?t:"",config:typeof t=="object"?t:e}}var Zt,er;class fe extends(er=I,Zt=l,er){generatedAlwaysAsIdentity(e){if(e){const{name:r,...n}=e;this.config.generatedIdentity={type:"always",sequenceName:r,sequenceOptions:n}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){const{name:r,...n}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:r,sequenceOptions:n}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}s(fe,Zt,"PgIntColumnBaseBuilder");var tr,rr;class Ti extends(rr=fe,tr=l,rr){constructor(e){super(e,"number","PgBigInt53")}build(e){return new Pi(e,this.config)}}s(Ti,tr,"PgBigInt53Builder");var nr,sr;class Pi extends(sr=_,nr=l,sr){getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}s(Pi,nr,"PgBigInt53");var ir,ar;class Ci extends(ar=fe,ir=l,ar){constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new Di(e,this.config)}}s(Ci,ir,"PgBigInt64Builder");var or,lr;class Di extends(lr=_,or=l,lr){getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}s(Di,or,"PgBigInt64");function Wo(t,e){const{name:r,config:n}=F(t,e);return n.mode==="number"?new Ti(r):new Ci(r)}var dr,ur;class $i extends(ur=I,dr=l,ur){constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Bi(e,this.config)}}s($i,dr,"PgBigSerial53Builder");var cr,mr;class Bi extends(mr=_,cr=l,mr){getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}s(Bi,cr,"PgBigSerial53");var pr,gr;class qi extends(gr=I,pr=l,gr){constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new Vi(e,this.config)}}s(qi,pr,"PgBigSerial64Builder");var fr,hr;class Vi extends(hr=_,fr=l,hr){getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}s(Vi,fr,"PgBigSerial64");function Yo(t,e){const{name:r,config:n}=F(t,e);return n.mode==="number"?new $i(r):new qi(r)}var yr,_r;class Fi extends(_r=I,yr=l,_r){constructor(e){super(e,"boolean","PgBoolean")}build(e){return new Li(e,this.config)}}s(Fi,yr,"PgBooleanBuilder");var xr,Nr;class Li extends(Nr=_,xr=l,Nr){getSQLType(){return"boolean"}}s(Li,xr,"PgBoolean");function N(t){return new Fi(t??"")}var br,vr;class zi extends(vr=I,br=l,vr){constructor(e,r){super(e,"string","PgChar"),this.config.length=r.length,this.config.enumValues=r.enum}build(e){return new Mi(e,this.config)}}s(zi,br,"PgCharBuilder");var wr,Sr;class Mi extends(Sr=_,wr=l,Sr){constructor(){super(...arguments);s(this,"length",this.config.length);s(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}s(Mi,wr,"PgChar");function Zo(t,e={}){const{name:r,config:n}=F(t,e);return new zi(r,n)}var Ar,jr;class Ei extends(jr=I,Ar=l,jr){constructor(e){super(e,"string","PgCidr")}build(e){return new Qi(e,this.config)}}s(Ei,Ar,"PgCidrBuilder");var Ir,Tr;class Qi extends(Tr=_,Ir=l,Tr){getSQLType(){return"cidr"}}s(Qi,Ir,"PgCidr");function el(t){return new Ei(t??"")}var Pr,Cr;class Ui extends(Cr=I,Pr=l,Cr){constructor(e,r,n){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=r,this.config.customTypeParams=n}build(e){return new Oi(e,this.config)}}s(Ui,Pr,"PgCustomColumnBuilder");var Dr,$r;class Oi extends($r=_,Dr=l,$r){constructor(r,n){super(r,n);s(this,"sqlName");s(this,"mapTo");s(this,"mapFrom");this.sqlName=n.customTypeParams.dataType(n.fieldConfig),this.mapTo=n.customTypeParams.toDriver,this.mapFrom=n.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(r){return typeof this.mapFrom=="function"?this.mapFrom(r):r}mapToDriverValue(r){return typeof this.mapTo=="function"?this.mapTo(r):r}}s(Oi,Dr,"PgCustomColumn");function tl(t){return(e,r)=>{const{name:n,config:a}=F(e,r);return new Ui(n,a,t)}}var Br,qr;class ue extends(qr=I,Br=l,qr){defaultNow(){return this.default(Ae`now()`)}}s(ue,Br,"PgDateColumnBaseBuilder");var Vr,Fr;class Ki extends(Fr=ue,Vr=l,Fr){constructor(e){super(e,"date","PgDate")}build(e){return new Ri(e,this.config)}}s(Ki,Vr,"PgDateBuilder");var Lr,zr;class Ri extends(zr=_,Lr=l,zr){getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}s(Ri,Lr,"PgDate");var Mr,Er;class Gi extends(Er=ue,Mr=l,Er){constructor(e){super(e,"string","PgDateString")}build(e){return new Xi(e,this.config)}}s(Gi,Mr,"PgDateStringBuilder");var Qr,Ur;class Xi extends(Ur=_,Qr=l,Ur){getSQLType(){return"date"}}s(Xi,Qr,"PgDateString");function ge(t,e){const{name:r,config:n}=F(t,e);return n?.mode==="date"?new Ki(r):new Gi(r)}var Or,Kr;class Ji extends(Kr=I,Or=l,Kr){constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new ki(e,this.config)}}s(Ji,Or,"PgDoublePrecisionBuilder");var Rr,Gr;class ki extends(Gr=_,Rr=l,Gr){getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}}s(ki,Rr,"PgDoublePrecision");function rl(t){return new Ji(t??"")}var Xr,Jr;class Hi extends(Jr=I,Xr=l,Jr){constructor(e){super(e,"string","PgInet")}build(e){return new Wi(e,this.config)}}s(Hi,Xr,"PgInetBuilder");var kr,Hr;class Wi extends(Hr=_,kr=l,Hr){getSQLType(){return"inet"}}s(Wi,kr,"PgInet");function nl(t){return new Hi(t??"")}var Wr,Yr;class Yi extends(Yr=fe,Wr=l,Yr){constructor(e){super(e,"number","PgInteger")}build(e){return new Zi(e,this.config)}}s(Yi,Wr,"PgIntegerBuilder");var Zr,en;class Zi extends(en=_,Zr=l,en){getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}}s(Zi,Zr,"PgInteger");function h(t){return new Yi(t??"")}var tn,rn;class ea extends(rn=I,tn=l,rn){constructor(e,r){super(e,"string","PgInterval"),this.config.intervalConfig=r}build(e){return new ta(e,this.config)}}s(ea,tn,"PgIntervalBuilder");var nn,sn;class ta extends(sn=_,nn=l,sn){constructor(){super(...arguments);s(this,"fields",this.config.intervalConfig.fields);s(this,"precision",this.config.intervalConfig.precision)}getSQLType(){const r=this.fields?` ${this.fields}`:"",n=this.precision?`(${this.precision})`:"";return`interval${r}${n}`}}s(ta,nn,"PgInterval");function sl(t,e={}){const{name:r,config:n}=F(t,e);return new ea(r,n)}var an,on;class ra extends(on=I,an=l,on){constructor(e){super(e,"json","PgJson")}build(e){return new na(e,this.config)}}s(ra,an,"PgJsonBuilder");var ln,dn;class na extends(dn=_,ln=l,dn){constructor(e,r){super(e,r)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}s(na,ln,"PgJson");function il(t){return new ra(t??"")}var un,cn;class sa extends(cn=I,un=l,cn){constructor(e){super(e,"json","PgJsonb")}build(e){return new ia(e,this.config)}}s(sa,un,"PgJsonbBuilder");var mn,pn;class ia extends(pn=_,mn=l,pn){constructor(e,r){super(e,r)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}s(ia,mn,"PgJsonb");function T(t){return new sa(t??"")}var gn,fn;class aa extends(fn=I,gn=l,fn){constructor(e){super(e,"array","PgLine")}build(e){return new oa(e,this.config)}}s(aa,gn,"PgLineBuilder");var hn,yn;class oa extends(yn=_,hn=l,yn){getSQLType(){return"line"}mapFromDriverValue(e){const[r,n,a]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(n),Number.parseFloat(a)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}s(oa,hn,"PgLine");var _n,xn;class la extends(xn=I,_n=l,xn){constructor(e){super(e,"json","PgLineABC")}build(e){return new da(e,this.config)}}s(la,_n,"PgLineABCBuilder");var Nn,bn;class da extends(bn=_,Nn=l,bn){getSQLType(){return"line"}mapFromDriverValue(e){const[r,n,a]=e.slice(1,-1).split(",");return{a:Number.parseFloat(r),b:Number.parseFloat(n),c:Number.parseFloat(a)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}s(da,Nn,"PgLineABC");function al(t,e){const{name:r,config:n}=F(t,e);return!n?.mode||n.mode==="tuple"?new aa(r):new la(r)}var vn,wn;class ua extends(wn=I,vn=l,wn){constructor(e){super(e,"string","PgMacaddr")}build(e){return new ca(e,this.config)}}s(ua,vn,"PgMacaddrBuilder");var Sn,An;class ca extends(An=_,Sn=l,An){getSQLType(){return"macaddr"}}s(ca,Sn,"PgMacaddr");function ol(t){return new ua(t??"")}var jn,In;class ma extends(In=I,jn=l,In){constructor(e){super(e,"string","PgMacaddr8")}build(e){return new pa(e,this.config)}}s(ma,jn,"PgMacaddr8Builder");var Tn,Pn;class pa extends(Pn=_,Tn=l,Pn){getSQLType(){return"macaddr8"}}s(pa,Tn,"PgMacaddr8");function ll(t){return new ma(t??"")}var Cn,Dn;class ga extends(Dn=I,Cn=l,Dn){constructor(e,r,n){super(e,"string","PgNumeric"),this.config.precision=r,this.config.scale=n}build(e){return new fa(e,this.config)}}s(ga,Cn,"PgNumericBuilder");var $n,Bn;class fa extends(Bn=_,$n=l,Bn){constructor(r,n){super(r,n);s(this,"precision");s(this,"scale");this.precision=n.precision,this.scale=n.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}s(fa,$n,"PgNumeric");function ha(t,e){const{name:r,config:n}=F(t,e);return new ga(r,n?.precision,n?.scale)}const L=ha;var qn,Vn;class ya extends(Vn=I,qn=l,Vn){constructor(e){super(e,"array","PgPointTuple")}build(e){return new _a(e,this.config)}}s(ya,qn,"PgPointTupleBuilder");var Fn,Ln;class _a extends(Ln=_,Fn=l,Ln){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[r,n]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(n)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}s(_a,Fn,"PgPointTuple");var zn,Mn;class xa extends(Mn=I,zn=l,Mn){constructor(e){super(e,"json","PgPointObject")}build(e){return new Na(e,this.config)}}s(xa,zn,"PgPointObjectBuilder");var En,Qn;class Na extends(Qn=_,En=l,Qn){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[r,n]=e.slice(1,-1).split(",");return{x:Number.parseFloat(r),y:Number.parseFloat(n)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}s(Na,En,"PgPointObject");function dl(t,e){const{name:r,config:n}=F(t,e);return!n?.mode||n.mode==="tuple"?new ya(r):new xa(r)}function ul(t){const e=[];for(let r=0;r<t.length;r+=2)e.push(Number.parseInt(t.slice(r,r+2),16));return new Uint8Array(e)}function ut(t,e){const r=new ArrayBuffer(8),n=new DataView(r);for(let a=0;a<8;a++)n.setUint8(a,t[e+a]);return n.getFloat64(0,!0)}function ba(t){const e=ul(t);let r=0;const n=e[r];r+=1;const a=new DataView(e.buffer),d=a.getUint32(r,n===1);if(r+=4,d&536870912&&(a.getUint32(r,n===1),r+=4),(d&65535)===1){const g=ut(e,r);r+=8;const y=ut(e,r);return r+=8,[g,y]}throw new Error("Unsupported geometry type")}var Un,On;class va extends(On=I,Un=l,On){constructor(e){super(e,"array","PgGeometry")}build(e){return new wa(e,this.config)}}s(va,Un,"PgGeometryBuilder");var Kn,Rn;class wa extends(Rn=_,Kn=l,Rn){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return ba(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}s(wa,Kn,"PgGeometry");var Gn,Xn;class Sa extends(Xn=I,Gn=l,Xn){constructor(e){super(e,"json","PgGeometryObject")}build(e){return new Aa(e,this.config)}}s(Sa,Gn,"PgGeometryObjectBuilder");var Jn,kn;class Aa extends(kn=_,Jn=l,kn){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){const r=ba(e);return{x:r[0],y:r[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}s(Aa,Jn,"PgGeometryObject");function cl(t,e){const{name:r,config:n}=F(t,e);return!n?.mode||n.mode==="tuple"?new va(r):new Sa(r)}var Hn,Wn;class ja extends(Wn=I,Hn=l,Wn){constructor(e,r){super(e,"number","PgReal"),this.config.length=r}build(e){return new Ia(e,this.config)}}s(ja,Hn,"PgRealBuilder");var Yn,Zn;class Ia extends(Zn=_,Yn=l,Zn){constructor(r,n){super(r,n);s(this,"mapFromDriverValue",r=>typeof r=="string"?Number.parseFloat(r):r)}getSQLType(){return"real"}}s(Ia,Yn,"PgReal");function ml(t){return new ja(t??"")}var es,ts;class Ta extends(ts=I,es=l,ts){constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Pa(e,this.config)}}s(Ta,es,"PgSerialBuilder");var rs,ns;class Pa extends(ns=_,rs=l,ns){getSQLType(){return"serial"}}s(Pa,rs,"PgSerial");function j(t){return new Ta(t??"")}var ss,is;class Ca extends(is=fe,ss=l,is){constructor(e){super(e,"number","PgSmallInt")}build(e){return new Da(e,this.config)}}s(Ca,ss,"PgSmallIntBuilder");var as,os;class Da extends(os=_,as=l,os){constructor(){super(...arguments);s(this,"mapFromDriverValue",r=>typeof r=="string"?Number(r):r)}getSQLType(){return"smallint"}}s(Da,as,"PgSmallInt");function pl(t){return new Ca(t??"")}var ls,ds;class $a extends(ds=I,ls=l,ds){constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Ba(e,this.config)}}s($a,ls,"PgSmallSerialBuilder");var us,cs;class Ba extends(cs=_,us=l,cs){getSQLType(){return"smallserial"}}s(Ba,us,"PgSmallSerial");function gl(t){return new $a(t??"")}var ms,ps;class qa extends(ps=I,ms=l,ps){constructor(e,r){super(e,"string","PgText"),this.config.enumValues=r.enum}build(e){return new Va(e,this.config)}}s(qa,ms,"PgTextBuilder");var gs,fs;class Va extends(fs=_,gs=l,fs){constructor(){super(...arguments);s(this,"enumValues",this.config.enumValues)}getSQLType(){return"text"}}s(Va,gs,"PgText");function x(t,e={}){const{name:r,config:n}=F(t,e);return new qa(r,n)}var hs,ys;class Fa extends(ys=ue,hs=l,ys){constructor(e,r,n){super(e,"string","PgTime"),this.withTimezone=r,this.precision=n,this.config.withTimezone=r,this.config.precision=n}build(e){return new La(e,this.config)}}s(Fa,hs,"PgTimeBuilder");var _s,xs;class La extends(xs=_,_s=l,xs){constructor(r,n){super(r,n);s(this,"withTimezone");s(this,"precision");this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}s(La,_s,"PgTime");function fl(t,e={}){const{name:r,config:n}=F(t,e);return new Fa(r,n.withTimezone??!1,n.precision)}var Ns,bs;class za extends(bs=ue,Ns=l,bs){constructor(e,r,n){super(e,"date","PgTimestamp"),this.config.withTimezone=r,this.config.precision=n}build(e){return new Ma(e,this.config)}}s(za,Ns,"PgTimestampBuilder");var vs,ws;class Ma extends(ws=_,vs=l,ws){constructor(r,n){super(r,n);s(this,"withTimezone");s(this,"precision");s(this,"mapFromDriverValue",r=>new Date(this.withTimezone?r:r+"+0000"));s(this,"mapToDriverValue",r=>r.toISOString());this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}s(Ma,vs,"PgTimestamp");var Ss,As;class Ea extends(As=ue,Ss=l,As){constructor(e,r,n){super(e,"string","PgTimestampString"),this.config.withTimezone=r,this.config.precision=n}build(e){return new Qa(e,this.config)}}s(Ea,Ss,"PgTimestampStringBuilder");var js,Is;class Qa extends(Is=_,js=l,Is){constructor(r,n){super(r,n);s(this,"withTimezone");s(this,"precision");this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}s(Qa,js,"PgTimestampString");function u(t,e={}){const{name:r,config:n}=F(t,e);return n?.mode==="string"?new Ea(r,n.withTimezone??!1,n.precision):new za(r,n?.withTimezone??!1,n?.precision)}var Ts,Ps;class Ua extends(Ps=I,Ts=l,Ps){constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(Ae`gen_random_uuid()`)}build(e){return new Oa(e,this.config)}}s(Ua,Ts,"PgUUIDBuilder");var Cs,Ds;class Oa extends(Ds=_,Cs=l,Ds){getSQLType(){return"uuid"}}s(Oa,Cs,"PgUUID");function hl(t){return new Ua(t??"")}var $s,Bs;class Ka extends(Bs=I,$s=l,Bs){constructor(e,r){super(e,"string","PgVarchar"),this.config.length=r.length,this.config.enumValues=r.enum}build(e){return new Ra(e,this.config)}}s(Ka,$s,"PgVarcharBuilder");var qs,Vs;class Ra extends(Vs=_,qs=l,Vs){constructor(){super(...arguments);s(this,"length",this.config.length);s(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}s(Ra,qs,"PgVarchar");function o(t,e={}){const{name:r,config:n}=F(t,e);return new Ka(r,n)}var Fs,Ls;class Ga extends(Ls=I,Fs=l,Ls){constructor(e,r){super(e,"string","PgBinaryVector"),this.config.dimensions=r.dimensions}build(e){return new Xa(e,this.config)}}s(Ga,Fs,"PgBinaryVectorBuilder");var zs,Ms;class Xa extends(Ms=_,zs=l,Ms){constructor(){super(...arguments);s(this,"dimensions",this.config.dimensions)}getSQLType(){return`bit(${this.dimensions})`}}s(Xa,zs,"PgBinaryVector");function yl(t,e){const{name:r,config:n}=F(t,e);return new Ga(r,n)}var Es,Qs;class Ja extends(Qs=I,Es=l,Qs){constructor(e,r){super(e,"array","PgHalfVector"),this.config.dimensions=r.dimensions}build(e){return new ka(e,this.config)}}s(Ja,Es,"PgHalfVectorBuilder");var Us,Os;class ka extends(Os=_,Us=l,Os){constructor(){super(...arguments);s(this,"dimensions",this.config.dimensions)}getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(r){return JSON.stringify(r)}mapFromDriverValue(r){return r.slice(1,-1).split(",").map(n=>Number.parseFloat(n))}}s(ka,Us,"PgHalfVector");function _l(t,e){const{name:r,config:n}=F(t,e);return new Ja(r,n)}var Ks,Rs;class Ha extends(Rs=I,Ks=l,Rs){constructor(e,r){super(e,"string","PgSparseVector"),this.config.dimensions=r.dimensions}build(e){return new Wa(e,this.config)}}s(Ha,Ks,"PgSparseVectorBuilder");var Gs,Xs;class Wa extends(Xs=_,Gs=l,Xs){constructor(){super(...arguments);s(this,"dimensions",this.config.dimensions)}getSQLType(){return`sparsevec(${this.dimensions})`}}s(Wa,Gs,"PgSparseVector");function xl(t,e){const{name:r,config:n}=F(t,e);return new Ha(r,n)}var Js,ks;class Ya extends(ks=I,Js=l,ks){constructor(e,r){super(e,"array","PgVector"),this.config.dimensions=r.dimensions}build(e){return new Za(e,this.config)}}s(Ya,Js,"PgVectorBuilder");var Hs,Ws;class Za extends(Ws=_,Hs=l,Ws){constructor(){super(...arguments);s(this,"dimensions",this.config.dimensions)}getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(r){return JSON.stringify(r)}mapFromDriverValue(r){return r.slice(1,-1).split(",").map(n=>Number.parseFloat(n))}}s(Za,Hs,"PgVector");function Nl(t,e){const{name:r,config:n}=F(t,e);return new Ya(r,n)}function bl(){return{bigint:Wo,bigserial:Yo,boolean:N,char:Zo,cidr:el,customType:tl,date:ge,doublePrecision:rl,inet:nl,integer:h,interval:sl,json:il,jsonb:T,line:al,macaddr:ol,macaddr8:ll,numeric:ha,point:dl,geometry:cl,real:ml,serial:j,smallint:pl,smallserial:gl,text:x,time:fl,timestamp:u,uuid:hl,varchar:o,bit:yl,halfvec:_l,sparsevec:xl,vector:Nl}}const Ue=Symbol.for("drizzle:PgInlineForeignKeys"),ct=Symbol.for("drizzle:EnableRLS");var Ys,Zs,ei,ti,ri;class pe extends(ri=E,ti=l,ei=Ue,Zs=ct,Ys=E.Symbol.ExtraConfigBuilder,ri){constructor(){super(...arguments);s(this,ei,[]);s(this,Zs,!1);s(this,Ys)}}s(pe,ti,"PgTable"),s(pe,"Symbol",Object.assign({},E.Symbol,{InlineForeignKeys:Ue,EnableRLS:ct}));function vl(t,e,r,n,a=t){const d=new pe(t,n,a),g=typeof e=="function"?e(bl()):e,y=Object.fromEntries(Object.entries(g).map(([c,A])=>{const C=A;C.setName(c);const G=C.build(d);return d[Ue].push(...C.buildForeignKeys(G,d)),[c,G]})),S=Object.fromEntries(Object.entries(g).map(([c,A])=>{const C=A;C.setName(c);const G=C.buildExtraConfigColumn(d);return[c,G]})),v=Object.assign(d,y);return v[E.Symbol.Columns]=y,v[E.Symbol.ExtraConfigColumns]=S,r&&(v[pe.Symbol.ExtraConfigBuilder]=r),Object.assign(v,{enableRLS:()=>(v[pe.Symbol.EnableRLS]=!0,v)})}const b=(t,e,r)=>vl(t,e,r,void 0);var ni;ni=l;class eo{constructor(e,r){this.unique=e,this.name=r}on(...e){return new be(e.map(r=>{if(V(r,B))return r;r=r;const n=new Ne(r.name,!!r.keyAsName,r.columnType,r.indexConfig);return r.indexConfig=JSON.parse(JSON.stringify(r.defaultConfig)),n}),this.unique,!1,this.name)}onOnly(...e){return new be(e.map(r=>{if(V(r,B))return r;r=r;const n=new Ne(r.name,!!r.keyAsName,r.columnType,r.indexConfig);return r.indexConfig=r.defaultConfig,n}),this.unique,!0,this.name)}using(e,...r){return new be(r.map(n=>{if(V(n,B))return n;n=n;const a=new Ne(n.name,!!n.keyAsName,n.columnType,n.indexConfig);return n.indexConfig=JSON.parse(JSON.stringify(n.defaultConfig)),a}),this.unique,!0,this.name,e)}}s(eo,ni,"PgIndexBuilderOn");var si;si=l;class be{constructor(e,r,n,a,d="btree"){s(this,"config");this.config={name:a,columns:e,unique:r,only:n,method:d}}concurrently(){return this.config.concurrently=!0,this}with(e){return this.config.with=e,this}where(e){return this.config.where=e,this}build(e){return new to(this.config,e)}}s(be,si,"PgIndexBuilder");var ii;ii=l;class to{constructor(e,r){s(this,"config");this.config={...e,table:r}}}s(to,ii,"PgIndex");function m(t){return new eo(!1,t)}const $={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function q(t,e){return e.includes(t.columnType)}function wl(t){return"enumValues"in t&&Array.isArray(t.enumValues)&&t.enumValues.length>0}const Sl=f.union([f.string(),f.number(),f.boolean(),f.null()]),Al=f.union([Sl,f.record(f.any()),f.array(f.any())]),jl=f.custom(t=>t instanceof Buffer);function ro(t,e){const r=e?.zodInstance??f,n=e?.coerce??{};let a;return wl(t)&&(a=t.enumValues.length?r.enum(t.enumValues):r.string()),a||(q(t,["PgGeometry","PgPointTuple"])?a=r.tuple([r.number(),r.number()]):q(t,["PgGeometryObject","PgPointObject"])?a=r.object({x:r.number(),y:r.number()}):q(t,["PgHalfVector","PgVector"])?(a=r.array(r.number()),a=t.dimensions?a.length(t.dimensions):a):q(t,["PgLine"])?a=r.tuple([r.number(),r.number(),r.number()]):q(t,["PgLineABC"])?a=r.object({a:r.number(),b:r.number(),c:r.number()}):q(t,["PgArray"])?(a=r.array(ro(t.baseColumn,r)),a=t.size?a.length(t.size):a):t.dataType==="array"?a=r.array(r.any()):t.dataType==="number"?a=Il(t,r,n):t.dataType==="bigint"?a=Tl(t,r,n):t.dataType==="boolean"?a=n===!0||n.boolean?r.coerce.boolean():r.boolean():t.dataType==="date"?a=n===!0||n.date?r.coerce.date():r.date():t.dataType==="string"?a=Pl(t,r,n):t.dataType==="json"?a=Al:t.dataType==="custom"?a=r.any():t.dataType==="buffer"&&(a=jl)),a||(a=r.any()),a}function Il(t,e,r){let n=t.getSQLType().includes("unsigned"),a,d,g=!1;q(t,["MySqlTinyInt","SingleStoreTinyInt"])?(a=n?0:$.INT8_MIN,d=n?$.INT8_UNSIGNED_MAX:$.INT8_MAX,g=!0):q(t,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(a=n?0:$.INT16_MIN,d=n?$.INT16_UNSIGNED_MAX:$.INT16_MAX,g=!0):q(t,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(a=n?0:$.INT24_MIN,d=n?$.INT24_UNSIGNED_MAX:$.INT24_MAX,g=q(t,["MySqlMediumInt","SingleStoreMediumInt"])):q(t,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(a=n?0:$.INT32_MIN,d=n?$.INT32_UNSIGNED_MAX:$.INT32_MAX,g=!0):q(t,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(a=n?0:$.INT48_MIN,d=n?$.INT48_UNSIGNED_MAX:$.INT48_MAX):q(t,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(n=n||q(t,["MySqlSerial","SingleStoreSerial"]),a=n?0:Number.MIN_SAFE_INTEGER,d=Number.MAX_SAFE_INTEGER,g=!0):q(t,["MySqlYear","SingleStoreYear"])?(a=1901,d=2155,g=!0):(a=Number.MIN_SAFE_INTEGER,d=Number.MAX_SAFE_INTEGER);let y=r===!0||r?.number?e.coerce.number():e.number();return y=y.min(a).max(d),g?y.int():y}function Tl(t,e,r){const n=t.getSQLType().includes("unsigned"),a=n?0n:$.INT64_MIN,d=n?$.INT64_UNSIGNED_MAX:$.INT64_MAX;return(r===!0||r?.bigint?e.coerce.bigint():e.bigint()).min(a).max(d)}function Pl(t,e,r){if(q(t,["PgUUID"]))return e.string().uuid();let n,a,d=!1;q(t,["PgVarchar","SQLiteText"])?n=t.length:q(t,["MySqlVarChar","SingleStoreVarChar"])?n=t.length??$.INT16_UNSIGNED_MAX:q(t,["MySqlText","SingleStoreText"])&&(t.textType==="longtext"?n=$.INT32_UNSIGNED_MAX:t.textType==="mediumtext"?n=$.INT24_UNSIGNED_MAX:t.textType==="text"?n=$.INT16_UNSIGNED_MAX:n=$.INT8_UNSIGNED_MAX),q(t,["PgChar","MySqlChar","SingleStoreChar"])&&(n=t.length,d=!0),q(t,["PgBinaryVector"])&&(a=/^[01]+$/,n=t.dimensions);let g=r===!0||r?.string?e.coerce.string():e.string();return g=a?g.regex(a):g,n&&d?g.length(n):n?g.max(n):g}function no(t){return wi(t)?ko(t):Ho(t)}function so(t,e,r,n){const a={};for(const[d,g]of Object.entries(t)){if(!V(g,de)&&!V(g,B)&&!V(g,B.Aliased)&&typeof g=="object"){const A=wi(g)||Jo(g)?no(g):g;a[d]=so(A,e[d]??{},r,n);continue}const y=e[d];if(y!==void 0&&typeof y!="function"){a[d]=y;continue}const S=V(g,de)?g:void 0,v=S?ro(S,n):f.any(),c=typeof y=="function"?y(v):v;r.never(S)||(a[d]=c,S&&(r.nullable(S)&&(a[d]=a[d].nullable()),r.optional(S)&&(a[d]=a[d].optional())))}return f.object(a)}const Cl={never:t=>t?.generated?.type==="always"||t?.generatedIdentity?.type==="always",optional:t=>!t.notNull||t.notNull&&t.hasDefault,nullable:t=>!t.notNull},w=(t,e)=>{const r=no(t);return so(r,{},Cl)};b("sessions",{sid:o("sid").primaryKey(),sess:T("sess").notNull(),expire:u("expire").notNull()},t=>[m("IDX_session_expire").on(t.expire)]);const io=b("ui_terms",{id:j("id").primaryKey(),termKey:o("term_key",{length:100}).notNull().unique(),termValue:o("term_value",{length:255}).notNull(),category:o("category",{length:50}).default("general"),description:x("description"),isActive:N("is_active").default(!0),createdAt:u("created_at").defaultNow(),updatedAt:u("updated_at").defaultNow()}),Dl=b("item_categories",{id:j("id").primaryKey(),categoryType:o("category_type",{length:20}).notNull(),categoryName:o("category_name",{length:100}).notNull(),parentId:h("parent_id"),displayOrder:h("display_order").default(0),isActive:N("is_active").default(!0),createdAt:u("created_at").defaultNow(),updatedAt:u("updated_at").defaultNow()},t=>[m("idx_item_categories_type").on(t.categoryType),m("idx_item_categories_parent").on(t.parentId)]),ce=Q("user_role",["field_worker","project_manager","hq_management","executive","admin"]),$l=Q("purchase_order_status",["draft","pending","approved","sent","completed"]),Bl=Q("order_status",["draft","created","sent","delivered"]),ql=Q("approval_status",["not_required","pending","approved","rejected"]),Vl=Q("project_status",["planning","active","on_hold","completed","cancelled"]),Fl=Q("project_type",["commercial","residential","industrial","infrastructure"]),Ll=Q("invoice_status",["pending","verified","paid"]),zl=Q("item_receipt_status",["pending","approved","rejected"]),Ml=Q("verification_action",["invoice_uploaded","item_verified","quality_checked"]),El=Q("approval_step_status",["pending","approved","rejected","skipped"]),Ql=b("email_settings",{id:j("id").primaryKey(),smtpHost:o("smtp_host",{length:255}).notNull(),smtpPort:h("smtp_port").notNull().default(587),smtpUser:o("smtp_user",{length:255}).notNull(),smtpPass:x("smtp_pass").notNull(),fromName:o("from_name",{length:100}),isActive:N("is_active").default(!0),isDefault:N("is_default").default(!1),description:x("description"),createdAt:u("created_at").defaultNow(),updatedAt:u("updated_at").defaultNow(),createdBy:o("created_by"),lastTestedAt:u("last_tested_at"),testResult:T("test_result")},t=>[m("idx_email_settings_active").on(t.isActive),m("idx_email_settings_default").on(t.isDefault)]),Ul=b("approval_authorities",{id:j("id").primaryKey(),role:ce("role").notNull(),maxAmount:L("max_amount",{precision:15,scale:2}).notNull(),description:x("description"),isActive:N("is_active").default(!0),canDirectApprove:N("can_direct_approve").default(!1),directApproveLimit:L("direct_approve_limit",{precision:15,scale:2}),createdAt:u("created_at").defaultNow(),updatedAt:u("updated_at").defaultNow()},t=>[ci("unique_role_approval").on(t.role)]),Ol=Q("account_status",["active","pending","suspended","inactive"]),D=b("users",{id:o("id").primaryKey().notNull(),email:o("email").unique().notNull(),name:o("name").notNull(),password:o("hashed_password").notNull(),phoneNumber:o("phone_number"),profileImageUrl:o("profile_image_url"),role:ce("role").notNull().default("field_worker"),position:o("position"),accountStatus:Ol("account_status").default("active"),isActive:N("is_active").default(!0),createdAt:u("created_at").defaultNow(),updatedAt:u("updated_at").defaultNow()},t=>[m("idx_users_email").on(t.email),m("idx_users_role").on(t.role),m("idx_users_account_status").on(t.accountStatus)]),Re=b("companies",{id:j("id").primaryKey(),companyName:o("company_name",{length:255}).notNull(),businessNumber:o("business_number",{length:50}),representative:o("representative",{length:100}),address:x("address"),contactPerson:o("contact_person",{length:100}),phone:o("phone",{length:50}),email:o("email",{length:255}),fax:o("fax",{length:50}),website:o("website",{length:255}),isActive:N("is_active").default(!0),createdAt:u("created_at").defaultNow(),updatedAt:u("updated_at").defaultNow()}),ao=b("vendors",{id:j("id").primaryKey(),name:o("name",{length:255}).notNull(),vendorCode:o("vendor_code",{length:50}),aliases:T("aliases").default([]).$type(),businessNumber:o("business_number",{length:50}),contactPerson:o("contact_person",{length:100}).notNull(),email:o("email",{length:255}).notNull(),phone:o("phone",{length:50}),address:x("address"),businessType:o("business_type",{length:100}),isActive:N("is_active").default(!0),createdAt:u("created_at").defaultNow(),updatedAt:u("updated_at").defaultNow()},t=>[m("idx_vendors_name").on(t.name),m("idx_vendors_business_number").on(t.businessNumber),m("idx_vendors_email").on(t.email),m("idx_vendors_active").on(t.isActive)]),Kl=b("items",{id:j("id").primaryKey(),name:o("name",{length:255}).notNull(),specification:x("specification"),unit:o("unit",{length:50}).notNull(),unitPrice:L("unit_price",{precision:15,scale:2}),category:o("category",{length:100}),majorCategory:o("major_category",{length:100}),middleCategory:o("middle_category",{length:100}),minorCategory:o("minor_category",{length:100}),description:x("description"),isActive:N("is_active").default(!0),createdAt:u("created_at").defaultNow(),updatedAt:u("updated_at").defaultNow()},t=>[m("idx_items_name").on(t.name),m("idx_items_category").on(t.category),m("idx_items_active").on(t.isActive)]),Rl=b("terminology",{id:j("id").primaryKey(),termKey:o("term_key",{length:100}).notNull().unique(),termValue:o("term_value",{length:255}).notNull(),category:o("category",{length:100}),description:x("description"),isActive:N("is_active").default(!0),createdAt:u("created_at").defaultNow(),updatedAt:u("updated_at").defaultNow()},t=>[m("idx_terminology_key").on(t.termKey),m("idx_terminology_category").on(t.category),m("idx_terminology_active").on(t.isActive)]),Te=b("projects",{id:j("id").primaryKey(),projectName:o("project_name",{length:255}).notNull(),projectCode:o("project_code",{length:100}).notNull().unique(),clientName:o("client_name",{length:255}),projectType:Fl("project_type").notNull().default("commercial"),location:x("location"),startDate:ge("start_date"),endDate:ge("end_date"),status:Vl("status").notNull().default("active"),totalBudget:L("total_budget",{precision:15,scale:2}),projectManagerId:o("project_manager_id").references(()=>D.id),orderManagerId:o("order_manager_id").references(()=>D.id),description:x("description"),isActive:N("is_active").default(!0),createdAt:u("created_at").defaultNow(),updatedAt:u("updated_at").defaultNow()},t=>[m("idx_projects_name").on(t.projectName),m("idx_projects_code").on(t.projectCode),m("idx_projects_status").on(t.status),m("idx_projects_start_date").on(t.startDate),m("idx_projects_active").on(t.isActive),m("idx_projects_manager").on(t.projectManagerId)]),Gl=b("project_members",{id:j("id").primaryKey(),projectId:h("project_id").references(()=>Te.id,{onDelete:"cascade"}).notNull(),userId:o("user_id").references(()=>D.id,{onDelete:"cascade"}).notNull(),role:o("role",{length:50}).notNull(),assignedAt:u("assigned_at").defaultNow(),assignedBy:o("assigned_by").references(()=>D.id),isActive:N("is_active").default(!0),createdAt:u("created_at").defaultNow(),updatedAt:u("updated_at").defaultNow()},t=>[ci("project_members_project_user_unique").on(t.projectId,t.userId)]),Xl=b("project_history",{id:j("id").primaryKey(),projectId:h("project_id").references(()=>Te.id,{onDelete:"cascade"}).notNull(),fieldName:o("field_name",{length:100}).notNull(),oldValue:x("old_value"),newValue:x("new_value"),changedBy:o("changed_by").references(()=>D.id).notNull(),changedAt:u("changed_at").defaultNow(),changeReason:x("change_reason")}),he=b("order_templates",{id:j("id").primaryKey(),templateName:o("template_name",{length:100}).notNull(),templateType:o("template_type",{length:50}).notNull(),isActive:N("is_active").default(!0),createdAt:u("created_at").defaultNow(),updatedAt:u("updated_at").defaultNow()}),Jl=b("template_fields",{id:j("id").primaryKey(),templateId:h("template_id").references(()=>he.id,{onDelete:"cascade"}),fieldType:o("field_type",{length:50}).notNull(),fieldName:o("field_name",{length:100}).notNull(),label:o("label",{length:255}).notNull(),placeholder:o("placeholder",{length:255}),required:N("required").default(!1),validation:T("validation"),options:T("options"),gridPosition:T("grid_position").notNull(),sectionName:o("section_name",{length:100}).notNull(),sortOrder:h("sort_order").default(0),isActive:N("is_active").default(!0),createdAt:u("created_at").defaultNow(),updatedAt:u("updated_at").defaultNow()}),kl=b("handsontable_configs",{id:j("id").primaryKey(),templateId:h("template_id").references(()=>he.id,{onDelete:"cascade"}),colHeaders:T("col_headers").notNull(),columns:T("columns").notNull(),rowsCount:h("rows_count").default(10),formulas:T("formulas"),validationRules:T("validation_rules"),customStyles:T("custom_styles"),settings:T("settings"),sortOrder:h("sort_order").default(0),isActive:N("is_active").default(!0),createdAt:u("created_at").defaultNow(),updatedAt:u("updated_at").defaultNow()}),Hl=b("template_versions",{id:j("id").primaryKey(),templateId:h("template_id").references(()=>he.id,{onDelete:"cascade"}),versionNumber:o("version_number",{length:20}).notNull(),changes:T("changes"),templateConfig:T("template_config").notNull(),createdBy:o("created_by",{length:255}),createdAt:u("created_at").defaultNow()}),k=b("purchase_orders",{id:j("id").primaryKey(),orderNumber:o("order_number",{length:50}).notNull().unique(),projectId:h("project_id").references(()=>Te.id).notNull(),vendorId:h("vendor_id").references(()=>ao.id),userId:o("user_id").references(()=>D.id).notNull(),templateId:h("template_id").references(()=>he.id),orderDate:ge("order_date").notNull(),deliveryDate:ge("delivery_date"),status:$l("status").notNull().default("pending"),orderStatus:Bl("order_status").default("draft"),approvalStatus:ql("approval_status").default("not_required"),approvalBypassReason:x("approval_bypass_reason"),nextApproverId:o("next_approver_id").references(()=>D.id),approvalRequestedAt:u("approval_requested_at"),deliveredAt:u("delivered_at"),deliveredBy:o("delivered_by").references(()=>D.id),totalAmount:L("total_amount",{precision:15,scale:2}).default("0").$type(),notes:x("notes"),isApproved:N("is_approved").default(!1),approvedBy:o("approved_by").references(()=>D.id),approvedAt:u("approved_at"),currentApproverRole:ce("current_approver_role"),approvalLevel:h("approval_level").default(1),createdAt:u("created_at").defaultNow(),updatedAt:u("updated_at").defaultNow()},t=>[m("idx_purchase_orders_number").on(t.orderNumber),m("idx_purchase_orders_project").on(t.projectId),m("idx_purchase_orders_vendor").on(t.vendorId),m("idx_purchase_orders_user").on(t.userId),m("idx_purchase_orders_status").on(t.status),m("idx_purchase_orders_date").on(t.orderDate),m("idx_purchase_orders_delivery").on(t.deliveryDate),m("idx_purchase_orders_created").on(t.createdAt),m("idx_purchase_orders_approver").on(t.currentApproverRole)]),oo=b("purchase_order_items",{id:j("id").primaryKey(),orderId:h("order_id").references(()=>k.id).notNull(),itemName:o("item_name",{length:255}).notNull(),specification:x("specification"),unit:o("unit",{length:50}),quantity:L("quantity",{precision:10,scale:2}).notNull().$type(),unitPrice:L("unit_price",{precision:15,scale:2}).notNull().$type(),totalAmount:L("total_amount",{precision:15,scale:2}).notNull().$type(),majorCategory:o("major_category",{length:100}),middleCategory:o("middle_category",{length:100}),minorCategory:o("minor_category",{length:100}),notes:x("notes"),createdAt:u("created_at").defaultNow()},t=>[m("idx_poi_major_category").on(t.majorCategory),m("idx_poi_middle_category").on(t.middleCategory),m("idx_poi_minor_category").on(t.minorCategory),m("idx_poi_category_hierarchy").on(t.majorCategory,t.middleCategory,t.minorCategory)]),Wl=b("attachments",{id:j("id").primaryKey(),orderId:h("order_id").references(()=>k.id).notNull(),originalName:o("original_name",{length:255}).notNull(),storedName:o("stored_name",{length:255}).notNull(),filePath:o("file_path",{length:500}).notNull(),fileSize:h("file_size"),mimeType:o("mime_type",{length:100}),uploadedBy:o("uploaded_by",{length:50}),uploadedAt:u("uploaded_at").defaultNow(),fileData:x("file_data")}),Yl=b("order_history",{id:j("id").primaryKey(),orderId:h("order_id").references(()=>k.id).notNull(),userId:o("user_id").references(()=>D.id).notNull(),action:o("action",{length:100}).notNull(),changes:T("changes"),createdAt:u("created_at").defaultNow()}),Zl=b("email_sending_history",{id:j("id").primaryKey(),orderId:h("order_id").references(()=>k.id,{onDelete:"cascade"}),orderNumber:o("order_number",{length:255}),senderUserId:o("sender_user_id",{length:255}).references(()=>D.id),recipients:T("recipients"),cc:T("cc"),bcc:T("bcc"),subject:x("subject").notNull(),messageContent:x("message_content"),attachmentFiles:T("attachment_files"),status:o("sending_status",{length:50}).default("pending"),sentCount:h("sent_count").default(0),failedCount:h("failed_count").default(0),errorMessage:x("error_message"),sentAt:u("sent_at"),createdAt:u("created_at").defaultNow(),updatedAt:u("updated_at").defaultNow()},t=>[m("idx_email_history_order").on(t.orderId),m("idx_email_history_sender").on(t.senderUserId),m("idx_email_history_status").on(t.status),m("idx_email_history_sent_at").on(t.sentAt)]),Ge=b("invoices",{id:j("id").primaryKey(),orderId:h("order_id").notNull().references(()=>k.id,{onDelete:"cascade"}),invoiceNumber:o("invoice_number",{length:100}).notNull().unique(),invoiceType:o("invoice_type",{length:20}).notNull(),issueDate:u("issue_date").notNull(),dueDate:u("due_date"),totalAmount:L("total_amount",{precision:15,scale:2}).notNull().$type(),vatAmount:L("vat_amount",{precision:15,scale:2}).default("0").$type(),status:Ll("status").notNull().default("pending"),filePath:o("file_path",{length:500}),uploadedBy:o("uploaded_by").notNull().references(()=>D.id),verifiedBy:o("verified_by").references(()=>D.id),verifiedAt:u("verified_at"),taxInvoiceIssued:N("tax_invoice_issued").default(!1),taxInvoiceIssuedDate:u("tax_invoice_issued_date"),taxInvoiceIssuedBy:o("tax_invoice_issued_by").references(()=>D.id),notes:x("notes"),createdAt:u("created_at").defaultNow(),updatedAt:u("updated_at").defaultNow()}),lo=b("item_receipts",{id:j("id").primaryKey(),orderItemId:h("order_item_id").notNull().references(()=>oo.id,{onDelete:"cascade"}),invoiceId:h("invoice_id").references(()=>Ge.id,{onDelete:"set null"}),receivedQuantity:L("received_quantity",{precision:10,scale:2}).notNull().$type(),receivedDate:u("received_date").notNull(),qualityCheck:N("quality_check").default(!1),qualityNotes:x("quality_notes"),verifiedBy:o("verified_by").notNull().references(()=>D.id),status:zl("status").notNull().default("pending"),notes:x("notes"),createdAt:u("created_at").defaultNow(),updatedAt:u("updated_at").defaultNow()}),ed=b("verification_logs",{id:j("id").primaryKey(),orderId:h("order_id").notNull().references(()=>k.id,{onDelete:"cascade"}),invoiceId:h("invoice_id").references(()=>Ge.id,{onDelete:"set null"}),itemReceiptId:h("item_receipt_id").references(()=>lo.id,{onDelete:"set null"}),action:Ml("action").notNull(),details:x("details"),performedBy:o("performed_by").notNull().references(()=>D.id),createdAt:u("created_at").defaultNow(),updatedAt:u("updated_at").defaultNow()});w(Re).omit({id:!0,createdAt:!0,updatedAt:!0});w(ao).omit({id:!0,createdAt:!0,updatedAt:!0});const td=w(Kl).omit({id:!0,createdAt:!0,updatedAt:!0});w(Te).omit({id:!0,createdAt:!0,updatedAt:!0});w(he).omit({id:!0,createdAt:!0,updatedAt:!0});w(Dl).omit({id:!0,createdAt:!0,updatedAt:!0});w(k).omit({id:!0,createdAt:!0,updatedAt:!0,orderNumber:!0,userId:!0,isApproved:!0,approvedBy:!0,approvedAt:!0}).extend({userId:f.string().min(1),templateId:f.number().nullable().optional(),totalAmount:f.number().positive(),customFields:f.record(f.any()).optional(),items:f.array(f.object({itemName:f.string().min(1),specification:f.string().nullable().optional(),quantity:f.number().positive(),unitPrice:f.number().positive(),totalAmount:f.number().positive(),notes:f.string().nullable().optional(),majorCategory:f.string().nullable().optional(),middleCategory:f.string().nullable().optional(),minorCategory:f.string().nullable().optional()}))});w(oo).omit({id:!0,createdAt:!0}).extend({supplyAmount:f.number().nonnegative().optional(),taxAmount:f.number().nonnegative().optional()});w(Wl).omit({id:!0,uploadedAt:!0});w(Yl).omit({id:!0,createdAt:!0});w(Ge).omit({id:!0,createdAt:!0,updatedAt:!0}).extend({totalAmount:f.union([f.string(),f.number()]).transform(t=>String(t)),vatAmount:f.union([f.string(),f.number()]).transform(t=>String(t))});w(lo).omit({id:!0,createdAt:!0,updatedAt:!0}).extend({receivedQuantity:f.union([f.string(),f.number()]).transform(t=>Number(t)),receivedDate:f.union([f.string(),f.date()]).transform(t=>new Date(t))});w(ed).omit({id:!0,createdAt:!0});w(Zl).omit({id:!0,sentAt:!0,createdAt:!0}).extend({ccEmails:f.string().nullable().optional(),attachments:f.array(f.object({filename:f.string(),path:f.string(),size:f.number()})).nullable().optional()});w(Jl).omit({id:!0,createdAt:!0,updatedAt:!0});w(kl).omit({id:!0,createdAt:!0,updatedAt:!0});w(Hl).omit({id:!0,createdAt:!0});w(Gl).omit({id:!0,createdAt:!0,updatedAt:!0});w(Xl).omit({id:!0,changedAt:!0});w(io);w(Rl).omit({id:!0,createdAt:!0,updatedAt:!0});w(io).omit({id:!0,createdAt:!0,updatedAt:!0});w(Ul).omit({id:!0,createdAt:!0,updatedAt:!0});const rd=b("approval_workflow_settings",{id:j("id").primaryKey(),companyId:h("company_id").references(()=>Re.id),approvalMode:o("approval_mode",{length:20}).notNull().default("staged"),directApprovalRoles:T("direct_approval_roles").default([]).$type(),stagedApprovalThresholds:T("staged_approval_thresholds").default({}).$type(),requireAllStages:N("require_all_stages").default(!0),skipLowerStages:N("skip_lower_stages").default(!1),isActive:N("is_active").default(!0),createdAt:u("created_at").defaultNow(),updatedAt:u("updated_at").defaultNow().$onUpdate(()=>new Date),createdBy:o("created_by",{length:255}).references(()=>D.id)},t=>({companyIdx:m("idx_approval_workflow_company").on(t.companyId),activeIdx:m("idx_approval_workflow_active").on(t.isActive)})),uo=b("approval_step_templates",{id:j("id").primaryKey(),templateName:o("template_name",{length:100}).notNull(),companyId:h("company_id").references(()=>Re.id),stepOrder:h("step_order").notNull(),requiredRole:ce("required_role").notNull(),minAmount:L("min_amount",{precision:15,scale:2}).default("0"),maxAmount:L("max_amount",{precision:15,scale:2}),isOptional:N("is_optional").default(!1),canSkip:N("can_skip").default(!1),description:x("description"),isActive:N("is_active").default(!0),createdAt:u("created_at").defaultNow(),updatedAt:u("updated_at").defaultNow().$onUpdate(()=>new Date)},t=>({templateCompanyIdx:m("idx_approval_step_template_company").on(t.companyId),templateOrderIdx:m("idx_approval_step_order").on(t.templateName,t.stepOrder)})),nd=b("approval_step_instances",{id:j("id").primaryKey(),orderId:h("order_id").references(()=>k.id).notNull(),templateId:h("template_id").references(()=>uo.id),stepOrder:h("step_order").notNull(),requiredRole:ce("required_role").notNull(),assignedUserId:o("assigned_user_id",{length:255}).references(()=>D.id),status:El("status").default("pending"),approvedBy:o("approved_by",{length:255}).references(()=>D.id),approvedAt:u("approved_at"),rejectionReason:x("rejection_reason"),comments:x("comments"),isActive:N("is_active").default(!0),createdAt:u("created_at").defaultNow(),updatedAt:u("updated_at").defaultNow().$onUpdate(()=>new Date)},t=>({orderIdx:m("idx_approval_step_instance_order").on(t.orderId),statusIdx:m("idx_approval_step_instance_status").on(t.status),assignedUserIdx:m("idx_approval_step_instance_user").on(t.assignedUserId)}));w(rd).omit({id:!0,createdAt:!0,updatedAt:!0});w(uo).omit({id:!0,createdAt:!0,updatedAt:!0});w(nd).omit({id:!0,createdAt:!0,updatedAt:!0});const sd=Q("audit_log_level",["OFF","ERROR","WARNING","INFO","DEBUG"]),id=Q("audit_event_type",["login","logout","login_failed","session_expired","password_change","permission_change","data_create","data_read","data_update","data_delete","data_export","approval_request","approval_grant","approval_reject","email_send","file_upload","file_download","settings_change","security_alert","api_access","error"]),ad=b("system_audit_logs",{id:j("id").primaryKey(),userId:o("user_id").references(()=>D.id),userName:o("user_name",{length:255}),userRole:o("user_role",{length:50}),eventType:id("event_type").notNull(),eventCategory:o("event_category",{length:50}).notNull(),entityType:o("entity_type",{length:50}),entityId:o("entity_id",{length:100}),action:o("action",{length:255}).notNull(),tableName:o("table_name",{length:100}),additionalDetails:T("additional_details"),oldData:T("old_data"),newData:T("new_data"),ipAddress:o("ip_address",{length:50}),userAgent:x("user_agent"),sessionId:o("session_id",{length:255}),requestMethod:o("request_method",{length:10}),requestPath:o("request_path",{length:500}),responseStatus:h("response_status"),responseTime:h("response_time"),errorMessage:x("error_message"),createdAt:u("created_at").defaultNow().notNull()},t=>[m("idx_audit_user").on(t.userId),m("idx_audit_event_type").on(t.eventType),m("idx_audit_entity").on(t.entityType,t.entityId),m("idx_audit_created").on(t.createdAt),m("idx_audit_category").on(t.eventCategory),m("idx_audit_session").on(t.sessionId)]),od=b("audit_settings",{id:j("id").primaryKey(),userId:o("user_id").references(()=>D.id),logLevel:sd("log_level").default("INFO"),enableAuth:N("enable_auth").default(!0),enableData:N("enable_data").default(!0),enableSystem:N("enable_system").default(!0),enableSecurity:N("enable_security").default(!0),retentionDays:h("retention_days").default(90),archiveEnabled:N("archive_enabled").default(!0),maxLogSize:h("max_log_size"),autoCleanup:N("auto_cleanup").default(!0),alertsEnabled:N("alerts_enabled").default(!1),emailNotifications:N("email_notifications").default(!1),realTimeMonitoring:N("real_time_monitoring").default(!1),createdAt:u("created_at").defaultNow(),updatedAt:u("updated_at").defaultNow()}),ld=b("archived_audit_logs",{id:j("id").primaryKey(),originalId:h("original_id").notNull(),userId:o("user_id",{length:255}),userName:o("user_name",{length:255}),userRole:o("user_role",{length:50}),eventType:o("event_type",{length:50}).notNull(),eventCategory:o("event_category",{length:50}).notNull(),entityType:o("entity_type",{length:50}),entityId:o("entity_id",{length:100}),action:o("action",{length:255}).notNull(),additionalDetails:T("additional_details"),ipAddress:o("ip_address",{length:50}),createdAt:u("created_at").notNull(),archivedAt:u("archived_at").defaultNow().notNull()},t=>[m("idx_archived_audit_user").on(t.userId),m("idx_archived_audit_created").on(t.createdAt),m("idx_archived_audit_archived").on(t.archivedAt)]),dd=b("audit_alert_rules",{id:j("id").primaryKey(),ruleName:o("rule_name",{length:100}).notNull(),description:x("description"),eventTypes:T("event_types").notNull().$type(),condition:T("condition"),severity:o("severity",{length:20}).notNull().default("medium"),alertChannels:T("alert_channels").notNull().$type(),recipients:T("recipients").notNull().$type(),throttleMinutes:h("throttle_minutes").default(60),isActive:N("is_active").default(!0),createdBy:o("created_by").references(()=>D.id),createdAt:u("created_at").defaultNow(),updatedAt:u("updated_at").defaultNow().$onUpdate(()=>new Date)},t=>[m("idx_alert_rules_active").on(t.isActive),m("idx_alert_rules_severity").on(t.severity)]);w(ad).omit({id:!0,createdAt:!0});w(od).omit({id:!0,createdAt:!0,updatedAt:!0});w(ld).omit({id:!0,archivedAt:!0});w(dd).omit({id:!0,createdAt:!0,updatedAt:!0});const ud=b("validation_sessions",{id:o("id",{length:36}).primaryKey(),userId:h("user_id").notNull(),fileName:o("file_name",{length:255}).notNull(),fileSize:h("file_size").notNull(),totalItems:h("total_items").default(0),validItems:h("valid_items").default(0),warningItems:h("warning_items").default(0),errorItems:h("error_items").default(0),status:o("status",{length:20}).notNull().default("pending"),createdAt:u("created_at").defaultNow(),completedAt:u("completed_at"),metadata:T("metadata")}),cd=b("validation_results",{id:j("id").primaryKey(),sessionId:o("session_id",{length:36}).notNull(),rowIndex:h("row_index").notNull(),fieldName:o("field_name",{length:100}),originalValue:x("original_value"),validatedValue:x("validated_value"),validationStatus:o("validation_status",{length:20}),errorMessage:x("error_message"),suggestion:x("suggestion"),confidence:L("confidence",{precision:5,scale:2}),metadata:T("metadata"),createdAt:u("created_at").defaultNow()}),md=b("ai_suggestions",{id:j("id").primaryKey(),sessionId:o("session_id",{length:36}).notNull(),rowIndex:h("row_index").notNull(),fieldName:o("field_name",{length:100}).notNull(),originalValue:x("original_value"),suggestedValue:x("suggested_value"),suggestionType:o("suggestion_type",{length:50}),confidence:L("confidence",{precision:5,scale:2}).notNull(),reason:x("reason"),applied:N("applied").default(!1),appliedAt:u("applied_at"),appliedBy:h("applied_by"),metadata:T("metadata"),createdAt:u("created_at").defaultNow()}),pd=b("vendor_mappings",{id:j("id").primaryKey(),originalName:o("original_name",{length:255}).notNull(),mappedVendorId:h("mapped_vendor_id").notNull(),mappedVendorName:o("mapped_vendor_name",{length:255}).notNull(),confidence:L("confidence",{precision:5,scale:2}).notNull(),usageCount:h("usage_count").default(1),lastUsedAt:u("last_used_at").defaultNow(),createdAt:u("created_at").defaultNow(),createdBy:h("created_by")}),gd=b("category_mappings",{id:j("id").primaryKey(),itemName:o("item_name",{length:255}).notNull(),majorCategory:o("major_category",{length:100}),middleCategory:o("middle_category",{length:100}),minorCategory:o("minor_category",{length:100}),confidence:L("confidence",{precision:5,scale:2}).notNull(),usageCount:h("usage_count").default(1),lastUsedAt:u("last_used_at").defaultNow(),createdAt:u("created_at").defaultNow(),createdBy:h("created_by")});w(ud).omit({createdAt:!0,completedAt:!0});w(cd).omit({id:!0,createdAt:!0});w(md).omit({id:!0,createdAt:!0,appliedAt:!0});w(pd).omit({id:!0,createdAt:!0,lastUsedAt:!0});w(gd).omit({id:!0,createdAt:!0,lastUsedAt:!0});w(Ql).omit({id:!0,createdAt:!0,updatedAt:!0,lastTestedAt:!0,testResult:!0});const fd=Q("registration_status",["pending","approved","rejected"]),hd=b("user_registrations",{id:j("id").primaryKey(),email:o("email",{length:255}).notNull().unique(),name:o("name",{length:255}).notNull(),phoneNumber:o("phone_number",{length:50}),hashedPassword:o("hashed_password").notNull(),requestedRole:ce("requested_role").default("field_worker"),status:fd("status").notNull().default("pending"),rejectionReason:x("rejection_reason"),appliedAt:u("applied_at").defaultNow().notNull(),reviewedAt:u("reviewed_at"),reviewedBy:o("reviewed_by").references(()=>D.id),notes:x("notes"),createdAt:u("created_at").defaultNow().notNull(),updatedAt:u("updated_at").defaultNow().notNull()},t=>[m("idx_user_registrations_email").on(t.email),m("idx_user_registrations_status").on(t.status),m("idx_user_registrations_applied_at").on(t.appliedAt),m("idx_user_registrations_reviewed_by").on(t.reviewedBy)]),yd=b("password_reset_tokens",{id:j("id").primaryKey(),userId:o("user_id").references(()=>D.id,{onDelete:"cascade"}).notNull(),token:o("token",{length:255}).notNull().unique(),expiresAt:u("expires_at").notNull(),usedAt:u("used_at"),createdAt:u("created_at").defaultNow().notNull()},t=>[m("idx_password_reset_tokens_user").on(t.userId),m("idx_password_reset_tokens_token").on(t.token),m("idx_password_reset_tokens_expires").on(t.expiresAt)]);w(hd).omit({id:!0,appliedAt:!0,createdAt:!0,updatedAt:!0}).extend({email:f.string().email("유효한 이메일 주소를 입력해주세요"),name:f.string().min(2,"이름은 2글자 이상이어야 합니다").max(50,"이름은 50글자를 초과할 수 없습니다"),phoneNumber:f.string().regex(/^[0-9-+().\s]*$/,"올바른 전화번호 형식을 입력해주세요").optional(),hashedPassword:f.string().min(1,"비밀번호는 필수입니다")});w(yd).omit({id:!0,createdAt:!0});const _d=td.extend({standardPrice:f.string().optional().transform(t=>t&&t!==""?t:void 0)});function xd({isOpen:t,item:e,onClose:r,onSuccess:n}){const{theme:a}=ai(),d=a==="dark",g=yo({resolver:_o(_d),defaultValues:{name:e?.name||"",category:e?.category||"",specification:e?.specification||"",unit:e?.unit||"",unitPrice:e?.unitPrice||void 0,description:e?.description||"",isActive:e?.isActive??!0}}),y=()=>{n(),r()},S=qe({mutationFn:async P=>{const U={...P,unitPrice:P.unitPrice||null};return await oi("POST","/api/items",U)},onSuccess:y}),v=qe({mutationFn:async P=>{const U={...P,unitPrice:P.unitPrice||null},re=await fetch(`/api/items/${e.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(U)});if(!re.ok)throw new Error("Failed to update item");return re.json()},onSuccess:y}),c=P=>{e?v.mutate(P):S.mutate(P)},A=S.isPending||v.isPending,C=["원자재","부품","소모품","장비","기타"],G=["개","박스","세트","kg","g","L","mL","m","cm","mm","㎡","㎥","시간","일"];return i.jsx(Do,{open:t,onOpenChange:r,children:i.jsxs($o,{className:`max-w-2xl max-h-[90vh] overflow-y-auto transition-colors ${d?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[i.jsx(Bo,{children:i.jsx(qo,{className:`transition-colors ${d?"text-white":"text-gray-900"}`,children:e?"품목 수정":"새 품목 추가"})}),i.jsx(xo,{...g,children:i.jsxs("form",{onSubmit:g.handleSubmit(c),className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(H,{control:g.control,name:"name",render:({field:P})=>i.jsxs(W,{children:[i.jsx(Y,{className:`transition-colors ${d?"text-gray-300":"text-gray-700"}`,children:"품목명 *"}),i.jsx(Z,{children:i.jsx(Ve,{...P,placeholder:"품목명을 입력하세요",className:`transition-colors ${d?"bg-gray-700 border-gray-600 text-gray-100 placeholder:text-gray-400":"bg-white border-gray-300"}`})}),i.jsx(ae,{})]})}),i.jsx(H,{control:g.control,name:"category",render:({field:P})=>i.jsxs(W,{children:[i.jsx(Y,{className:`transition-colors ${d?"text-gray-300":"text-gray-700"}`,children:"카테고리"}),i.jsxs(Fe,{onValueChange:P.onChange,value:P.value||"",children:[i.jsx(Z,{children:i.jsx(Le,{className:`transition-colors ${d?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300"}`,children:i.jsx(ze,{placeholder:"카테고리를 선택하세요"})})}),i.jsx(Me,{className:`transition-colors ${d?"bg-gray-700 border-gray-600":"bg-white border-gray-200"}`,children:C.map(U=>i.jsx(ve,{value:U,children:U},U))})]}),i.jsx(ae,{})]})}),i.jsx(H,{control:g.control,name:"unit",render:({field:P})=>i.jsxs(W,{children:[i.jsx(Y,{className:`transition-colors ${d?"text-gray-300":"text-gray-700"}`,children:"단위 *"}),i.jsxs(Fe,{onValueChange:P.onChange,value:P.value||"",children:[i.jsx(Z,{children:i.jsx(Le,{className:`transition-colors ${d?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300"}`,children:i.jsx(ze,{placeholder:"단위를 선택하세요"})})}),i.jsx(Me,{className:`transition-colors ${d?"bg-gray-700 border-gray-600":"bg-white border-gray-200"}`,children:G.map(U=>i.jsx(ve,{value:U,children:U},U))})]}),i.jsx(ae,{})]})}),i.jsx(H,{control:g.control,name:"standardPrice",render:({field:P})=>i.jsxs(W,{children:[i.jsx(Y,{className:`transition-colors ${d?"text-gray-300":"text-gray-700"}`,children:"표준단가"}),i.jsx(Z,{children:i.jsx(Ve,{...P,type:"number",step:"0.01",placeholder:"0.00",className:`transition-colors ${d?"bg-gray-700 border-gray-600 text-gray-100 placeholder:text-gray-400":"bg-white border-gray-300"}`})}),i.jsx(ae,{})]})})]}),i.jsx(H,{control:g.control,name:"specification",render:({field:P})=>i.jsxs(W,{children:[i.jsx(Y,{className:`transition-colors ${d?"text-gray-300":"text-gray-700"}`,children:"규격"}),i.jsx(Z,{children:i.jsx(nt,{...P,value:P.value||"",placeholder:"품목의 상세 규격을 입력하세요",rows:3,className:`transition-colors ${d?"bg-gray-700 border-gray-600 text-gray-100 placeholder:text-gray-400":"bg-white border-gray-300"}`})}),i.jsx(ae,{})]})}),i.jsx(H,{control:g.control,name:"description",render:({field:P})=>i.jsxs(W,{children:[i.jsx(Y,{className:`transition-colors ${d?"text-gray-300":"text-gray-700"}`,children:"설명"}),i.jsx(Z,{children:i.jsx(nt,{...P,value:P.value||"",placeholder:"품목에 대한 추가 설명을 입력하세요",rows:3,className:`transition-colors ${d?"bg-gray-700 border-gray-600 text-gray-100 placeholder:text-gray-400":"bg-white border-gray-300"}`})}),i.jsx(ae,{})]})}),i.jsx(H,{control:g.control,name:"isActive",render:({field:P})=>i.jsxs(W,{className:`flex flex-row items-center justify-between rounded-lg border p-4 transition-colors ${d?"border-gray-600 bg-gray-700/50":"border-gray-200 bg-gray-50"}`,children:[i.jsxs("div",{className:"space-y-0.5",children:[i.jsx(Y,{className:`text-base transition-colors ${d?"text-gray-300":"text-gray-700"}`,children:"활성 상태"}),i.jsx("div",{className:`text-sm transition-colors ${d?"text-gray-400":"text-gray-600"}`,children:"품목을 활성화하여 발주에서 사용할 수 있도록 합니다"})]}),i.jsx(Z,{children:i.jsx(Co,{checked:P.value||!1,onCheckedChange:P.onChange})})]})}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx(X,{type:"button",variant:"outline",onClick:r,disabled:A,children:"취소"}),i.jsx(X,{type:"submit",disabled:A,children:A?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"inline-block animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),e?"수정 중...":"생성 중..."]}):e?"수정":"생성"})]})]})})]})})}function Vd(){const{user:t}=No(),{toast:e}=bo(),[,r]=vo(),{theme:n}=ai(),a=n==="dark",[d,g]=J.useState(""),[y,S]=J.useState("all"),[v,c]=J.useState(null),[A,C]=J.useState("asc"),[G,P]=J.useState(!1),[U,re]=J.useState(null),[Pe,Xe]=J.useState("table"),{data:ye={items:[],total:0},isLoading:Je}=Ye({queryKey:["/api/items",{category:y==="all"?void 0:y,searchText:d}],queryFn:async()=>{const p=new URLSearchParams({limit:"1000"});y!=="all"&&p.append("category",y),d&&p.append("searchText",d);const z=await fetch(`/api/items?${p.toString()}`);if(!z.ok)throw new Error("Failed to fetch items");return z.json()}}),{data:co=[]}=Ye({queryKey:["/api/items/categories"]}),me=J.useMemo(()=>{if(!ye.items||!Array.isArray(ye.items))return[];let p=ye.items;if(y!=="all"&&(p=p.filter(z=>z.category===y)),d.trim()){const z=d.toLowerCase();p=p.filter(ie=>ie.name?.toLowerCase().includes(z)||ie.category?.toLowerCase().includes(z)||ie.specification?.toLowerCase().includes(z)||ie.unit?.toLowerCase().includes(z))}return v&&(p=[...p].sort((z,ie)=>{let O=z[v],K=ie[v];return O==null&&(O=""),K==null&&(K=""),v==="unitPrice"?(O=parseFloat(O||"0"),K=parseFloat(K||"0")):v==="createdAt"||v==="updatedAt"?(O=O?new Date(O).getTime():0,K=K?new Date(K).getTime():0):(O=String(O).toLowerCase(),K=String(K).toLowerCase()),A==="asc"?O<K?-1:O>K?1:0:K<O?-1:K>O?1:0})),p},[ye.items,y,d,v,A]),mo=qe({mutationFn:async p=>{await oi("DELETE",`/api/items/${p}`)},onSuccess:()=>{e({title:"성공",description:"품목이 삭제되었습니다."}),rt.invalidateQueries({queryKey:["/api/items"]})},onError:p=>{if(p.status===401){e({title:"Unauthorized",description:"You are logged out. Logging in again...",variant:"destructive"}),setTimeout(()=>{r("/login")},500);return}e({title:"오류",description:"품목 삭제에 실패했습니다.",variant:"destructive"})}}),ne=p=>{v===p?C(A==="asc"?"desc":"asc"):(c(p),C("asc"))},se=p=>v!==p?null:A==="asc"?i.jsx(So,{className:"h-4 w-4"}):i.jsx(Ao,{className:"h-4 w-4"}),po=()=>{re(null),P(!0)},ke=p=>{re(p),P(!0)},He=p=>{confirm("정말로 이 품목을 삭제하시겠습니까?")&&mo.mutate(p)},go=()=>{P(!1),re(null),rt.invalidateQueries({queryKey:["/api/items"]})},We=p=>({강재:"default",강판:"secondary",단열재:"outline",도장재:"destructive",마감재:"default",방수재:"secondary"})[p]||"outline";return i.jsx("div",{className:`min-h-screen transition-colors ${a?"bg-gray-900":"bg-gray-50"}`,children:i.jsxs("div",{className:"max-w-[1366px] mx-auto p-6 space-y-6",children:[i.jsx(Po,{title:"품목 관리",action:t?.role==="admin"?i.jsxs(X,{onClick:po,className:"flex items-center",children:[i.jsx(wo,{className:"h-4 w-4 mr-2"}),"품목 추가"]}):void 0}),i.jsx(_e,{className:`shadow-sm transition-colors ${a?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:i.jsx(Ze,{className:"p-4",children:i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 sm:items-center sm:justify-between",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[i.jsxs("div",{className:"relative flex-1 max-w-md",children:[i.jsx(Vo,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 transition-colors ${a?"text-gray-500":"text-gray-400"}`}),i.jsx(Ve,{placeholder:"품목명, 카테고리, 규격으로 검색...",value:d,onChange:p=>g(p.target.value),className:`pl-10 h-10 transition-colors ${a?"bg-gray-700 border-gray-600 text-gray-100 placeholder:text-gray-400":"bg-white border-gray-300"}`})]}),i.jsx("div",{className:"w-full sm:w-48",children:i.jsxs(Fe,{value:y,onValueChange:S,children:[i.jsx(Le,{className:`h-10 transition-colors ${a?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300"}`,children:i.jsx(ze,{placeholder:"카테고리 선택"})}),i.jsxs(Me,{className:`transition-colors ${a?"bg-gray-700 border-gray-600":"bg-white border-gray-200"}`,children:[i.jsx(ve,{value:"all",children:"모든 카테고리"}),co.map(p=>i.jsx(ve,{value:p,children:p},p))]})]})})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("span",{className:`text-sm transition-colors ${a?"text-gray-400":"text-gray-600"}`,children:[me.length,"개 품목"]}),i.jsxs("div",{className:`flex items-center rounded-lg p-1 transition-colors ${a?"bg-gray-700":"bg-gray-100"}`,children:[i.jsx(X,{variant:Pe==="table"?"default":"ghost",size:"sm",onClick:()=>Xe("table"),className:"h-8 w-8 p-0",title:"목록 보기",children:i.jsx(Fo,{className:"h-4 w-4"})}),i.jsx(X,{variant:Pe==="cards"?"default":"ghost",size:"sm",onClick:()=>Xe("cards"),className:"h-8 w-8 p-0",title:"카드 보기",children:i.jsx(Lo,{className:"h-4 w-4"})})]})]})]})})}),Pe==="table"?i.jsx(_e,{className:`shadow-sm transition-colors ${a?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:i.jsx(Ze,{className:"p-0",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs(jo,{children:[i.jsx(Io,{children:i.jsxs(xe,{className:`border-b transition-colors ${a?"border-gray-600":"border-gray-200"}`,children:[i.jsx(ee,{className:`h-11 px-4 text-sm font-semibold cursor-pointer select-none transition-colors ${a?"text-gray-400 hover:bg-gray-700":"text-gray-700 hover:bg-gray-50"}`,onClick:()=>ne("name"),children:i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("span",{children:"품목명"}),se("name")]})}),i.jsx(ee,{className:`h-11 px-4 text-sm font-semibold cursor-pointer select-none transition-colors ${a?"text-gray-400 hover:bg-gray-700":"text-gray-700 hover:bg-gray-50"}`,onClick:()=>ne("category"),children:i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("span",{children:"카테고리"}),se("category")]})}),i.jsx(ee,{className:`h-11 px-4 text-sm font-semibold cursor-pointer select-none transition-colors ${a?"text-gray-400 hover:bg-gray-700":"text-gray-700 hover:bg-gray-50"}`,onClick:()=>ne("specification"),children:i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("span",{children:"규격"}),se("specification")]})}),i.jsx(ee,{className:`h-11 px-4 text-sm font-semibold cursor-pointer select-none transition-colors ${a?"text-gray-400 hover:bg-gray-700":"text-gray-700 hover:bg-gray-50"}`,onClick:()=>ne("unit"),children:i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("span",{children:"단위"}),se("unit")]})}),i.jsx(ee,{className:`h-11 px-4 text-sm font-semibold cursor-pointer select-none transition-colors ${a?"text-gray-400 hover:bg-gray-700":"text-gray-700 hover:bg-gray-50"}`,onClick:()=>ne("standardPrice"),children:i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("span",{children:"단가"}),se("standardPrice")]})}),i.jsx(ee,{className:`h-11 px-4 text-sm font-semibold cursor-pointer select-none transition-colors ${a?"text-gray-400 hover:bg-gray-700":"text-gray-700 hover:bg-gray-50"}`,onClick:()=>ne("createdAt"),children:i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("span",{children:"등록일"}),se("createdAt")]})}),t?.role==="admin"&&i.jsx(ee,{className:`h-11 px-4 text-sm font-semibold text-right transition-colors ${a?"text-gray-400":"text-gray-700"}`,children:"관리"})]})}),i.jsx(To,{children:Je?[...Array(5)].map((p,z)=>i.jsxs(xe,{children:[i.jsx(M,{children:i.jsx("div",{className:`h-4 rounded animate-pulse ${a?"bg-gray-600":"bg-gray-200"}`})}),i.jsx(M,{children:i.jsx("div",{className:`h-4 rounded animate-pulse ${a?"bg-gray-600":"bg-gray-200"}`})}),i.jsx(M,{children:i.jsx("div",{className:`h-4 rounded animate-pulse ${a?"bg-gray-600":"bg-gray-200"}`})}),i.jsx(M,{children:i.jsx("div",{className:`h-4 rounded animate-pulse ${a?"bg-gray-600":"bg-gray-200"}`})}),i.jsx(M,{children:i.jsx("div",{className:`h-4 rounded animate-pulse ${a?"bg-gray-600":"bg-gray-200"}`})}),i.jsx(M,{children:i.jsx("div",{className:`h-4 rounded animate-pulse ${a?"bg-gray-600":"bg-gray-200"}`})}),t?.role==="admin"&&i.jsx(M,{})]},z)):me.length===0?i.jsx(xe,{children:i.jsx(M,{colSpan:t?.role==="admin"?7:6,className:`text-center py-8 transition-colors ${a?"text-gray-400":"text-gray-500"}`,children:d||y!=="all"?"검색 결과가 없습니다":"등록된 품목이 없습니다"})}):me.map(p=>i.jsxs(xe,{className:`h-12 border-b transition-colors ${a?"hover:bg-gray-700 border-gray-600":"hover:bg-gray-50 border-gray-100"}`,children:[i.jsx(M,{className:"py-2 px-4",children:i.jsx("div",{className:`text-sm font-medium cursor-pointer hover:underline overflow-hidden text-ellipsis whitespace-nowrap transition-colors ${a?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-800"}`,onClick:()=>r(`/items/${p.id}`),title:p.name,children:p.name})}),i.jsx(M,{className:"py-2 px-4",children:p.category?i.jsx(Ce,{variant:We(p.category),className:"text-xs",children:p.category}):"-"}),i.jsx(M,{className:"py-2 px-4",children:i.jsx("div",{className:`text-sm max-w-32 truncate transition-colors ${a?"text-gray-300":"text-gray-600"}`,title:p.specification,children:p.specification||"-"})}),i.jsx(M,{className:"py-2 px-4",children:i.jsx("div",{className:`text-sm transition-colors ${a?"text-gray-300":"text-gray-600"}`,children:p.unit||"-"})}),i.jsx(M,{className:"py-2 px-4",children:i.jsx("div",{className:`text-sm font-semibold transition-colors ${a?"text-blue-400":"text-blue-600"}`,children:et(p.standardPrice)})}),i.jsx(M,{className:"py-2 px-4",children:i.jsx("div",{className:`text-sm transition-colors ${a?"text-gray-300":"text-gray-600"}`,children:tt(p.createdAt)})}),t?.role==="admin"&&i.jsx(M,{className:"py-2 px-4",children:i.jsxs("div",{className:"flex items-center justify-end gap-1",children:[i.jsx(X,{variant:"ghost",size:"sm",onClick:()=>ke(p),className:"h-7 w-7 p-0",title:"수정",children:i.jsx(st,{className:"h-3 w-3"})}),i.jsx(X,{variant:"ghost",size:"sm",onClick:()=>He(p.id),className:`h-7 w-7 p-0 transition-colors ${a?"text-red-400 hover:text-red-300":"text-red-600 hover:text-red-700"}`,title:"삭제",children:i.jsx(it,{className:"h-3 w-3"})})]})})]},p.id))})]})})})}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:Je?[...Array(6)].map((p,z)=>i.jsx(_e,{className:`p-6 shadow-sm transition-colors ${a?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:i.jsxs("div",{className:"animate-pulse",children:[i.jsx("div",{className:`h-4 rounded mb-3 ${a?"bg-gray-600":"bg-gray-200"}`}),i.jsx("div",{className:`h-3 rounded w-3/4 mb-2 ${a?"bg-gray-600":"bg-gray-200"}`}),i.jsx("div",{className:`h-3 rounded w-1/2 ${a?"bg-gray-600":"bg-gray-200"}`})]})},z)):me.length===0?i.jsx("div",{className:`col-span-full text-center py-8 transition-colors ${a?"text-gray-400":"text-gray-500"}`,children:d||y!=="all"?"검색 결과가 없습니다":"등록된 품목이 없습니다"}):me.map(p=>i.jsxs(_e,{className:`p-4 hover:shadow-md transition-shadow shadow-sm ${a?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:`font-semibold cursor-pointer truncate transition-colors ${a?"text-gray-100 hover:text-blue-400":"text-gray-900 hover:text-blue-600"}`,onClick:()=>r(`/items/${p.id}`),children:p.name}),p.category&&i.jsx(Ce,{variant:We(p.category),className:"text-xs mt-1",children:p.category})]}),p.specification&&i.jsx(Ce,{variant:"outline",className:"text-xs ml-2 flex-shrink-0 max-w-[120px] truncate",title:p.specification,children:p.specification})]}),i.jsxs("div",{className:"space-y-2 mb-3",children:[i.jsxs("div",{className:`flex items-center text-sm gap-2 transition-colors ${a?"text-gray-400":"text-gray-600"}`,children:[i.jsx(zo,{className:"h-4 w-4"}),i.jsx("span",{className:"font-medium",children:"규격:"}),i.jsx("span",{className:"ml-1",children:p.specification||"-"})]}),i.jsxs("div",{className:`flex items-center text-sm gap-2 transition-colors ${a?"text-gray-400":"text-gray-600"}`,children:[i.jsx(Mo,{className:"h-4 w-4"}),i.jsx("span",{className:"font-medium",children:"단위:"}),i.jsx("span",{className:"ml-1",children:p.unit||"-"})]}),i.jsxs("div",{className:"flex items-center text-sm gap-2",children:[i.jsx(Eo,{className:`h-4 w-4 transition-colors ${a?"text-gray-400":"text-gray-600"}`}),i.jsx("span",{className:`font-medium transition-colors ${a?"text-gray-400":"text-gray-600"}`,children:"단가:"}),i.jsx("span",{className:`ml-1 font-semibold transition-colors ${a?"text-blue-400":"text-blue-600"}`,children:et(p.standardPrice)})]})]}),i.jsx("div",{className:`flex items-center justify-between text-xs mb-3 transition-colors ${a?"text-gray-400":"text-gray-500"}`,children:i.jsxs("span",{children:["등록일: ",tt(p.createdAt)]})}),t?.role==="admin"&&i.jsxs("div",{className:`flex items-center justify-end -space-x-1 pt-2 border-t transition-colors ${a?"border-gray-600":"border-gray-200"}`,children:[i.jsx(X,{variant:"ghost",size:"sm",onClick:()=>ke(p),className:`h-8 w-8 p-0 transition-colors ${a?"text-blue-400 hover:text-blue-300 hover:bg-blue-900/20":"text-blue-600 hover:text-blue-700 hover:bg-blue-50"}`,title:"수정",children:i.jsx(st,{className:"h-3 w-3"})}),i.jsx(X,{variant:"ghost",size:"sm",onClick:()=>He(p.id),className:`h-8 w-8 p-0 transition-colors ${a?"text-red-400 hover:text-red-300 hover:bg-red-900/20":"text-red-600 hover:text-red-700 hover:bg-red-50"}`,title:"삭제",children:i.jsx(it,{className:"h-3 w-3"})})]})]},p.id))}),G&&i.jsx(xd,{isOpen:G,item:U,onClose:()=>P(!1),onSuccess:go})]})})}export{Vd as default};
