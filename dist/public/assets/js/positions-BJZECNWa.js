import{m as V,d as N,o as f,r as y,e as _,j as e,w as u,B as i,P as W,L as x,I as g,S as X,i as Y}from"./index-Cs7Tjb16.js";import{T as Z,a as ee,b as F,c as m,d as te,e as h}from"./table-D9C4D2VY.js";import{D as se,f as re,a as ae,b as ie,c as oe}from"./dialog-BCPFNajU.js";import{S as le}from"./switch-BDHLf2rw.js";import{A as k,f as L,a as E,b as q,c as H,d as O,e as z,g as B,h as Q}from"./alert-dialog-Blub2af1.js";import{U as ne}from"./users-C3PgJ6bV.js";import{L as ce}from"./list-BWpesHtd.js";import{G as de}from"./grid-3x3-PRFhKCmc.js";import{S as I}from"./square-pen-DSdKgnAb.js";import{T as K}from"./trash-2-VJz0zxHN.js";import{H as xe}from"./hash-Cf_5fGlW.js";import"./index-D2JlTfxq.js";import"./index-ZUtoBdvZ.js";function ge(){return V({queryKey:["/api/positions"]})}function me(){const a=N();return f({mutationFn:async n=>{const c=await fetch("/api/positions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!c.ok)throw new Error("Failed to create position");return c.json()},onSuccess:()=>{a.invalidateQueries({queryKey:["/api/positions"]})}})}function he(){const a=N();return f({mutationFn:async({id:n,data:c})=>{const d=await fetch(`/api/positions/${n}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!d.ok)throw new Error("Failed to update position");return d.json()},onSuccess:()=>{a.invalidateQueries({queryKey:["/api/positions"]})}})}function be(){const a=N();return f({mutationFn:async n=>{if(!(await fetch(`/api/positions/${n}`,{method:"DELETE"})).ok)throw new Error("Failed to delete position")},onSuccess:()=>{a.invalidateQueries({queryKey:["/api/positions"]})}})}function Pe(){const[a,n]=y.useState(""),[c,d]=y.useState(!1),[p,j]=y.useState(null),[b,w]=y.useState("table"),[o,l]=y.useState({positionCode:"",positionName:"",level:1,department:"",description:"",isActive:!0}),{data:M=[],isLoading:G}=ge(),$=me(),C=he(),U=be(),v=M.filter(s=>s.positionName.toLowerCase().includes(a.toLowerCase())||s.positionCode.toLowerCase().includes(a.toLowerCase())||s.department&&s.department.toLowerCase().includes(a.toLowerCase())),A=()=>{l({positionCode:"",positionName:"",level:1,department:"",description:"",isActive:!0})},D=s=>{j(s),l({positionCode:s.positionCode,positionName:s.positionName,level:s.level,department:s.department||"",description:s.description||"",isActive:s.isActive??!0}),d(!0)},J=async s=>{s.preventDefault();try{p?await C.mutateAsync({id:p.id,data:o}):await $.mutateAsync(o),d(!1),j(null),A()}catch(r){console.error("Failed to save position:",r)}},T=async s=>{try{await U.mutateAsync(s)}catch(r){console.error("Failed to delete position:",r)}},P=s=>s<=2?"bg-red-100 text-red-800 border-red-200":s<=4?"bg-orange-100 text-orange-800 border-orange-200":s<=6?"bg-yellow-100 text-yellow-800 border-yellow-200":s<=8?"bg-green-100 text-green-800 border-green-200":"bg-blue-100 text-blue-800 border-blue-200",S=s=>s<=2?"임원급":s<=4?"부장급":s<=6?"차장급":s<=8?"과장급":"사원급",{theme:R}=_(),t=R==="dark";return G?e.jsx("div",{className:`min-h-screen transition-colors ${t?"bg-gray-900":"bg-gray-50"}`,children:e.jsx("div",{className:"max-w-[1366px] mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`animate-spin rounded-full h-8 w-8 border-b-2 mx-auto mb-4 transition-colors ${t?"border-blue-400":"border-blue-600"}`}),e.jsx("p",{className:`transition-colors ${t?"text-gray-300":"text-gray-600"}`,children:"로딩 중..."})]})})})}):e.jsx("div",{className:`min-h-screen transition-colors ${t?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("div",{className:"max-w-[1366px] mx-auto p-6 space-y-6",children:[e.jsx("div",{className:`shadow-sm rounded-lg border transition-colors ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg transition-colors ${t?"bg-blue-900/20":"bg-blue-50"}`,children:e.jsx(ne,{className:`h-6 w-6 transition-colors ${t?"text-blue-400":"text-blue-600"}`})}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl font-bold transition-colors ${t?"text-white":"text-gray-900"}`,children:"직급 관리"}),e.jsx("p",{className:`text-sm mt-1 transition-colors ${t?"text-gray-400":"text-gray-600"}`,children:"조직 내 직급 체계를 관리하고 설정합니다"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(u,{variant:"outline",className:`text-sm transition-colors ${t?"border-gray-600 text-gray-300":"border-gray-300 text-gray-700"}`,children:["총 ",v.length,"개"]}),e.jsxs(se,{open:c,onOpenChange:d,children:[e.jsx(re,{asChild:!0,children:e.jsxs(i,{className:`shadow-md hover:shadow-lg transition-all duration-200 ${t?"bg-blue-600 hover:bg-blue-500 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,onClick:()=>{j(null),A()},children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"직급 추가"]})}),e.jsxs(ae,{className:`max-w-lg transition-colors ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsx(ie,{children:e.jsx(oe,{className:`transition-colors ${t?"text-white":"text-gray-900"}`,children:p?"직급 편집":"새 직급 추가"})}),e.jsxs("form",{onSubmit:J,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"positionCode",className:`text-sm font-medium transition-colors ${t?"text-gray-300":"text-gray-700"}`,children:"직급 코드"}),e.jsx(g,{id:"positionCode",value:o.positionCode,onChange:s=>l(r=>({...r,positionCode:s.target.value})),placeholder:"예: CEO, VP_ENG",className:`mt-1 transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300"}`,required:!0})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"positionName",className:`text-sm font-medium transition-colors ${t?"text-gray-300":"text-gray-700"}`,children:"직급명"}),e.jsx(g,{id:"positionName",value:o.positionName,onChange:s=>l(r=>({...r,positionName:s.target.value})),placeholder:"예: 최고경영자, 개발팀장",className:`mt-1 transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300"}`,required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"level",className:`text-sm font-medium transition-colors ${t?"text-gray-300":"text-gray-700"}`,children:"레벨"}),e.jsx(g,{id:"level",type:"number",min:"1",max:"10",value:o.level,onChange:s=>l(r=>({...r,level:parseInt(s.target.value)||1})),className:`mt-1 transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300"}`,required:!0})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"department",className:`text-sm font-medium transition-colors ${t?"text-gray-300":"text-gray-700"}`,children:"부서"}),e.jsx(g,{id:"department",value:o.department||"",onChange:s=>l(r=>({...r,department:s.target.value})),placeholder:"예: 경영진, 개발팀",className:`mt-1 transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300"}`})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"description",className:`text-sm font-medium transition-colors ${t?"text-gray-300":"text-gray-700"}`,children:"설명"}),e.jsx(g,{id:"description",value:o.description||"",onChange:s=>l(r=>({...r,description:s.target.value})),placeholder:"직급에 대한 설명을 입력하세요",className:`mt-1 transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300"}`})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{id:"isActive",checked:o.isActive,onCheckedChange:s=>l(r=>({...r,isActive:s}))}),e.jsx(x,{htmlFor:"isActive",className:`text-sm transition-colors ${t?"text-gray-300":"text-gray-700"}`,children:"활성 상태"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(i,{type:"button",variant:"outline",onClick:()=>d(!1),className:`transition-colors ${t?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"취소"}),e.jsx(i,{type:"submit",className:`shadow-md hover:shadow-lg transition-all duration-200 ${t?"bg-blue-600 hover:bg-blue-500 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,disabled:$.isPending||C.isPending,children:p?"수정":"추가"})]})]})]})]})]})]})})}),e.jsx("div",{className:`shadow-sm rounded-lg border transition-colors ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsx(g,{placeholder:"직급 이름, 코드, 부서로 검색...",value:a,onChange:s=>n(s.target.value),className:`h-10 transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300"}`})}),e.jsxs("div",{className:`flex items-center rounded-lg p-1 transition-colors ${t?"bg-gray-700":"bg-gray-100"}`,children:[e.jsx(i,{variant:b==="table"?"default":"ghost",size:"sm",onClick:()=>w("table"),className:`h-8 w-8 p-0 transition-colors ${b==="table"?t?"bg-blue-600 hover:bg-blue-500 text-white":"bg-blue-600 hover:bg-blue-700 text-white":t?"text-gray-300 hover:bg-gray-600":"text-gray-700 hover:bg-gray-200"}`,title:"테이블 보기",children:e.jsx(ce,{className:"h-4 w-4"})}),e.jsx(i,{variant:b==="card"?"default":"ghost",size:"sm",onClick:()=>w("card"),className:`h-8 w-8 p-0 transition-colors ${b==="card"?t?"bg-blue-600 hover:bg-blue-500 text-white":"bg-blue-600 hover:bg-blue-700 text-white":t?"text-gray-300 hover:bg-gray-600":"text-gray-700 hover:bg-gray-200"}`,title:"카드 보기",children:e.jsx(de,{className:"h-4 w-4"})})]})]})})}),b==="table"?e.jsx("div",{className:`shadow-sm rounded-lg border overflow-hidden transition-colors ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:e.jsx("div",{className:"p-0",children:e.jsxs(Z,{children:[e.jsx(ee,{children:e.jsxs(F,{className:`border-b transition-colors ${t?"bg-gray-700 border-gray-600":"bg-gray-50/50 border-gray-200"}`,children:[e.jsx(m,{className:`text-left py-3 px-4 text-sm font-medium transition-colors ${t?"text-gray-300":"text-gray-900"}`,children:"직급명"}),e.jsx(m,{className:`text-left py-3 px-4 text-sm font-medium transition-colors ${t?"text-gray-300":"text-gray-900"}`,children:"코드"}),e.jsx(m,{className:`text-left py-3 px-4 text-sm font-medium transition-colors ${t?"text-gray-300":"text-gray-900"}`,children:"레벨"}),e.jsx(m,{className:`text-left py-3 px-4 text-sm font-medium transition-colors ${t?"text-gray-300":"text-gray-900"}`,children:"부서"}),e.jsx(m,{className:`text-left py-3 px-4 text-sm font-medium transition-colors ${t?"text-gray-300":"text-gray-900"}`,children:"상태"}),e.jsx(m,{className:`text-left py-3 px-4 text-sm font-medium transition-colors ${t?"text-gray-300":"text-gray-900"}`,children:"작업"})]})}),e.jsx(te,{children:v.map(s=>e.jsxs(F,{className:`border-b transition-colors ${t?"border-gray-600 hover:bg-gray-700":"border-gray-200 hover:bg-gray-50/50"}`,children:[e.jsx(h,{className:"py-3 px-4 text-sm",children:e.jsx("div",{className:`font-medium transition-colors ${t?"text-gray-200":"text-gray-900"}`,children:s.positionName})}),e.jsx(h,{className:`py-3 px-4 text-sm transition-colors ${t?"text-gray-400":"text-gray-600"}`,children:s.positionCode}),e.jsx(h,{className:"py-3 px-4 text-sm",children:e.jsx(u,{className:P(s.level),children:S(s.level)})}),e.jsx(h,{className:`py-3 px-4 text-sm transition-colors ${t?"text-gray-400":"text-gray-600"}`,children:s.department||"-"}),e.jsx(h,{className:"py-3 px-4 text-sm",children:e.jsx(u,{variant:s.isActive?"default":"secondary",children:s.isActive?"활성":"비활성"})}),e.jsx(h,{className:"py-3 px-4 text-sm",children:e.jsxs("div",{className:"flex items-center gap-1 -space-x-1",children:[e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>D(s),className:`h-8 w-8 p-0 transition-colors ${t?"text-blue-400 hover:bg-blue-900/20":"text-blue-600 hover:bg-blue-50"}`,title:"편집",children:e.jsx(I,{className:"h-3 w-3"})}),e.jsxs(k,{children:[e.jsx(L,{asChild:!0,children:e.jsx(i,{variant:"ghost",size:"sm",className:`h-8 w-8 p-0 transition-colors ${t?"text-red-400 hover:bg-red-900/20":"text-red-600 hover:bg-red-50"}`,title:"삭제",children:e.jsx(K,{className:"h-3 w-3"})})}),e.jsxs(E,{className:`transition-colors ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsxs(q,{children:[e.jsx(H,{className:`transition-colors ${t?"text-white":"text-gray-900"}`,children:"직급 삭제"}),e.jsx(O,{className:`transition-colors ${t?"text-gray-400":"text-gray-600"}`,children:"이 직급을 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다."})]}),e.jsxs(z,{children:[e.jsx(B,{className:`transition-colors ${t?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"취소"}),e.jsx(Q,{onClick:()=>T(s.id),className:"bg-red-600 hover:bg-red-700 text-white",children:"삭제"})]})]})]})]})})]},s.id))})]})})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:v.map(s=>e.jsx("div",{className:`p-4 shadow-sm rounded-lg border transition-all hover:shadow-lg ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("h3",{className:`font-semibold truncate transition-colors ${t?"text-gray-200":"text-gray-900"}`,children:s.positionName})}),e.jsx(u,{variant:s.isActive?"default":"secondary",children:s.isActive?"활성":"비활성"})]}),e.jsxs("div",{className:"space-y-2 mb-3",children:[e.jsxs("div",{className:`flex items-center text-sm gap-2 transition-colors ${t?"text-gray-400":"text-gray-600"}`,children:[e.jsx(xe,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"코드:"}),e.jsx("span",{children:s.positionCode})]}),e.jsxs("div",{className:`flex items-center text-sm gap-2 transition-colors ${t?"text-gray-400":"text-gray-600"}`,children:[e.jsx(X,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"레벨:"}),e.jsx(u,{className:P(s.level),children:S(s.level)})]}),e.jsxs("div",{className:`flex items-center text-sm gap-2 transition-colors ${t?"text-gray-400":"text-gray-600"}`,children:[e.jsx(Y,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"부서:"}),e.jsx("span",{children:s.department||"-"})]})]}),s.description&&e.jsx("div",{className:`pt-2 border-t transition-colors ${t?"border-gray-600":"border-gray-200"}`,children:e.jsx("p",{className:`text-sm transition-colors ${t?"text-gray-400":"text-gray-600"}`,children:s.description})}),e.jsx("div",{className:"flex items-center justify-between text-xs mb-3 transition-colors text-gray-500",children:e.jsx("span",{children:"등록: 직급 관리"})}),e.jsx("div",{className:`flex items-center justify-end pt-2 border-t transition-colors ${t?"border-gray-600":"border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center -space-x-1",children:[e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>D(s),className:`h-8 w-8 p-0 transition-colors ${t?"text-blue-400 hover:bg-blue-900/20":"text-blue-600 hover:bg-blue-50"}`,title:"편집",children:e.jsx(I,{className:"h-3 w-3"})}),e.jsxs(k,{children:[e.jsx(L,{asChild:!0,children:e.jsx(i,{variant:"ghost",size:"sm",className:`h-8 w-8 p-0 transition-colors ${t?"text-red-400 hover:bg-red-900/20":"text-red-600 hover:bg-red-50"}`,title:"삭제",children:e.jsx(K,{className:"h-3 w-3"})})}),e.jsxs(E,{className:`transition-colors ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsxs(q,{children:[e.jsx(H,{className:`transition-colors ${t?"text-white":"text-gray-900"}`,children:"직급 삭제"}),e.jsx(O,{className:`transition-colors ${t?"text-gray-400":"text-gray-600"}`,children:"이 직급을 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다."})]}),e.jsxs(z,{children:[e.jsx(B,{className:`transition-colors ${t?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"취소"}),e.jsx(Q,{onClick:()=>T(s.id),className:"bg-red-600 hover:bg-red-700 text-white",children:"삭제"})]})]})]})]})})]})},s.id))})]})})}export{Pe as default};
