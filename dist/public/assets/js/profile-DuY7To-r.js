import{n as A,c as E,d as T,u as I,g as L,r as d,H as v,j as e,U as f,aV as M,aW as q,aX as z,aY as B,s as H,aZ as w,Y as l,I as n,B as x,a1 as R,a_ as G,J as $,K as U}from"./index-D1uoWSLq.js";import{S as P}from"./switch-88RnkLQj.js";import{i as k}from"./authUtils-CcDzk6i0.js";import{L as Y}from"./lock-g4fHgfdC.js";import"./index-CyxsJgM2.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=A("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);function Z(){const{user:a,isLoading:y}=E(),{toast:i}=T(),[,b]=I(),{theme:C}=L(),s=C==="dark",[m,u]=d.useState({name:"",email:"",role:""}),[c,h]=d.useState({emailNotifications:!0,orderAlerts:!0,language:"ko"}),[o,g]=d.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[S,j]=d.useState(!1);d.useEffect(()=>{a&&typeof a=="object"&&u({name:a.name||"",email:a.email||"",role:a.role||""})},[a]),d.useEffect(()=>{if(!y&&!a){i({title:"인증 오류",description:"로그인이 필요합니다. 다시 로그인해주세요.",variant:"destructive"}),setTimeout(()=>{b("/login")},500);return}},[a,y,i]);const p=v({mutationFn:async r=>await $("PATCH","/api/auth/profile",{name:r.name}),onSuccess:r=>{r&&typeof r=="object"&&(U.setQueryData(["/api/auth/user"],r),u(t=>({...t,name:r.name||t.name}))),i({title:"성공",description:"프로필이 업데이트되었습니다."})},onError:r=>{k(r)?(i({title:"인증 오류",description:"로그인이 필요합니다. 다시 로그인해주세요.",variant:"destructive"}),setTimeout(()=>{b("/login")},500)):i({title:"오류",description:"프로필 업데이트에 실패했습니다.",variant:"destructive"})}}),D=r=>{r.preventDefault(),p.mutate(m)},N=v({mutationFn:async r=>await $("PATCH","/api/auth/change-password",r),onSuccess:()=>{i({title:"성공",description:"비밀번호가 성공적으로 변경되었습니다."}),g({currentPassword:"",newPassword:"",confirmPassword:""}),j(!1)},onError:r=>{k(r)?(i({title:"인증 오류",description:"로그인이 필요합니다. 다시 로그인해주세요.",variant:"destructive"}),setTimeout(()=>{b("/login")},500)):i({title:"오류",description:r.response?.data?.message||"비밀번호 변경에 실패했습니다.",variant:"destructive"})}}),F=r=>{if(r.preventDefault(),!o.currentPassword||!o.newPassword||!o.confirmPassword){i({title:"입력 오류",description:"모든 필드를 입력해주세요.",variant:"destructive"});return}if(o.newPassword!==o.confirmPassword){i({title:"입력 오류",description:"새 비밀번호가 일치하지 않습니다.",variant:"destructive"});return}if(o.newPassword.length<6){i({title:"입력 오류",description:"새 비밀번호는 최소 6자 이상이어야 합니다.",variant:"destructive"});return}N.mutate({currentPassword:o.currentPassword,newPassword:o.newPassword})};return y?e.jsx("div",{className:`min-h-screen transition-colors ${s?"bg-gray-900":"bg-gray-50"}`,children:e.jsx("div",{className:"max-w-[1366px] mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`animate-spin rounded-full h-8 w-8 border-b-2 mx-auto mb-4 transition-colors ${s?"border-blue-400":"border-blue-600"}`}),e.jsx("p",{className:`transition-colors ${s?"text-gray-300":"text-gray-600"}`,children:"로딩 중..."})]})})})}):a?e.jsx("div",{className:`min-h-screen transition-colors ${s?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("div",{className:"max-w-[1366px] mx-auto p-6 space-y-6",children:[e.jsx("div",{className:`bg-white shadow-sm rounded-lg border transition-colors ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg transition-colors ${s?"bg-blue-900/20":"bg-blue-50"}`,children:e.jsx(f,{className:`h-6 w-6 transition-colors ${s?"text-blue-400":"text-blue-600"}`})}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl font-bold transition-colors ${s?"text-white":"text-gray-900"}`,children:"프로필"}),e.jsx("p",{className:`text-sm mt-1 transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"계정 정보와 설정을 관리하세요"})]})]})})})}),e.jsxs("div",{className:`flex items-center space-x-4 p-6 rounded-lg border shadow-sm transition-colors ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsx(M,{className:"h-16 w-16",children:e.jsx(q,{className:"text-white text-lg transition-colors bg-blue-600",children:z(a)})}),e.jsxs("div",{children:[e.jsx("h2",{className:`text-xl font-bold transition-colors ${s?"text-white":"text-gray-900"}`,children:B(a)}),e.jsx("p",{className:`transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:a?.email}),e.jsx(H,{variant:"secondary",className:"mt-1",children:w(a?.role||"")})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:`shadow-sm rounded-lg border transition-colors ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(f,{className:`h-5 w-5 transition-colors ${s?"text-blue-400":"text-blue-600"}`}),e.jsx("h3",{className:`text-lg font-semibold transition-colors ${s?"text-white":"text-gray-900"}`,children:"프로필 정보"})]}),e.jsx("p",{className:`text-sm mt-1 transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"개인 정보를 수정할 수 있습니다."})]}),e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"name",className:`transition-colors ${s?"text-gray-300":"text-gray-700"}`,children:"이름"}),e.jsx(n,{id:"name",value:m.name,onChange:r=>u(t=>({...t,name:r.target.value})),placeholder:"전체 이름을 입력하세요",className:`transition-colors ${s?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300"}`})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"email",className:`transition-colors ${s?"text-gray-300":"text-gray-700"}`,children:"이메일"}),e.jsx(n,{id:"email",type:"email",value:m.email,disabled:!0,className:`transition-colors ${s?"bg-gray-600 border-gray-600 text-gray-300":"bg-gray-50 border-gray-300"}`}),e.jsx("p",{className:`text-sm transition-colors ${s?"text-gray-400":"text-gray-500"}`,children:"이메일은 변경할 수 없습니다."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"role",className:`transition-colors ${s?"text-gray-300":"text-gray-700"}`,children:"역할"}),e.jsx(n,{id:"role",value:w(m.role),disabled:!0,className:`transition-colors ${s?"bg-gray-600 border-gray-600 text-gray-300":"bg-gray-50 border-gray-300"}`}),e.jsx("p",{className:`text-sm transition-colors ${s?"text-gray-400":"text-gray-500"}`,children:"역할은 관리자만 변경할 수 있습니다."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{className:`transition-colors ${s?"text-gray-300":"text-gray-700"}`,children:"사용자 ID"}),e.jsx(n,{value:a?.id||"",disabled:!0,className:`transition-colors ${s?"bg-gray-600 border-gray-600 text-gray-300":"bg-gray-50 border-gray-300"}`})]}),e.jsx("div",{className:`my-4 h-px transition-colors ${s?"bg-gray-600":"bg-gray-200"}`}),e.jsx(x,{type:"submit",disabled:p.isPending,className:`w-full shadow-md hover:shadow-lg transition-all duration-200 ${s?"bg-blue-600 hover:bg-blue-500 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:p.isPending?"저장 중...":"프로필 저장"})]})})]}),e.jsxs("div",{className:`shadow-sm rounded-lg border transition-colors ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{className:`h-5 w-5 transition-colors ${s?"text-blue-400":"text-blue-600"}`}),e.jsx("h3",{className:`text-lg font-semibold transition-colors ${s?"text-white":"text-gray-900"}`,children:"계정 설정"})]}),e.jsx("p",{className:`text-sm mt-1 transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"알림 및 언어 설정을 변경할 수 있습니다."})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(G,{className:`h-4 w-4 transition-colors ${s?"text-blue-400":"text-blue-600"}`}),e.jsx("h4",{className:`font-medium transition-colors ${s?"text-white":"text-gray-900"}`,children:"알림 설정"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(l,{className:`transition-colors ${s?"text-gray-300":"text-gray-700"}`,children:"이메일 알림"}),e.jsx("p",{className:`text-sm transition-colors ${s?"text-gray-400":"text-gray-500"}`,children:"중요한 업데이트를 이메일로 받아보세요"})]}),e.jsx(P,{checked:c.emailNotifications,onCheckedChange:r=>h(t=>({...t,emailNotifications:r}))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(l,{className:`transition-colors ${s?"text-gray-300":"text-gray-700"}`,children:"발주서 알림"}),e.jsx("p",{className:`text-sm transition-colors ${s?"text-gray-400":"text-gray-500"}`,children:"발주서 상태 변경 시 알림을 받아보세요"})]}),e.jsx(P,{checked:c.orderAlerts,onCheckedChange:r=>h(t=>({...t,orderAlerts:r}))})]})]})]}),e.jsx("div",{className:`my-4 h-px transition-colors ${s?"bg-gray-600":"bg-gray-200"}`}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(J,{className:`h-4 w-4 transition-colors ${s?"text-blue-400":"text-blue-600"}`}),e.jsx("h4",{className:`font-medium transition-colors ${s?"text-white":"text-gray-900"}`,children:"언어 설정"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{className:`transition-colors ${s?"text-gray-300":"text-gray-700"}`,children:"언어"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(x,{type:"button",variant:c.language==="ko"?"default":"outline",size:"sm",onClick:()=>h(r=>({...r,language:"ko"})),className:`transition-colors ${c.language==="ko"?s?"bg-blue-600 hover:bg-blue-500 text-white":"bg-blue-600 hover:bg-blue-700 text-white":s?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"한국어"}),e.jsx(x,{type:"button",variant:c.language==="en"?"default":"outline",size:"sm",onClick:()=>h(r=>({...r,language:"en"})),className:`transition-colors ${c.language==="en"?s?"bg-blue-600 hover:bg-blue-500 text-white":"bg-blue-600 hover:bg-blue-700 text-white":s?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"English"})]})]})]}),e.jsx("div",{className:`my-4 h-px transition-colors ${s?"bg-gray-600":"bg-gray-200"}`}),e.jsxs("div",{className:`p-4 border rounded-lg transition-colors ${s?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"}`,children:[e.jsx("h4",{className:`font-medium mb-3 transition-colors ${s?"text-white":"text-gray-900"}`,children:"계정 정보 요약"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:`transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"사용자 ID:"}),e.jsx("span",{className:`font-mono transition-colors ${s?"text-gray-200":"text-gray-900"}`,children:a?.id})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:`transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"이메일:"}),e.jsx("span",{className:`transition-colors ${s?"text-gray-200":"text-gray-900"}`,children:a?.email})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:`transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"역할:"}),e.jsx("span",{className:`transition-colors ${s?"text-gray-200":"text-gray-900"}`,children:w(a?.role||"")})]})]})]})]})]}),e.jsxs("div",{className:`lg:col-span-1 shadow-sm rounded-lg border transition-colors ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Y,{className:`h-5 w-5 transition-colors ${s?"text-blue-400":"text-blue-600"}`}),e.jsx("h3",{className:`text-lg font-semibold transition-colors ${s?"text-white":"text-gray-900"}`,children:"비밀번호 변경"})]}),e.jsx("p",{className:`text-sm mt-1 transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"계정 보안을 위해 정기적으로 비밀번호를 변경하세요."})]}),e.jsx("div",{className:"p-6",children:S?e.jsxs("form",{onSubmit:F,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"currentPassword",className:`transition-colors ${s?"text-gray-300":"text-gray-700"}`,children:"현재 비밀번호"}),e.jsx(n,{id:"currentPassword",type:"password",value:o.currentPassword,onChange:r=>g(t=>({...t,currentPassword:r.target.value})),placeholder:"현재 비밀번호를 입력하세요",className:`transition-colors ${s?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300"}`,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"newPassword",className:`transition-colors ${s?"text-gray-300":"text-gray-700"}`,children:"새 비밀번호"}),e.jsx(n,{id:"newPassword",type:"password",value:o.newPassword,onChange:r=>g(t=>({...t,newPassword:r.target.value})),placeholder:"새 비밀번호를 입력하세요",className:`transition-colors ${s?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300"}`,required:!0}),e.jsx("p",{className:`text-xs transition-colors ${s?"text-gray-400":"text-gray-500"}`,children:"최소 6자 이상 입력하세요"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"confirmPassword",className:`transition-colors ${s?"text-gray-300":"text-gray-700"}`,children:"새 비밀번호 확인"}),e.jsx(n,{id:"confirmPassword",type:"password",value:o.confirmPassword,onChange:r=>g(t=>({...t,confirmPassword:r.target.value})),placeholder:"새 비밀번호를 다시 입력하세요",className:`transition-colors ${s?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300"}`,required:!0})]}),e.jsx("div",{className:`my-4 h-px transition-colors ${s?"bg-gray-600":"bg-gray-200"}`}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>{j(!1),g({currentPassword:"",newPassword:"",confirmPassword:""})},className:`flex-1 transition-colors ${s?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"취소"}),e.jsx(x,{type:"submit",disabled:N.isPending,className:`flex-1 shadow-md hover:shadow-lg transition-all duration-200 ${s?"bg-blue-600 hover:bg-blue-500 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:N.isPending?"변경 중...":"비밀번호 변경"})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:`text-sm transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:"비밀번호를 변경하려면 아래 버튼을 클릭하세요."}),e.jsx(x,{onClick:()=>j(!0),className:`w-full transition-colors ${s?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,variant:"outline",children:"비밀번호 변경하기"})]})})]})]})]})}):null}export{Z as default};
