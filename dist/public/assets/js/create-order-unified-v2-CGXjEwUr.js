import{v as Ce,r as u,j as e,ah as L,a as J,B as f,G as Se,h as W,w as z,m as re,L as N,I as A,P as K,p as q,A as fe,D as ve,s as B,E as le,F as U,X as _,a8 as M,c as Fe}from"./index-D-7Lp4md.js";import{A as Y,a as ee}from"./alert-DeYDctF9.js";import{P as Pe}from"./progress-DRLuh4lC.js";import{U as se}from"./upload-CqF8gr3d.js";import{S as ne,a as ie,b as ce,c as oe,d as de}from"./select-vc-iSqVP.js";import{T as te}from"./textarea-ClAI1pm9.js";import{C as me}from"./calendar-DNHDRtFe.js";import{P as xe,a as he,b as pe}from"./popover-B8BOIrqz.js";import{C as ue}from"./calendar-Df0VWamX.js";import{T as ye}from"./trash-2-CdMGAMxm.js";import{f as je}from"./format-BqlaHE6C.js";import{k as ge}from"./ko-DHTEdlBI.js";import{T as Ee,a as De,b as H,c as G}from"./tabs-DD--Z9jL.js";import{C as V}from"./checkbox-C-RMMFGy.js";import{M as Q}from"./mail-BFoRgXUX.js";import{R as be}from"./refresh-cw-55Zgr2B5.js";import{D as ae}from"./download-CzbDpmCC.js";import{P as X}from"./paperclip-DTJwBERp.js";import{D as ke,a as Ae,b as Te,c as Oe,e as Ie}from"./dialog-C40KJSdT.js";import{S as $e}from"./save-DWW4BxPI.js";import{S as ze}from"./send-jaY2A2RT.js";import{A as Le}from"./arrow-right-DEyMfVSL.js";import{I as Z}from"./info-CKSQclio.js";import{T as Re}from"./trending-up-DDWDohiJ.js";import{T as Me}from"./triangle-alert-D1kjlFd9.js";import"./index-BdQq_4o_.js";import"./index-D_EVk0Np.js";import"./chevron-down-Dju_PAhQ.js";import"./chevron-up-BFAKrKoj.js";import"./chevron-left-DHQHCWjH.js";import"./index-D3xv7dpi.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=Ce("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),Ue=({onDataExtracted:t,onProcessedFileReady:y})=>{const[d,a]=u.useState(!1),[P,E]=u.useState(!1),[j,w]=u.useState(null),[C,S]=u.useState("idle"),[D,b]=u.useState(""),[l,n]=u.useState([]),[x,v]=u.useState(0),F=u.useCallback(p=>{p.preventDefault(),a(!0)},[]),T=u.useCallback(p=>{p.preventDefault(),a(!1)},[]),O=u.useCallback(p=>{p.preventDefault(),a(!1);const c=Array.from(p.dataTransfer.files).find(h=>h.type==="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"||h.name.endsWith(".xlsx"));c?I(c):(b("ì—‘ì…€ íŒŒì¼(.xlsx)ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤."),S("error"))},[]),$=p=>{const r=p.target.files?.[0];r&&I(r)},I=async p=>{w(p),E(!0),S("processing"),b("");const r=new FormData;r.append("file",p);try{const c=await fetch("/api/po-template/upload",{method:"POST",body:r});if(!c.ok)throw new Error("íŒŒì¼ ì—…ë¡œë“œ ì‹¤íŒ¨");const h=await c.json();if(h.success&&h.data.orders.length>0){n(h.data.orders),S("success");try{const s=await fetch("/api/po-template/extract-sheets",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:h.data.filePath,sheetNames:["ê°‘ì§€","ì„ì§€"]})});if(s.ok){const m=await s.json();if(m.success&&m.data.extractedPath){const i=`/uploads/${m.data.extractedPath.split("/").pop()}`,g=`${p.name.replace(".xlsx","")}_Inputì œê±°.xlsx`;console.log("ğŸ”· ì²˜ë¦¬ëœ Excel íŒŒì¼ ì •ë³´:",{processedFileUrl:i,processedFileName:g}),y?.({url:i,name:g})}}else{console.warn("âš ï¸ Extract sheets API ì‹¤íŒ¨, ê¸°ë³¸ê°’ ì‚¬ìš©");const o=`/uploads/extracted-${Date.now()}.xlsx`,i=`${p.name.replace(".xlsx","")}_Inputì œê±°.xlsx`;y?.({url:o,name:i})}}catch(s){console.error("Extract sheets í˜¸ì¶œ ì‹¤íŒ¨:",s);const o=`/uploads/extracted-${Date.now()}.xlsx`,i=`${p.name.replace(".xlsx","")}_Inputì œê±°.xlsx`;y?.({url:o,name:i})}if(h.data.orders.length===1){const s=h.data.orders[0],m={...s,projectName:s.siteName||s.projectName,orderDate:s.orderDate,deliveryDate:s.dueDate||s.deliveryDate,items:(s.items||[]).map(o=>({...o,name:o.itemName||o.name,unit:o.unit||"EA"}))};t(m)}}else throw new Error(h.error||"ë°ì´í„° ì¶”ì¶œ ì‹¤íŒ¨")}catch(c){b(c.message||"íŒŒì¼ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."),S("error")}finally{E(!1)}},R=async()=>{if(l[x]&&j){const p=l[x],r={...p,projectName:p.siteName||p.projectName,orderDate:p.orderDate,deliveryDate:p.dueDate||p.deliveryDate,items:(p.items||[]).map(c=>({...c,name:c.itemName||c.name,unit:c.unit||"EA"}))};t(r)}};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{onDragOver:F,onDragLeave:T,onDrop:O,className:`
          border-2 border-dashed rounded-lg ${C==="success"?"p-4":"p-8"} text-center transition-all
          ${d?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}
          ${P?"opacity-50 pointer-events-none":""}
        `,children:P?e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{className:"w-8 h-8 mx-auto text-blue-600 animate-spin"}),e.jsx("p",{className:"text-sm text-gray-600",children:"íŒŒì¼ì„ ì²˜ë¦¬í•˜ê³  ìˆìŠµë‹ˆë‹¤..."})]}):C==="success"?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(J,{className:"w-8 h-8 text-green-600"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-medium text-green-700",children:j?.name}),e.jsxs("p",{className:"text-xs text-gray-600",children:[l.length,"ê°œì˜ ë°œì£¼ì„œ ê°ì§€ë¨"]})]})]}),e.jsx(f,{variant:"outline",size:"sm",onClick:()=>{S("idle"),n([]),w(null)},children:"ë‹¤ì‹œ ì—…ë¡œë“œ"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Se,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-700 mb-2",children:"ì—‘ì…€ íŒŒì¼ì„ ë“œë˜ê·¸í•˜ì—¬ ë†“ìœ¼ì„¸ìš”"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"ë˜ëŠ”"}),e.jsx("input",{type:"file",accept:".xlsx",onChange:$,className:"hidden",id:"excel-upload"}),e.jsx("label",{htmlFor:"excel-upload",children:e.jsx(f,{variant:"outline",asChild:!0,children:e.jsxs("span",{className:"cursor-pointer",children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),"íŒŒì¼ ì„ íƒ"]})})})]})}),C==="error"&&D&&e.jsxs(Y,{variant:"destructive",children:[e.jsx(W,{className:"h-4 w-4"}),e.jsx(ee,{children:D})]}),l.length>1&&C==="success"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"ë°œì£¼ì„œë¥¼ ì„ íƒí•˜ì„¸ìš”:"}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto border rounded-lg p-2 bg-gray-50",children:l.map((p,r)=>e.jsx("div",{onClick:()=>v(r),className:`
                  p-3 border rounded-lg cursor-pointer transition-colors
                  ${x===r?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 bg-white"}
                `,children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:p.orderNumber}),e.jsxs("p",{className:"text-xs text-gray-600",children:[p.vendorName," | ",p.projectName]})]}),e.jsxs(z,{variant:"secondary",children:[p.items?.length||0,"ê°œ í’ˆëª©"]})]}),p.items&&p.items.length>0&&e.jsxs("div",{className:"pt-2 border-t border-gray-200",children:[e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-gray-500",children:[e.jsx("th",{className:"text-left font-normal",children:"í’ˆëª©"}),e.jsx("th",{className:"text-right font-normal",children:"ìˆ˜ëŸ‰"}),e.jsx("th",{className:"text-right font-normal",children:"ë‹¨ê°€"}),e.jsx("th",{className:"text-right font-normal",children:"ê¸ˆì•¡"})]})}),e.jsx("tbody",{children:p.items.slice(0,2).map((c,h)=>e.jsxs("tr",{children:[e.jsx("td",{className:"text-gray-600 truncate max-w-[150px] pr-2",children:c.itemName}),e.jsx("td",{className:"text-right text-gray-700",children:Math.floor(c.quantity||0).toLocaleString()}),e.jsx("td",{className:"text-right text-gray-700",children:Math.floor(c.unitPrice||0).toLocaleString()}),e.jsx("td",{className:"text-right font-medium",children:Math.floor(c.totalAmount||0).toLocaleString()})]},h))})]}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[p.items.length>2&&e.jsxs("p",{className:"text-xs text-gray-500 italic",children:["ì™¸ ",p.items.length-2,"ê°œ"]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-xs text-gray-600 mr-2",children:"ì´ì•¡"}),e.jsxs("span",{className:"text-sm font-semibold text-blue-600",children:[Math.floor(p.totalAmount||p.items.reduce((c,h)=>c+(h.totalAmount||0),0)).toLocaleString(),"ì›"]})]})]})]})]})},r))}),e.jsx(f,{onClick:R,className:"w-full",size:"sm",children:"ì„ íƒí•œ ë°œì£¼ì„œ ì‚¬ìš©"})]})]})},qe=({initialData:t={},onChange:y})=>{const[d,a]=u.useState({orderNumber:t.orderNumber||`PO-${new Date().getTime()}`,orderDate:t.orderDate||new Date,deliveryDate:t.deliveryDate||new Date(Date.now()+6048e5),projectId:t.projectId||"",projectName:t.projectName||"",vendorId:t.vendorId||"",vendorName:t.vendorName||"",vendorEmail:t.vendorEmail||"",items:t.items||[{itemName:"",specification:"",quantity:1,unitPrice:0,totalAmount:0}],notes:t.notes||"",totalAmount:t.totalAmount||0}),{data:P}=re({queryKey:["projects"],queryFn:async()=>(await fetch("/api/projects")).json()}),{data:E}=re({queryKey:["vendors"],queryFn:async()=>(await fetch("/api/vendors")).json()});u.useEffect(()=>{y(d)},[d]),u.useEffect(()=>{const l=d.items.reduce((n,x)=>n+(x.totalAmount||0),0);a(n=>({...n,totalAmount:l}))},[d.items]);const j=(l,n)=>{a(x=>({...x,[l]:n}))},w=l=>{const n=P?.find(x=>x.id===l);n&&a(x=>({...x,projectId:l,projectName:n.name}))},C=l=>{const n=E?.find(x=>x.id===l);n&&a(x=>({...x,vendorId:l,vendorName:n.name,vendorEmail:n.email||""}))},S=(l,n,x)=>{const v=[...d.items];v[l]={...v[l],[n]:x},(n==="quantity"||n==="unitPrice")&&(v[l].totalAmount=v[l].quantity*v[l].unitPrice),a(F=>({...F,items:v}))},D=()=>{a(l=>({...l,items:[...l.items,{itemName:"",specification:"",quantity:1,unitPrice:0,totalAmount:0}]}))},b=l=>{if(d.items.length>1){const n=d.items.filter((x,v)=>v!==l);a(x=>({...x,items:n}))}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"ê¸°ë³¸ ì •ë³´"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"orderNumber",children:"ë°œì£¼ë²ˆí˜¸"}),e.jsx(A,{id:"orderNumber",value:d.orderNumber,onChange:l=>j("orderNumber",l.target.value),placeholder:"PO-20240101-001"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"ë°œì£¼ì¼"}),e.jsxs(xe,{children:[e.jsx(he,{asChild:!0,children:e.jsxs(f,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[e.jsx(ue,{className:"mr-2 h-4 w-4"}),je(d.orderDate,"PPP",{locale:ge})]})}),e.jsx(pe,{className:"w-auto p-0",children:e.jsx(me,{mode:"single",selected:d.orderDate,onSelect:l=>l&&j("orderDate",l),initialFocus:!0})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"í”„ë¡œì íŠ¸"}),e.jsxs(ne,{value:d.projectId,onValueChange:w,children:[e.jsx(ie,{children:e.jsx(ce,{placeholder:"í”„ë¡œì íŠ¸ ì„ íƒ"})}),e.jsx(oe,{children:P?.map(l=>e.jsx(de,{value:l.id,children:l.name},l.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"ë‚©ê¸°ì¼"}),e.jsxs(xe,{children:[e.jsx(he,{asChild:!0,children:e.jsxs(f,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[e.jsx(ue,{className:"mr-2 h-4 w-4"}),je(d.deliveryDate,"PPP",{locale:ge})]})}),e.jsx(pe,{className:"w-auto p-0",children:e.jsx(me,{mode:"single",selected:d.deliveryDate,onSelect:l=>l&&j("deliveryDate",l),initialFocus:!0})})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"ê±°ë˜ì²˜ ì •ë³´"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"ê±°ë˜ì²˜"}),e.jsxs(ne,{value:d.vendorId,onValueChange:C,children:[e.jsx(ie,{children:e.jsx(ce,{placeholder:"ê±°ë˜ì²˜ ì„ íƒ"})}),e.jsx(oe,{children:E?.map(l=>e.jsx(de,{value:l.id,children:l.name},l.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"vendorEmail",children:"ì´ë©”ì¼"}),e.jsx(A,{id:"vendorEmail",type:"email",value:d.vendorEmail,onChange:l=>j("vendorEmail",l.target.value),placeholder:"vendor@example.com"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"í’ˆëª© ì •ë³´"}),e.jsxs(f,{onClick:D,size:"sm",variant:"outline",children:[e.jsx(K,{className:"w-4 h-4 mr-1"}),"í’ˆëª© ì¶”ê°€"]})]}),e.jsx("div",{className:"space-y-3",children:d.items.map((l,n)=>e.jsxs("div",{className:"grid grid-cols-12 gap-3 items-end p-3 border rounded-lg",children:[e.jsxs("div",{className:"col-span-3 space-y-2",children:[e.jsx(N,{children:"í’ˆëª©ëª…"}),e.jsx(A,{value:l.itemName,onChange:x=>S(n,"itemName",x.target.value),placeholder:"í’ˆëª©ëª…"})]}),e.jsxs("div",{className:"col-span-3 space-y-2",children:[e.jsx(N,{children:"ê·œê²©"}),e.jsx(A,{value:l.specification,onChange:x=>S(n,"specification",x.target.value),placeholder:"ê·œê²©"})]}),e.jsxs("div",{className:"col-span-2 space-y-2",children:[e.jsx(N,{children:"ìˆ˜ëŸ‰"}),e.jsx(A,{type:"number",value:l.quantity,onChange:x=>S(n,"quantity",Number(x.target.value)),min:"1"})]}),e.jsxs("div",{className:"col-span-2 space-y-2",children:[e.jsx(N,{children:"ë‹¨ê°€"}),e.jsx(A,{type:"number",value:l.unitPrice,onChange:x=>S(n,"unitPrice",Number(x.target.value)),min:"0"})]}),e.jsxs("div",{className:"col-span-1 space-y-2",children:[e.jsx(N,{children:"ê¸ˆì•¡"}),e.jsxs("div",{className:"text-sm font-medium py-2",children:[l.totalAmount.toLocaleString(),"ì›"]})]}),e.jsx("div",{className:"col-span-1",children:e.jsx(f,{onClick:()=>b(n),size:"sm",variant:"ghost",className:"text-red-600 hover:text-red-700",disabled:d.items.length===1,children:e.jsx(ye,{className:"w-4 h-4"})})})]},n))}),e.jsx("div",{className:"flex justify-end p-3 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"text-lg font-semibold",children:["ì´ì•¡: ",d.totalAmount.toLocaleString(),"ì›"]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"notes",children:"ë¹„ê³ "}),e.jsx(te,{id:"notes",value:d.notes,onChange:l=>j("notes",l.target.value),placeholder:"ì¶”ê°€ ìš”ì²­ì‚¬í•­ì´ë‚˜ íŠ¹ì´ì‚¬í•­ì„ ì…ë ¥í•˜ì„¸ìš”",rows:3})]})]})},Be=({orderData:t,pdfUrl:y,processingStatus:d})=>{const[a,P]=u.useState([t.vendorEmail||""]),[E,j]=u.useState([]),[w,C]=u.useState(`ë°œì£¼ì„œ - ${t.orderNumber||""}`),[S,D]=u.useState("info");u.useState(!1);const[b,l]=u.useState([]),[n,x]=u.useState([]),[v,F]=u.useState(()=>`ì•ˆë…•í•˜ì„¸ìš”,

${t.vendorName||"ê±°ë˜ì²˜"} ë‹´ë‹¹ìë‹˜

ë°œì£¼ì„œë¥¼ ì²¨ë¶€í•˜ì—¬ ë³´ë‚´ë“œë¦½ë‹ˆë‹¤.

ë°œì£¼ë²ˆí˜¸: ${t.orderNumber||"-"}
í”„ë¡œì íŠ¸: ${t.projectName||"-"}
ë‚©ê¸°ì¼: ${t.deliveryDate?new Date(t.deliveryDate).toLocaleDateString("ko-KR"):"-"}

í™•ì¸ í›„ íšŒì‹  ë¶€íƒë“œë¦½ë‹ˆë‹¤.

ê°ì‚¬í•©ë‹ˆë‹¤.`);u.useEffect(()=>{F(`ì•ˆë…•í•˜ì„¸ìš”,

${t.vendorName||"ê±°ë˜ì²˜"} ë‹´ë‹¹ìë‹˜

ë°œì£¼ì„œë¥¼ ì²¨ë¶€í•˜ì—¬ ë³´ë‚´ë“œë¦½ë‹ˆë‹¤.

ë°œì£¼ë²ˆí˜¸: ${t.orderNumber||"-"}
í”„ë¡œì íŠ¸: ${t.projectName||"-"}
ë‚©ê¸°ì¼: ${t.deliveryDate?new Date(t.deliveryDate).toLocaleDateString("ko-KR"):"-"}

í™•ì¸ í›„ íšŒì‹  ë¶€íƒë“œë¦½ë‹ˆë‹¤.

ê°ì‚¬í•©ë‹ˆë‹¤.`)},[t.vendorName,t.orderNumber,t.projectName,t.deliveryDate]),u.useEffect(()=>{const s=[];t.processedExcelUrl&&s.push({id:"processed-excel",name:t.originalFileName||"ì²˜ë¦¬ëœ_Excel_íŒŒì¼.xlsx",size:0,type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",url:t.processedExcelUrl,isDefault:!0,isSelected:!0}),y&&d.pdf==="completed"&&s.push({id:"generated-pdf",name:`ë°œì£¼ì„œ_${t.orderNumber||"generated"}.pdf`,size:0,type:"application/pdf",url:y,isDefault:!0,isSelected:!0}),l(m=>{const o=m.filter(i=>!i.isDefault);return[...s,...o]})},[t.processedExcelUrl,y,d.pdf,t.orderNumber]);const T=s=>{s==="to"?P([...a,""]):j([...E,""])},O=(s,m)=>{s==="to"&&a.length>1?P(a.filter((o,i)=>i!==m)):s==="cc"&&j(E.filter((o,i)=>i!==m))},$=(s,m,o)=>{if(s==="to"){const i=[...a];i[m]=o,P(i)}else{const i=[...E];i[m]=o,j(i)}},I=async s=>{const m=Array.from(s);for(const o of m){const i=`custom-${Date.now()}-${Math.random()}`;x(g=>[...g,i]);try{const g={id:i,name:o.name,size:o.size,type:o.type,file:o,isDefault:!1,isSelected:!0};l(k=>[...k,g])}catch(g){console.error("íŒŒì¼ ì—…ë¡œë“œ ì‹¤íŒ¨:",g)}finally{x(g=>g.filter(k=>k!==i))}}},R=s=>{l(m=>m.map(o=>o.id===s?{...o,isSelected:!o.isSelected}:o))},p=s=>{l(m=>m.filter(o=>o.id!==s))},r=s=>{if(s===0)return"0 Bytes";const m=1024,o=["Bytes","KB","MB","GB"],i=Math.floor(Math.log(s)/Math.log(m));return parseFloat((s/Math.pow(m,i)).toFixed(2))+" "+o[i]},c=s=>s.includes("pdf")?e.jsx(U,{className:"w-4 h-4 text-red-600"}):s.includes("spreadsheet")||s.includes("excel")?e.jsx(U,{className:"w-4 h-4 text-green-600"}):e.jsx(X,{className:"w-4 h-4 text-gray-600"}),h=s=>{switch(s){case"completed":return e.jsx(J,{className:"w-4 h-4 text-green-600"});case"processing":return e.jsx(L,{className:"w-4 h-4 text-blue-600 animate-spin"});case"error":return e.jsx(W,{className:"w-4 h-4 text-red-600"});default:return null}};return e.jsxs(q,{className:"h-full",children:[e.jsx(fe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ve,{children:"ì‹¤ì‹œê°„ ë¯¸ë¦¬ë³´ê¸°"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(z,{variant:d.pdf==="completed"?"success":"secondary",children:[h(d.pdf),e.jsx("span",{className:"ml-1",children:"PDF"})]}),e.jsxs(z,{variant:d.vendor==="completed"?"success":"secondary",children:[h(d.vendor),e.jsx("span",{className:"ml-1",children:"ê±°ë˜ì²˜"})]}),e.jsxs(z,{variant:d.email==="completed"?"success":"secondary",children:[h(d.email),e.jsx("span",{className:"ml-1",children:"ì´ë©”ì¼"})]})]})]})}),e.jsx(B,{className:"h-[calc(100%-5rem)]",children:e.jsxs(Ee,{value:S,onValueChange:D,className:"h-full",children:[e.jsxs(De,{className:"grid w-full grid-cols-3",children:[e.jsxs(H,{value:"info",children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"ë°œì£¼ì„œ ì •ë³´"]}),e.jsxs(H,{value:"pdf",children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"PDF ë¯¸ë¦¬ë³´ê¸°"]}),e.jsxs(H,{value:"email",children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"ì´ë©”ì¼ ì„¤ì •"]})]}),e.jsx(G,{value:"pdf",className:"h-[calc(100%-3rem)]",children:d.pdf==="processing"?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx(L,{className:"w-12 h-12 mx-auto text-blue-600 animate-spin"}),e.jsx("p",{className:"text-sm text-gray-600",children:"PDFë¥¼ ìƒì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤..."})]})}):d.pdf==="error"?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx(W,{className:"w-12 h-12 mx-auto text-red-600"}),e.jsx("p",{className:"text-sm text-red-600",children:"PDF ìƒì„± ì‹¤íŒ¨"}),e.jsxs(f,{variant:"outline",size:"sm",children:[e.jsx(be,{className:"w-4 h-4 mr-2"}),"ë‹¤ì‹œ ì‹œë„"]})]})}):y&&d.pdf==="completed"?e.jsx("div",{className:"w-full h-full flex flex-col",children:e.jsx("div",{className:"flex-1 bg-gray-50 rounded-lg p-8 flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(J,{className:"w-16 h-16 mx-auto text-green-600"}),e.jsx("h3",{className:"text-lg font-medium",children:"PDFê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤"}),e.jsx("p",{className:"text-sm text-gray-600",children:"ì•„ë˜ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ PDFë¥¼ í™•ì¸í•˜ì„¸ìš”"}),e.jsxs("div",{className:"flex items-center justify-center gap-3 mt-6",children:[e.jsxs(f,{variant:"default",onClick:()=>window.open(y,"_blank"),children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"PDF ë¯¸ë¦¬ë³´ê¸°"]}),e.jsxs(f,{variant:"outline",onClick:()=>window.open(`${y}?download=true`,"_blank"),children:[e.jsx(ae,{className:"w-4 h-4 mr-2"}),"PDF ë‹¤ìš´ë¡œë“œ"]})]})]})})}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx(U,{className:"w-12 h-12 mx-auto text-gray-400"}),e.jsx("p",{className:"text-sm text-gray-600",children:"ë°œì£¼ì„œ ì •ë³´ê°€ ì™„ì„±ë˜ë©´ PDFê°€ ìë™ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤"}),e.jsx("p",{className:"text-xs text-gray-500",children:"ë¨¼ì € 'ë°œì£¼ì„œ ì •ë³´' íƒ­ì—ì„œ ë‚´ìš©ì„ í™•ì¸í•´ì£¼ì„¸ìš”"})]})})}),e.jsxs(G,{value:"info",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(N,{className:"text-xs text-gray-600",children:"ë°œì£¼ë²ˆí˜¸"}),e.jsx("p",{className:"font-medium",children:t.orderNumber||"-"})]}),e.jsxs("div",{children:[e.jsx(N,{className:"text-xs text-gray-600",children:"ë°œì£¼ì¼"}),e.jsx("p",{className:"font-medium",children:t.orderDate?new Date(t.orderDate).toLocaleDateString("ko-KR"):"-"})]}),e.jsxs("div",{children:[e.jsx(N,{className:"text-xs text-gray-600",children:"í”„ë¡œì íŠ¸"}),e.jsx("p",{className:"font-medium",children:t.projectName||"-"})]}),e.jsxs("div",{children:[e.jsx(N,{className:"text-xs text-gray-600",children:"ê±°ë˜ì²˜"}),e.jsx("p",{className:"font-medium",children:t.vendorName||"-"})]}),e.jsxs("div",{children:[e.jsx(N,{className:"text-xs text-gray-600",children:"ë‚©ê¸°ì¼"}),e.jsx("p",{className:"font-medium",children:t.deliveryDate?new Date(t.deliveryDate).toLocaleDateString("ko-KR"):"-"})]}),e.jsxs("div",{children:[e.jsx(N,{className:"text-xs text-gray-600",children:"ì´ì•¡"}),e.jsx("p",{className:"font-medium text-lg text-blue-600",children:t.totalAmount?`${Math.floor(t.totalAmount).toLocaleString()}ì›`:"-"})]})]}),t.items&&t.items.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{className:"text-xs text-gray-600",children:"í’ˆëª© ëª©ë¡"}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-2",children:"í’ˆëª©ëª…"}),e.jsx("th",{className:"text-right p-2",children:"ìˆ˜ëŸ‰"}),e.jsx("th",{className:"text-right p-2",children:"ë‹¨ê°€"}),e.jsx("th",{className:"text-right p-2",children:"ê¸ˆì•¡"})]})}),e.jsx("tbody",{children:t.items.map((s,m)=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-2",children:s.itemName||s.name}),e.jsx("td",{className:"text-right p-2",children:Math.floor(s.quantity||0).toLocaleString()}),e.jsxs("td",{className:"text-right p-2",children:[Math.floor(s.unitPrice||0).toLocaleString(),"ì›"]}),e.jsxs("td",{className:"text-right p-2",children:[Math.floor(s.totalAmount||s.quantity*s.unitPrice||0).toLocaleString(),"ì›"]})]},m))})]})})]})]}),e.jsx(G,{value:"email",className:"space-y-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{children:"ë°›ëŠ” ì‚¬ëŒ"}),e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>T("to"),children:e.jsx(K,{className:"w-4 h-4"})})]}),a.map((s,m)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{type:"email",value:s,onChange:o=>$("to",m,o.target.value),placeholder:"email@example.com"}),a.length>1&&e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>O("to",m),children:e.jsx(_,{className:"w-4 h-4"})})]},m))]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{children:"ì°¸ì¡° (CC)"}),e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>T("cc"),children:e.jsx(K,{className:"w-4 h-4"})})]}),E.map((s,m)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{type:"email",value:s,onChange:o=>$("cc",m,o.target.value),placeholder:"cc@example.com"}),e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>O("cc",m),children:e.jsx(_,{className:"w-4 h-4"})})]},m))]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"ì œëª©"}),e.jsx(A,{value:w,onChange:s=>C(s.target.value),placeholder:"ì´ë©”ì¼ ì œëª©"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"ë©”ì¼ ë³¸ë¬¸"}),e.jsx(te,{value:v,onChange:s=>F(s.target.value),placeholder:"ì´ë©”ì¼ ë³¸ë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”",className:"min-h-[200px] font-mono text-sm",rows:10})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{children:"ì²¨ë¶€íŒŒì¼"}),e.jsxs(f,{variant:"outline",size:"sm",onClick:()=>{const s=document.createElement("input");s.type="file",s.multiple=!0,s.accept=".pdf,.xlsx,.xls,.doc,.docx,.txt",s.onchange=m=>{const o=m.target;o.files&&o.files.length>0&&I(o.files)},s.click()},children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),"íŒŒì¼ ì¶”ê°€"]})]}),e.jsx("div",{className:"space-y-3",children:b.length===0?e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"ì²¨ë¶€í•  íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤"}):b.map(s=>e.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg bg-gray-50",children:[e.jsx(V,{checked:s.isSelected,onCheckedChange:()=>R(s.id)}),e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[c(s.type),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx("span",{children:r(s.size)}),s.isDefault&&e.jsx(z,{variant:"secondary",className:"text-xs",children:"ê¸°ë³¸íŒŒì¼"})]})]})]}),n.includes(s.id)&&e.jsx(L,{className:"w-4 h-4 animate-spin text-blue-600"}),!s.isDefault&&!n.includes(s.id)&&e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>p(s.id),children:e.jsx(ye,{className:"w-4 h-4 text-red-600"})})]},s.id))}),b.length>0&&e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:["ì„ íƒëœ íŒŒì¼: ",b.filter(s=>s.isSelected).length,"/",b.length,"ê°œ"]})})]})]})})]})})]})},_e=({orderData:t,pdfUrl:y,processingStatus:d,onSave:a,onSend:P,onDownload:E,onCreateOrder:j,onCreateOrderWithEmail:w})=>{const[C,S]=u.useState(!0),[D,b]=u.useState(!1),[l,n]=u.useState({to:[t.vendorEmail||""].filter(Boolean),cc:[],subject:`ë°œì£¼ì„œ - ${t.orderNumber||""} (${new Date().toLocaleDateString("ko-KR")})`,message:`ì•ˆë…•í•˜ì„¸ìš”,

ì²¨ë¶€ëœ ë°œì£¼ì„œë¥¼ í™•ì¸í•´ ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.

ê°ì‚¬í•©ë‹ˆë‹¤.`,attachments:{includeExcel:!0,includePdf:!0,additionalFiles:[]}}),[x,v]=u.useState(""),[F,T]=u.useState(""),O=()=>{x.trim()&&!l.to.includes(x.trim())&&(n(i=>({...i,to:[...i.to,x.trim()]})),v(""))},$=i=>{n(g=>({...g,to:g.to.filter(k=>k!==i)}))},I=()=>{F.trim()&&!l.cc.includes(F.trim())&&(n(i=>({...i,cc:[...i.cc,F.trim()]})),T(""))},R=i=>{n(g=>({...g,cc:g.cc.filter(k=>k!==i)}))},p=i=>{const g=Array.from(i.target.files||[]);n(k=>({...k,attachments:{...k.attachments,additionalFiles:[...k.attachments.additionalFiles,...g]}}))},r=i=>{n(g=>({...g,attachments:{...g.attachments,additionalFiles:g.attachments.additionalFiles.filter((k,we)=>we!==i)}}))},c=d.pdf==="completed"&&d.vendor==="completed"&&l.to.length>0,h=t.orderNumber&&t.vendorName&&t.projectName&&t.items?.length>0,s=Object.values(d).some(i=>i==="processing"),m=()=>{C&&w?b(!0):j()},o=()=>{b(!1),w&&w(l)};return e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t shadow-lg z-30",children:[e.jsxs("div",{className:"container mx-auto px-6 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(f,{variant:"outline",onClick:a,disabled:s,children:[e.jsx($e,{className:"w-4 h-4 mr-2"}),"ì„ì‹œ ì €ì¥"]}),e.jsxs(f,{variant:"outline",onClick:E,disabled:!y||d.pdf!=="completed",children:[e.jsx(ae,{className:"w-4 h-4 mr-2"}),"ë‹¤ìš´ë¡œë“œ"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-gray-50 rounded-lg",children:[e.jsx(V,{id:"send-email",checked:C,onCheckedChange:i=>S(!!i)}),e.jsx("label",{htmlFor:"send-email",className:"text-sm font-medium cursor-pointer",children:"ë°œì£¼ì„œ ìƒì„± í›„ ì´ë©”ì¼ ìë™ ë°œì†¡"})]}),s&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(L,{className:"w-4 h-4 animate-spin"}),"ì²˜ë¦¬ ì¤‘..."]}),e.jsx(f,{variant:"default",onClick:m,disabled:!h||d.order==="processing",className:M("min-w-[160px]",h?C?"bg-blue-600 hover:bg-blue-700":"bg-green-600 hover:bg-green-700":""),children:d.order==="processing"?e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"w-4 h-4 mr-2 animate-spin"}),C?"ìƒì„± ë° ë°œì†¡ ì¤‘...":"ìƒì„± ì¤‘..."]}):e.jsx(e.Fragment,{children:C?e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"ë°œì£¼ì„œ ìƒì„±"]}):e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"ë°œì£¼ì„œ ìƒì„±"]})})}),!C&&e.jsx(f,{onClick:P,disabled:!c||d.email==="processing",className:M("min-w-[120px]",c?"bg-blue-600 hover:bg-blue-700":""),children:d.email==="processing"?e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"w-4 h-4 mr-2 animate-spin"}),"ë°œì†¡ ì¤‘..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ze,{className:"w-4 h-4 mr-2"}),"ì´ë©”ì¼ ë°œì†¡"]})})]})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-6 text-xs text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:M("w-2 h-2 rounded-full",d.pdf==="completed"?"bg-green-500":d.pdf==="processing"?"bg-blue-500 animate-pulse":d.pdf==="error"?"bg-red-500":"bg-gray-300")}),"PDF ìƒì„±"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:M("w-2 h-2 rounded-full",d.vendor==="completed"?"bg-green-500":d.vendor==="processing"?"bg-blue-500 animate-pulse":d.vendor==="error"?"bg-red-500":"bg-gray-300")}),"ê±°ë˜ì²˜ í™•ì¸"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:M("w-2 h-2 rounded-full",d.order==="completed"?"bg-green-500":d.order==="processing"?"bg-blue-500 animate-pulse":d.order==="error"?"bg-red-500":"bg-gray-300")}),"ë°œì£¼ì„œ ìƒì„±"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:M("w-2 h-2 rounded-full",d.email==="completed"?"bg-green-500":d.email==="processing"?"bg-blue-500 animate-pulse":d.email==="error"?"bg-red-500":"bg-gray-300")}),"ì´ë©”ì¼ ì¤€ë¹„"]})]})]}),e.jsx(ke,{open:D,onOpenChange:b,children:e.jsxs(Ae,{className:"sm:max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Te,{children:e.jsx(Oe,{children:"ì´ë©”ì¼ ë°œì†¡ ì„¤ì •"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(N,{className:"text-sm font-medium",children:"ë°›ëŠ” ì‚¬ëŒ *"}),e.jsxs("div",{className:"mt-2 space-y-2",children:[l.to.map((i,g)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-md",children:[e.jsx("span",{className:"flex-1 text-sm",children:i}),e.jsx(f,{type:"button",variant:"ghost",size:"sm",onClick:()=>$(i),className:"h-6 w-6 p-0 hover:bg-red-100",children:e.jsx(_,{className:"h-3 w-3"})})]},g)),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(A,{value:x,onChange:i=>v(i.target.value),placeholder:"example@company.com",onKeyPress:i=>i.key==="Enter"&&O(),className:"flex-1"}),e.jsx(f,{type:"button",variant:"outline",size:"sm",onClick:O,disabled:!x.trim(),children:e.jsx(K,{className:"h-4 w-4"})})]})]})]}),e.jsxs("div",{children:[e.jsx(N,{className:"text-sm font-medium",children:"ì°¸ì¡° (CC)"}),e.jsxs("div",{className:"mt-2 space-y-2",children:[l.cc.map((i,g)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-md",children:[e.jsx("span",{className:"flex-1 text-sm",children:i}),e.jsx(f,{type:"button",variant:"ghost",size:"sm",onClick:()=>R(i),className:"h-6 w-6 p-0 hover:bg-red-100",children:e.jsx(_,{className:"h-3 w-3"})})]},g)),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(A,{value:F,onChange:i=>T(i.target.value),placeholder:"manager@company.com (ì„ íƒì‚¬í•­)",onKeyPress:i=>i.key==="Enter"&&I(),className:"flex-1"}),e.jsx(f,{type:"button",variant:"outline",size:"sm",onClick:I,disabled:!F.trim(),children:e.jsx(K,{className:"h-4 w-4"})})]})]})]}),e.jsxs("div",{children:[e.jsx(N,{htmlFor:"email-subject",className:"text-sm font-medium",children:"ì œëª© *"}),e.jsx(A,{id:"email-subject",value:l.subject,onChange:i=>n(g=>({...g,subject:i.target.value})),className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(N,{htmlFor:"email-message",className:"text-sm font-medium",children:"ë©”ì‹œì§€"}),e.jsx(te,{id:"email-message",value:l.message,onChange:i=>n(g=>({...g,message:i.target.value})),rows:4,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(N,{className:"text-sm font-medium",children:"ì²¨ë¶€íŒŒì¼"}),e.jsxs("div",{className:"mt-2 space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(V,{id:"include-excel",checked:l.attachments.includeExcel,onCheckedChange:i=>n(g=>({...g,attachments:{...g.attachments,includeExcel:!!i}}))}),e.jsx(N,{htmlFor:"include-excel",className:"text-sm",children:"Excel íŒŒì¼ ì²¨ë¶€"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(V,{id:"include-pdf",checked:l.attachments.includePdf,onCheckedChange:i=>n(g=>({...g,attachments:{...g.attachments,includePdf:!!i}}))}),e.jsx(N,{htmlFor:"include-pdf",className:"text-sm",children:"PDF íŒŒì¼ ì²¨ë¶€"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(N,{className:"text-sm",children:"ì¶”ê°€ íŒŒì¼"}),e.jsxs(f,{type:"button",variant:"outline",size:"sm",onClick:()=>document.getElementById("additional-files")?.click(),className:"h-8",children:[e.jsx(X,{className:"h-3 w-3 mr-1"}),"íŒŒì¼ ì„ íƒ"]})]}),e.jsx("input",{id:"additional-files",type:"file",multiple:!0,onChange:p,className:"hidden"}),l.attachments.additionalFiles.length>0&&e.jsx("div",{className:"space-y-1",children:l.attachments.additionalFiles.map((i,g)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-md",children:[e.jsx(X,{className:"h-3 w-3 text-gray-400"}),e.jsx("span",{className:"flex-1 text-sm",children:i.name}),e.jsxs("span",{className:"text-xs text-gray-500",children:[(i.size/1024).toFixed(1)," KB"]}),e.jsx(f,{type:"button",variant:"ghost",size:"sm",onClick:()=>r(g),className:"h-6 w-6 p-0 hover:bg-red-100",children:e.jsx(_,{className:"h-3 w-3"})})]},g))})]})]})]}),e.jsx("div",{className:"text-xs text-gray-500 bg-blue-50 p-2 rounded",children:"ğŸ“ ì„ íƒí•œ ì²¨ë¶€íŒŒì¼ì´ ì´ë©”ì¼ê³¼ í•¨ê»˜ ë°œì†¡ë©ë‹ˆë‹¤."})]}),e.jsxs(Ie,{className:"mt-6",children:[e.jsx(f,{variant:"outline",onClick:()=>b(!1),children:"ì·¨ì†Œ"}),e.jsxs(f,{onClick:o,disabled:l.to.length===0||!l.subject,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"ë°œì£¼ì„œ ìƒì„±"]})]})]})})]})},Je=({orderData:t,onSuggestionApply:y})=>{const[d,a]=u.useState([]),[P,E]=u.useState(new Set),[j,w]=u.useState(!1);u.useEffect(()=>{C()},[t]);const C=()=>{w(!0);const n=[];if(t.vendorName&&!t.vendorEmail&&n.push({id:"vendor-email",type:"autofill",title:"ê±°ë˜ì²˜ ì´ë©”ì¼ ìë™ ì™„ì„±",description:"ë“±ë¡ëœ ê±°ë˜ì²˜ ì •ë³´ì—ì„œ ì´ë©”ì¼ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",action:{label:"ì´ë©”ì¼ ìë™ ì…ë ¥",data:{vendorEmail:"vendor@example.com"}},priority:"high"}),t.deliveryDate){const x=new Date(t.deliveryDate),v=new Date,F=Math.ceil((x.getTime()-v.getTime())/(1e3*60*60*24));F<3&&n.push({id:"delivery-urgent",type:"warning",title:"ê¸´ê¸‰ ë‚©ê¸°",description:`ë‚©ê¸°ì¼ì´ ${F}ì¼ ë‚¨ì•˜ìŠµë‹ˆë‹¤. ê¸´ê¸‰ ì²˜ë¦¬ê°€ í•„ìš”í•©ë‹ˆë‹¤.`,priority:"high"})}t.projectName&&!t.notes&&n.push({id:"project-defaults",type:"recommendation",title:"í”„ë¡œì íŠ¸ ê¸°ë³¸ ì„¤ì •",description:"ì´ì „ ë°œì£¼ì„œë¥¼ ì°¸ê³ í•˜ì—¬ ìì£¼ ì‚¬ìš©í•˜ëŠ” ì„¤ì •ì„ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",action:{label:"ê¸°ë³¸ê°’ ì ìš©",data:{notes:"ìƒì°¨ í›„ ì—°ë½ ìš”ë§",deliveryLocation:"í˜„ì¥ ì§ë‚©"}},priority:"medium"}),t.totalAmount>1e7&&n.push({id:"amount-check",type:"info",title:"ê³ ì•¡ ë°œì£¼ì„œ",description:"1ì²œë§Œì› ì´ìƒì˜ ë°œì£¼ì„œì…ë‹ˆë‹¤. ê²°ì¬ ìŠ¹ì¸ì´ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",priority:"medium"}),t.vendorName&&t.vendorName.length>2&&["(ì£¼)ABCê±´ì„¤","(ì£¼)ABCì¢…í•©ê±´ì„¤"].length>0&&n.push({id:"similar-vendors",type:"recommendation",title:"ìœ ì‚¬ ê±°ë˜ì²˜ ë°œê²¬",description:`'${t.vendorName}'ì™€ ìœ ì‚¬í•œ ê±°ë˜ì²˜ê°€ ìˆìŠµë‹ˆë‹¤. í™•ì¸í•´ë³´ì„¸ìš”.`,priority:"low"}),a(n.filter(x=>!P.has(x.id))),w(!1)},S=n=>{n.action&&(y(n.action.data),D(n.id))},D=n=>{E(x=>new Set(x).add(n)),a(x=>x.filter(v=>v.id!==n))},b=n=>{switch(n){case"warning":return e.jsx(Me,{className:"w-5 h-5 text-yellow-600"});case"info":return e.jsx(Z,{className:"w-5 h-5 text-blue-600"});case"recommendation":return e.jsx(Re,{className:"w-5 h-5 text-green-600"});case"autofill":return e.jsx(Ne,{className:"w-5 h-5 text-purple-600"});default:return e.jsx(Z,{className:"w-5 h-5 text-gray-600"})}},l=n=>{switch(n){case"warning":return"bg-yellow-50 border-yellow-200";case"info":return"bg-blue-50 border-blue-200";case"recommendation":return"bg-green-50 border-green-200";case"autofill":return"bg-purple-50 border-purple-200";default:return"bg-gray-50 border-gray-200"}};return d.length===0&&!j?null:e.jsxs(q,{children:[e.jsx(fe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(ve,{className:"text-lg flex items-center gap-2",children:[e.jsx(Ne,{className:"w-5 h-5 text-yellow-500"}),"ìŠ¤ë§ˆíŠ¸ ì–´ì‹œìŠ¤íŠ¸"]}),j&&e.jsx(be,{className:"w-4 h-4 text-gray-500 animate-spin"})]})}),e.jsxs(B,{className:"space-y-3",children:[d.sort((n,x)=>{const v={high:0,medium:1,low:2};return v[n.priority]-v[x.priority]}).map(n=>e.jsx(Y,{className:`${l(n.type)} border`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[b(n.type),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:"font-medium text-sm",children:n.title}),n.priority==="high"&&e.jsx(z,{variant:"destructive",className:"text-xs",children:"ì¤‘ìš”"})]}),e.jsx(ee,{className:"text-xs",children:n.description}),n.action&&e.jsxs(f,{size:"sm",variant:"outline",className:"mt-2",onClick:()=>S(n),children:[n.action.label,e.jsx(Le,{className:"w-3 h-3 ml-1"})]})]}),e.jsx(f,{size:"sm",variant:"ghost",className:"text-gray-400 hover:text-gray-600 h-6 w-6 p-0",onClick:()=>D(n.id),children:"Ã—"})]})},n.id)),d.length===0&&!j&&e.jsxs("div",{className:"text-center py-4 text-sm text-gray-500",children:[e.jsx(J,{className:"w-8 h-8 text-green-500 mx-auto mb-2"}),"ëª¨ë“  í•­ëª©ì´ ì˜¬ë°”ë¥´ê²Œ ì…ë ¥ë˜ì—ˆìŠµë‹ˆë‹¤"]})]})]})},bs=()=>{const{toast:t}=Fe(),[y,d]=u.useState(null),[a,P]=u.useState({}),[E,j]=u.useState({pdf:"idle",vendor:"idle",email:"idle",order:"idle"}),[w,C]=u.useState(null),[S,D]=u.useState(!1),[b,l]=u.useState(!1);u.useEffect(()=>{if(b&&a.orderNumber){const r=setTimeout(()=>{n()},2e3);return()=>clearTimeout(r)}},[a,b]),u.useEffect(()=>{if(a.orderNumber&&a.vendorName&&a.projectName&&a.items?.length>0){const r=setTimeout(()=>{x()},500);return()=>clearTimeout(r)}},[a.orderNumber,a.vendorName,a.projectName,a.items]);const n=async()=>{D(!0);try{localStorage.setItem("draftOrder",JSON.stringify(a)),l(!1)}catch(r){console.error("Auto-save failed:",r)}finally{D(!1)}},x=async()=>{if(a.orderNumber){console.log("ğŸ”µ PDF ìƒì„± ì‹œì‘:",a),j(r=>({...r,pdf:"processing"}));try{const r=a.totalAmount||(a.items||[]).reduce((s,m)=>s+(m.quantity||0)*(m.unitPrice||0),0),c={...a,totalAmount:r};console.log("ğŸ”µ PDF ìƒì„± ìš”ì²­ ë°ì´í„°:",c);const h=await fetch("/api/orders/generate-pdf",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderData:c})});if(h.ok){const s=await h.json();console.log("ğŸ”µ PDF ìƒì„± ì‘ë‹µ:",s);const m=s.pdfUrl.startsWith("http")?s.pdfUrl:`${window.location.origin}${s.pdfUrl}`;console.log("ğŸ”µ PDF URL:",m),C(m),j(o=>({...o,pdf:"completed"})),fetch(m,{method:"HEAD"}).then(o=>{console.log("ğŸ”µ PDF ì ‘ê·¼ì„± í…ŒìŠ¤íŠ¸:",o.status,o.headers.get("content-type"))}).catch(o=>{console.error("ğŸ”´ PDF ì ‘ê·¼ ì‹¤íŒ¨:",o)})}else{const s=await h.text();throw console.error("ğŸ”´ PDF ìƒì„± ì‹¤íŒ¨ ì‘ë‹µ:",h.status,s),new Error(`PDF ìƒì„± ì‹¤íŒ¨: ${h.status}`)}}catch(r){j(c=>({...c,pdf:"error"})),console.error("ğŸ”´ PDF generation error:",r)}}},v=r=>{d(r);const c=localStorage.getItem("draftOrder");if(c){const h=JSON.parse(c);window.confirm("ì €ì¥ëœ ì„ì‹œ ì‘ì—…ì´ ìˆìŠµë‹ˆë‹¤. ë¶ˆëŸ¬ì˜¤ì‹œê² ìŠµë‹ˆê¹Œ?")&&P(h)}},F=r=>{P(c=>({...c,...r})),l(!0),r.vendorName&&r.vendorName!==a.vendorName&&O(r.vendorName)},T=r=>{P(c=>({...c,processedExcelUrl:r.url,originalFileName:r.name}))},O=async r=>{j(c=>({...c,vendor:"processing"}));try{const c=await fetch("/api/vendors/validate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({vendorName:r})});if(c.ok){const h=await c.json();h.isValid?(j(s=>({...s,vendor:"completed"})),h.vendorEmail&&P(s=>({...s,vendorEmail:h.vendorEmail}))):j(s=>({...s,vendor:"error"}))}}catch{j(h=>({...h,vendor:"error"}))}},$=async()=>{if(!a.orderNumber||!a.vendorName||!a.projectName||!a.items?.length){t({title:"ìƒì„± ë¶ˆê°€",description:"í•„ìˆ˜ ì •ë³´ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.",variant:"destructive"});return}j(r=>({...r,order:"processing"}));try{const r=await fetch("/api/auth/user");if(console.log("ğŸ” ì¸ì¦ ìƒíƒœ í™•ì¸:",r.status),!r.ok){console.error("ğŸ”´ ì¸ì¦ ì‹¤íŒ¨ - ë¡œê·¸ì¸ í•„ìš”"),t({title:"ì¸ì¦ í•„ìš”",description:"ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤. ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.",variant:"destructive"}),setTimeout(()=>{window.location.href="/login"},2e3);return}const c=await r.json();console.log("ğŸ” í˜„ì¬ ì‚¬ìš©ì:",c)}catch(r){console.error("ğŸ”´ ì¸ì¦ í™•ì¸ ì‹¤íŒ¨:",r)}try{console.log("ğŸŸ¢ ë°œì£¼ì„œ ìƒì„± ì‹œì‘:",a);const r=new FormData;r.append("projectId","1"),r.append("vendorId","1"),r.append("deliveryDate",a.deliveryDate||new Date().toISOString()),r.append("notes",a.notes||`ë°œì£¼ì„œ ì‘ì„±ìœ¼ë¡œ ìƒì„±ëœ ë°œì£¼ì„œ - ${a.orderNumber}`);const c=(a.items||[]).map(s=>({itemName:s.name||s.itemName||"",quantity:parseFloat(s.quantity||"0"),unitPrice:parseFloat(s.unitPrice||"0"),unit:s.unit||"EA",totalAmount:parseFloat(s.quantity||"0")*parseFloat(s.unitPrice||"0")}));r.append("items",JSON.stringify(c)),console.log("ğŸŸ¢ ë°œì£¼ì„œ ìƒì„± ìš”ì²­ ë°ì´í„°:",{projectId:"1",vendorId:"1",deliveryDate:a.deliveryDate||new Date().toISOString(),notes:a.notes||`ë°œì£¼ì„œ ì‘ì„±ìœ¼ë¡œ ìƒì„±ëœ ë°œì£¼ì„œ - ${a.orderNumber}`,items:c});const h=await fetch("/api/orders",{method:"POST",body:r});if(console.log("ğŸŸ¢ ë°œì£¼ì„œ ìƒì„± ì‘ë‹µ ìƒíƒœ:",h.status),h.ok){const s=await h.json();console.log("ğŸŸ¢ ìƒì„±ëœ ë°œì£¼ì„œ:",s),j(m=>({...m,order:"completed"})),t({title:"ìƒì„± ì™„ë£Œ",description:`ë°œì£¼ì„œê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤. (${s.orderNumber||a.orderNumber})`}),localStorage.removeItem("draftOrder"),setTimeout(()=>{window.location.href="/orders"},3e3)}else{const s=await h.text();console.error("ğŸ”´ ë°œì£¼ì„œ ìƒì„± ì‹¤íŒ¨ ì‘ë‹µ:",h.status,s);let m="ë°œì£¼ì„œ ìƒì„± ì‹¤íŒ¨";try{m=JSON.parse(s).message||m}catch{m=`HTTP ${h.status}: ${s}`}throw new Error(m)}}catch(r){j(c=>({...c,order:"error"})),t({title:"ìƒì„± ì‹¤íŒ¨",description:r instanceof Error?r.message:"ë°œì£¼ì„œ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",variant:"destructive"})}},I=async r=>{if(console.log("ğŸ“§ ë°œì£¼ì„œ ìƒì„± ë° ì´ë©”ì¼ ë°œì†¡ ì‹œì‘:",{orderData:a,emailSettings:r}),!a.orderNumber||!a.vendorName||!a.projectName||!a.items?.length){t({title:"ìƒì„± ë¶ˆê°€",description:"í•„ìˆ˜ ì •ë³´ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.",variant:"destructive"});return}j(c=>({...c,order:"processing",email:"processing"}));try{console.log("ğŸŸ¢ Step 1: ë°œì£¼ì„œ ìƒì„±");const c=new FormData;c.append("projectId","1"),c.append("vendorId","1"),c.append("deliveryDate",a.deliveryDate||new Date().toISOString()),c.append("notes",a.notes||`ë°œì£¼ì„œ ì‘ì„±ìœ¼ë¡œ ìƒì„±ëœ ë°œì£¼ì„œ - ${a.orderNumber}`);const h=(a.items||[]).map(o=>({itemName:o.name||o.itemName||"",quantity:parseFloat(o.quantity||"0"),unitPrice:parseFloat(o.unitPrice||"0"),unit:o.unit||"EA",totalAmount:parseFloat(o.quantity||"0")*parseFloat(o.unitPrice||"0")}));c.append("items",JSON.stringify(h));const s=await fetch("/api/orders",{method:"POST",body:c});if(!s.ok)throw new Error("ë°œì£¼ì„œ ìƒì„± ì‹¤íŒ¨");const m=await s.json();if(console.log("ğŸŸ¢ ë°œì£¼ì„œ ìƒì„± ì™„ë£Œ:",m),j(o=>({...o,order:"completed"})),console.log("ğŸ“§ Step 2: ì´ë©”ì¼ ë°œì†¡"),a.processedExcelUrl)try{if((await fetch("/api/orders/send-email-with-excel",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({emailSettings:{to:r.to,cc:r.cc||"",subject:r.subject,message:r.message,orderNumber:a.orderNumber,vendorName:a.vendorName,totalAmount:a.totalAmount},excelFilePath:a.processedExcelUrl,orderData:a})})).ok)console.log("ğŸ“§ ì´ë©”ì¼ ë°œì†¡ ì„±ê³µ"),j(i=>({...i,email:"completed"})),t({title:"ìƒì„± ë° ë°œì†¡ ì™„ë£Œ",description:`ë°œì£¼ì„œê°€ ìƒì„±ë˜ê³  ì´ë©”ì¼ì´ ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤. (${m.orderNumber||a.orderNumber})`});else throw new Error("ì´ë©”ì¼ ë°œì†¡ ì‹¤íŒ¨")}catch(o){console.error("ğŸ“§ ì´ë©”ì¼ ë°œì†¡ ì‹¤íŒ¨:",o),j(i=>({...i,email:"error"})),t({title:"ë¶€ë¶„ ì™„ë£Œ",description:"ë°œì£¼ì„œëŠ” ìƒì„±ë˜ì—ˆìœ¼ë‚˜ ì´ë©”ì¼ ë°œì†¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",variant:"destructive"})}else try{if((await fetch("/api/orders/send-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderData:{...a,vendorEmail:r.to},pdfUrl:w,recipients:[r.to],emailSettings:{subject:r.subject,message:r.message,cc:r.cc}})})).ok)console.log("ğŸ“§ PDF ì´ë©”ì¼ ë°œì†¡ ì„±ê³µ"),j(i=>({...i,email:"completed"})),t({title:"ìƒì„± ë° ë°œì†¡ ì™„ë£Œ",description:"ë°œì£¼ì„œê°€ ìƒì„±ë˜ê³  PDF ì´ë©”ì¼ì´ ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤."});else throw new Error("PDF ì´ë©”ì¼ ë°œì†¡ ì‹¤íŒ¨")}catch(o){console.error("ğŸ“§ PDF ì´ë©”ì¼ ë°œì†¡ ì‹¤íŒ¨:",o),j(i=>({...i,email:"error"})),t({title:"ë¶€ë¶„ ì™„ë£Œ",description:"ë°œì£¼ì„œëŠ” ìƒì„±ë˜ì—ˆìœ¼ë‚˜ ì´ë©”ì¼ ë°œì†¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",variant:"destructive"})}localStorage.removeItem("draftOrder"),setTimeout(()=>{window.location.href="/orders"},3e3)}catch(c){console.error("ğŸ”´ ë°œì£¼ì„œ ìƒì„± ë° ì´ë©”ì¼ ë°œì†¡ ì‹¤íŒ¨:",c),j(h=>({...h,order:"error",email:"error"})),t({title:"ì‹¤íŒ¨",description:c instanceof Error?c.message:"ë°œì£¼ì„œ ìƒì„± ë° ì´ë©”ì¼ ë°œì†¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",variant:"destructive"})}},R=async()=>{if(!a.vendorEmail){t({title:"ë°œì†¡ ë¶ˆê°€",description:"ìˆ˜ì‹ ì ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.",variant:"destructive"});return}j(r=>({...r,email:"processing"}));try{if((await fetch("/api/orders/send-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderData:a,pdfUrl:w||null,recipients:[a.vendorEmail]})})).ok)j(c=>({...c,email:"completed"})),t({title:"ë°œì†¡ ì™„ë£Œ",description:"ë°œì£¼ì„œê°€ ì„±ê³µì ìœ¼ë¡œ ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤."}),localStorage.removeItem("draftOrder"),setTimeout(()=>{window.location.href="/orders"},3e3);else throw new Error("ì´ë©”ì¼ ë°œì†¡ ì‹¤íŒ¨")}catch{j(c=>({...c,email:"error"})),t({title:"ë°œì†¡ ì‹¤íŒ¨",description:"ì´ë©”ì¼ ë°œì†¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",variant:"destructive"})}},p=()=>{const r=Object.values(E);return r.filter(h=>h==="completed").length/r.length*100};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-40",children:e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"ë°œì£¼ì„œ ì‘ì„±"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"í•œ í™”ë©´ì—ì„œ ëª¨ë“  ì‘ì—…ì„ ì™„ë£Œí•˜ì„¸ìš”"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[S&&e.jsxs(z,{variant:"secondary",className:"animate-pulse",children:[e.jsx(L,{className:"w-3 h-3 mr-1 animate-spin"}),"ìë™ ì €ì¥ ì¤‘..."]}),!S&&!b&&a.orderNumber&&e.jsxs(z,{variant:"secondary",className:"bg-green-50 text-green-700",children:[e.jsx(J,{className:"w-3 h-3 mr-1"}),"ì €ì¥ë¨"]}),e.jsx(Pe,{value:p(),className:"w-32 h-2"})]})]})})}),e.jsxs("div",{className:"container mx-auto px-6 py-6",children:[!y&&e.jsx("div",{className:"mb-8",children:e.jsxs(Y,{className:"mb-6 max-w-4xl mx-auto",children:[e.jsx(Z,{className:"h-4 w-4"}),e.jsx(ee,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"font-medium",children:"ğŸ“‹ ì‚¬ìš©íŒ"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-blue-600",children:"ì—‘ì…€ íŒŒì¼ ì—…ë¡œë“œ:"})," ëŒ€ëŸ‰ ë°œì£¼ì„œ, ë°˜ë³µ ì—…ë¬´, ìë™í™” ì²˜ë¦¬ì— ì í•© (50ê±´+ ê¶Œì¥)"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-green-600",children:"ì§ì ‘ ì…ë ¥:"})," ì†ŒëŸ‰ ë°œì£¼ì„œ, ì„¸ë°€í•œ ì¡°ì •, ì¦‰ì‹œ ì²˜ë¦¬ì— ì í•© (10ê±´ ì´í•˜ ê¶Œì¥)"]})]}),e.jsx("div",{className:"pt-2 border-t",children:e.jsxs(f,{variant:"outline",size:"sm",className:"text-blue-600 border-blue-200 hover:bg-blue-50",onClick:()=>{const r=document.createElement("a");r.href="/PO_Excel_Template.xlsx",r.download="PO_Excel_Template.xlsx",r.click()},children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"ì—‘ì…€ í…œí”Œë¦¿ ë‹¤ìš´ë¡œë“œ"]})})]})})]})}),!y&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8 max-w-4xl mx-auto",children:[e.jsx(q,{className:"cursor-pointer hover:shadow-lg transition-shadow border-2 hover:border-blue-500",onClick:()=>v("excel"),children:e.jsxs(B,{className:"p-8 text-center",children:[e.jsx(se,{className:"w-16 h-16 mx-auto mb-4 text-blue-600"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"ì—‘ì…€ íŒŒì¼ ì—…ë¡œë“œ"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"ê¸°ì¡´ ì—‘ì…€ íŒŒì¼ì„ ì—…ë¡œë“œí•˜ì—¬ ë¹ ë¥´ê²Œ ì‘ì„±"}),e.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[e.jsx("div",{children:"âœ… ëŒ€ëŸ‰ ì²˜ë¦¬ (50ê±´+)"}),e.jsx("div",{children:"âœ… ìë™í™” ì›Œí¬í”Œë¡œìš°"}),e.jsx("div",{children:"âœ… ê±°ë˜ì²˜ ìë™ ë§¤ì¹­"}),e.jsx("div",{children:"âœ… ì´ë©”ì¼ ìë™ ë°œì†¡"})]})]})}),e.jsx(q,{className:"cursor-pointer hover:shadow-lg transition-shadow border-2 hover:border-green-500",onClick:()=>v("direct"),children:e.jsxs(B,{className:"p-8 text-center",children:[e.jsx(U,{className:"w-16 h-16 mx-auto mb-4 text-green-600"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"ì§ì ‘ ì…ë ¥"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"í¼ì„ í†µí•´ ì§ì ‘ ì •ë³´ ì…ë ¥"}),e.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[e.jsx("div",{children:"âœ… ì†ŒëŸ‰ ì²˜ë¦¬ (10ê±´ ì´í•˜)"}),e.jsx("div",{children:"âœ… ì¦‰ì‹œ ì²˜ë¦¬"}),e.jsx("div",{children:"âœ… ì‹¤ì‹œê°„ ê²€ì¦"}),e.jsx("div",{children:"âœ… ì„¸ë°€í•œ ì¡°ì •"})]})]})})]}),y&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx(q,{children:e.jsxs(B,{className:"p-6",children:[y==="excel"&&e.jsx(Ue,{onDataExtracted:F,onProcessedFileReady:T}),y==="direct"&&e.jsx(qe,{initialData:a,onChange:F})]})}),e.jsx(Je,{orderData:a,onSuggestionApply:F})]}),e.jsx("div",{className:"space-y-6",children:e.jsx(Be,{orderData:a,pdfUrl:w,processingStatus:E})})]}),y&&a.orderNumber&&e.jsx(_e,{orderData:a,pdfUrl:w,processingStatus:E,onSave:n,onSend:R,onCreateOrder:$,onCreateOrderWithEmail:I,onDownload:()=>{w&&window.open(`${w}?download=true`,"_blank")}})]})]})};export{bs as default};
