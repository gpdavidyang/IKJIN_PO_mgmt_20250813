import{j as e,B as re,f as B,u as le,C as q,a as Z,b as V,E as oe,F as Q,c as Te,d as Oe,e as Pe,g as Be,h as De,r as u,i as Re,k as M,P as Ie,l as ee,m as Ke,M as te}from"./index-B6PfVuJG-1757255469111.js";import{g as ze,a as Ue,c as Ye,b as He,d as We,e as _e}from"./orderStatusUtils-BtsdY4LZ-1757255469111.js";import{E as Ve}from"./email-send-dialog-ClRF3u8t-1757255469111.js";import{E as Ge}from"./email-history-modal-C1Mogpgt-1757255469111.js";import{E as Xe}from"./emailService-CufWZrFC-1757255469111.js";import{D as ne,a as ce,b as ie,c as de,d as me}from"./dialog-ZqcOkCty-1757255469111.js";import{T as se}from"./trending-up-DMTs0yTw-1757255469111.js";import{D as xe}from"./download-DQvBtQey-1757255469111.js";import{A as z}from"./activity-Dbju5tqe-1757255469111.js";import{C as qe}from"./calendar-B7PHruvB-1757255469111.js";import{R as D,C as Y,X as H,Y as W,T as R,B as he,a as fe,P as ue,b as pe,c as ge}from"./PieChart-CV0eEzJw-1757255469111.js";import{A as be,a as ye}from"./AreaChart-DZZDXCA--1757255469111.js";import{S as je}from"./send-CiluzqBb-1757255469111.js";import{D as G}from"./dashboard-skeleton-BsvEFVmN-1757255469111.js";import{A as X,a as ae}from"./arrow-up-BjlbKfwj-1757255469111.js";import{D as Qe}from"./dollar-sign-CgweYVuU-1757255469111.js";import{P as K}from"./package-DjicV7Di-1757255469111.js";import{S as Je}from"./square-pen-DyBVWzx8-1757255469111.js";import{H as Ze}from"./history-CR6T8e9z-1757255469111.js";import{U as Me}from"./users-BSJstK-a-1757255469111.js";import{C as et}from"./chevrons-up-down-CQVopgqx-1757255469111.js";import"./textarea-BwoTpdq9-1757255469111.js";import"./checkbox-CXdqNVGq-1757255469111.js";import"./triangle-alert-CHcTWW94-1757255469111.js";import"./refresh-cw-CdIVxnAd-1757255469111.js";import"./format-DjHd4Xxv-1757255469111.js";import"./paperclip-B3KAkFuZ-1757255469111.js";import"./index-S91broQv-1757255469111.js";import"./index-BdynY1co-1757255469111.js";function tt({isOpen:$,onClose:C,monthlyStats:h,isDarkMode:a=!1}){const b={primary:"#3B82F6",primaryLight:"#60A5FA",primaryDark:"#2563EB",secondary:"#93C5FD",accent:"#DBEAFE",gray:"#6B7280",success:"#10B981",warning:"#F59E0B",danger:"#EF4444"},m=h.sort((l,i)=>l.month.localeCompare(i.month)).map(l=>{const[i,y]=l.month.split("-"),g=new Date().getFullYear();return{month:parseInt(i)===g?`${y}월`:`${i.substring(2)}.${y}`,fullMonth:l.month,발주건수:Number(l.count)||0,금액백만원:Math.round(Number(l.amount||l.totalAmount)/1e6)||0,원본금액:Number(l.amount||l.totalAmount)||0}}),A=m.reduce((l,i)=>l+i.발주건수,0),f=m.reduce((l,i)=>l+i.원본금액,0),j=Math.round(A/Math.max(m.length,1));Math.round(f/Math.max(m.length,1));const k=m.reduce((l,i)=>i.발주건수>l.발주건수?i:l,{month:"",발주건수:0,금액백만원:0}),E=()=>{const i=[["월","발주건수","발주금액(원)"],...m.map(o=>[o.fullMonth,o.발주건수,o.원본금액])].map(o=>o.join(",")).join(`
`),y=new Blob([i],{type:"text/csv;charset=utf-8;"}),g=document.createElement("a"),S=URL.createObjectURL(y);g.setAttribute("href",S),g.setAttribute("download",`월별_발주_추이_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(g),g.click(),document.body.removeChild(g)};return e.jsx(ne,{open:$,onOpenChange:C,children:e.jsxs(ce,{className:`max-w-6xl max-h-[90vh] overflow-y-auto ${a?"bg-gray-800 text-white":"bg-white"}`,children:[e.jsx(ie,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(de,{className:"flex items-center gap-2 text-xl",children:[e.jsx(se,{className:"h-6 w-6 text-blue-600"}),"월별 발주 추이 상세 분석"]}),e.jsx(me,{className:a?"text-gray-300":"text-gray-600",children:"과거 12개월간의 발주 현황을 자세히 분석합니다"})]}),e.jsxs(re,{onClick:E,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(xe,{className:"h-4 w-4"}),"데이터 내보내기"]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:`rounded-lg p-4 ${a?"bg-gray-700":"bg-blue-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(z,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-700",children:"총 발주 건수"})]}),e.jsxs("p",{className:`text-2xl font-bold ${a?"text-white":"text-gray-900"}`,children:[A.toLocaleString(),"건"]})]}),e.jsxs("div",{className:`rounded-lg p-4 ${a?"bg-gray-700":"bg-green-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(qe,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-700",children:"총 발주 금액"})]}),e.jsx("p",{className:`text-2xl font-bold ${a?"text-white":"text-gray-900"}`,children:B(f)})]}),e.jsxs("div",{className:`rounded-lg p-4 ${a?"bg-gray-700":"bg-purple-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(se,{className:"h-5 w-5 text-purple-600"}),e.jsx("span",{className:"text-sm font-medium text-purple-700",children:"월 평균 건수"})]}),e.jsxs("p",{className:`text-2xl font-bold ${a?"text-white":"text-gray-900"}`,children:[j.toLocaleString(),"건"]})]}),e.jsxs("div",{className:`rounded-lg p-4 ${a?"bg-gray-700":"bg-orange-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(z,{className:"h-5 w-5 text-orange-600"}),e.jsx("span",{className:"text-sm font-medium text-orange-700",children:"피크 월"})]}),e.jsxs("p",{className:`text-lg font-bold ${a?"text-white":"text-gray-900"}`,children:[k.month," (",k.발주건수,"건)"]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`rounded-lg p-6 ${a?"bg-gray-700":"bg-white border"}`,children:[e.jsx("h3",{className:`text-lg font-semibold mb-4 ${a?"text-white":"text-gray-900"}`,children:"월별 발주 건수 추이"}),e.jsx("div",{className:"h-80",children:e.jsx(D,{width:"100%",height:"100%",children:e.jsxs(be,{data:m,margin:{top:20,right:30,left:20,bottom:50},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorOrderCount",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:b.primary,stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:b.primary,stopOpacity:0})]})}),e.jsx(Y,{strokeDasharray:"3 3",stroke:a?"#374151":"#f0f0f0"}),e.jsx(H,{dataKey:"month",axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:a?"#9CA3AF":"#6B7280"},angle:-45,textAnchor:"end",height:80}),e.jsx(W,{axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:a?"#9CA3AF":"#6B7280"},label:{value:"발주 건수",angle:-90,position:"insideLeft",style:{textAnchor:"middle",fill:a?"#9CA3AF":"#6B7280",fontSize:"12px"}}}),e.jsx(R,{contentStyle:{backgroundColor:a?"#1f2937":"white",border:a?"1px solid #374151":"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},formatter:l=>[`${l}건`,"발주 건수"],labelFormatter:l=>`${l} 발주 현황`}),e.jsx(ye,{type:"monotone",dataKey:"발주건수",stroke:b.primary,fillOpacity:1,fill:"url(#colorOrderCount)",strokeWidth:3,dot:{fill:b.primary,strokeWidth:2,r:4},activeDot:{r:6,stroke:b.primary,strokeWidth:2,fill:"white"}})]})})})]}),e.jsxs("div",{className:`rounded-lg p-6 ${a?"bg-gray-700":"bg-white border"}`,children:[e.jsx("h3",{className:`text-lg font-semibold mb-4 ${a?"text-white":"text-gray-900"}`,children:"월별 발주 금액 추이 (백만원)"}),e.jsx("div",{className:"h-80",children:e.jsx(D,{width:"100%",height:"100%",children:e.jsxs(he,{data:m,margin:{top:20,right:30,left:20,bottom:50},children:[e.jsx(Y,{strokeDasharray:"3 3",stroke:a?"#374151":"#f0f0f0"}),e.jsx(H,{dataKey:"month",axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:a?"#9CA3AF":"#6B7280"},angle:-45,textAnchor:"end",height:80}),e.jsx(W,{axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:a?"#9CA3AF":"#6B7280"},label:{value:"발주 금액 (백만원)",angle:-90,position:"insideLeft",style:{textAnchor:"middle",fill:a?"#9CA3AF":"#6B7280",fontSize:"12px"}}}),e.jsx(R,{contentStyle:{backgroundColor:a?"#1f2937":"white",border:a?"1px solid #374151":"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},formatter:(l,i,y)=>[`${l.toLocaleString()}백만원`,"발주 금액"],labelFormatter:(l,i)=>{if(i&&i[0]){const y=i[0].payload.원본금액;return`${l} (${B(y)})`}return`${l} 발주 금액`}}),e.jsx(fe,{dataKey:"금액백만원",fill:b.success,radius:[4,4,0,0]})]})})})]}),e.jsxs("div",{className:`rounded-lg p-6 ${a?"bg-gray-700":"bg-white border"}`,children:[e.jsx("h3",{className:`text-lg font-semibold mb-4 ${a?"text-white":"text-gray-900"}`,children:"월별 상세 데이터"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:`${a?"bg-gray-600":"bg-gray-50"}`,children:[e.jsx("th",{className:`px-4 py-3 text-left text-sm font-medium ${a?"text-gray-300":"text-gray-700"}`,children:"월"}),e.jsx("th",{className:`px-4 py-3 text-right text-sm font-medium ${a?"text-gray-300":"text-gray-700"}`,children:"발주 건수"}),e.jsx("th",{className:`px-4 py-3 text-right text-sm font-medium ${a?"text-gray-300":"text-gray-700"}`,children:"발주 금액"}),e.jsx("th",{className:`px-4 py-3 text-right text-sm font-medium ${a?"text-gray-300":"text-gray-700"}`,children:"평균 주문액"})]})}),e.jsx("tbody",{children:m.map((l,i)=>e.jsxs("tr",{className:`${i%2===0?a?"bg-gray-700":"bg-white":a?"bg-gray-650":"bg-gray-50"}`,children:[e.jsx("td",{className:`px-4 py-3 text-sm font-medium ${a?"text-white":"text-gray-900"}`,children:l.month}),e.jsxs("td",{className:`px-4 py-3 text-sm text-right ${a?"text-gray-300":"text-gray-600"}`,children:[l.발주건수.toLocaleString(),"건"]}),e.jsx("td",{className:`px-4 py-3 text-sm text-right font-medium ${a?"text-blue-400":"text-blue-600"}`,children:B(l.원본금액)}),e.jsx("td",{className:`px-4 py-3 text-sm text-right ${a?"text-gray-300":"text-gray-600"}`,children:l.발주건수>0?B(Math.round(l.원본금액/l.발주건수)):"-"})]},l.fullMonth))})]})})]})]})]})})}function st({isOpen:$,onClose:C,statusStats:h,isDarkMode:a=!1}){const[,b]=le(),m={primary:"#3B82F6",primaryLight:"#60A5FA",primaryDark:"#2563EB",secondary:"#93C5FD",accent:"#DBEAFE",gray:"#6B7280",success:"#10B981",warning:"#F59E0B",danger:"#EF4444"},A={pending:{label:"승인대기",description:"승인을 기다리는 발주서",color:m.warning,icon:Z,priority:"high"},approved:{label:"승인완료",description:"승인이 완료된 발주서",color:m.success,icon:V,priority:"medium"},sent:{label:"발송완료",description:"거래처로 발송된 발주서",color:m.primary,icon:je,priority:"low"},delivered:{label:"납품완료",description:"납품이 완료된 발주서",color:m.primaryDark,icon:V,priority:"completed"},draft:{label:"임시저장",description:"작성 중인 발주서",color:m.gray,icon:Q,priority:"medium"},cancelled:{label:"취소됨",description:"취소된 발주서",color:m.danger,icon:Te,priority:"low"}},f=h.filter(o=>o&&Number(o.count)>0).map(o=>{const n=A[o.status]||{label:o.status,description:"기타 상태",color:m.gray,icon:z,priority:"medium"};return{status:o.status,name:n.label,description:n.description,value:Number(o.count),color:n.color,icon:n.icon,priority:n.priority,percentage:0}}),j=f.reduce((o,n)=>o+n.value,0);f.forEach(o=>{o.percentage=Math.round(o.value/j*100)});const k={high:0,medium:1,low:2,completed:3},E=[...f].sort((o,n)=>{const F=k[o.priority]??999,p=k[n.priority]??999;return F-p}),l=()=>{const n=[["상태","건수","비율(%)"],...f.map(t=>[t.name,t.value,t.percentage])].map(t=>t.join(",")).join(`
`),F=new Blob([n],{type:"text/csv;charset=utf-8;"}),p=document.createElement("a"),U=URL.createObjectURL(F);p.setAttribute("href",U),p.setAttribute("download",`발주상태_분포_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(p),p.click(),document.body.removeChild(p)},i=o=>{b(`/orders?status=${o}`),C()},y=f.filter(o=>o.priority==="high").reduce((o,n)=>o+n.value,0),g=f.filter(o=>o.priority==="completed").reduce((o,n)=>o+n.value,0),S=j>0?Math.round(g/j*100):0;return e.jsx(ne,{open:$,onOpenChange:C,children:e.jsxs(ce,{className:`max-w-6xl max-h-[90vh] overflow-y-auto ${a?"bg-gray-800 text-white":"bg-white"}`,children:[e.jsx(ie,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(de,{className:"flex items-center gap-2 text-xl",children:[e.jsx(q,{className:"h-6 w-6 text-blue-600"}),"발주 상태 분포 상세 분석"]}),e.jsx(me,{className:a?"text-gray-300":"text-gray-600",children:"현재 시스템의 모든 발주서 상태를 상세히 분석합니다"})]}),e.jsxs(re,{onClick:l,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(xe,{className:"h-4 w-4"}),"데이터 내보내기"]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:`rounded-lg p-4 ${a?"bg-gray-700":"bg-blue-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(z,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-700",children:"전체 발주서"})]}),e.jsxs("p",{className:`text-2xl font-bold ${a?"text-white":"text-gray-900"}`,children:[j.toLocaleString(),"건"]})]}),e.jsxs("div",{className:`rounded-lg p-4 ${a?"bg-gray-700":"bg-orange-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Z,{className:"h-5 w-5 text-orange-600"}),e.jsx("span",{className:"text-sm font-medium text-orange-700",children:"긴급 처리"})]}),e.jsxs("p",{className:`text-2xl font-bold ${a?"text-white":"text-gray-900"}`,children:[y.toLocaleString(),"건"]})]}),e.jsxs("div",{className:`rounded-lg p-4 ${a?"bg-gray-700":"bg-green-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(V,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-700",children:"완료율"})]}),e.jsxs("p",{className:`text-2xl font-bold ${a?"text-white":"text-gray-900"}`,children:[S,"%"]})]}),e.jsxs("div",{className:`rounded-lg p-4 ${a?"bg-gray-700":"bg-purple-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(q,{className:"h-5 w-5 text-purple-600"}),e.jsx("span",{className:"text-sm font-medium text-purple-700",children:"활성 상태"})]}),e.jsxs("p",{className:`text-2xl font-bold ${a?"text-white":"text-gray-900"}`,children:[f.length,"개"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:`rounded-lg p-6 ${a?"bg-gray-700":"bg-white border"}`,children:[e.jsx("h3",{className:`text-lg font-semibold mb-4 ${a?"text-white":"text-gray-900"}`,children:"상태별 비율"}),e.jsx("div",{className:"h-80",children:e.jsx(D,{width:"100%",height:"100%",children:e.jsxs(ue,{children:[e.jsx(pe,{data:f,cx:"50%",cy:"50%",innerRadius:60,outerRadius:120,paddingAngle:2,dataKey:"value",children:f.map((o,n)=>e.jsx(ge,{fill:o.color},`cell-${n}`))}),e.jsx(R,{formatter:(o,n)=>[`${o}건 (${(o/j*100).toFixed(1)}%)`,n],contentStyle:{backgroundColor:a?"#1f2937":"white",border:a?"1px solid #374151":"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"}})]})})})]}),e.jsxs("div",{className:`rounded-lg p-6 ${a?"bg-gray-700":"bg-white border"}`,children:[e.jsx("h3",{className:`text-lg font-semibold mb-4 ${a?"text-white":"text-gray-900"}`,children:"상태별 건수"}),e.jsx("div",{className:"h-80",children:e.jsx(D,{width:"100%",height:"100%",children:e.jsxs(he,{data:E,margin:{top:20,right:30,left:20,bottom:60},children:[e.jsx(Y,{strokeDasharray:"3 3",stroke:a?"#374151":"#f0f0f0"}),e.jsx(H,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fontSize:11,fill:a?"#9CA3AF":"#6B7280"},angle:-45,textAnchor:"end",height:80}),e.jsx(W,{axisLine:!1,tickLine:!1,tick:{fontSize:11,fill:a?"#9CA3AF":"#6B7280"}}),e.jsx(R,{contentStyle:{backgroundColor:a?"#1f2937":"white",border:a?"1px solid #374151":"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},formatter:o=>[`${o}건`,"발주 건수"]}),e.jsx(fe,{dataKey:"value",fill:m.primary,radius:[4,4,0,0]})]})})})]})]}),e.jsxs("div",{className:`rounded-lg p-6 ${a?"bg-gray-700":"bg-white border"}`,children:[e.jsx("h3",{className:`text-lg font-semibold mb-4 ${a?"text-white":"text-gray-900"}`,children:"상태별 상세 정보"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:E.map((o,n)=>{const F=o.icon;return e.jsxs("div",{className:`rounded-lg p-4 border transition-all cursor-pointer hover:shadow-md ${a?"border-gray-600 hover:bg-gray-650":"border-gray-200 hover:bg-gray-50"}`,onClick:()=>i(o.status),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:`${o.color}20`},children:e.jsx(F,{className:"h-5 w-5",style:{color:o.color}})}),e.jsxs("div",{children:[e.jsx("p",{className:`font-semibold ${a?"text-white":"text-gray-900"}`,children:o.name}),e.jsx("p",{className:`text-sm ${a?"text-gray-400":"text-gray-600"}`,children:o.description})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:`text-2xl font-bold ${a?"text-white":"text-gray-900"}`,children:o.value}),e.jsxs("p",{className:`text-sm ${a?"text-gray-400":"text-gray-600"}`,children:[o.percentage,"%"]})]})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[e.jsx(oe,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-sm text-blue-600 hover:underline",children:"해당 발주서 목록 보기"})]})]},o.status)})})]}),f.length===0&&e.jsxs("div",{className:`rounded-lg p-8 text-center ${a?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx(z,{className:`h-12 w-12 mx-auto mb-4 ${a?"text-gray-500":"text-gray-400"}`}),e.jsx("p",{className:`text-lg font-medium mb-2 ${a?"text-white":"text-gray-900"}`,children:"상태 데이터가 없습니다"}),e.jsx("p",{className:`text-sm ${a?"text-gray-400":"text-gray-600"}`,children:"발주서를 생성하면 상태별 분석이 표시됩니다"})]})]})})}function Ot(){const{user:$,isLoading:C}=Oe(),{toast:h}=Pe(),[,a]=le();Be();const{actualTheme:b}=De(),[m,A]=u.useState(!1),[f,j]=u.useState(!1),[k,E]=u.useState(!1),[l,i]=u.useState(null),[y,g]=u.useState(!1),[S,o]=u.useState(null),[n,F]=u.useState(""),[p,U]=u.useState("desc"),t=u.useMemo(()=>b==="dark",[b]);u.useEffect(()=>{if(!C&&!$){h({title:"Unauthorized",description:"You are logged out. Redirecting to login...",variant:"destructive"}),setTimeout(()=>{a("/login")},500);return}},[$,C,a]);const{data:L,isLoading:Ne,error:at}=Re(),T=L?.statistics||{},O=L?.recentOrders||[],_=L?.monthlyStats||[],ve=L?.statusStats||[],J=L?.orderStatusStats||[];L?.projectStats,L?.categoryStats;const we=u.useCallback(s=>{const r=O.find(c=>c.id===s.id);r&&(i(r),E(!0))},[O]),Ce=u.useCallback(async s=>{if(l)try{const r=[];if(s.selectedAttachmentIds&&s.selectedAttachmentIds.length>0)for(const d of s.selectedAttachmentIds){const x=`/api/attachments/${d}/download`;r.push(x)}const c={orderNumber:l.orderNumber,vendorName:l.vendor?.name||"",orderDate:l.orderDate,totalAmount:l.totalAmount,siteName:l.project?.projectName||l.project?.name,filePath:l.filePath||"",attachmentUrls:r};await Xe.sendPurchaseOrderEmail(c,s),h({title:"이메일 발송 완료",description:`${l.vendor?.name}에게 발주서 ${l.orderNumber}를 전송했습니다.`})}catch(r){h({title:"이메일 발송 실패",description:r instanceof Error?r.message:"이메일 발송 중 오류가 발생했습니다.",variant:"destructive"})}},[l,h]),Se=u.useCallback(s=>{const r=O.find(c=>c.id===s.id);r&&(o(r),g(!0))},[O]),$e=u.useCallback(async s=>{try{console.log("🔄 Professional PDF 다운로드 시작:",s.id);const r=await M("GET",`/api/orders/${s.id}`);if(!r){console.error("API returned no data for order:",s.id),h({title:"데이터 오류",description:"발주서 정보를 가져올 수 없습니다.",variant:"destructive"});return}const c=r;let d=null;if(c.attachments&&Array.isArray(c.attachments)&&(d=c.attachments.find(x=>(x.mimeType?.includes("pdf")||x.originalName?.toLowerCase().endsWith(".pdf"))&&(x.originalName?.includes("Professional")||x.filePath?.includes("professional")))),!d){console.log("📄 Professional PDF 파일 없음, 새로 생성 중..."),h({title:"PDF 생성 중",description:"전문적인 발주서 PDF를 생성하고 있습니다..."});try{const x=await M("POST",`/api/orders/${s.id}/generate-professional-pdf`);if(x.success&&x.attachmentId)console.log("✅ Professional PDF 생성 성공:",x),d={id:x.attachmentId};else throw new Error(x.error||"PDF 생성 실패")}catch(x){console.error("❌ Professional PDF 생성 실패:",x),h({title:"PDF 생성 실패",description:"전문적인 PDF 생성에 실패했습니다. 기본 PDF를 시도합니다.",variant:"destructive"}),c.attachments&&Array.isArray(c.attachments)&&(d=c.attachments.find(w=>w.mimeType?.includes("pdf")||w.originalName?.toLowerCase().endsWith(".pdf")))}}if(d){console.log("📥 PDF 다운로드 시작:",d);const x=`/api/attachments/${d.id}/download?download=true`,w=document.createElement("a");w.href=x,w.download=`발주서_${s.orderNumber}.pdf`,w.style.display="none",document.body.appendChild(w),w.click(),document.body.removeChild(w),h({title:"PDF 다운로드",description:`발주서 ${s.orderNumber}의 전문적인 PDF를 다운로드합니다.`})}else console.log("❌ PDF 파일을 찾을 수 없음"),h({title:"PDF 파일이 없습니다",description:"관리자에 의해 삭제되었거나 PDF가 생성이 안 된 발주서입니다.",variant:"destructive"})}catch(r){console.error("PDF download error:",r);const c=r instanceof Error?r.message:"알 수 없는 오류";h({title:"다운로드 실패",description:`PDF 다운로드 중 오류가 발생했습니다: ${c}`,variant:"destructive"})}},[h]),Ae=u.useMemo(()=>n?[...O].sort((s,r)=>{let c=s[n],d=r[n];return n==="vendorName"?(c=s.vendor?.name||"",d=r.vendor?.name||""):n==="projectName"?(c=s.project?.projectName||s.project?.name||"",d=r.project?.projectName||r.project?.name||""):n==="totalAmount"?(c=Number(s.totalAmount)||0,d=Number(r.totalAmount)||0):n==="orderDate"?(c=new Date(s.orderDate||s.createdAt).getTime(),d=new Date(r.orderDate||r.createdAt).getTime()):n==="createdAt"&&(c=new Date(s.createdAt).getTime(),d=new Date(r.createdAt).getTime()),typeof c=="string"&&typeof d=="string"?p==="asc"?c.localeCompare(d):d.localeCompare(c):typeof c=="number"&&typeof d=="number"?p==="asc"?c-d:d-c:0}):O,[O,n,p]);if(C)return e.jsx(G,{});if(!$)return e.jsx(G,{});if(Ne)return e.jsx(G,{});const ke=s=>!s.emailStatus||s.totalEmailsSent===0?e.jsx("span",{className:"text-xs",style:{color:t?"#9ca3af":"#6b7280"},children:"미발송"}):s.emailStatus==="sent"?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(je,{className:"h-3 w-3",style:{color:t?"#60a5fa":"#2563eb"}}),e.jsx("span",{className:"text-xs",style:{color:t?"#60a5fa":"#2563eb"},children:"발송됨"})]}):s.emailStatus==="opened"?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(te,{className:"h-3 w-3",style:{color:t?"#34d399":"#059669"}}),e.jsx("span",{className:"text-xs",style:{color:t?"#34d399":"#059669"},children:"열람됨"})]}):e.jsx("span",{className:"text-xs",style:{color:t?"#9ca3af":"#6b7280"},children:"미발송"}),P={primary:"#3B82F6",primaryLight:"#60A5FA",primaryDark:"#2563EB",secondary:"#93C5FD",accent:"#DBEAFE",gray:"#6B7280",success:"#10B981",warning:"#F59E0B",danger:"#EF4444"},Ee=(Array.isArray(_)?_:[]).sort((s,r)=>s.month.localeCompare(r.month)).map(s=>{const[r,c]=s.month.split("-"),d=new Date().getFullYear();return{month:parseInt(r)===d?`${c}월`:`${r.substring(2)}.${c}`,fullMonth:s.month,발주건수:Number(s.count)||0,금액백만원:Math.round(Number(s.amount||s.totalAmount)/1e6)||0}}),Fe=[{status:"draft",name:"임시저장",color:P.gray},{status:"created",name:"발주생성",color:P.warning},{status:"sent",name:"발주완료",color:P.primary},{status:"completed",name:"납품검수완료",color:P.primaryDark}],Le=new Map((Array.isArray(J)?J:[]).map(s=>[s.status,Number(s.count)||0])),I=Fe.map(s=>({name:s.name,value:Le.get(s.status)||0,color:s.color,status:s.status})),N=s=>{n===s?U(p==="asc"?"desc":"asc"):(F(s),U("desc"))},v=s=>n!==s?e.jsx(et,{className:"h-3 w-3"}):p==="asc"?e.jsx(X,{className:"h-3 w-3"}):e.jsx(ae,{className:"h-3 w-3"});return e.jsx("div",{className:"min-h-screen",style:{backgroundColor:t?"#111827":"#f9fafb"},children:e.jsxs("div",{className:"max-w-[1366px] mx-auto p-6",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",style:{color:t?"#f9fafb":"#1f2937"},children:"대시보드"}),e.jsx("p",{className:"text-sm mt-1",style:{color:t?"#9ca3af":"#6b7280"},children:"실시간 발주 현황을 한눈에 확인하세요"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>a("/create-order"),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors shadow-sm",children:[e.jsx(Ie,{className:"h-5 w-5"}),"새 발주서"]}),e.jsxs("div",{className:"text-sm",style:{color:t?"#9ca3af":"#6b7280"},children:["마지막 업데이트: ",new Date().toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[e.jsx("div",{className:"rounded-xl shadow-sm p-6 hover:shadow-md transition-shadow",style:{backgroundColor:t?"#1f2937":"#ffffff"},children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:t?"#9ca3af":"#4b5563"},children:"총 발주서"}),e.jsx("p",{className:"text-2xl font-bold mt-2",style:{color:t?"#f3f4f6":"#111827"},children:T.totalOrders||0}),e.jsxs("div",{className:"flex items-center mt-2 text-sm",children:[e.jsx(X,{className:"h-4 w-4 text-green-500 mr-1"}),e.jsx("span",{className:"text-green-600",children:"12% 증가"})]})]}),e.jsx("div",{className:"p-3 rounded-lg",style:{backgroundColor:t?"rgba(30, 58, 138, 0.3)":"#dbeafe"},children:e.jsx(Q,{className:"h-6 w-6",style:{color:t?"#60a5fa":"#2563eb"}})})]})}),e.jsx("div",{className:"rounded-xl shadow-sm p-6 hover:shadow-md transition-shadow",style:{backgroundColor:t?"#1f2937":"#ffffff"},children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:t?"#9ca3af":"#4b5563"},children:"총 발주 금액"}),e.jsx("p",{className:"text-2xl font-bold mt-2",style:{color:t?"#60a5fa":"#2563eb"},children:B(T.totalAmount||0)}),e.jsxs("div",{className:"flex items-center mt-2 text-sm",children:[e.jsx(X,{className:"h-4 w-4 text-green-500 mr-1"}),e.jsx("span",{className:"text-green-600",children:"8.5% 증가"})]})]}),e.jsx("div",{className:"p-3 rounded-lg",style:{backgroundColor:t?"rgba(5, 150, 105, 0.3)":"#d1fae5"},children:e.jsx(Qe,{className:"h-6 w-6",style:{color:t?"#34d399":"#059669"}})})]})}),e.jsx("div",{className:"rounded-xl shadow-sm p-6 hover:shadow-md transition-shadow cursor-pointer",style:{backgroundColor:t?"#1f2937":"#ffffff"},onClick:()=>a("/orders?status=completed"),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:t?"#9ca3af":"#4b5563"},children:"금월 발주완료"}),e.jsx("p",{className:"text-2xl font-bold mt-2",style:{color:t?"#34d399":"#059669"},children:T.completedOrders||0}),e.jsxs("div",{className:"flex items-center mt-2 text-sm",children:[e.jsx(K,{className:"h-4 w-4 text-green-500 mr-1"}),e.jsx("span",{className:"text-green-600",children:"처리 완료"})]})]}),e.jsx("div",{className:"p-3 rounded-lg",style:{backgroundColor:t?"rgba(5, 150, 105, 0.3)":"#d1fae5"},children:e.jsx(K,{className:"h-6 w-6",style:{color:t?"#34d399":"#059669"}})})]})}),e.jsx("div",{className:"rounded-xl shadow-sm p-6 hover:shadow-md transition-shadow",style:{backgroundColor:t?"#1f2937":"#ffffff"},children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:t?"#9ca3af":"#4b5563"},children:"활성 현장"}),e.jsx("p",{className:"text-2xl font-bold mt-2",style:{color:t?"#f3f4f6":"#111827"},children:T.activeProjects||0}),e.jsxs("div",{className:"flex items-center mt-2 text-sm",children:[e.jsx(ae,{className:"h-4 w-4 text-gray-400 mr-1"}),e.jsx("span",{style:{color:t?"#9ca3af":"#6b7280"},children:"변동 없음"})]})]}),e.jsx("div",{className:"p-3 rounded-lg",style:{backgroundColor:t?"rgba(107, 33, 168, 0.3)":"#ede9fe"},children:e.jsx(ee,{className:"h-6 w-6",style:{color:t?"#a855f7":"#7c3aed"}})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"rounded-xl shadow-sm p-6",style:{backgroundColor:t?"#1f2937":"#ffffff"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold",style:{color:t?"#f3f4f6":"#111827"},children:"월별 발주 추이"}),e.jsx("button",{onClick:()=>A(!0),className:"text-sm font-medium transition-colors hover:underline",style:{color:t?"#60a5fa":"#2563eb"},onMouseEnter:s=>{s.currentTarget.style.color=t?"#3b82f6":"#1d4ed8"},onMouseLeave:s=>{s.currentTarget.style.color=t?"#60a5fa":"#2563eb"},children:"전체 보기"})]}),e.jsx("div",{className:"h-64",children:e.jsx(D,{width:"100%",height:"100%",children:e.jsxs(be,{data:Ee,margin:{top:10,right:30,left:20,bottom:30},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorAmount",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:P.primary,stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:P.primary,stopOpacity:0})]})}),e.jsx(Y,{strokeDasharray:"3 3",stroke:t?"#374151":"#f0f0f0"}),e.jsx(H,{dataKey:"month",axisLine:!1,tickLine:!1,tick:{fontSize:11,fill:t?"#9CA3AF":"#6B7280"},interval:0,angle:-45,textAnchor:"end",height:60}),e.jsx(W,{axisLine:!1,tickLine:!1,tick:{fontSize:11,fill:t?"#9CA3AF":"#6B7280"},label:{value:"발주 건수",angle:-90,position:"insideLeft",style:{textAnchor:"middle",fill:t?"#9CA3AF":"#6B7280",fontSize:"12px"}}}),e.jsx(R,{contentStyle:{backgroundColor:t?"#1f2937":"white",border:t?"1px solid #374151":"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",color:t?"#f9fafb":"#1f2937"},formatter:(s,r)=>[`${s}건`,"발주 건수"],labelFormatter:s=>`${s} 발주 현황`}),e.jsx(ye,{type:"monotone",dataKey:"발주건수",stroke:P.primary,fillOpacity:1,fill:"url(#colorAmount)",strokeWidth:2})]})})})]}),e.jsxs("div",{className:"rounded-xl shadow-sm p-6",style:{backgroundColor:t?"#1f2937":"#ffffff"},children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-5 w-5",style:{color:t?"#60a5fa":"#2563eb"}}),e.jsx("h3",{className:"text-lg font-semibold",style:{color:t?"#f3f4f6":"#111827"},children:"발주 상태 분포"})]})}),I&&I.length>0?e.jsxs("div",{className:"h-64 flex items-center",children:[e.jsx("div",{className:"w-1/2 h-full",children:e.jsx(D,{width:"100%",height:"100%",children:e.jsxs(ue,{width:200,height:200,children:[e.jsx(pe,{data:I,cx:"50%",cy:"50%",innerRadius:50,outerRadius:90,paddingAngle:2,dataKey:"value",children:I.map((s,r)=>e.jsx(ge,{fill:s.color},`cell-${r}`))}),e.jsx(R,{formatter:(s,r)=>[`${s}건`,r],contentStyle:{backgroundColor:t?"#1f2937":"white",border:t?"1px solid #374151":"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",color:t?"#f9fafb":"#1f2937"}})]})})}),e.jsx("div",{className:"w-1/2 pl-6",children:I.map((s,r)=>e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:s.color}}),e.jsx("span",{className:"text-sm font-medium",style:{color:t?"#d1d5db":"#374151"},children:s.name})]}),e.jsxs("span",{className:"text-sm font-semibold",style:{color:t?"#f3f4f6":"#111827"},children:[s.value,"건"]})]},r))})]}):e.jsx("div",{className:"h-64 flex items-center justify-center",style:{color:t?"#9ca3af":"#6b7280"},children:e.jsxs("div",{className:"text-center",children:[e.jsx(K,{className:"h-12 w-12 mx-auto mb-2",style:{color:t?"#4b5563":"#d1d5db"}}),e.jsx("p",{className:"text-sm",children:"발주 상태별 데이터가 없습니다."}),e.jsx("p",{className:"text-xs mt-1",style:{color:t?"#6b7280":"#9ca3af"},children:"발주서를 생성하면 차트가 표시됩니다."})]})})]})]}),e.jsxs("div",{className:"rounded-xl shadow-sm",style:{backgroundColor:t?"#1f2937":"#ffffff"},children:[e.jsx("div",{className:"p-6 border-b",style:{borderColor:t?"#374151":"#e5e7eb"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",style:{color:t?"#f3f4f6":"#111827"},children:"최근 발주 내역"}),e.jsxs("button",{onClick:()=>a("/orders"),className:"text-sm font-medium flex items-center gap-1 transition-colors",style:{color:t?"#60a5fa":"#2563eb"},onMouseEnter:s=>{s.currentTarget.style.color=t?"#3b82f6":"#1d4ed8"},onMouseLeave:s=>{s.currentTarget.style.color=t?"#60a5fa":"#2563eb"},children:["전체 보기",e.jsx(Ke,{className:"h-4 w-4"})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{style:{backgroundColor:t?"#374151":"#f9fafb"},children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:t?"#9ca3af":"#6b7280"},children:e.jsxs("button",{onClick:()=>N("orderNumber"),className:`flex items-center gap-1 transition-colors ${t?"hover:text-gray-300":"hover:text-gray-700"}`,children:["발주번호",v("orderNumber")]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:t?"#9ca3af":"#6b7280"},children:e.jsxs("button",{onClick:()=>N("vendorName"),className:`flex items-center gap-1 transition-colors ${t?"hover:text-gray-300":"hover:text-gray-700"}`,children:["거래처",v("vendorName")]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:t?"#9ca3af":"#6b7280"},children:e.jsxs("button",{onClick:()=>N("projectName"),className:`flex items-center gap-1 transition-colors ${t?"hover:text-gray-300":"hover:text-gray-700"}`,children:["현장",v("projectName")]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:t?"#9ca3af":"#6b7280"},children:e.jsxs("button",{onClick:()=>N("orderDate"),className:`flex items-center gap-1 transition-colors ${t?"hover:text-gray-300":"hover:text-gray-700"}`,children:["발주일",v("orderDate")]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:t?"#9ca3af":"#6b7280"},children:e.jsxs("button",{onClick:()=>N("createdAt"),className:`flex items-center gap-1 transition-colors ${t?"hover:text-gray-300":"hover:text-gray-700"}`,children:["등록일",v("createdAt")]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:t?"#9ca3af":"#6b7280"},children:e.jsxs("button",{onClick:()=>N("totalAmount"),className:`flex items-center gap-1 transition-colors ${t?"hover:text-gray-300":"hover:text-gray-700"}`,children:["금액",v("totalAmount")]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:t?"#9ca3af":"#6b7280"},children:e.jsxs("button",{onClick:()=>N("orderStatus"),className:`flex items-center gap-1 transition-colors ${t?"hover:text-gray-300":"hover:text-gray-700"}`,children:["발주상태",v("orderStatus")]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:t?"#9ca3af":"#6b7280"},children:e.jsxs("button",{onClick:()=>N("emailStatus"),className:`flex items-center gap-1 transition-colors ${t?"hover:text-gray-300":"hover:text-gray-700"}`,children:["이메일",v("emailStatus")]})}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium uppercase tracking-wider",style:{color:t?"#9ca3af":"#6b7280"},children:e.jsxs("button",{onClick:()=>N("actions"),className:`flex items-center gap-1 transition-colors justify-center ${t?"hover:text-gray-300":"hover:text-gray-700"}`,children:["액션",v("actions")]})})]})}),e.jsx("tbody",{style:{backgroundColor:t?"#1f2937":"#ffffff"},children:Ae.slice(0,5).map(s=>e.jsxs("tr",{className:"transition-colors",style:{backgroundColor:"transparent",borderBottom:`1px solid ${t?"#374151":"#e5e7eb"}`},onMouseEnter:r=>{r.currentTarget.style.backgroundColor=t?"#374151":"#f9fafb"},onMouseLeave:r=>{r.currentTarget.style.backgroundColor="transparent"},children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx("button",{onClick:()=>a(`/orders/${s.id}`),className:"transition-colors hover:underline",style:{color:t?"#60a5fa":"#2563eb"},onMouseEnter:r=>{r.currentTarget.style.color=t?"#3b82f6":"#1d4ed8"},onMouseLeave:r=>{r.currentTarget.style.color=t?"#60a5fa":"#2563eb"},children:s.orderNumber})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.vendor?.id?e.jsx("button",{onClick:()=>a(`/vendors/${s.vendor.id}`),className:"text-sm font-medium transition-colors hover:underline",style:{color:t?"#60a5fa":"#2563eb"},title:"거래처 상세 정보 보기",children:s.vendor.name}):e.jsx("div",{className:"text-sm",style:{color:t?"#f3f4f6":"#111827"},children:s.vendor?.name||"-"}),s.vendor?.email&&e.jsx("div",{className:"text-xs",style:{color:t?"#9ca3af":"#6b7280"},children:s.vendor.email})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.project?.id?e.jsx("button",{onClick:()=>a(`/projects/${s.project.id}`),className:"text-sm font-medium transition-colors hover:underline",style:{color:t?"#60a5fa":"#2563eb"},title:"현장 상세 정보 보기",children:s.project.projectName||s.project.name}):e.jsx("div",{className:"text-sm",style:{color:t?"#f3f4f6":"#111827"},children:s.project?.projectName||s.project?.name||"-"}),s.project?.projectCode&&e.jsx("div",{className:"text-xs",style:{color:t?"#9ca3af":"#6b7280"},children:s.project.projectCode})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",style:{color:t?"#f3f4f6":"#111827"},children:s.orderDate?new Date(s.orderDate).toLocaleDateString("ko-KR"):s.createdAt?new Date(s.createdAt).toLocaleDateString("ko-KR"):"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",style:{color:t?"#f3f4f6":"#111827"},children:s.createdAt?new Date(s.createdAt).toLocaleDateString("ko-KR"):"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-semibold",style:{color:t?"#60a5fa":"#2563eb"},children:B(s.totalAmount)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${ze(s.orderStatus||"draft")}`,children:Ue(s.orderStatus||"draft")})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:ke(s)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("button",{onClick:()=>a(`/orders/${s.id}`),className:"p-1.5 rounded-md transition-all duration-200",style:{color:t?"#60a5fa":"#2563eb",backgroundColor:"transparent"},onMouseEnter:r=>{r.currentTarget.style.color=t?"#93c5fd":"#1d4ed8",r.currentTarget.style.backgroundColor=t?"rgba(59, 130, 246, 0.2)":"rgba(37, 99, 235, 0.1)"},onMouseLeave:r=>{r.currentTarget.style.color=t?"#60a5fa":"#2563eb",r.currentTarget.style.backgroundColor="transparent"},title:"상세보기",children:e.jsx(oe,{className:"h-4 w-4"})}),Ye(s)&&e.jsx("button",{onClick:()=>a(`/orders/${s.id}/edit`),className:"p-1.5 rounded-md transition-all duration-200",style:{color:t?"#34d399":"#059669",backgroundColor:"transparent"},onMouseEnter:r=>{r.currentTarget.style.color=t?"#6ee7b7":"#047857",r.currentTarget.style.backgroundColor=t?"rgba(16, 185, 129, 0.2)":"rgba(5, 150, 105, 0.1)"},onMouseLeave:r=>{r.currentTarget.style.color=t?"#34d399":"#059669",r.currentTarget.style.backgroundColor="transparent"},title:"수정",children:e.jsx(Je,{className:"h-4 w-4"})}),He(s)&&e.jsx("button",{onClick:()=>$e(s),className:"p-1.5 rounded-md transition-all duration-200",style:{color:t?"#fb923c":"#ea580c",backgroundColor:"transparent"},onMouseEnter:r=>{r.currentTarget.style.color=t?"#fdba74":"#c2410c",r.currentTarget.style.backgroundColor=t?"rgba(249, 115, 22, 0.2)":"rgba(234, 88, 12, 0.1)"},onMouseLeave:r=>{r.currentTarget.style.color=t?"#fb923c":"#ea580c",r.currentTarget.style.backgroundColor="transparent"},title:"PDF 다운로드",children:e.jsx(Q,{className:"h-4 w-4"})}),We(s)&&e.jsx("button",{onClick:()=>we(s),className:"p-1.5 rounded-md transition-all duration-200",style:{color:t?"#a855f7":"#7c3aed",backgroundColor:"transparent"},onMouseEnter:r=>{r.currentTarget.style.color=t?"#c084fc":"#6d28d9",r.currentTarget.style.backgroundColor=t?"rgba(147, 51, 234, 0.2)":"rgba(124, 58, 237, 0.1)"},onMouseLeave:r=>{r.currentTarget.style.color=t?"#a855f7":"#7c3aed",r.currentTarget.style.backgroundColor="transparent"},title:"이메일 전송",children:e.jsx(te,{className:"h-4 w-4"})}),_e(s)&&e.jsx("button",{onClick:()=>Se(s),className:"p-1.5 rounded-md transition-all duration-200",style:{color:t?"#94a3b8":"#64748b",backgroundColor:"transparent"},onMouseEnter:r=>{r.currentTarget.style.color=t?"#cbd5e1":"#475569",r.currentTarget.style.backgroundColor=t?"rgba(148, 163, 184, 0.2)":"rgba(100, 116, 139, 0.1)"},onMouseLeave:r=>{r.currentTarget.style.color=t?"#94a3b8":"#64748b",r.currentTarget.style.backgroundColor="transparent"},title:`이메일 이력 (${s.totalEmailsSent}건)`,children:e.jsx(Ze,{className:"h-4 w-4"})}),s.orderStatus==="draft"&&e.jsx("span",{className:"text-xs px-2 py-1 rounded",style:{color:t?"#fbbf24":"#d97706",backgroundColor:t?"rgba(251, 191, 36, 0.1)":"rgba(217, 119, 6, 0.1)"},title:"임시저장 상태",children:"📝"})]})})]},s.id))})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-8",children:[e.jsxs("button",{onClick:()=>a("/orders?status=completed"),className:"rounded-lg p-4 hover:shadow-md transition-shadow flex items-center gap-3 border",style:{backgroundColor:t?"#1f2937":"#ffffff",borderColor:t?"#374151":"#e5e7eb"},children:[e.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:t?"rgba(5, 150, 105, 0.3)":"#d1fae5"},children:e.jsx(K,{className:"h-5 w-5",style:{color:t?"#34d399":"#059669"}})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-medium",style:{color:t?"#f3f4f6":"#111827"},children:"금월 발주완료"}),e.jsxs("p",{className:"text-xs",style:{color:t?"#9ca3af":"#6b7280"},children:[T.completedOrders||0,"건 완료"]})]})]}),e.jsxs("button",{onClick:()=>a("/vendors"),className:"rounded-lg p-4 hover:shadow-md transition-shadow flex items-center gap-3 border",style:{backgroundColor:t?"#1f2937":"#ffffff",borderColor:t?"#374151":"#e5e7eb"},children:[e.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:t?"rgba(30, 58, 138, 0.3)":"#dbeafe"},children:e.jsx(Me,{className:"h-5 w-5",style:{color:t?"#60a5fa":"#2563eb"}})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-medium",style:{color:t?"#f3f4f6":"#111827"},children:"거래처 관리"}),e.jsxs("p",{className:"text-xs",style:{color:t?"#9ca3af":"#6b7280"},children:[T.activeVendors||0,"개 활성"]})]})]}),e.jsxs("button",{onClick:()=>a("/projects"),className:"rounded-lg p-4 hover:shadow-md transition-shadow flex items-center gap-3 border",style:{backgroundColor:t?"#1f2937":"#ffffff",borderColor:t?"#374151":"#e5e7eb"},children:[e.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:t?"rgba(107, 33, 168, 0.3)":"#ede9fe"},children:e.jsx(ee,{className:"h-5 w-5",style:{color:t?"#a855f7":"#7c3aed"}})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-medium",style:{color:t?"#f3f4f6":"#111827"},children:"현장 관리"}),e.jsxs("p",{className:"text-xs",style:{color:t?"#9ca3af":"#6b7280"},children:[T.activeProjects||0,"개 진행중"]})]})]}),e.jsxs("button",{onClick:()=>a("/reports"),className:"rounded-lg p-4 hover:shadow-md transition-shadow flex items-center gap-3 border",style:{backgroundColor:t?"#1f2937":"#ffffff",borderColor:t?"#374151":"#e5e7eb"},children:[e.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:t?"rgba(5, 150, 105, 0.3)":"#d1fae5"},children:e.jsx(q,{className:"h-5 w-5",style:{color:t?"#34d399":"#059669"}})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-medium",style:{color:t?"#f3f4f6":"#111827"},children:"보고서 생성"}),e.jsx("p",{className:"text-xs",style:{color:t?"#9ca3af":"#6b7280"},children:"상세 분석"})]})]})]}),e.jsx(tt,{isOpen:m,onClose:()=>A(!1),monthlyStats:_,isDarkMode:t}),e.jsx(st,{isOpen:f,onClose:()=>j(!1),statusStats:ve,isDarkMode:t}),l&&e.jsx(Ve,{open:k,onOpenChange:E,orderData:{orderNumber:l.orderNumber,vendorName:l.vendor?.name||"",vendorEmail:l.vendor?.email,orderDate:new Date(l.orderDate||l.createdAt).toLocaleDateString(),totalAmount:l.totalAmount,siteName:l.project?.projectName||l.project?.name,orderId:l.id},attachments:l.attachments||[],onSendEmail:Ce}),S&&e.jsx(Ge,{orderId:S.id,orderNumber:S.orderNumber,isOpen:y,onClose:()=>{g(!1),o(null)}})]})})}export{Ot as default};
