import{c as Te,r as h,p as I,j as e,B as p,t as j,G as L,H as A,D as re,v as g,J as i,N as _,n as Me,O as ie,P as G,I as W,Q as J,R as Q,T as X,V as Ve}from"./index-CIuT1839-1757134689122.js";import{r as Ie,u as ce}from"./xlsx-ocdEQCFM-1757134689122.js";import{S as f,a as v,b as y,c as w,d as b}from"./select-CuxZCova-1757134689122.js";import{D as O,f as U,a as k,b as F,c as $}from"./dialog-BCvPCetm-1757134689122.js";import{C as Y}from"./calendar-BD1vy_ME-1757134689122.js";import{T as Oe}from"./textarea-lqjqXOZu-1757134689122.js";import{A as ne}from"./arrow-left-DmxnSjgc-1757134689122.js";import{S as Ue}from"./save-BkY6oYIo-1757134689122.js";import{C as ee}from"./calendar-days-BUylEc0M-1757134689122.js";import{U as ke}from"./upload-Bb_ohtPJ-1757134689122.js";import{A as Fe}from"./arrow-right-BIitUuhg-1757134689122.js";import{C as $e}from"./camera-O7P8ZTsM-1757134689122.js";import"./index-DQadJ03j-1757134689122.js";import"./chevron-down-BRFV2uDx-1757134689122.js";import"./chevron-up-DPIj_lvq-1757134689122.js";import"./index-JL7ZtvcO-1757134689122.js";import"./format-swJBOg3I-1757134689122.js";import"./chevron-left-DtJMAhUr-1757134689122.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=Te("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);class Be{constructor(r){this.data=r}getCellReference(r){const t=r.match(/([A-Z]+)(\d+)/);if(!t)return 0;const d=this.columnToIndex(t[1]),c=parseInt(t[2])-1;if(c<0||c>=this.data.length||d<0||d>=this.data[c].length)return 0;const m=this.data[c][d].value;return typeof m=="number"?m:parseFloat(m)||0}columnToIndex(r){let t=0;for(let d=0;d<r.length;d++)t=t*26+(r.charCodeAt(d)-64);return t-1}evaluate(r){try{return r=r.replace(/^=/,"").trim(),r.includes("SUM(")?this.evaluateSum(r):(r=r.replace(/[A-Z]+\d+/g,t=>this.getCellReference(t).toString()),this.evaluateArithmetic(r))}catch(t){return console.error("Formula evaluation error:",t),0}}evaluateSum(r){const t=r.match(/SUM\(([^)]+)\)/i);if(!t)return 0;const c=t[1].trim().match(/([A-Z]+\d+):([A-Z]+\d+)/i);if(c){const m=c[1].toUpperCase(),u=c[2].toUpperCase();return this.sumRange(m,u)}return 0}sumRange(r,t){const d=r.match(/([A-Z]+)(\d+)/),c=t.match(/([A-Z]+)(\d+)/);if(!d||!c)return 0;const m=this.columnToIndex(d[1]),u=parseInt(d[2])-1,B=this.columnToIndex(c[1]),E=parseInt(c[2])-1;let D=0;for(let S=u;S<=E;S++)for(let C=m;C<=B;C++)if(S>=0&&S<this.data.length&&C>=0&&C<this.data[S].length){const l=this.data[S][C].value;D+=typeof l=="number"?l:parseFloat(l)||0}return D}evaluateArithmetic(r){try{return Function(`"use strict"; return (${r})`)()}catch(t){return console.error("Arithmetic evaluation error:",t),0}}}function Ee({onImageUpload:R}){const[r,t]=h.useState(null),d=c=>{const m=c.target.files?.[0];if(m){const u=URL.createObjectURL(m);t(u),R(m)}};return e.jsxs(O,{children:[e.jsx(U,{asChild:!0,children:e.jsx(p,{variant:"outline",size:"sm",className:"h-8 w-8 p-0",children:e.jsx($e,{className:"h-4 w-4"})})}),e.jsxs(k,{children:[e.jsx(F,{children:e.jsx($,{children:"부자재 이미지 업로드"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx(Ve,{className:"w-8 h-8 mb-4 text-gray-500"}),e.jsx("p",{className:"mb-2 text-sm text-gray-500",children:e.jsx("span",{className:"font-semibold",children:"클릭하여 업로드"})}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG 파일 (최대 10MB)"})]}),e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:d})]})}),r&&e.jsx("div",{className:"mt-4",children:e.jsx("img",{src:r,alt:"미리보기",className:"w-full h-32 object-cover rounded-lg"})})]})]})]})}function rs(){const[R,r]=h.useState("input"),[t,d]=h.useState(null),[c,m]=h.useState([]),[u,B]=h.useState(""),[E,D]=h.useState(!1),[S,C]=h.useState({}),[l,o]=h.useState({siteName:"",materialReceiver:"",headOfficeManager:"",specialNotes:"",hardware:{deliveryDate:"",supplier:"",deliveryLocation:""},sealing:{deliveryDate:"",supplier:"",deliveryLocation:""},finishing:{deliveryDate:"",supplier:"",deliveryLocation:""}}),[de,oe]=h.useState([]),[me,xe]=h.useState([]),[he,je]=h.useState([]),{data:ge=[]}=I({queryKey:["/api/projects"]}),{data:ae=[]}=I({queryKey:["/api/users"]}),{data:pe=[]}=I({queryKey:["/api/vendors"]}),{data:ue=[]}=I({queryKey:["/api/companies"]}),Ne=[...ge.map(s=>s.projectName),"기본 현장 A","기본 현장 B"],fe=[...ae.map(s=>s.name),...me,"기본 인수자 A","기본 인수자 B"],ve=[...ae.map(s=>s.name),...he,"기본 담당자 A","기본 담당자 B"],P=[...pe.map(s=>s.name),"기본 거래처 A","기본 거래처 B"],z=[...ue.map(s=>s.companyName),...de,"기본 납품처 A","기본 납품처 B"],ye=s=>{oe(a=>[...a,s])},we=s=>{xe(a=>[...a,s])},be=s=>{je(a=>[...a,s])},te=()=>{r("input")},Se=()=>{const s=new Date().toISOString();d({projectSettings:l,spreadsheetData:c,fileName:u,timestamp:s}),r("pdf-preview")},Ce=s=>{const a=s.target.files?.[0];if(!a)return;D(!0),B(a.name);const n=new FileReader;n.onload=N=>{try{const x=new Uint8Array(N.target?.result),T=Ie(x,{type:"array"}),Le=T.SheetNames[0],le=T.Sheets[Le],M=ce.decode_range(le["!ref"]||"A1:A1"),K=[];for(let H=M.s.r;H<=M.e.r;H++){const Z=[];for(let q=M.s.c;q<=M.e.c;q++){const Ae=ce.encode_cell({r:H,c:q}),V=le[Ae];if(V){const Re={value:V.v,formula:V.f,displayValue:V.v};Z.push(Re)}else Z.push({value:"",displayValue:""})}K.push(Z)}m(K),setTimeout(()=>De(K),100)}catch(x){console.error("Error parsing Excel file:",x),alert("파일을 읽는 중 오류가 발생했습니다.")}finally{D(!1)}},n.readAsArrayBuffer(a)},De=h.useCallback(s=>{const a=new Be(s),n=s.map(N=>N.map(x=>{if(x.formula&&x.formula.startsWith("=")){const T=a.evaluate(x.formula);return{...x,displayValue:T}}return{...x,displayValue:x.displayValue!==void 0?x.displayValue:x.value}}));m(n)},[]);return R==="pdf-preview"&&t?e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:e.jsx(se,{className:"h-5 w-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900 leading-tight",children:"부자재 발주서 미리보기"}),e.jsx("p",{className:"text-sm text-gray-600",children:"저장된 발주서 내용을 확인하고 최종 제출하세요."})]})]}),e.jsxs(p,{onClick:te,variant:"outline",className:"flex items-center gap-2",children:[e.jsx(ne,{className:"h-4 w-4"}),"수정하기"]})]}),e.jsxs(j,{className:"hover:shadow-md transition-shadow shadow-sm",children:[e.jsx(L,{children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(re,{className:"h-5 w-5 text-blue-600"}),"현장 정보"]})}),e.jsxs(g,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-medium text-gray-600",children:"현장명"}),e.jsx("p",{className:"text-sm font-semibold",children:t.projectSettings.siteName})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-medium text-gray-600",children:"자재 인수자"}),e.jsx("p",{className:"text-sm font-semibold",children:t.projectSettings.materialReceiver})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-medium text-gray-600",children:"본사 담당자"}),e.jsx("p",{className:"text-sm font-semibold",children:t.projectSettings.headOfficeManager})]})]}),t.projectSettings.specialNotes&&e.jsxs("div",{className:"mt-4",children:[e.jsx(i,{className:"text-sm font-medium text-gray-600",children:"특이사항"}),e.jsx("p",{className:"text-sm",children:t.projectSettings.specialNotes})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[e.jsxs(j,{className:"border-orange-200 shadow-sm",children:[e.jsx(L,{className:"bg-orange-50",children:e.jsx(A,{className:"text-orange-700 text-sm",children:"하드웨어"})}),e.jsx(g,{className:"pt-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx(i,{className:"text-xs text-gray-600",children:"납품희망일"}),e.jsx("p",{className:"text-sm font-medium",children:t.projectSettings.hardware.deliveryDate})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-xs text-gray-600",children:"거래처"}),e.jsx("p",{className:"text-sm font-medium",children:t.projectSettings.hardware.supplier})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-xs text-gray-600",children:"납품처"}),e.jsx("p",{className:"text-sm font-medium",children:t.projectSettings.hardware.deliveryLocation})]})]})})]}),e.jsxs(j,{className:"border-teal-200 shadow-sm",children:[e.jsx(L,{className:"bg-teal-50",children:e.jsx(A,{className:"text-teal-700 text-sm",children:"실링재"})}),e.jsx(g,{className:"pt-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx(i,{className:"text-xs text-gray-600",children:"납품희망일"}),e.jsx("p",{className:"text-sm font-medium",children:t.projectSettings.sealing.deliveryDate})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-xs text-gray-600",children:"거래처"}),e.jsx("p",{className:"text-sm font-medium",children:t.projectSettings.sealing.supplier})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-xs text-gray-600",children:"납품처"}),e.jsx("p",{className:"text-sm font-medium",children:t.projectSettings.sealing.deliveryLocation})]})]})})]}),e.jsxs(j,{className:"border-indigo-200 shadow-sm",children:[e.jsx(L,{className:"bg-indigo-50",children:e.jsx(A,{className:"text-indigo-700 text-sm",children:"마감재"})}),e.jsx(g,{className:"pt-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx(i,{className:"text-xs text-gray-600",children:"납품희망일"}),e.jsx("p",{className:"text-sm font-medium",children:t.projectSettings.finishing.deliveryDate})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-xs text-gray-600",children:"거래처"}),e.jsx("p",{className:"text-sm font-medium",children:t.projectSettings.finishing.supplier})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-xs text-gray-600",children:"납품처"}),e.jsx("p",{className:"text-sm font-medium",children:t.projectSettings.finishing.deliveryLocation})]})]})})]})]}),e.jsxs(j,{className:"hover:shadow-md transition-shadow shadow-sm",children:[e.jsx(L,{children:e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-5 w-5 text-orange-600"}),"발주 품목 목록"]})}),e.jsxs(g,{children:[e.jsxs("div",{className:"text-sm text-gray-600 mb-3",children:["파일명: ",t.fileName]}),e.jsxs("div",{className:"border rounded-lg overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsx("tr",{children:t.spreadsheetData[0]?.map((s,a)=>e.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-700 border-r",children:String.fromCharCode(65+a)},a))})}),e.jsx("tbody",{children:t.spreadsheetData.slice(0,10).map((s,a)=>e.jsx("tr",{className:"border-t",children:s.map((n,N)=>e.jsx("td",{className:"px-3 py-2 border-r",children:n.displayValue||n.value||""},N))},a))})]}),t.spreadsheetData.length>10&&e.jsxs("div",{className:"p-3 text-center text-sm text-gray-500 bg-gray-50",children:["... 그 외 ",t.spreadsheetData.length-10,"개 행"]})]})]})]}),e.jsxs("div",{className:"flex justify-center gap-4 pt-6",children:[e.jsxs(p,{onClick:te,variant:"outline",size:"lg",className:"flex items-center gap-2 px-6",children:[e.jsx(ne,{className:"h-4 w-4"}),"이전 단계"]}),e.jsxs(p,{size:"lg",className:"flex items-center gap-2 px-8 bg-orange-600 hover:bg-orange-700",onClick:()=>{alert("부자재 발주서가 성공적으로 제출되었습니다!")},children:[e.jsx(Ue,{className:"h-4 w-4"}),"최종 제출"]})]})]}):e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-[1366px] mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(se,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"부자재 발주서"}),e.jsx("p",{className:"text-sm text-gray-600",children:"부자재 공정 전용 발주서를 작성하고 관리합니다."})]}),e.jsx("div",{className:"ml-auto",children:e.jsx(Me,{className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:"실험적 기능"})})]}),e.jsx(j,{className:"hover:shadow-md transition-shadow shadow-sm",children:e.jsxs(g,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ie,{className:"h-5 w-5 text-blue-600"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"발주서 기본 정보"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-sm font-medium text-gray-700",children:"현장 명"}),e.jsxs(f,{value:l.siteName,onValueChange:s=>o(a=>({...a,siteName:s})),children:[e.jsx(v,{className:`h-10 ${l.siteName?"border-blue-500 bg-blue-50":""}`,children:e.jsx(y,{placeholder:"현장을 선택하세요"})}),e.jsx(w,{children:Ne.map(s=>e.jsx(b,{value:s,children:s},s))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-sm font-medium text-gray-700",children:"자재 인수자"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(f,{value:l.materialReceiver,onValueChange:s=>o(a=>({...a,materialReceiver:s})),children:[e.jsx(v,{className:`h-10 ${l.materialReceiver?"border-blue-500 bg-blue-50":""}`,children:e.jsx(y,{placeholder:"인수자 선택"})}),e.jsx(w,{children:fe.map(s=>e.jsx(b,{value:s,children:s},s))})]}),e.jsxs(O,{children:[e.jsx(U,{asChild:!0,children:e.jsx(p,{variant:"outline",size:"sm",className:"h-10 w-10 p-0",children:e.jsx(G,{className:"h-4 w-4"})})}),e.jsxs(k,{children:[e.jsx(F,{children:e.jsx($,{children:"새 자재 인수자 추가"})}),e.jsx("div",{className:"space-y-4",children:e.jsx(W,{placeholder:"자재 인수자 이름",onKeyDown:s=>{if(s.key==="Enter"){const a=s.currentTarget.value.trim();a&&(we(a),o(n=>({...n,materialReceiver:a})),s.currentTarget.value="")}}})})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-sm font-medium text-gray-700",children:"본사 담당자"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(f,{value:l.headOfficeManager,onValueChange:s=>o(a=>({...a,headOfficeManager:s})),children:[e.jsx(v,{className:`h-10 ${l.headOfficeManager?"border-blue-500 bg-blue-50":""}`,children:e.jsx(y,{placeholder:"담당자 선택"})}),e.jsx(w,{children:ve.map(s=>e.jsx(b,{value:s,children:s},s))})]}),e.jsxs(O,{children:[e.jsx(U,{asChild:!0,children:e.jsx(p,{variant:"outline",size:"sm",className:"h-10 w-10 p-0",children:e.jsx(G,{className:"h-4 w-4"})})}),e.jsxs(k,{children:[e.jsx(F,{children:e.jsx($,{children:"새 본사 담당자 추가"})}),e.jsx("div",{className:"space-y-4",children:e.jsx(W,{placeholder:"본사 담당자 이름",onKeyDown:s=>{if(s.key==="Enter"){const a=s.currentTarget.value.trim();a&&(be(a),o(n=>({...n,headOfficeManager:a})),s.currentTarget.value="")}}})})]})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-sm font-medium text-gray-700",children:"특이사항"}),e.jsx(Oe,{placeholder:"특이사항을 입력하세요...",value:l.specialNotes,onChange:s=>o(a=>({...a,specialNotes:s.target.value})),className:"h-20"})]})]})]})}),e.jsx(j,{className:"hover:shadow-md transition-shadow border-orange-200 shadow-sm",children:e.jsxs(g,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(se,{className:"h-5 w-5 text-orange-600"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"하드웨어"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-sm font-medium text-gray-700",children:"납품희망일"}),e.jsxs(J,{children:[e.jsx(Q,{asChild:!0,children:e.jsxs(p,{variant:"outline",className:`h-10 w-full justify-start text-left font-normal ${l.hardware.deliveryDate?"border-orange-500 bg-orange-50":""}`,children:[e.jsx(ee,{className:"mr-2 h-4 w-4"}),l.hardware.deliveryDate||"날짜 선택"]})}),e.jsx(X,{className:"w-auto p-0",align:"start",children:e.jsx(Y,{mode:"single",selected:l.hardware.deliveryDate?new Date(l.hardware.deliveryDate):void 0,onSelect:s=>o(a=>({...a,hardware:{...a.hardware,deliveryDate:s?.toISOString().split("T")[0]||""}})),initialFocus:!0})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-sm font-medium text-gray-700",children:"거래처"}),e.jsxs(f,{value:l.hardware.supplier,onValueChange:s=>o(a=>({...a,hardware:{...a.hardware,supplier:s}})),children:[e.jsx(v,{className:`h-10 ${l.hardware.supplier?"border-orange-500 bg-orange-50":""}`,children:e.jsx(y,{placeholder:"거래처 선택"})}),e.jsx(w,{children:P.map(s=>e.jsx(b,{value:s,children:s},s))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-sm font-medium text-gray-700",children:"납품처"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(f,{value:l.hardware.deliveryLocation,onValueChange:s=>o(a=>({...a,hardware:{...a.hardware,deliveryLocation:s}})),children:[e.jsx(v,{className:`h-10 ${l.hardware.deliveryLocation?"border-orange-500 bg-orange-50":""}`,children:e.jsx(y,{placeholder:"납품처 선택"})}),e.jsx(w,{children:z.map(s=>e.jsx(b,{value:s,children:s},s))})]}),e.jsxs(O,{children:[e.jsx(U,{asChild:!0,children:e.jsx(p,{variant:"outline",size:"sm",className:"h-10 w-10 p-0",children:e.jsx(G,{className:"h-4 w-4"})})}),e.jsxs(k,{children:[e.jsx(F,{children:e.jsx($,{children:"새 납품처 추가"})}),e.jsx("div",{className:"space-y-4",children:e.jsx(W,{placeholder:"납품처 이름",onKeyDown:s=>{if(s.key==="Enter"){const a=s.currentTarget.value.trim();a&&(ye(a),o(n=>({...n,hardware:{...n.hardware,deliveryLocation:a}})),s.currentTarget.value="")}}})})]})]})]})]})]})]})}),e.jsx(j,{className:"hover:shadow-md transition-shadow border-teal-200 shadow-sm",children:e.jsxs(g,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ie,{className:"h-5 w-5 text-teal-600"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"실링재"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-sm font-medium text-gray-700",children:"납품희망일"}),e.jsxs(J,{children:[e.jsx(Q,{asChild:!0,children:e.jsxs(p,{variant:"outline",className:`h-10 w-full justify-start text-left font-normal ${l.sealing.deliveryDate?"border-teal-500 bg-teal-50":""}`,children:[e.jsx(ee,{className:"mr-2 h-4 w-4"}),l.sealing.deliveryDate||"날짜 선택"]})}),e.jsx(X,{className:"w-auto p-0",align:"start",children:e.jsx(Y,{mode:"single",selected:l.sealing.deliveryDate?new Date(l.sealing.deliveryDate):void 0,onSelect:s=>o(a=>({...a,sealing:{...a.sealing,deliveryDate:s?.toISOString().split("T")[0]||""}})),initialFocus:!0})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-sm font-medium text-gray-700",children:"거래처"}),e.jsxs(f,{value:l.sealing.supplier,onValueChange:s=>o(a=>({...a,sealing:{...a.sealing,supplier:s}})),children:[e.jsx(v,{className:`h-10 ${l.sealing.supplier?"border-teal-500 bg-teal-50":""}`,children:e.jsx(y,{placeholder:"거래처 선택"})}),e.jsx(w,{children:P.map(s=>e.jsx(b,{value:s,children:s},s))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-sm font-medium text-gray-700",children:"납품처"}),e.jsxs(f,{value:l.sealing.deliveryLocation,onValueChange:s=>o(a=>({...a,sealing:{...a.sealing,deliveryLocation:s}})),children:[e.jsx(v,{className:`h-10 ${l.sealing.deliveryLocation?"border-teal-500 bg-teal-50":""}`,children:e.jsx(y,{placeholder:"납품처 선택"})}),e.jsx(w,{children:z.map(s=>e.jsx(b,{value:s,children:s},s))})]})]})]})]})}),e.jsx(j,{className:"hover:shadow-md transition-shadow border-indigo-200 shadow-sm",children:e.jsxs(g,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(re,{className:"h-5 w-5 text-indigo-600"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"마감재"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-sm font-medium text-gray-700",children:"납품희망일"}),e.jsxs(J,{children:[e.jsx(Q,{asChild:!0,children:e.jsxs(p,{variant:"outline",className:`h-10 w-full justify-start text-left font-normal ${l.finishing.deliveryDate?"border-indigo-500 bg-indigo-50":""}`,children:[e.jsx(ee,{className:"mr-2 h-4 w-4"}),l.finishing.deliveryDate||"날짜 선택"]})}),e.jsx(X,{className:"w-auto p-0",align:"start",children:e.jsx(Y,{mode:"single",selected:l.finishing.deliveryDate?new Date(l.finishing.deliveryDate):void 0,onSelect:s=>o(a=>({...a,finishing:{...a.finishing,deliveryDate:s?.toISOString().split("T")[0]||""}})),initialFocus:!0})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-sm font-medium text-gray-700",children:"거래처"}),e.jsxs(f,{value:l.finishing.supplier,onValueChange:s=>o(a=>({...a,finishing:{...a.finishing,supplier:s}})),children:[e.jsx(v,{className:`h-10 ${l.finishing.supplier?"border-indigo-500 bg-indigo-50":""}`,children:e.jsx(y,{placeholder:"거래처 선택"})}),e.jsx(w,{children:P.map(s=>e.jsx(b,{value:s,children:s},s))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-sm font-medium text-gray-700",children:"납품처"}),e.jsxs(f,{value:l.finishing.deliveryLocation,onValueChange:s=>o(a=>({...a,finishing:{...a.finishing,deliveryLocation:s}})),children:[e.jsx(v,{className:`h-10 ${l.finishing.deliveryLocation?"border-indigo-500 bg-indigo-50":""}`,children:e.jsx(y,{placeholder:"납품처 선택"})}),e.jsx(w,{children:z.map(s=>e.jsx(b,{value:s,children:s},s))})]})]})]})]})}),e.jsx(j,{className:"hover:shadow-md transition-shadow shadow-sm",children:e.jsxs(g,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(_,{className:"h-5 w-5 text-orange-600"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Excel 파일 업로드"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx(ke,{className:"w-8 h-8 mb-4 text-gray-500"}),e.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[e.jsx("span",{className:"font-semibold",children:"클릭하여 업로드"})," 또는 드래그 앤 드롭"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Excel 파일 (.xlsx, .xls)"})]}),e.jsx("input",{type:"file",className:"hidden",accept:".xlsx,.xls",onChange:Ce})]})}),E&&e.jsx("div",{className:"flex items-center justify-center py-4",children:e.jsx("div",{className:"text-sm text-gray-600",children:"파일을 처리하고 있습니다..."})}),u&&e.jsxs("div",{className:"text-sm text-gray-600",children:["업로드된 파일: ",e.jsx("span",{className:"font-medium",children:u})]})]})]})}),c.length>0&&e.jsx(j,{className:"hover:shadow-md transition-shadow shadow-sm",children:e.jsxs(g,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(_,{className:"h-5 w-5 text-blue-600"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"데이터 미리보기"})]}),e.jsxs("div",{className:"border rounded-lg overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[c[0]?.map((s,a)=>e.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-700 border-r",children:String.fromCharCode(65+a)},a)),e.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-700",children:"이미지"})]})}),e.jsx("tbody",{children:c.slice(0,10).map((s,a)=>e.jsxs("tr",{className:"border-t",children:[s.map((n,N)=>e.jsx("td",{className:"px-3 py-2 border-r",children:n.displayValue||n.value||""},N)),e.jsx("td",{className:"px-3 py-2",children:e.jsx(Ee,{onImageUpload:n=>{C(N=>({...N,[a]:n}))}})})]},a))})]}),c.length>10&&e.jsxs("div",{className:"p-3 text-center text-sm text-gray-500 bg-gray-50",children:["... 그 외 ",c.length-10,"개 행"]})]})]})}),e.jsx("div",{className:"flex justify-end gap-4",children:e.jsxs(p,{onClick:Se,className:"flex items-center gap-2 px-6 bg-orange-600 hover:bg-orange-700",disabled:!l.siteName||!l.materialReceiver,children:[e.jsx(Fe,{className:"h-4 w-4"}),"저장하고 다음 단계로"]})})]})})}export{rs as default};
