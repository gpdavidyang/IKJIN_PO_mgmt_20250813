import{r as a,c6 as B,c7 as C,j as e,ab as k,bz as V}from"./index-DDWBjC3L-1757231946596.js";function Y({items:t,renderItem:f,itemHeight:r,containerHeight:d,overscan:o=5,className:c,onScroll:y,onReachEnd:v,scrollEndThreshold:p=100,enableSmoothScrolling:b=!0,loadingItemsCount:i=3,isLoading:x=!1,emptyMessage:g="항목이 없습니다",EmptyComponent:j,LoadingComponent:u}){const[m,z]=a.useState(0),[A,H]=a.useState(!1),_=a.useRef(null),w=a.useRef();B();const{height:E}=C(),S=d||Math.min(E*.6,500),I=a.useCallback(l=>typeof r=="function"?r(l):r,[r]),{startIndex:M,endIndex:N,totalHeight:$,offsetY:G}=a.useMemo(()=>{if(t.length===0)return{startIndex:0,endIndex:0,totalHeight:0,offsetY:0};let l=0,s=0,h=0,T=0;for(let n=0;n<t.length;n++){const L=I(n);if(l+L>m){s=Math.max(0,n-o),T=l-(n-s)*(typeof r=="number"?r:50);break}l+=L}l=0;for(let n=s;n<t.length;n++)if(l+=I(n),l>S+m){h=Math.min(t.length,n+o);break}h===0&&(h=t.length);let R=0;for(let n=0;n<t.length;n++)R+=I(n);return{startIndex:s,endIndex:h,totalHeight:R,offsetY:T}},[t.length,m,S,o,I]),X=a.useMemo(()=>t.slice(M,N).map((l,s)=>({item:l,index:M+s,globalIndex:M+s})),[t,M,N]),q=a.useCallback(l=>{const s=l.currentTarget.scrollTop;z(s),H(!0),y?.(s);const{scrollHeight:h,clientHeight:T}=l.currentTarget;h-s-T<p&&v?.(),w.current&&clearTimeout(w.current),w.current=setTimeout(()=>{H(!1)},150)},[y,v,p]);return a.useEffect(()=>()=>{w.current&&clearTimeout(w.current)},[]),x&&t.length===0?u?e.jsx(u,{count:i}):e.jsx("div",{className:k("space-y-2 p-4",c),style:{height:S},children:Array.from({length:i}).map((l,s)=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(V,{className:"h-4 w-3/4"}),e.jsx(V,{className:"h-4 w-1/2"})]},s))}):t.length===0?j?e.jsx(j,{}):e.jsx("div",{className:k("flex items-center justify-center text-gray-500 bg-gray-50",c),style:{height:S},children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-sm",children:g})})}):e.jsx("div",{ref:_,className:k("overflow-auto",b&&"scroll-smooth",c),style:{height:S},onScroll:q,children:e.jsx("div",{style:{height:$,position:"relative"},children:e.jsxs("div",{style:{transform:`translateY(${G}px)`,position:"absolute",top:0,left:0,right:0},children:[X.map(({item:l,index:s,globalIndex:h})=>e.jsx("div",{style:{height:I(h)},className:"flex flex-col justify-center",children:f(l,h,!A)},h)),x&&t.length>0&&e.jsxs("div",{className:"p-4 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"로딩 중..."})]})]})})})}function J({hasNextPage:t,isFetchingNextPage:f,fetchNextPage:r,...d}){const o=a.useCallback(()=>{t&&!f&&r&&r()},[t,f,r]);return e.jsx(Y,{...d,onReachEnd:o,isLoading:f})}function K({items:t,renderItem:f,columnCount:r,itemHeight:d,itemWidth:o,gap:c=16,containerHeight:y=400,className:v}){const p=Math.ceil(t.length/r),b=d+c;return e.jsx(Y,{items:Array.from({length:p},(i,x)=>x),itemHeight:b,containerHeight:y,className:v,renderItem:i=>e.jsx("div",{className:"flex gap-4",style:{gap:c},children:Array.from({length:r},(x,g)=>{const j=i*r+g,u=t[j];return u?e.jsx("div",{style:{width:o,flex:o?"none":"1"},children:f(u,j)},g):e.jsx("div",{style:{width:o,flex:o?"none":"1"}},g)})})})}function O({items:t,renderItem:f,itemWidth:r,containerWidth:d=800,containerHeight:o=200,gap:c=12,className:y}){const[v,p]=a.useState(0),b=Math.ceil(d/(r+c))+2,i=Math.max(0,Math.floor(v/(r+c))-1),x=Math.min(t.length,i+b),g=t.length*(r+c),j=t.slice(i,x);return e.jsx("div",{className:k("overflow-x-auto overflow-y-hidden",y),style:{width:d,height:o},onScroll:u=>p(u.currentTarget.scrollLeft),children:e.jsx("div",{style:{width:g,height:"100%",position:"relative"},children:e.jsx("div",{style:{transform:`translateX(${i*(r+c)}px)`,position:"absolute",height:"100%",display:"flex",gap:c},children:j.map((u,m)=>e.jsx("div",{style:{width:r,flexShrink:0},children:f(u,i+m)},i+m))})})})}export{O as HorizontalVirtualList,J as InfiniteVirtualList,K as VirtualGrid,Y as VirtualScrollList};
