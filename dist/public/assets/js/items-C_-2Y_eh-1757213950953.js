var fo=Object.defineProperty;var ho=(t,e,r)=>e in t?fo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var s=(t,e,r)=>ho(t,typeof e!="symbol"?e+"":e,r);import{ar as h,h as ai,ak as yo,as as _o,q as qe,j as i,al as xo,am as k,an as W,ao as Y,ap as Z,I as Ve,aq as ae,B as X,k as oi,d as No,e as bo,u as vo,r as J,p as Ye,P as wo,s as _e,t as Ze,n as Ce,f as et,at as tt,w as rt}from"./index-CVm8RRf1-1757213950953.js";import{T as So,a as Ao,b as xe,c as ee,d as jo,e as z}from"./table-Bh_F_2uO-1757213950953.js";import{S as Fe,a as Le,b as Me,c as ze,d as ve}from"./select-BlrS13DO-1757213950953.js";import{P as Io}from"./page-header-DXmfgzpx-1757213950953.js";import{T as nt}from"./textarea-DgDKF031-1757213950953.js";import{S as To}from"./switch-Cy4Ai5gR-1757213950953.js";import{D as Po,a as Co,b as Do,c as $o}from"./dialog-XFb-EJlm-1757213950953.js";import{S as Bo}from"./search-CIWqTCLD-1757213950953.js";import{L as qo}from"./list-Cgj8siM6-1757213950953.js";import{G as Vo}from"./grid-3x3-CtAnqrZZ-1757213950953.js";import{S as st}from"./square-pen-BjDSvCRF-1757213950953.js";import{T as it}from"./trash-2-hj-UN3ZN-1757213950953.js";import{R as Fo,S as Lo}from"./scale-LQkYLSyc-1757213950953.js";import{D as Mo}from"./dollar-sign-CvneWOue-1757213950953.js";import{C as zo}from"./chevron-up-B9QiG8Nl-1757213950953.js";import{C as Eo}from"./chevron-down-sQ7x_w2w-1757213950953.js";import"./index-CyfUGoRd-1757213950953.js";import"./index-B0-PJBDY-1757213950953.js";const l=Symbol.for("drizzle:entityKind");function V(t,e){if(!t||typeof t!="object")return!1;if(t instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,l))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let r=Object.getPrototypeOf(t).constructor;if(r)for(;r;){if(l in r&&r[l]===e[l])return!0;r=Object.getPrototypeOf(r)}return!1}var mt;mt=l;class de{constructor(e,r){s(this,"name");s(this,"keyAsName");s(this,"primary");s(this,"notNull");s(this,"default");s(this,"defaultFn");s(this,"onUpdateFn");s(this,"hasDefault");s(this,"isUnique");s(this,"uniqueName");s(this,"uniqueType");s(this,"dataType");s(this,"columnType");s(this,"enumValues");s(this,"generated");s(this,"generatedIdentity");s(this,"config");this.table=e,this.config=r,this.name=r.name,this.keyAsName=r.keyAsName,this.notNull=r.notNull,this.default=r.default,this.defaultFn=r.defaultFn,this.onUpdateFn=r.onUpdateFn,this.hasDefault=r.hasDefault,this.primary=r.primaryKey,this.isUnique=r.isUnique,this.uniqueName=r.uniqueName,this.uniqueType=r.uniqueType,this.dataType=r.dataType,this.columnType=r.columnType,this.generated=r.generated,this.generatedIdentity=r.generatedIdentity}mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}s(de,mt,"Column");var pt;pt=l;class li{constructor(e,r,n){s(this,"config");s(this,"$default",this.$defaultFn);s(this,"$onUpdate",this.$onUpdateFn);this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:r,columnType:n,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}}s(li,pt,"ColumnBuilder");const oe=Symbol.for("drizzle:Name");var gt;gt=l;class di{constructor(e,r){s(this,"reference");s(this,"_onUpdate","no action");s(this,"_onDelete","no action");this.reference=()=>{const{name:n,columns:a,foreignColumns:d}=e();return{name:n,columns:a,foreignTable:d[0].table,foreignColumns:d}},r&&(this._onUpdate=r.onUpdate,this._onDelete=r.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new ci(e,this)}}s(di,gt,"PgForeignKeyBuilder");var ft;ft=l;class ci{constructor(e,r){s(this,"reference");s(this,"onUpdate");s(this,"onDelete");this.table=e,this.reference=r.reference,this.onUpdate=r._onUpdate,this.onDelete=r._onDelete}getName(){const{name:e,columns:r,foreignColumns:n}=this.reference(),a=r.map(y=>y.name),d=n.map(y=>y.name),g=[this.table[oe],...a,n[0].table[oe],...d];return e??`${g.join("_")}_fk`}}s(ci,ft,"PgForeignKey");function Qo(t,...e){return t(...e)}function ui(t){return new gi(t)}function mi(t,e){return`${t[oe]}_${e.join("_")}_unique`}var ht;ht=l;class pi{constructor(e,r){s(this,"columns");s(this,"nullsNotDistinctConfig",!1);this.name=r,this.columns=e}nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(e){return new fi(e,this.columns,this.nullsNotDistinctConfig,this.name)}}s(pi,ht,"PgUniqueConstraintBuilder");var yt;yt=l;class gi{constructor(e){s(this,"name");this.name=e}on(...e){return new pi(e,this.name)}}s(gi,yt,"PgUniqueOnConstraintBuilder");var _t;_t=l;class fi{constructor(e,r,n,a){s(this,"columns");s(this,"name");s(this,"nullsNotDistinct",!1);this.table=e,this.columns=r,this.name=a??mi(this.table,this.columns.map(d=>d.name)),this.nullsNotDistinct=n}getName(){return this.name}}s(fi,_t,"PgUniqueConstraint");function at(t,e,r){for(let n=e;n<t.length;n++){const a=t[n];if(a==="\\"){n++;continue}if(a==='"')return[t.slice(e,n).replace(/\\/g,""),n+1];if(!r&&(a===","||a==="}"))return[t.slice(e,n).replace(/\\/g,""),n]}return[t.slice(e).replace(/\\/g,""),t.length]}function hi(t,e=0){const r=[];let n=e,a=!1;for(;n<t.length;){const d=t[n];if(d===","){(a||n===e)&&r.push(""),a=!0,n++;continue}if(a=!1,d==="\\"){n+=2;continue}if(d==='"'){const[v,b]=at(t,n+1,!0);r.push(v),n=b;continue}if(d==="}")return[r,n+1];if(d==="{"){const[v,b]=hi(t,n+1);r.push(v),n=b;continue}const[g,y]=at(t,n,!1);r.push(g),n=y}return[r,n]}function Uo(t){const[e]=hi(t,1);return e}function yi(t){return`{${t.map(e=>Array.isArray(e)?yi(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}var xt,Nt;class j extends(Nt=li,xt=l,Nt){constructor(){super(...arguments);s(this,"foreignKeyConfigs",[])}array(r){return new xi(this.config.name,this,r)}references(r,n={}){return this.foreignKeyConfigs.push({ref:r,actions:n}),this}unique(r,n){return this.config.isUnique=!0,this.config.uniqueName=r,this.config.uniqueType=n?.nulls,this}generatedAlwaysAs(r){return this.config.generated={as:r,type:"always",mode:"stored"},this}buildForeignKeys(r,n){return this.foreignKeyConfigs.map(({ref:a,actions:d})=>Qo((g,y)=>{const v=new di(()=>{const b=g();return{columns:[r],foreignColumns:[b]}});return y.onUpdate&&v.onUpdate(y.onUpdate),y.onDelete&&v.onDelete(y.onDelete),v.build(n)},a,d))}buildExtraConfigColumn(r){return new _i(r,this.config)}}s(j,xt,"PgColumnBuilder");var bt,vt;class _ extends(vt=de,bt=l,vt){constructor(e,r){r.uniqueName||(r.uniqueName=mi(e,[r.name])),super(e,r),this.table=e}}s(_,bt,"PgColumn");var wt,St;class _i extends(St=_,wt=l,St){constructor(){super(...arguments);s(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass});s(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(r){return this.indexConfig.opClass=r,this}}s(_i,wt,"ExtraConfigColumn");var At;At=l;class Ne{constructor(e,r,n,a){s(this,"name");s(this,"keyAsName");s(this,"type");s(this,"indexConfig");this.name=e,this.keyAsName=r,this.type=n,this.indexConfig=a}}s(Ne,At,"IndexedColumn");var jt,It;class xi extends(It=j,jt=l,It){constructor(e,r,n){super(e,"array","PgArray"),this.config.baseBuilder=r,this.config.size=n}build(e){const r=this.config.baseBuilder.build(e);return new Ee(e,this.config,r)}}s(xi,jt,"PgArrayBuilder");var Tt,Pt;const Ie=class Ie extends(Pt=_,Tt=l,Pt){constructor(r,n,a,d){super(r,n);s(this,"size");this.baseColumn=a,this.range=d,this.size=n.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(r){return typeof r=="string"&&(r=Uo(r)),r.map(n=>this.baseColumn.mapFromDriverValue(n))}mapToDriverValue(r,n=!1){const a=r.map(d=>d===null?null:V(this.baseColumn,Ie)?this.baseColumn.mapToDriverValue(d,!0):this.baseColumn.mapToDriverValue(d));return n?a:yi(a)}};s(Ie,Tt,"PgArray");let Ee=Ie;const Qe=Symbol.for("drizzle:isPgEnum");function Oo(t){return!!t&&typeof t=="function"&&Qe in t&&t[Qe]===!0}var Ct,Dt;class Ni extends(Dt=j,Ct=l,Dt){constructor(e,r){super(e,"string","PgEnumColumn"),this.config.enum=r}build(e){return new bi(e,this.config)}}s(Ni,Ct,"PgEnumColumnBuilder");var $t,Bt;class bi extends(Bt=_,$t=l,Bt){constructor(r,n){super(r,n);s(this,"enum",this.config.enum);s(this,"enumValues",this.config.enum.enumValues);this.enum=n.enum}getSQLType(){return this.enum.enumName}}s(bi,$t,"PgEnumColumn");function R(t,e){return Ko(t,e,void 0)}function Ko(t,e,r){const n=Object.assign(a=>new Ni(a??"",n),{enumName:t,enumValues:e,schema:r,[Qe]:!0});return n}var qt;qt=l;class Oe{constructor(e,r,n,a=!1){this._={brand:"Subquery",sql:e,selectedFields:r,alias:n,isWith:a}}}s(Oe,qt,"Subquery");const Ro={startActiveSpan(t,e){return e()}},le=Symbol.for("drizzle:ViewBaseConfig"),De=Symbol.for("drizzle:Schema"),ot=Symbol.for("drizzle:Columns"),lt=Symbol.for("drizzle:ExtraConfigColumns"),$e=Symbol.for("drizzle:OriginalName"),Be=Symbol.for("drizzle:BaseName"),we=Symbol.for("drizzle:IsAlias"),dt=Symbol.for("drizzle:ExtraConfigBuilder"),vi=Symbol.for("drizzle:IsDrizzleTable");var Vt,Ft,Lt,Mt,zt,Et,Qt,Ut,Ot,Kt;Kt=l,Ot=oe,Ut=$e,Qt=De,Et=ot,zt=lt,Mt=Be,Lt=we,Ft=vi,Vt=dt;class E{constructor(e,r,n){s(this,Ot);s(this,Ut);s(this,Qt);s(this,Et);s(this,zt);s(this,Mt);s(this,Lt,!1);s(this,Ft,!0);s(this,Vt);this[oe]=this[$e]=e,this[De]=r,this[Be]=n}}s(E,Kt,"Table"),s(E,"Symbol",{Name:oe,Schema:De,OriginalName:$e,Columns:ot,ExtraConfigColumns:lt,BaseName:Be,IsAlias:we,ExtraConfigBuilder:dt});function wi(t){return typeof t=="object"&&t!==null&&vi in t}function Go(t){return t!=null&&typeof t.getSQL=="function"}function Xo(t){const e={sql:"",params:[]};for(const r of t)e.sql+=r.sql,e.params.push(...r.params),r.typings?.length&&(e.typings||(e.typings=[]),e.typings.push(...r.typings));return e}var Rt;Rt=l;class K{constructor(e){s(this,"value");this.value=Array.isArray(e)?e:[e]}getSQL(){return new $([this])}}s(K,Rt,"StringChunk");var Gt;Gt=l;const te=class te{constructor(e){s(this,"decoder",Si);s(this,"shouldInlineParams",!1);this.queryChunks=e}append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return Ro.startActiveSpan("drizzle.buildSQL",r=>{const n=this.buildQueryFromSourceParams(this.queryChunks,e);return r?.setAttributes({"drizzle.query.text":n.sql,"drizzle.query.params":JSON.stringify(n.params)}),n})}buildQueryFromSourceParams(e,r){const n=Object.assign({},r,{inlineParams:r.inlineParams||this.shouldInlineParams,paramStartIndex:r.paramStartIndex||{value:0}}),{casing:a,escapeName:d,escapeParam:g,prepareTyping:y,inlineParams:v,paramStartIndex:b}=n;return Xo(e.map(u=>{if(V(u,K))return{sql:u.value.join(""),params:[]};if(V(u,Se))return{sql:d(u.value),params:[]};if(u===void 0)return{sql:"",params:[]};if(Array.isArray(u)){const w=[new K("(")];for(const[C,G]of u.entries())w.push(G),C<u.length-1&&w.push(new K(", "));return w.push(new K(")")),this.buildQueryFromSourceParams(w,n)}if(V(u,te))return this.buildQueryFromSourceParams(u.queryChunks,{...n,inlineParams:v||u.shouldInlineParams});if(V(u,E)){const w=u[E.Symbol.Schema],C=u[E.Symbol.Name];return{sql:w===void 0||u[we]?d(C):d(w)+"."+d(C),params:[]}}if(V(u,de)){const w=a.getColumnCasing(u);if(r.invokeSource==="indexes")return{sql:d(w),params:[]};const C=u.table[E.Symbol.Schema];return{sql:u.table[we]||C===void 0?d(u.table[E.Symbol.Name])+"."+d(w):d(C)+"."+d(u.table[E.Symbol.Name])+"."+d(w),params:[]}}if(V(u,Ii)){const w=u[le].schema,C=u[le].name;return{sql:w===void 0||u[le].isAlias?d(C):d(w)+"."+d(C),params:[]}}if(V(u,Ke)){if(V(u.value,je))return{sql:g(b.value++,u),params:[u],typings:["none"]};const w=u.value===null?null:u.encoder.mapToDriverValue(u.value);if(V(w,te))return this.buildQueryFromSourceParams([w],n);if(v)return{sql:this.mapInlineParam(w,n),params:[]};let C=["none"];return y&&(C=[y(u.encoder)]),{sql:g(b.value++,w),params:[w],typings:C}}return V(u,je)?{sql:g(b.value++,u),params:[u],typings:["none"]}:V(u,te.Aliased)&&u.fieldAlias!==void 0?{sql:d(u.fieldAlias),params:[]}:V(u,Oe)?u._.isWith?{sql:d(u._.alias),params:[]}:this.buildQueryFromSourceParams([new K("("),u._.sql,new K(") "),new Se(u._.alias)],n):Oo(u)?u.schema?{sql:d(u.schema)+"."+d(u.enumName),params:[]}:{sql:d(u.enumName),params:[]}:Go(u)?u.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([u.getSQL()],n):this.buildQueryFromSourceParams([new K("("),u.getSQL(),new K(")")],n):v?{sql:this.mapInlineParam(u,n),params:[]}:{sql:g(b.value++,u),params:[u],typings:["none"]}}))}mapInlineParam(e,{escapeString:r}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return r(e);if(typeof e=="object"){const n=e.toString();return r(n==="[object Object]"?JSON.stringify(e):n)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new te.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}};s(te,Gt,"SQL");let $=te;var Xt;Xt=l;class Se{constructor(e){s(this,"brand");this.value=e}getSQL(){return new $([this])}}s(Se,Xt,"Name");const Si={mapFromDriverValue:t=>t},Ai={mapToDriverValue:t=>t};({...Si,...Ai});var Jt;Jt=l;class Ke{constructor(e,r=Ai){s(this,"brand");this.value=e,this.encoder=r}getSQL(){return new $([this])}}s(Ke,Jt,"Param");function Ae(t,...e){const r=[];(e.length>0||t.length>0&&t[0]!=="")&&r.push(new K(t[0]));for(const[n,a]of e.entries())r.push(a,new K(t[n+1]));return new $(r)}(t=>{function e(){return new $([])}t.empty=e;function r(v){return new $(v)}t.fromList=r;function n(v){return new $([new K(v)])}t.raw=n;function a(v,b){const u=[];for(const[w,C]of v.entries())w>0&&b!==void 0&&u.push(b),u.push(C);return new $(u)}t.join=a;function d(v){return new Se(v)}t.identifier=d;function g(v){return new je(v)}t.placeholder=g;function y(v,b){return new Ke(v,b)}t.param=y})(Ae||(Ae={}));(t=>{var r;r=l;const n=class n{constructor(d,g){s(this,"isSelectionField",!1);this.sql=d,this.fieldAlias=g}getSQL(){return this.sql}clone(){return new n(this.sql,this.fieldAlias)}};s(n,r,"SQL.Aliased");let e=n;t.Aliased=e})($||($={}));var Ht;Ht=l;class je{constructor(e){this.name=e}getSQL(){return new $([this])}}s(je,Ht,"Placeholder");const ji=Symbol.for("drizzle:IsDrizzleView");var kt,Wt,Yt;Yt=l,Wt=le,kt=ji;class Ii{constructor({name:e,schema:r,selectedFields:n,query:a}){s(this,Wt);s(this,kt,!0);this[le]={name:e,originalName:e,schema:r,selectedFields:n,query:a,isExisting:!a,isAlias:!1}}getSQL(){return new $([this])}}s(Ii,Yt,"View");function Jo(t){return typeof t=="object"&&t!==null&&ji in t}de.prototype.getSQL=function(){return new $([this])};E.prototype.getSQL=function(){return new $([this])};Oe.prototype.getSQL=function(){return new $([this])};function Ho(t){return t[E.Symbol.Columns]}function ko(t){return t[le].selectedFields}function F(t,e){return{name:typeof t=="string"&&t.length>0?t:"",config:typeof t=="object"?t:e}}var Zt,er;class ge extends(er=j,Zt=l,er){generatedAlwaysAsIdentity(e){if(e){const{name:r,...n}=e;this.config.generatedIdentity={type:"always",sequenceName:r,sequenceOptions:n}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){const{name:r,...n}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:r,sequenceOptions:n}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}s(ge,Zt,"PgIntColumnBaseBuilder");var tr,rr;class Ti extends(rr=ge,tr=l,rr){constructor(e){super(e,"number","PgBigInt53")}build(e){return new Pi(e,this.config)}}s(Ti,tr,"PgBigInt53Builder");var nr,sr;class Pi extends(sr=_,nr=l,sr){getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}s(Pi,nr,"PgBigInt53");var ir,ar;class Ci extends(ar=ge,ir=l,ar){constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new Di(e,this.config)}}s(Ci,ir,"PgBigInt64Builder");var or,lr;class Di extends(lr=_,or=l,lr){getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}s(Di,or,"PgBigInt64");function Wo(t,e){const{name:r,config:n}=F(t,e);return n.mode==="number"?new Ti(r):new Ci(r)}var dr,cr;class $i extends(cr=j,dr=l,cr){constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Bi(e,this.config)}}s($i,dr,"PgBigSerial53Builder");var ur,mr;class Bi extends(mr=_,ur=l,mr){getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}s(Bi,ur,"PgBigSerial53");var pr,gr;class qi extends(gr=j,pr=l,gr){constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new Vi(e,this.config)}}s(qi,pr,"PgBigSerial64Builder");var fr,hr;class Vi extends(hr=_,fr=l,hr){getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}s(Vi,fr,"PgBigSerial64");function Yo(t,e){const{name:r,config:n}=F(t,e);return n.mode==="number"?new $i(r):new qi(r)}var yr,_r;class Fi extends(_r=j,yr=l,_r){constructor(e){super(e,"boolean","PgBoolean")}build(e){return new Li(e,this.config)}}s(Fi,yr,"PgBooleanBuilder");var xr,Nr;class Li extends(Nr=_,xr=l,Nr){getSQLType(){return"boolean"}}s(Li,xr,"PgBoolean");function N(t){return new Fi(t??"")}var br,vr;class Mi extends(vr=j,br=l,vr){constructor(e,r){super(e,"string","PgChar"),this.config.length=r.length,this.config.enumValues=r.enum}build(e){return new zi(e,this.config)}}s(Mi,br,"PgCharBuilder");var wr,Sr;class zi extends(Sr=_,wr=l,Sr){constructor(){super(...arguments);s(this,"length",this.config.length);s(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}s(zi,wr,"PgChar");function Zo(t,e={}){const{name:r,config:n}=F(t,e);return new Mi(r,n)}var Ar,jr;class Ei extends(jr=j,Ar=l,jr){constructor(e){super(e,"string","PgCidr")}build(e){return new Qi(e,this.config)}}s(Ei,Ar,"PgCidrBuilder");var Ir,Tr;class Qi extends(Tr=_,Ir=l,Tr){getSQLType(){return"cidr"}}s(Qi,Ir,"PgCidr");function el(t){return new Ei(t??"")}var Pr,Cr;class Ui extends(Cr=j,Pr=l,Cr){constructor(e,r,n){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=r,this.config.customTypeParams=n}build(e){return new Oi(e,this.config)}}s(Ui,Pr,"PgCustomColumnBuilder");var Dr,$r;class Oi extends($r=_,Dr=l,$r){constructor(r,n){super(r,n);s(this,"sqlName");s(this,"mapTo");s(this,"mapFrom");this.sqlName=n.customTypeParams.dataType(n.fieldConfig),this.mapTo=n.customTypeParams.toDriver,this.mapFrom=n.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(r){return typeof this.mapFrom=="function"?this.mapFrom(r):r}mapToDriverValue(r){return typeof this.mapTo=="function"?this.mapTo(r):r}}s(Oi,Dr,"PgCustomColumn");function tl(t){return(e,r)=>{const{name:n,config:a}=F(e,r);return new Ui(n,a,t)}}var Br,qr;class ce extends(qr=j,Br=l,qr){defaultNow(){return this.default(Ae`now()`)}}s(ce,Br,"PgDateColumnBaseBuilder");var Vr,Fr;class Ki extends(Fr=ce,Vr=l,Fr){constructor(e){super(e,"date","PgDate")}build(e){return new Ri(e,this.config)}}s(Ki,Vr,"PgDateBuilder");var Lr,Mr;class Ri extends(Mr=_,Lr=l,Mr){getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}s(Ri,Lr,"PgDate");var zr,Er;class Gi extends(Er=ce,zr=l,Er){constructor(e){super(e,"string","PgDateString")}build(e){return new Xi(e,this.config)}}s(Gi,zr,"PgDateStringBuilder");var Qr,Ur;class Xi extends(Ur=_,Qr=l,Ur){getSQLType(){return"date"}}s(Xi,Qr,"PgDateString");function pe(t,e){const{name:r,config:n}=F(t,e);return n?.mode==="date"?new Ki(r):new Gi(r)}var Or,Kr;class Ji extends(Kr=j,Or=l,Kr){constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new Hi(e,this.config)}}s(Ji,Or,"PgDoublePrecisionBuilder");var Rr,Gr;class Hi extends(Gr=_,Rr=l,Gr){getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}}s(Hi,Rr,"PgDoublePrecision");function rl(t){return new Ji(t??"")}var Xr,Jr;class ki extends(Jr=j,Xr=l,Jr){constructor(e){super(e,"string","PgInet")}build(e){return new Wi(e,this.config)}}s(ki,Xr,"PgInetBuilder");var Hr,kr;class Wi extends(kr=_,Hr=l,kr){getSQLType(){return"inet"}}s(Wi,Hr,"PgInet");function nl(t){return new ki(t??"")}var Wr,Yr;class Yi extends(Yr=ge,Wr=l,Yr){constructor(e){super(e,"number","PgInteger")}build(e){return new Zi(e,this.config)}}s(Yi,Wr,"PgIntegerBuilder");var Zr,en;class Zi extends(en=_,Zr=l,en){getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}}s(Zi,Zr,"PgInteger");function f(t){return new Yi(t??"")}var tn,rn;class ea extends(rn=j,tn=l,rn){constructor(e,r){super(e,"string","PgInterval"),this.config.intervalConfig=r}build(e){return new ta(e,this.config)}}s(ea,tn,"PgIntervalBuilder");var nn,sn;class ta extends(sn=_,nn=l,sn){constructor(){super(...arguments);s(this,"fields",this.config.intervalConfig.fields);s(this,"precision",this.config.intervalConfig.precision)}getSQLType(){const r=this.fields?` ${this.fields}`:"",n=this.precision?`(${this.precision})`:"";return`interval${r}${n}`}}s(ta,nn,"PgInterval");function sl(t,e={}){const{name:r,config:n}=F(t,e);return new ea(r,n)}var an,on;class ra extends(on=j,an=l,on){constructor(e){super(e,"json","PgJson")}build(e){return new na(e,this.config)}}s(ra,an,"PgJsonBuilder");var ln,dn;class na extends(dn=_,ln=l,dn){constructor(e,r){super(e,r)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}s(na,ln,"PgJson");function il(t){return new ra(t??"")}var cn,un;class sa extends(un=j,cn=l,un){constructor(e){super(e,"json","PgJsonb")}build(e){return new ia(e,this.config)}}s(sa,cn,"PgJsonbBuilder");var mn,pn;class ia extends(pn=_,mn=l,pn){constructor(e,r){super(e,r)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}s(ia,mn,"PgJsonb");function P(t){return new sa(t??"")}var gn,fn;class aa extends(fn=j,gn=l,fn){constructor(e){super(e,"array","PgLine")}build(e){return new oa(e,this.config)}}s(aa,gn,"PgLineBuilder");var hn,yn;class oa extends(yn=_,hn=l,yn){getSQLType(){return"line"}mapFromDriverValue(e){const[r,n,a]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(n),Number.parseFloat(a)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}s(oa,hn,"PgLine");var _n,xn;class la extends(xn=j,_n=l,xn){constructor(e){super(e,"json","PgLineABC")}build(e){return new da(e,this.config)}}s(la,_n,"PgLineABCBuilder");var Nn,bn;class da extends(bn=_,Nn=l,bn){getSQLType(){return"line"}mapFromDriverValue(e){const[r,n,a]=e.slice(1,-1).split(",");return{a:Number.parseFloat(r),b:Number.parseFloat(n),c:Number.parseFloat(a)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}s(da,Nn,"PgLineABC");function al(t,e){const{name:r,config:n}=F(t,e);return!n?.mode||n.mode==="tuple"?new aa(r):new la(r)}var vn,wn;class ca extends(wn=j,vn=l,wn){constructor(e){super(e,"string","PgMacaddr")}build(e){return new ua(e,this.config)}}s(ca,vn,"PgMacaddrBuilder");var Sn,An;class ua extends(An=_,Sn=l,An){getSQLType(){return"macaddr"}}s(ua,Sn,"PgMacaddr");function ol(t){return new ca(t??"")}var jn,In;class ma extends(In=j,jn=l,In){constructor(e){super(e,"string","PgMacaddr8")}build(e){return new pa(e,this.config)}}s(ma,jn,"PgMacaddr8Builder");var Tn,Pn;class pa extends(Pn=_,Tn=l,Pn){getSQLType(){return"macaddr8"}}s(pa,Tn,"PgMacaddr8");function ll(t){return new ma(t??"")}var Cn,Dn;class ga extends(Dn=j,Cn=l,Dn){constructor(e,r,n){super(e,"string","PgNumeric"),this.config.precision=r,this.config.scale=n}build(e){return new fa(e,this.config)}}s(ga,Cn,"PgNumericBuilder");var $n,Bn;class fa extends(Bn=_,$n=l,Bn){constructor(r,n){super(r,n);s(this,"precision");s(this,"scale");this.precision=n.precision,this.scale=n.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}s(fa,$n,"PgNumeric");function ha(t,e){const{name:r,config:n}=F(t,e);return new ga(r,n?.precision,n?.scale)}const L=ha;var qn,Vn;class ya extends(Vn=j,qn=l,Vn){constructor(e){super(e,"array","PgPointTuple")}build(e){return new _a(e,this.config)}}s(ya,qn,"PgPointTupleBuilder");var Fn,Ln;class _a extends(Ln=_,Fn=l,Ln){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[r,n]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(n)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}s(_a,Fn,"PgPointTuple");var Mn,zn;class xa extends(zn=j,Mn=l,zn){constructor(e){super(e,"json","PgPointObject")}build(e){return new Na(e,this.config)}}s(xa,Mn,"PgPointObjectBuilder");var En,Qn;class Na extends(Qn=_,En=l,Qn){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[r,n]=e.slice(1,-1).split(",");return{x:Number.parseFloat(r),y:Number.parseFloat(n)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}s(Na,En,"PgPointObject");function dl(t,e){const{name:r,config:n}=F(t,e);return!n?.mode||n.mode==="tuple"?new ya(r):new xa(r)}function cl(t){const e=[];for(let r=0;r<t.length;r+=2)e.push(Number.parseInt(t.slice(r,r+2),16));return new Uint8Array(e)}function ct(t,e){const r=new ArrayBuffer(8),n=new DataView(r);for(let a=0;a<8;a++)n.setUint8(a,t[e+a]);return n.getFloat64(0,!0)}function ba(t){const e=cl(t);let r=0;const n=e[r];r+=1;const a=new DataView(e.buffer),d=a.getUint32(r,n===1);if(r+=4,d&536870912&&(a.getUint32(r,n===1),r+=4),(d&65535)===1){const g=ct(e,r);r+=8;const y=ct(e,r);return r+=8,[g,y]}throw new Error("Unsupported geometry type")}var Un,On;class va extends(On=j,Un=l,On){constructor(e){super(e,"array","PgGeometry")}build(e){return new wa(e,this.config)}}s(va,Un,"PgGeometryBuilder");var Kn,Rn;class wa extends(Rn=_,Kn=l,Rn){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return ba(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}s(wa,Kn,"PgGeometry");var Gn,Xn;class Sa extends(Xn=j,Gn=l,Xn){constructor(e){super(e,"json","PgGeometryObject")}build(e){return new Aa(e,this.config)}}s(Sa,Gn,"PgGeometryObjectBuilder");var Jn,Hn;class Aa extends(Hn=_,Jn=l,Hn){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){const r=ba(e);return{x:r[0],y:r[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}s(Aa,Jn,"PgGeometryObject");function ul(t,e){const{name:r,config:n}=F(t,e);return!n?.mode||n.mode==="tuple"?new va(r):new Sa(r)}var kn,Wn;class ja extends(Wn=j,kn=l,Wn){constructor(e,r){super(e,"number","PgReal"),this.config.length=r}build(e){return new Ia(e,this.config)}}s(ja,kn,"PgRealBuilder");var Yn,Zn;class Ia extends(Zn=_,Yn=l,Zn){constructor(r,n){super(r,n);s(this,"mapFromDriverValue",r=>typeof r=="string"?Number.parseFloat(r):r)}getSQLType(){return"real"}}s(Ia,Yn,"PgReal");function ml(t){return new ja(t??"")}var es,ts;class Ta extends(ts=j,es=l,ts){constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Pa(e,this.config)}}s(Ta,es,"PgSerialBuilder");var rs,ns;class Pa extends(ns=_,rs=l,ns){getSQLType(){return"serial"}}s(Pa,rs,"PgSerial");function I(t){return new Ta(t??"")}var ss,is;class Ca extends(is=ge,ss=l,is){constructor(e){super(e,"number","PgSmallInt")}build(e){return new Da(e,this.config)}}s(Ca,ss,"PgSmallIntBuilder");var as,os;class Da extends(os=_,as=l,os){constructor(){super(...arguments);s(this,"mapFromDriverValue",r=>typeof r=="string"?Number(r):r)}getSQLType(){return"smallint"}}s(Da,as,"PgSmallInt");function pl(t){return new Ca(t??"")}var ls,ds;class $a extends(ds=j,ls=l,ds){constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Ba(e,this.config)}}s($a,ls,"PgSmallSerialBuilder");var cs,us;class Ba extends(us=_,cs=l,us){getSQLType(){return"smallserial"}}s(Ba,cs,"PgSmallSerial");function gl(t){return new $a(t??"")}var ms,ps;class qa extends(ps=j,ms=l,ps){constructor(e,r){super(e,"string","PgText"),this.config.enumValues=r.enum}build(e){return new Va(e,this.config)}}s(qa,ms,"PgTextBuilder");var gs,fs;class Va extends(fs=_,gs=l,fs){constructor(){super(...arguments);s(this,"enumValues",this.config.enumValues)}getSQLType(){return"text"}}s(Va,gs,"PgText");function x(t,e={}){const{name:r,config:n}=F(t,e);return new qa(r,n)}var hs,ys;class Fa extends(ys=ce,hs=l,ys){constructor(e,r,n){super(e,"string","PgTime"),this.withTimezone=r,this.precision=n,this.config.withTimezone=r,this.config.precision=n}build(e){return new La(e,this.config)}}s(Fa,hs,"PgTimeBuilder");var _s,xs;class La extends(xs=_,_s=l,xs){constructor(r,n){super(r,n);s(this,"withTimezone");s(this,"precision");this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}s(La,_s,"PgTime");function fl(t,e={}){const{name:r,config:n}=F(t,e);return new Fa(r,n.withTimezone??!1,n.precision)}var Ns,bs;class Ma extends(bs=ce,Ns=l,bs){constructor(e,r,n){super(e,"date","PgTimestamp"),this.config.withTimezone=r,this.config.precision=n}build(e){return new za(e,this.config)}}s(Ma,Ns,"PgTimestampBuilder");var vs,ws;class za extends(ws=_,vs=l,ws){constructor(r,n){super(r,n);s(this,"withTimezone");s(this,"precision");s(this,"mapFromDriverValue",r=>new Date(this.withTimezone?r:r+"+0000"));s(this,"mapToDriverValue",r=>r.toISOString());this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}s(za,vs,"PgTimestamp");var Ss,As;class Ea extends(As=ce,Ss=l,As){constructor(e,r,n){super(e,"string","PgTimestampString"),this.config.withTimezone=r,this.config.precision=n}build(e){return new Qa(e,this.config)}}s(Ea,Ss,"PgTimestampStringBuilder");var js,Is;class Qa extends(Is=_,js=l,Is){constructor(r,n){super(r,n);s(this,"withTimezone");s(this,"precision");this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}s(Qa,js,"PgTimestampString");function c(t,e={}){const{name:r,config:n}=F(t,e);return n?.mode==="string"?new Ea(r,n.withTimezone??!1,n.precision):new Ma(r,n?.withTimezone??!1,n?.precision)}var Ts,Ps;class Ua extends(Ps=j,Ts=l,Ps){constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(Ae`gen_random_uuid()`)}build(e){return new Oa(e,this.config)}}s(Ua,Ts,"PgUUIDBuilder");var Cs,Ds;class Oa extends(Ds=_,Cs=l,Ds){getSQLType(){return"uuid"}}s(Oa,Cs,"PgUUID");function hl(t){return new Ua(t??"")}var $s,Bs;class Ka extends(Bs=j,$s=l,Bs){constructor(e,r){super(e,"string","PgVarchar"),this.config.length=r.length,this.config.enumValues=r.enum}build(e){return new Ra(e,this.config)}}s(Ka,$s,"PgVarcharBuilder");var qs,Vs;class Ra extends(Vs=_,qs=l,Vs){constructor(){super(...arguments);s(this,"length",this.config.length);s(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}s(Ra,qs,"PgVarchar");function o(t,e={}){const{name:r,config:n}=F(t,e);return new Ka(r,n)}var Fs,Ls;class Ga extends(Ls=j,Fs=l,Ls){constructor(e,r){super(e,"string","PgBinaryVector"),this.config.dimensions=r.dimensions}build(e){return new Xa(e,this.config)}}s(Ga,Fs,"PgBinaryVectorBuilder");var Ms,zs;class Xa extends(zs=_,Ms=l,zs){constructor(){super(...arguments);s(this,"dimensions",this.config.dimensions)}getSQLType(){return`bit(${this.dimensions})`}}s(Xa,Ms,"PgBinaryVector");function yl(t,e){const{name:r,config:n}=F(t,e);return new Ga(r,n)}var Es,Qs;class Ja extends(Qs=j,Es=l,Qs){constructor(e,r){super(e,"array","PgHalfVector"),this.config.dimensions=r.dimensions}build(e){return new Ha(e,this.config)}}s(Ja,Es,"PgHalfVectorBuilder");var Us,Os;class Ha extends(Os=_,Us=l,Os){constructor(){super(...arguments);s(this,"dimensions",this.config.dimensions)}getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(r){return JSON.stringify(r)}mapFromDriverValue(r){return r.slice(1,-1).split(",").map(n=>Number.parseFloat(n))}}s(Ha,Us,"PgHalfVector");function _l(t,e){const{name:r,config:n}=F(t,e);return new Ja(r,n)}var Ks,Rs;class ka extends(Rs=j,Ks=l,Rs){constructor(e,r){super(e,"string","PgSparseVector"),this.config.dimensions=r.dimensions}build(e){return new Wa(e,this.config)}}s(ka,Ks,"PgSparseVectorBuilder");var Gs,Xs;class Wa extends(Xs=_,Gs=l,Xs){constructor(){super(...arguments);s(this,"dimensions",this.config.dimensions)}getSQLType(){return`sparsevec(${this.dimensions})`}}s(Wa,Gs,"PgSparseVector");function xl(t,e){const{name:r,config:n}=F(t,e);return new ka(r,n)}var Js,Hs;class Ya extends(Hs=j,Js=l,Hs){constructor(e,r){super(e,"array","PgVector"),this.config.dimensions=r.dimensions}build(e){return new Za(e,this.config)}}s(Ya,Js,"PgVectorBuilder");var ks,Ws;class Za extends(Ws=_,ks=l,Ws){constructor(){super(...arguments);s(this,"dimensions",this.config.dimensions)}getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(r){return JSON.stringify(r)}mapFromDriverValue(r){return r.slice(1,-1).split(",").map(n=>Number.parseFloat(n))}}s(Za,ks,"PgVector");function Nl(t,e){const{name:r,config:n}=F(t,e);return new Ya(r,n)}function bl(){return{bigint:Wo,bigserial:Yo,boolean:N,char:Zo,cidr:el,customType:tl,date:pe,doublePrecision:rl,inet:nl,integer:f,interval:sl,json:il,jsonb:P,line:al,macaddr:ol,macaddr8:ll,numeric:ha,point:dl,geometry:ul,real:ml,serial:I,smallint:pl,smallserial:gl,text:x,time:fl,timestamp:c,uuid:hl,varchar:o,bit:yl,halfvec:_l,sparsevec:xl,vector:Nl}}const Ue=Symbol.for("drizzle:PgInlineForeignKeys"),ut=Symbol.for("drizzle:EnableRLS");var Ys,Zs,ei,ti,ri;class me extends(ri=E,ti=l,ei=Ue,Zs=ut,Ys=E.Symbol.ExtraConfigBuilder,ri){constructor(){super(...arguments);s(this,ei,[]);s(this,Zs,!1);s(this,Ys)}}s(me,ti,"PgTable"),s(me,"Symbol",Object.assign({},E.Symbol,{InlineForeignKeys:Ue,EnableRLS:ut}));function vl(t,e,r,n,a=t){const d=new me(t,n,a),g=typeof e=="function"?e(bl()):e,y=Object.fromEntries(Object.entries(g).map(([u,w])=>{const C=w;C.setName(u);const G=C.build(d);return d[Ue].push(...C.buildForeignKeys(G,d)),[u,G]})),v=Object.fromEntries(Object.entries(g).map(([u,w])=>{const C=w;C.setName(u);const G=C.buildExtraConfigColumn(d);return[u,G]})),b=Object.assign(d,y);return b[E.Symbol.Columns]=y,b[E.Symbol.ExtraConfigColumns]=v,r&&(b[me.Symbol.ExtraConfigBuilder]=r),Object.assign(b,{enableRLS:()=>(b[me.Symbol.EnableRLS]=!0,b)})}const S=(t,e,r)=>vl(t,e,r,void 0);var ni;ni=l;class eo{constructor(e,r){this.unique=e,this.name=r}on(...e){return new be(e.map(r=>{if(V(r,$))return r;r=r;const n=new Ne(r.name,!!r.keyAsName,r.columnType,r.indexConfig);return r.indexConfig=JSON.parse(JSON.stringify(r.defaultConfig)),n}),this.unique,!1,this.name)}onOnly(...e){return new be(e.map(r=>{if(V(r,$))return r;r=r;const n=new Ne(r.name,!!r.keyAsName,r.columnType,r.indexConfig);return r.indexConfig=r.defaultConfig,n}),this.unique,!0,this.name)}using(e,...r){return new be(r.map(n=>{if(V(n,$))return n;n=n;const a=new Ne(n.name,!!n.keyAsName,n.columnType,n.indexConfig);return n.indexConfig=JSON.parse(JSON.stringify(n.defaultConfig)),a}),this.unique,!0,this.name,e)}}s(eo,ni,"PgIndexBuilderOn");var si;si=l;class be{constructor(e,r,n,a,d="btree"){s(this,"config");this.config={name:a,columns:e,unique:r,only:n,method:d}}concurrently(){return this.config.concurrently=!0,this}with(e){return this.config.with=e,this}where(e){return this.config.where=e,this}build(e){return new to(this.config,e)}}s(be,si,"PgIndexBuilder");var ii;ii=l;class to{constructor(e,r){s(this,"config");this.config={...e,table:r}}}s(to,ii,"PgIndex");function p(t){return new eo(!1,t)}const D={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function q(t,e){return e.includes(t.columnType)}function wl(t){return"enumValues"in t&&Array.isArray(t.enumValues)&&t.enumValues.length>0}const Sl=h.union([h.string(),h.number(),h.boolean(),h.null()]),Al=h.union([Sl,h.record(h.any()),h.array(h.any())]),jl=h.custom(t=>t instanceof Buffer);function ro(t,e){const r=e?.zodInstance??h,n=e?.coerce??{};let a;return wl(t)&&(a=t.enumValues.length?r.enum(t.enumValues):r.string()),a||(q(t,["PgGeometry","PgPointTuple"])?a=r.tuple([r.number(),r.number()]):q(t,["PgGeometryObject","PgPointObject"])?a=r.object({x:r.number(),y:r.number()}):q(t,["PgHalfVector","PgVector"])?(a=r.array(r.number()),a=t.dimensions?a.length(t.dimensions):a):q(t,["PgLine"])?a=r.tuple([r.number(),r.number(),r.number()]):q(t,["PgLineABC"])?a=r.object({a:r.number(),b:r.number(),c:r.number()}):q(t,["PgArray"])?(a=r.array(ro(t.baseColumn,r)),a=t.size?a.length(t.size):a):t.dataType==="array"?a=r.array(r.any()):t.dataType==="number"?a=Il(t,r,n):t.dataType==="bigint"?a=Tl(t,r,n):t.dataType==="boolean"?a=n===!0||n.boolean?r.coerce.boolean():r.boolean():t.dataType==="date"?a=n===!0||n.date?r.coerce.date():r.date():t.dataType==="string"?a=Pl(t,r,n):t.dataType==="json"?a=Al:t.dataType==="custom"?a=r.any():t.dataType==="buffer"&&(a=jl)),a||(a=r.any()),a}function Il(t,e,r){let n=t.getSQLType().includes("unsigned"),a,d,g=!1;q(t,["MySqlTinyInt","SingleStoreTinyInt"])?(a=n?0:D.INT8_MIN,d=n?D.INT8_UNSIGNED_MAX:D.INT8_MAX,g=!0):q(t,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(a=n?0:D.INT16_MIN,d=n?D.INT16_UNSIGNED_MAX:D.INT16_MAX,g=!0):q(t,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(a=n?0:D.INT24_MIN,d=n?D.INT24_UNSIGNED_MAX:D.INT24_MAX,g=q(t,["MySqlMediumInt","SingleStoreMediumInt"])):q(t,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(a=n?0:D.INT32_MIN,d=n?D.INT32_UNSIGNED_MAX:D.INT32_MAX,g=!0):q(t,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(a=n?0:D.INT48_MIN,d=n?D.INT48_UNSIGNED_MAX:D.INT48_MAX):q(t,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(n=n||q(t,["MySqlSerial","SingleStoreSerial"]),a=n?0:Number.MIN_SAFE_INTEGER,d=Number.MAX_SAFE_INTEGER,g=!0):q(t,["MySqlYear","SingleStoreYear"])?(a=1901,d=2155,g=!0):(a=Number.MIN_SAFE_INTEGER,d=Number.MAX_SAFE_INTEGER);let y=r===!0||r?.number?e.coerce.number():e.number();return y=y.min(a).max(d),g?y.int():y}function Tl(t,e,r){const n=t.getSQLType().includes("unsigned"),a=n?0n:D.INT64_MIN,d=n?D.INT64_UNSIGNED_MAX:D.INT64_MAX;return(r===!0||r?.bigint?e.coerce.bigint():e.bigint()).min(a).max(d)}function Pl(t,e,r){if(q(t,["PgUUID"]))return e.string().uuid();let n,a,d=!1;q(t,["PgVarchar","SQLiteText"])?n=t.length:q(t,["MySqlVarChar","SingleStoreVarChar"])?n=t.length??D.INT16_UNSIGNED_MAX:q(t,["MySqlText","SingleStoreText"])&&(t.textType==="longtext"?n=D.INT32_UNSIGNED_MAX:t.textType==="mediumtext"?n=D.INT24_UNSIGNED_MAX:t.textType==="text"?n=D.INT16_UNSIGNED_MAX:n=D.INT8_UNSIGNED_MAX),q(t,["PgChar","MySqlChar","SingleStoreChar"])&&(n=t.length,d=!0),q(t,["PgBinaryVector"])&&(a=/^[01]+$/,n=t.dimensions);let g=r===!0||r?.string?e.coerce.string():e.string();return g=a?g.regex(a):g,n&&d?g.length(n):n?g.max(n):g}function no(t){return wi(t)?Ho(t):ko(t)}function so(t,e,r,n){const a={};for(const[d,g]of Object.entries(t)){if(!V(g,de)&&!V(g,$)&&!V(g,$.Aliased)&&typeof g=="object"){const w=wi(g)||Jo(g)?no(g):g;a[d]=so(w,e[d]??{},r,n);continue}const y=e[d];if(y!==void 0&&typeof y!="function"){a[d]=y;continue}const v=V(g,de)?g:void 0,b=v?ro(v,n):h.any(),u=typeof y=="function"?y(b):b;r.never(v)||(a[d]=u,v&&(r.nullable(v)&&(a[d]=a[d].nullable()),r.optional(v)&&(a[d]=a[d].optional())))}return h.object(a)}const Cl={never:t=>t?.generated?.type==="always"||t?.generatedIdentity?.type==="always",optional:t=>!t.notNull||t.notNull&&t.hasDefault,nullable:t=>!t.notNull},A=(t,e)=>{const r=no(t);return so(r,{},Cl)};S("sessions",{sid:o("sid").primaryKey(),sess:P("sess").notNull(),expire:c("expire").notNull()},t=>[p("IDX_session_expire").on(t.expire)]);const io=S("ui_terms",{id:I("id").primaryKey(),termKey:o("term_key",{length:100}).notNull().unique(),termValue:o("term_value",{length:255}).notNull(),category:o("category",{length:50}).default("general"),description:x("description"),isActive:N("is_active").default(!0),createdAt:c("created_at").defaultNow(),updatedAt:c("updated_at").defaultNow()}),Dl=S("item_categories",{id:I("id").primaryKey(),categoryType:o("category_type",{length:20}).notNull(),categoryName:o("category_name",{length:100}).notNull(),parentId:f("parent_id"),displayOrder:f("display_order").default(0),isActive:N("is_active").default(!0),createdAt:c("created_at").defaultNow(),updatedAt:c("updated_at").defaultNow()},t=>[p("idx_item_categories_type").on(t.categoryType),p("idx_item_categories_parent").on(t.parentId)]),fe=R("user_role",["field_worker","project_manager","hq_management","executive","admin"]),$l=R("purchase_order_status",["draft","pending","approved","sent","completed"]),Bl=R("order_status",["draft","created","sent","delivered"]),ql=R("approval_status",["not_required","pending","approved","rejected"]),Vl=R("project_status",["planning","active","on_hold","completed","cancelled"]),Fl=R("project_type",["commercial","residential","industrial","infrastructure"]),Ll=R("invoice_status",["pending","verified","paid"]),Ml=R("item_receipt_status",["pending","approved","rejected"]),zl=R("verification_action",["invoice_uploaded","item_verified","quality_checked"]),El=R("approval_step_status",["pending","approved","rejected","skipped"]),Ql=S("email_settings",{id:I("id").primaryKey(),smtpHost:o("smtp_host",{length:255}).notNull(),smtpPort:f("smtp_port").notNull().default(587),smtpUser:o("smtp_user",{length:255}).notNull(),smtpPass:x("smtp_pass").notNull(),fromName:o("from_name",{length:100}),isActive:N("is_active").default(!0),isDefault:N("is_default").default(!1),description:x("description"),createdAt:c("created_at").defaultNow(),updatedAt:c("updated_at").defaultNow(),createdBy:o("created_by"),lastTestedAt:c("last_tested_at"),testResult:P("test_result")},t=>[p("idx_email_settings_active").on(t.isActive),p("idx_email_settings_default").on(t.isDefault)]),Ul=S("approval_authorities",{id:I("id").primaryKey(),role:fe("role").notNull(),maxAmount:L("max_amount",{precision:15,scale:2}).notNull(),description:x("description"),isActive:N("is_active").default(!0),canDirectApprove:N("can_direct_approve").default(!1),directApproveLimit:L("direct_approve_limit",{precision:15,scale:2}),createdAt:c("created_at").defaultNow(),updatedAt:c("updated_at").defaultNow()},t=>[ui("unique_role_approval").on(t.role)]),B=S("users",{id:o("id").primaryKey().notNull(),email:o("email").unique().notNull(),name:o("name").notNull(),password:o("hashed_password").notNull(),phoneNumber:o("phone_number"),profileImageUrl:o("profile_image_url"),role:fe("role").notNull().default("field_worker"),position:o("position"),isActive:N("is_active").default(!0),createdAt:c("created_at").defaultNow(),updatedAt:c("updated_at").defaultNow()},t=>[p("idx_users_email").on(t.email),p("idx_users_role").on(t.role)]),Re=S("companies",{id:I("id").primaryKey(),companyName:o("company_name",{length:255}).notNull(),businessNumber:o("business_number",{length:50}),representative:o("representative",{length:100}),address:x("address"),contactPerson:o("contact_person",{length:100}),phone:o("phone",{length:50}),email:o("email",{length:255}),fax:o("fax",{length:50}),website:o("website",{length:255}),isActive:N("is_active").default(!0),createdAt:c("created_at").defaultNow(),updatedAt:c("updated_at").defaultNow()}),ao=S("vendors",{id:I("id").primaryKey(),name:o("name",{length:255}).notNull(),vendorCode:o("vendor_code",{length:50}),aliases:P("aliases").default([]).$type(),businessNumber:o("business_number",{length:50}),contactPerson:o("contact_person",{length:100}).notNull(),email:o("email",{length:255}).notNull(),phone:o("phone",{length:50}),address:x("address"),businessType:o("business_type",{length:100}),isActive:N("is_active").default(!0),createdAt:c("created_at").defaultNow(),updatedAt:c("updated_at").defaultNow()},t=>[p("idx_vendors_name").on(t.name),p("idx_vendors_business_number").on(t.businessNumber),p("idx_vendors_email").on(t.email),p("idx_vendors_active").on(t.isActive)]),Ol=S("items",{id:I("id").primaryKey(),name:o("name",{length:255}).notNull(),specification:x("specification"),unit:o("unit",{length:50}).notNull(),unitPrice:L("unit_price",{precision:15,scale:2}),category:o("category",{length:100}),majorCategory:o("major_category",{length:100}),middleCategory:o("middle_category",{length:100}),minorCategory:o("minor_category",{length:100}),description:x("description"),isActive:N("is_active").default(!0),createdAt:c("created_at").defaultNow(),updatedAt:c("updated_at").defaultNow()},t=>[p("idx_items_name").on(t.name),p("idx_items_category").on(t.category),p("idx_items_active").on(t.isActive)]),Kl=S("terminology",{id:I("id").primaryKey(),termKey:o("term_key",{length:100}).notNull().unique(),termValue:o("term_value",{length:255}).notNull(),category:o("category",{length:100}),description:x("description"),isActive:N("is_active").default(!0),createdAt:c("created_at").defaultNow(),updatedAt:c("updated_at").defaultNow()},t=>[p("idx_terminology_key").on(t.termKey),p("idx_terminology_category").on(t.category),p("idx_terminology_active").on(t.isActive)]),Te=S("projects",{id:I("id").primaryKey(),projectName:o("project_name",{length:255}).notNull(),projectCode:o("project_code",{length:100}).notNull().unique(),clientName:o("client_name",{length:255}),projectType:Fl("project_type").notNull().default("commercial"),location:x("location"),startDate:pe("start_date"),endDate:pe("end_date"),status:Vl("status").notNull().default("active"),totalBudget:L("total_budget",{precision:15,scale:2}),projectManagerId:o("project_manager_id").references(()=>B.id),orderManagerId:o("order_manager_id").references(()=>B.id),description:x("description"),isActive:N("is_active").default(!0),createdAt:c("created_at").defaultNow(),updatedAt:c("updated_at").defaultNow()},t=>[p("idx_projects_name").on(t.projectName),p("idx_projects_code").on(t.projectCode),p("idx_projects_status").on(t.status),p("idx_projects_start_date").on(t.startDate),p("idx_projects_active").on(t.isActive),p("idx_projects_manager").on(t.projectManagerId)]),Rl=S("project_members",{id:I("id").primaryKey(),projectId:f("project_id").references(()=>Te.id,{onDelete:"cascade"}).notNull(),userId:o("user_id").references(()=>B.id,{onDelete:"cascade"}).notNull(),role:o("role",{length:50}).notNull(),assignedAt:c("assigned_at").defaultNow(),assignedBy:o("assigned_by").references(()=>B.id),isActive:N("is_active").default(!0),createdAt:c("created_at").defaultNow(),updatedAt:c("updated_at").defaultNow()},t=>[ui("project_members_project_user_unique").on(t.projectId,t.userId)]),Gl=S("project_history",{id:I("id").primaryKey(),projectId:f("project_id").references(()=>Te.id,{onDelete:"cascade"}).notNull(),fieldName:o("field_name",{length:100}).notNull(),oldValue:x("old_value"),newValue:x("new_value"),changedBy:o("changed_by").references(()=>B.id).notNull(),changedAt:c("changed_at").defaultNow(),changeReason:x("change_reason")}),he=S("order_templates",{id:I("id").primaryKey(),templateName:o("template_name",{length:100}).notNull(),templateType:o("template_type",{length:50}).notNull(),isActive:N("is_active").default(!0),createdAt:c("created_at").defaultNow(),updatedAt:c("updated_at").defaultNow()}),Xl=S("template_fields",{id:I("id").primaryKey(),templateId:f("template_id").references(()=>he.id,{onDelete:"cascade"}),fieldType:o("field_type",{length:50}).notNull(),fieldName:o("field_name",{length:100}).notNull(),label:o("label",{length:255}).notNull(),placeholder:o("placeholder",{length:255}),required:N("required").default(!1),validation:P("validation"),options:P("options"),gridPosition:P("grid_position").notNull(),sectionName:o("section_name",{length:100}).notNull(),sortOrder:f("sort_order").default(0),isActive:N("is_active").default(!0),createdAt:c("created_at").defaultNow(),updatedAt:c("updated_at").defaultNow()}),Jl=S("handsontable_configs",{id:I("id").primaryKey(),templateId:f("template_id").references(()=>he.id,{onDelete:"cascade"}),colHeaders:P("col_headers").notNull(),columns:P("columns").notNull(),rowsCount:f("rows_count").default(10),formulas:P("formulas"),validationRules:P("validation_rules"),customStyles:P("custom_styles"),settings:P("settings"),sortOrder:f("sort_order").default(0),isActive:N("is_active").default(!0),createdAt:c("created_at").defaultNow(),updatedAt:c("updated_at").defaultNow()}),Hl=S("template_versions",{id:I("id").primaryKey(),templateId:f("template_id").references(()=>he.id,{onDelete:"cascade"}),versionNumber:o("version_number",{length:20}).notNull(),changes:P("changes"),templateConfig:P("template_config").notNull(),createdBy:o("created_by",{length:255}),createdAt:c("created_at").defaultNow()}),H=S("purchase_orders",{id:I("id").primaryKey(),orderNumber:o("order_number",{length:50}).notNull().unique(),projectId:f("project_id").references(()=>Te.id).notNull(),vendorId:f("vendor_id").references(()=>ao.id),userId:o("user_id").references(()=>B.id).notNull(),templateId:f("template_id").references(()=>he.id),orderDate:pe("order_date").notNull(),deliveryDate:pe("delivery_date"),status:$l("status").notNull().default("pending"),orderStatus:Bl("order_status").default("draft"),approvalStatus:ql("approval_status").default("not_required"),approvalBypassReason:x("approval_bypass_reason"),nextApproverId:o("next_approver_id").references(()=>B.id),approvalRequestedAt:c("approval_requested_at"),deliveredAt:c("delivered_at"),deliveredBy:o("delivered_by").references(()=>B.id),totalAmount:L("total_amount",{precision:15,scale:2}).default("0").$type(),notes:x("notes"),isApproved:N("is_approved").default(!1),approvedBy:o("approved_by").references(()=>B.id),approvedAt:c("approved_at"),currentApproverRole:fe("current_approver_role"),approvalLevel:f("approval_level").default(1),createdAt:c("created_at").defaultNow(),updatedAt:c("updated_at").defaultNow()},t=>[p("idx_purchase_orders_number").on(t.orderNumber),p("idx_purchase_orders_project").on(t.projectId),p("idx_purchase_orders_vendor").on(t.vendorId),p("idx_purchase_orders_user").on(t.userId),p("idx_purchase_orders_status").on(t.status),p("idx_purchase_orders_date").on(t.orderDate),p("idx_purchase_orders_delivery").on(t.deliveryDate),p("idx_purchase_orders_created").on(t.createdAt),p("idx_purchase_orders_approver").on(t.currentApproverRole)]),oo=S("purchase_order_items",{id:I("id").primaryKey(),orderId:f("order_id").references(()=>H.id).notNull(),itemName:o("item_name",{length:255}).notNull(),specification:x("specification"),unit:o("unit",{length:50}),quantity:L("quantity",{precision:10,scale:2}).notNull().$type(),unitPrice:L("unit_price",{precision:15,scale:2}).notNull().$type(),totalAmount:L("total_amount",{precision:15,scale:2}).notNull().$type(),majorCategory:o("major_category",{length:100}),middleCategory:o("middle_category",{length:100}),minorCategory:o("minor_category",{length:100}),notes:x("notes"),createdAt:c("created_at").defaultNow()},t=>[p("idx_poi_major_category").on(t.majorCategory),p("idx_poi_middle_category").on(t.middleCategory),p("idx_poi_minor_category").on(t.minorCategory),p("idx_poi_category_hierarchy").on(t.majorCategory,t.middleCategory,t.minorCategory)]),kl=S("attachments",{id:I("id").primaryKey(),orderId:f("order_id").references(()=>H.id).notNull(),originalName:o("original_name",{length:255}).notNull(),storedName:o("stored_name",{length:255}).notNull(),filePath:o("file_path",{length:500}).notNull(),fileSize:f("file_size"),mimeType:o("mime_type",{length:100}),uploadedBy:o("uploaded_by",{length:50}),uploadedAt:c("uploaded_at").defaultNow(),fileData:x("file_data")}),Wl=S("order_history",{id:I("id").primaryKey(),orderId:f("order_id").references(()=>H.id).notNull(),userId:o("user_id").references(()=>B.id).notNull(),action:o("action",{length:100}).notNull(),changes:P("changes"),createdAt:c("created_at").defaultNow()}),Yl=S("email_send_history",{id:I("id").primaryKey(),orderId:f("order_id").notNull().references(()=>H.id,{onDelete:"cascade"}),sentAt:c("sent_at").defaultNow().notNull(),sentBy:o("sent_by",{length:255}).notNull().references(()=>B.id),recipientEmail:o("recipient_email",{length:255}).notNull(),recipientName:o("recipient_name",{length:255}),ccEmails:x("cc_emails"),subject:x("subject").notNull(),body:x("body").notNull(),attachments:P("attachments").$type(),status:o("status",{length:50}).notNull().default("sent"),errorMessage:x("error_message"),openedAt:c("opened_at"),clickedAt:c("clicked_at"),ipAddress:o("ip_address",{length:50}),userAgent:x("user_agent"),trackingId:o("tracking_id",{length:100}).unique(),emailProvider:o("email_provider",{length:50}).default("naver"),messageId:o("message_id",{length:255}),createdAt:c("created_at").defaultNow().notNull()},t=>[p("idx_email_history_order").on(t.orderId),p("idx_email_history_sent_by").on(t.sentBy),p("idx_email_history_recipient").on(t.recipientEmail),p("idx_email_history_tracking").on(t.trackingId),p("idx_email_history_status").on(t.status),p("idx_email_history_sent_at").on(t.sentAt)]),Ge=S("invoices",{id:I("id").primaryKey(),orderId:f("order_id").notNull().references(()=>H.id,{onDelete:"cascade"}),invoiceNumber:o("invoice_number",{length:100}).notNull().unique(),invoiceType:o("invoice_type",{length:20}).notNull(),issueDate:c("issue_date").notNull(),dueDate:c("due_date"),totalAmount:L("total_amount",{precision:15,scale:2}).notNull().$type(),vatAmount:L("vat_amount",{precision:15,scale:2}).default("0").$type(),status:Ll("status").notNull().default("pending"),filePath:o("file_path",{length:500}),uploadedBy:o("uploaded_by").notNull().references(()=>B.id),verifiedBy:o("verified_by").references(()=>B.id),verifiedAt:c("verified_at"),taxInvoiceIssued:N("tax_invoice_issued").default(!1),taxInvoiceIssuedDate:c("tax_invoice_issued_date"),taxInvoiceIssuedBy:o("tax_invoice_issued_by").references(()=>B.id),notes:x("notes"),createdAt:c("created_at").defaultNow(),updatedAt:c("updated_at").defaultNow()}),lo=S("item_receipts",{id:I("id").primaryKey(),orderItemId:f("order_item_id").notNull().references(()=>oo.id,{onDelete:"cascade"}),invoiceId:f("invoice_id").references(()=>Ge.id,{onDelete:"set null"}),receivedQuantity:L("received_quantity",{precision:10,scale:2}).notNull().$type(),receivedDate:c("received_date").notNull(),qualityCheck:N("quality_check").default(!1),qualityNotes:x("quality_notes"),verifiedBy:o("verified_by").notNull().references(()=>B.id),status:Ml("status").notNull().default("pending"),notes:x("notes"),createdAt:c("created_at").defaultNow(),updatedAt:c("updated_at").defaultNow()}),Zl=S("verification_logs",{id:I("id").primaryKey(),orderId:f("order_id").notNull().references(()=>H.id,{onDelete:"cascade"}),invoiceId:f("invoice_id").references(()=>Ge.id,{onDelete:"set null"}),itemReceiptId:f("item_receipt_id").references(()=>lo.id,{onDelete:"set null"}),action:zl("action").notNull(),details:x("details"),performedBy:o("performed_by").notNull().references(()=>B.id),createdAt:c("created_at").defaultNow(),updatedAt:c("updated_at").defaultNow()});A(Re).omit({id:!0,createdAt:!0,updatedAt:!0});A(ao).omit({id:!0,createdAt:!0,updatedAt:!0});const ed=A(Ol).omit({id:!0,createdAt:!0,updatedAt:!0});A(Te).omit({id:!0,createdAt:!0,updatedAt:!0});A(he).omit({id:!0,createdAt:!0,updatedAt:!0});A(Dl).omit({id:!0,createdAt:!0,updatedAt:!0});A(H).omit({id:!0,createdAt:!0,updatedAt:!0,orderNumber:!0,userId:!0,isApproved:!0,approvedBy:!0,approvedAt:!0}).extend({userId:h.string().min(1),templateId:h.number().nullable().optional(),totalAmount:h.number().positive(),customFields:h.record(h.any()).optional(),items:h.array(h.object({itemName:h.string().min(1),specification:h.string().nullable().optional(),quantity:h.number().positive(),unitPrice:h.number().positive(),totalAmount:h.number().positive(),notes:h.string().nullable().optional(),majorCategory:h.string().nullable().optional(),middleCategory:h.string().nullable().optional(),minorCategory:h.string().nullable().optional()}))});A(oo).omit({id:!0,createdAt:!0}).extend({supplyAmount:h.number().nonnegative().optional(),taxAmount:h.number().nonnegative().optional()});A(kl).omit({id:!0,uploadedAt:!0});A(Wl).omit({id:!0,createdAt:!0});A(Ge).omit({id:!0,createdAt:!0,updatedAt:!0}).extend({totalAmount:h.union([h.string(),h.number()]).transform(t=>String(t)),vatAmount:h.union([h.string(),h.number()]).transform(t=>String(t))});A(lo).omit({id:!0,createdAt:!0,updatedAt:!0}).extend({receivedQuantity:h.union([h.string(),h.number()]).transform(t=>Number(t)),receivedDate:h.union([h.string(),h.date()]).transform(t=>new Date(t))});A(Zl).omit({id:!0,createdAt:!0});A(Yl).omit({id:!0,sentAt:!0,createdAt:!0}).extend({ccEmails:h.string().nullable().optional(),attachments:h.array(h.object({filename:h.string(),path:h.string(),size:h.number()})).nullable().optional()});A(Xl).omit({id:!0,createdAt:!0,updatedAt:!0});A(Jl).omit({id:!0,createdAt:!0,updatedAt:!0});A(Hl).omit({id:!0,createdAt:!0});A(Rl).omit({id:!0,createdAt:!0,updatedAt:!0});A(Gl).omit({id:!0,changedAt:!0});A(io);A(Kl).omit({id:!0,createdAt:!0,updatedAt:!0});A(io).omit({id:!0,createdAt:!0,updatedAt:!0});A(Ul).omit({id:!0,createdAt:!0,updatedAt:!0});const td=S("approval_workflow_settings",{id:I("id").primaryKey(),companyId:f("company_id").references(()=>Re.id),approvalMode:o("approval_mode",{length:20}).notNull().default("staged"),directApprovalRoles:P("direct_approval_roles").default([]).$type(),stagedApprovalThresholds:P("staged_approval_thresholds").default({}).$type(),requireAllStages:N("require_all_stages").default(!0),skipLowerStages:N("skip_lower_stages").default(!1),isActive:N("is_active").default(!0),createdAt:c("created_at").defaultNow(),updatedAt:c("updated_at").defaultNow().$onUpdate(()=>new Date),createdBy:o("created_by",{length:255}).references(()=>B.id)},t=>({companyIdx:p("idx_approval_workflow_company").on(t.companyId),activeIdx:p("idx_approval_workflow_active").on(t.isActive)})),co=S("approval_step_templates",{id:I("id").primaryKey(),templateName:o("template_name",{length:100}).notNull(),companyId:f("company_id").references(()=>Re.id),stepOrder:f("step_order").notNull(),requiredRole:fe("required_role").notNull(),minAmount:L("min_amount",{precision:15,scale:2}).default("0"),maxAmount:L("max_amount",{precision:15,scale:2}),isOptional:N("is_optional").default(!1),canSkip:N("can_skip").default(!1),description:x("description"),isActive:N("is_active").default(!0),createdAt:c("created_at").defaultNow(),updatedAt:c("updated_at").defaultNow().$onUpdate(()=>new Date)},t=>({templateCompanyIdx:p("idx_approval_step_template_company").on(t.companyId),templateOrderIdx:p("idx_approval_step_order").on(t.templateName,t.stepOrder)})),rd=S("approval_step_instances",{id:I("id").primaryKey(),orderId:f("order_id").references(()=>H.id).notNull(),templateId:f("template_id").references(()=>co.id),stepOrder:f("step_order").notNull(),requiredRole:fe("required_role").notNull(),assignedUserId:o("assigned_user_id",{length:255}).references(()=>B.id),status:El("status").default("pending"),approvedBy:o("approved_by",{length:255}).references(()=>B.id),approvedAt:c("approved_at"),rejectionReason:x("rejection_reason"),comments:x("comments"),isActive:N("is_active").default(!0),createdAt:c("created_at").defaultNow(),updatedAt:c("updated_at").defaultNow().$onUpdate(()=>new Date)},t=>({orderIdx:p("idx_approval_step_instance_order").on(t.orderId),statusIdx:p("idx_approval_step_instance_status").on(t.status),assignedUserIdx:p("idx_approval_step_instance_user").on(t.assignedUserId)}));A(td).omit({id:!0,createdAt:!0,updatedAt:!0});A(co).omit({id:!0,createdAt:!0,updatedAt:!0});A(rd).omit({id:!0,createdAt:!0,updatedAt:!0});const nd=R("audit_log_level",["OFF","ERROR","WARNING","INFO","DEBUG"]),sd=R("audit_event_type",["login","logout","login_failed","session_expired","password_change","permission_change","data_create","data_read","data_update","data_delete","data_export","approval_request","approval_grant","approval_reject","email_send","file_upload","file_download","settings_change","security_alert","api_access","error"]),id=S("system_audit_logs",{id:I("id").primaryKey(),userId:o("user_id").references(()=>B.id),userName:o("user_name",{length:255}),userRole:o("user_role",{length:50}),eventType:sd("event_type").notNull(),eventCategory:o("event_category",{length:50}).notNull(),entityType:o("entity_type",{length:50}),entityId:o("entity_id",{length:100}),action:o("action",{length:255}).notNull(),tableName:o("table_name",{length:100}),additionalDetails:P("additional_details"),oldData:P("old_data"),newData:P("new_data"),ipAddress:o("ip_address",{length:50}),userAgent:x("user_agent"),sessionId:o("session_id",{length:255}),requestMethod:o("request_method",{length:10}),requestPath:o("request_path",{length:500}),responseStatus:f("response_status"),responseTime:f("response_time"),errorMessage:x("error_message"),createdAt:c("created_at").defaultNow().notNull()},t=>[p("idx_audit_user").on(t.userId),p("idx_audit_event_type").on(t.eventType),p("idx_audit_entity").on(t.entityType,t.entityId),p("idx_audit_created").on(t.createdAt),p("idx_audit_category").on(t.eventCategory),p("idx_audit_session").on(t.sessionId)]),ad=S("audit_settings",{id:I("id").primaryKey(),userId:o("user_id").references(()=>B.id),logLevel:nd("log_level").default("INFO"),enableAuth:N("enable_auth").default(!0),enableData:N("enable_data").default(!0),enableSystem:N("enable_system").default(!0),enableSecurity:N("enable_security").default(!0),retentionDays:f("retention_days").default(90),archiveEnabled:N("archive_enabled").default(!0),maxLogSize:f("max_log_size"),autoCleanup:N("auto_cleanup").default(!0),alertsEnabled:N("alerts_enabled").default(!1),emailNotifications:N("email_notifications").default(!1),realTimeMonitoring:N("real_time_monitoring").default(!1),createdAt:c("created_at").defaultNow(),updatedAt:c("updated_at").defaultNow()}),od=S("archived_audit_logs",{id:I("id").primaryKey(),originalId:f("original_id").notNull(),userId:o("user_id",{length:255}),userName:o("user_name",{length:255}),userRole:o("user_role",{length:50}),eventType:o("event_type",{length:50}).notNull(),eventCategory:o("event_category",{length:50}).notNull(),entityType:o("entity_type",{length:50}),entityId:o("entity_id",{length:100}),action:o("action",{length:255}).notNull(),additionalDetails:P("additional_details"),ipAddress:o("ip_address",{length:50}),createdAt:c("created_at").notNull(),archivedAt:c("archived_at").defaultNow().notNull()},t=>[p("idx_archived_audit_user").on(t.userId),p("idx_archived_audit_created").on(t.createdAt),p("idx_archived_audit_archived").on(t.archivedAt)]),ld=S("audit_alert_rules",{id:I("id").primaryKey(),ruleName:o("rule_name",{length:100}).notNull(),description:x("description"),eventTypes:P("event_types").notNull().$type(),condition:P("condition"),severity:o("severity",{length:20}).notNull().default("medium"),alertChannels:P("alert_channels").notNull().$type(),recipients:P("recipients").notNull().$type(),throttleMinutes:f("throttle_minutes").default(60),isActive:N("is_active").default(!0),createdBy:o("created_by").references(()=>B.id),createdAt:c("created_at").defaultNow(),updatedAt:c("updated_at").defaultNow().$onUpdate(()=>new Date)},t=>[p("idx_alert_rules_active").on(t.isActive),p("idx_alert_rules_severity").on(t.severity)]);A(id).omit({id:!0,createdAt:!0});A(ad).omit({id:!0,createdAt:!0,updatedAt:!0});A(od).omit({id:!0,archivedAt:!0});A(ld).omit({id:!0,createdAt:!0,updatedAt:!0});const dd=S("validation_sessions",{id:o("id",{length:36}).primaryKey(),userId:f("user_id").notNull(),fileName:o("file_name",{length:255}).notNull(),fileSize:f("file_size").notNull(),totalItems:f("total_items").default(0),validItems:f("valid_items").default(0),warningItems:f("warning_items").default(0),errorItems:f("error_items").default(0),status:o("status",{length:20}).notNull().default("pending"),createdAt:c("created_at").defaultNow(),completedAt:c("completed_at"),metadata:P("metadata")}),cd=S("validation_results",{id:I("id").primaryKey(),sessionId:o("session_id",{length:36}).notNull(),rowIndex:f("row_index").notNull(),fieldName:o("field_name",{length:100}),originalValue:x("original_value"),validatedValue:x("validated_value"),validationStatus:o("validation_status",{length:20}),errorMessage:x("error_message"),suggestion:x("suggestion"),confidence:L("confidence",{precision:5,scale:2}),metadata:P("metadata"),createdAt:c("created_at").defaultNow()}),ud=S("ai_suggestions",{id:I("id").primaryKey(),sessionId:o("session_id",{length:36}).notNull(),rowIndex:f("row_index").notNull(),fieldName:o("field_name",{length:100}).notNull(),originalValue:x("original_value"),suggestedValue:x("suggested_value"),suggestionType:o("suggestion_type",{length:50}),confidence:L("confidence",{precision:5,scale:2}).notNull(),reason:x("reason"),applied:N("applied").default(!1),appliedAt:c("applied_at"),appliedBy:f("applied_by"),metadata:P("metadata"),createdAt:c("created_at").defaultNow()}),md=S("vendor_mappings",{id:I("id").primaryKey(),originalName:o("original_name",{length:255}).notNull(),mappedVendorId:f("mapped_vendor_id").notNull(),mappedVendorName:o("mapped_vendor_name",{length:255}).notNull(),confidence:L("confidence",{precision:5,scale:2}).notNull(),usageCount:f("usage_count").default(1),lastUsedAt:c("last_used_at").defaultNow(),createdAt:c("created_at").defaultNow(),createdBy:f("created_by")}),pd=S("category_mappings",{id:I("id").primaryKey(),itemName:o("item_name",{length:255}).notNull(),majorCategory:o("major_category",{length:100}),middleCategory:o("middle_category",{length:100}),minorCategory:o("minor_category",{length:100}),confidence:L("confidence",{precision:5,scale:2}).notNull(),usageCount:f("usage_count").default(1),lastUsedAt:c("last_used_at").defaultNow(),createdAt:c("created_at").defaultNow(),createdBy:f("created_by")});A(dd).omit({createdAt:!0,completedAt:!0});A(cd).omit({id:!0,createdAt:!0});A(ud).omit({id:!0,createdAt:!0,appliedAt:!0});A(md).omit({id:!0,createdAt:!0,lastUsedAt:!0});A(pd).omit({id:!0,createdAt:!0,lastUsedAt:!0});A(Ql).omit({id:!0,createdAt:!0,updatedAt:!0,lastTestedAt:!0,testResult:!0});const gd=ed.extend({standardPrice:h.string().optional().transform(t=>t&&t!==""?t:void 0)});function fd({isOpen:t,item:e,onClose:r,onSuccess:n}){const{theme:a}=ai(),d=a==="dark",g=yo({resolver:_o(gd),defaultValues:{name:e?.name||"",category:e?.category||"",specification:e?.specification||"",unit:e?.unit||"",unitPrice:e?.unitPrice||void 0,description:e?.description||"",isActive:e?.isActive??!0}}),y=()=>{n(),r()},v=qe({mutationFn:async T=>{const Q={...T,unitPrice:T.unitPrice||null};return await oi("POST","/api/items",Q)},onSuccess:y}),b=qe({mutationFn:async T=>{const Q={...T,unitPrice:T.unitPrice||null},re=await fetch(`/api/items/${e.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)});if(!re.ok)throw new Error("Failed to update item");return re.json()},onSuccess:y}),u=T=>{e?b.mutate(T):v.mutate(T)},w=v.isPending||b.isPending,C=["원자재","부품","소모품","장비","기타"],G=["개","박스","세트","kg","g","L","mL","m","cm","mm","㎡","㎥","시간","일"];return i.jsx(Po,{open:t,onOpenChange:r,children:i.jsxs(Co,{className:`max-w-2xl max-h-[90vh] overflow-y-auto transition-colors ${d?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[i.jsx(Do,{children:i.jsx($o,{className:`transition-colors ${d?"text-white":"text-gray-900"}`,children:e?"품목 수정":"새 품목 추가"})}),i.jsx(xo,{...g,children:i.jsxs("form",{onSubmit:g.handleSubmit(u),className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(k,{control:g.control,name:"name",render:({field:T})=>i.jsxs(W,{children:[i.jsx(Y,{className:`transition-colors ${d?"text-gray-300":"text-gray-700"}`,children:"품목명 *"}),i.jsx(Z,{children:i.jsx(Ve,{...T,placeholder:"품목명을 입력하세요",className:`transition-colors ${d?"bg-gray-700 border-gray-600 text-gray-100 placeholder:text-gray-400":"bg-white border-gray-300"}`})}),i.jsx(ae,{})]})}),i.jsx(k,{control:g.control,name:"category",render:({field:T})=>i.jsxs(W,{children:[i.jsx(Y,{className:`transition-colors ${d?"text-gray-300":"text-gray-700"}`,children:"카테고리"}),i.jsxs(Fe,{onValueChange:T.onChange,value:T.value||"",children:[i.jsx(Z,{children:i.jsx(Le,{className:`transition-colors ${d?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300"}`,children:i.jsx(Me,{placeholder:"카테고리를 선택하세요"})})}),i.jsx(ze,{className:`transition-colors ${d?"bg-gray-700 border-gray-600":"bg-white border-gray-200"}`,children:C.map(Q=>i.jsx(ve,{value:Q,children:Q},Q))})]}),i.jsx(ae,{})]})}),i.jsx(k,{control:g.control,name:"unit",render:({field:T})=>i.jsxs(W,{children:[i.jsx(Y,{className:`transition-colors ${d?"text-gray-300":"text-gray-700"}`,children:"단위 *"}),i.jsxs(Fe,{onValueChange:T.onChange,value:T.value||"",children:[i.jsx(Z,{children:i.jsx(Le,{className:`transition-colors ${d?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300"}`,children:i.jsx(Me,{placeholder:"단위를 선택하세요"})})}),i.jsx(ze,{className:`transition-colors ${d?"bg-gray-700 border-gray-600":"bg-white border-gray-200"}`,children:G.map(Q=>i.jsx(ve,{value:Q,children:Q},Q))})]}),i.jsx(ae,{})]})}),i.jsx(k,{control:g.control,name:"standardPrice",render:({field:T})=>i.jsxs(W,{children:[i.jsx(Y,{className:`transition-colors ${d?"text-gray-300":"text-gray-700"}`,children:"표준단가"}),i.jsx(Z,{children:i.jsx(Ve,{...T,type:"number",step:"0.01",placeholder:"0.00",className:`transition-colors ${d?"bg-gray-700 border-gray-600 text-gray-100 placeholder:text-gray-400":"bg-white border-gray-300"}`})}),i.jsx(ae,{})]})})]}),i.jsx(k,{control:g.control,name:"specification",render:({field:T})=>i.jsxs(W,{children:[i.jsx(Y,{className:`transition-colors ${d?"text-gray-300":"text-gray-700"}`,children:"규격"}),i.jsx(Z,{children:i.jsx(nt,{...T,value:T.value||"",placeholder:"품목의 상세 규격을 입력하세요",rows:3,className:`transition-colors ${d?"bg-gray-700 border-gray-600 text-gray-100 placeholder:text-gray-400":"bg-white border-gray-300"}`})}),i.jsx(ae,{})]})}),i.jsx(k,{control:g.control,name:"description",render:({field:T})=>i.jsxs(W,{children:[i.jsx(Y,{className:`transition-colors ${d?"text-gray-300":"text-gray-700"}`,children:"설명"}),i.jsx(Z,{children:i.jsx(nt,{...T,value:T.value||"",placeholder:"품목에 대한 추가 설명을 입력하세요",rows:3,className:`transition-colors ${d?"bg-gray-700 border-gray-600 text-gray-100 placeholder:text-gray-400":"bg-white border-gray-300"}`})}),i.jsx(ae,{})]})}),i.jsx(k,{control:g.control,name:"isActive",render:({field:T})=>i.jsxs(W,{className:`flex flex-row items-center justify-between rounded-lg border p-4 transition-colors ${d?"border-gray-600 bg-gray-700/50":"border-gray-200 bg-gray-50"}`,children:[i.jsxs("div",{className:"space-y-0.5",children:[i.jsx(Y,{className:`text-base transition-colors ${d?"text-gray-300":"text-gray-700"}`,children:"활성 상태"}),i.jsx("div",{className:`text-sm transition-colors ${d?"text-gray-400":"text-gray-600"}`,children:"품목을 활성화하여 발주에서 사용할 수 있도록 합니다"})]}),i.jsx(Z,{children:i.jsx(To,{checked:T.value||!1,onCheckedChange:T.onChange})})]})}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx(X,{type:"button",variant:"outline",onClick:r,disabled:w,children:"취소"}),i.jsx(X,{type:"submit",disabled:w,children:w?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"inline-block animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),e?"수정 중...":"생성 중..."]}):e?"수정":"생성"})]})]})})]})})}function Vd(){const{user:t}=No(),{toast:e}=bo(),[,r]=vo(),{theme:n}=ai(),a=n==="dark",[d,g]=J.useState(""),[y,v]=J.useState("all"),[b,u]=J.useState(null),[w,C]=J.useState("asc"),[G,T]=J.useState(!1),[Q,re]=J.useState(null),[Pe,Xe]=J.useState("table"),{data:ye={items:[],total:0},isLoading:Je}=Ye({queryKey:["/api/items",{category:y==="all"?void 0:y,searchText:d}],queryFn:async()=>{const m=new URLSearchParams({limit:"1000"});y!=="all"&&m.append("category",y),d&&m.append("searchText",d);const M=await fetch(`/api/items?${m.toString()}`);if(!M.ok)throw new Error("Failed to fetch items");return M.json()}}),{data:uo=[]}=Ye({queryKey:["/api/items/categories"]}),ue=J.useMemo(()=>{if(!ye.items||!Array.isArray(ye.items))return[];let m=ye.items;if(y!=="all"&&(m=m.filter(M=>M.category===y)),d.trim()){const M=d.toLowerCase();m=m.filter(ie=>ie.name?.toLowerCase().includes(M)||ie.category?.toLowerCase().includes(M)||ie.specification?.toLowerCase().includes(M)||ie.unit?.toLowerCase().includes(M))}return b&&(m=[...m].sort((M,ie)=>{let U=M[b],O=ie[b];return U==null&&(U=""),O==null&&(O=""),b==="unitPrice"?(U=parseFloat(U||"0"),O=parseFloat(O||"0")):b==="createdAt"||b==="updatedAt"?(U=U?new Date(U).getTime():0,O=O?new Date(O).getTime():0):(U=String(U).toLowerCase(),O=String(O).toLowerCase()),w==="asc"?U<O?-1:U>O?1:0:O<U?-1:O>U?1:0})),m},[ye.items,y,d,b,w]),mo=qe({mutationFn:async m=>{await oi("DELETE",`/api/items/${m}`)},onSuccess:()=>{e({title:"성공",description:"품목이 삭제되었습니다."}),rt.invalidateQueries({queryKey:["/api/items"]})},onError:m=>{if(m.status===401){e({title:"Unauthorized",description:"You are logged out. Logging in again...",variant:"destructive"}),setTimeout(()=>{r("/login")},500);return}e({title:"오류",description:"품목 삭제에 실패했습니다.",variant:"destructive"})}}),ne=m=>{b===m?C(w==="asc"?"desc":"asc"):(u(m),C("asc"))},se=m=>b!==m?null:w==="asc"?i.jsx(zo,{className:"h-4 w-4"}):i.jsx(Eo,{className:"h-4 w-4"}),po=()=>{re(null),T(!0)},He=m=>{re(m),T(!0)},ke=m=>{confirm("정말로 이 품목을 삭제하시겠습니까?")&&mo.mutate(m)},go=()=>{T(!1),re(null),rt.invalidateQueries({queryKey:["/api/items"]})},We=m=>({강재:"default",강판:"secondary",단열재:"outline",도장재:"destructive",마감재:"default",방수재:"secondary"})[m]||"outline";return i.jsx("div",{className:`min-h-screen transition-colors ${a?"bg-gray-900":"bg-gray-50"}`,children:i.jsxs("div",{className:"max-w-[1366px] mx-auto p-6 space-y-6",children:[i.jsx(Io,{title:"품목 관리",action:t?.role==="admin"?i.jsxs(X,{onClick:po,className:"flex items-center",children:[i.jsx(wo,{className:"h-4 w-4 mr-2"}),"품목 추가"]}):void 0}),i.jsx(_e,{className:`shadow-sm transition-colors ${a?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:i.jsx(Ze,{className:"p-4",children:i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 sm:items-center sm:justify-between",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[i.jsxs("div",{className:"relative flex-1 max-w-md",children:[i.jsx(Bo,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 transition-colors ${a?"text-gray-500":"text-gray-400"}`}),i.jsx(Ve,{placeholder:"품목명, 카테고리, 규격으로 검색...",value:d,onChange:m=>g(m.target.value),className:`pl-10 h-10 transition-colors ${a?"bg-gray-700 border-gray-600 text-gray-100 placeholder:text-gray-400":"bg-white border-gray-300"}`})]}),i.jsx("div",{className:"w-full sm:w-48",children:i.jsxs(Fe,{value:y,onValueChange:v,children:[i.jsx(Le,{className:`h-10 transition-colors ${a?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300"}`,children:i.jsx(Me,{placeholder:"카테고리 선택"})}),i.jsxs(ze,{className:`transition-colors ${a?"bg-gray-700 border-gray-600":"bg-white border-gray-200"}`,children:[i.jsx(ve,{value:"all",children:"모든 카테고리"}),uo.map(m=>i.jsx(ve,{value:m,children:m},m))]})]})})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("span",{className:`text-sm transition-colors ${a?"text-gray-400":"text-gray-600"}`,children:[ue.length,"개 품목"]}),i.jsxs("div",{className:`flex items-center rounded-lg p-1 transition-colors ${a?"bg-gray-700":"bg-gray-100"}`,children:[i.jsx(X,{variant:Pe==="table"?"default":"ghost",size:"sm",onClick:()=>Xe("table"),className:"h-8 w-8 p-0",title:"목록 보기",children:i.jsx(qo,{className:"h-4 w-4"})}),i.jsx(X,{variant:Pe==="cards"?"default":"ghost",size:"sm",onClick:()=>Xe("cards"),className:"h-8 w-8 p-0",title:"카드 보기",children:i.jsx(Vo,{className:"h-4 w-4"})})]})]})]})})}),Pe==="table"?i.jsx(_e,{className:`shadow-sm transition-colors ${a?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:i.jsx(Ze,{className:"p-0",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs(So,{children:[i.jsx(Ao,{children:i.jsxs(xe,{className:`border-b transition-colors ${a?"border-gray-600":"border-gray-200"}`,children:[i.jsx(ee,{className:`h-11 px-4 text-sm font-semibold cursor-pointer select-none transition-colors ${a?"text-gray-400 hover:bg-gray-700":"text-gray-700 hover:bg-gray-50"}`,onClick:()=>ne("name"),children:i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("span",{children:"품목명"}),se("name")]})}),i.jsx(ee,{className:`h-11 px-4 text-sm font-semibold cursor-pointer select-none transition-colors ${a?"text-gray-400 hover:bg-gray-700":"text-gray-700 hover:bg-gray-50"}`,onClick:()=>ne("category"),children:i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("span",{children:"카테고리"}),se("category")]})}),i.jsx(ee,{className:`h-11 px-4 text-sm font-semibold cursor-pointer select-none transition-colors ${a?"text-gray-400 hover:bg-gray-700":"text-gray-700 hover:bg-gray-50"}`,onClick:()=>ne("specification"),children:i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("span",{children:"규격"}),se("specification")]})}),i.jsx(ee,{className:`h-11 px-4 text-sm font-semibold cursor-pointer select-none transition-colors ${a?"text-gray-400 hover:bg-gray-700":"text-gray-700 hover:bg-gray-50"}`,onClick:()=>ne("unit"),children:i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("span",{children:"단위"}),se("unit")]})}),i.jsx(ee,{className:`h-11 px-4 text-sm font-semibold cursor-pointer select-none transition-colors ${a?"text-gray-400 hover:bg-gray-700":"text-gray-700 hover:bg-gray-50"}`,onClick:()=>ne("standardPrice"),children:i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("span",{children:"단가"}),se("standardPrice")]})}),i.jsx(ee,{className:`h-11 px-4 text-sm font-semibold cursor-pointer select-none transition-colors ${a?"text-gray-400 hover:bg-gray-700":"text-gray-700 hover:bg-gray-50"}`,onClick:()=>ne("createdAt"),children:i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("span",{children:"등록일"}),se("createdAt")]})}),t?.role==="admin"&&i.jsx(ee,{className:`h-11 px-4 text-sm font-semibold text-right transition-colors ${a?"text-gray-400":"text-gray-700"}`,children:"관리"})]})}),i.jsx(jo,{children:Je?[...Array(5)].map((m,M)=>i.jsxs(xe,{children:[i.jsx(z,{children:i.jsx("div",{className:`h-4 rounded animate-pulse ${a?"bg-gray-600":"bg-gray-200"}`})}),i.jsx(z,{children:i.jsx("div",{className:`h-4 rounded animate-pulse ${a?"bg-gray-600":"bg-gray-200"}`})}),i.jsx(z,{children:i.jsx("div",{className:`h-4 rounded animate-pulse ${a?"bg-gray-600":"bg-gray-200"}`})}),i.jsx(z,{children:i.jsx("div",{className:`h-4 rounded animate-pulse ${a?"bg-gray-600":"bg-gray-200"}`})}),i.jsx(z,{children:i.jsx("div",{className:`h-4 rounded animate-pulse ${a?"bg-gray-600":"bg-gray-200"}`})}),i.jsx(z,{children:i.jsx("div",{className:`h-4 rounded animate-pulse ${a?"bg-gray-600":"bg-gray-200"}`})}),t?.role==="admin"&&i.jsx(z,{})]},M)):ue.length===0?i.jsx(xe,{children:i.jsx(z,{colSpan:t?.role==="admin"?7:6,className:`text-center py-8 transition-colors ${a?"text-gray-400":"text-gray-500"}`,children:d||y!=="all"?"검색 결과가 없습니다":"등록된 품목이 없습니다"})}):ue.map(m=>i.jsxs(xe,{className:`h-12 border-b transition-colors ${a?"hover:bg-gray-700 border-gray-600":"hover:bg-gray-50 border-gray-100"}`,children:[i.jsx(z,{className:"py-2 px-4",children:i.jsx("div",{className:`text-sm font-medium cursor-pointer hover:underline overflow-hidden text-ellipsis whitespace-nowrap transition-colors ${a?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-800"}`,onClick:()=>r(`/items/${m.id}`),title:m.name,children:m.name})}),i.jsx(z,{className:"py-2 px-4",children:m.category?i.jsx(Ce,{variant:We(m.category),className:"text-xs",children:m.category}):"-"}),i.jsx(z,{className:"py-2 px-4",children:i.jsx("div",{className:`text-sm max-w-32 truncate transition-colors ${a?"text-gray-300":"text-gray-600"}`,title:m.specification,children:m.specification||"-"})}),i.jsx(z,{className:"py-2 px-4",children:i.jsx("div",{className:`text-sm transition-colors ${a?"text-gray-300":"text-gray-600"}`,children:m.unit||"-"})}),i.jsx(z,{className:"py-2 px-4",children:i.jsx("div",{className:`text-sm font-semibold transition-colors ${a?"text-blue-400":"text-blue-600"}`,children:et(m.standardPrice)})}),i.jsx(z,{className:"py-2 px-4",children:i.jsx("div",{className:`text-sm transition-colors ${a?"text-gray-300":"text-gray-600"}`,children:tt(m.createdAt)})}),t?.role==="admin"&&i.jsx(z,{className:"py-2 px-4",children:i.jsxs("div",{className:"flex items-center justify-end gap-1",children:[i.jsx(X,{variant:"ghost",size:"sm",onClick:()=>He(m),className:"h-7 w-7 p-0",title:"수정",children:i.jsx(st,{className:"h-3 w-3"})}),i.jsx(X,{variant:"ghost",size:"sm",onClick:()=>ke(m.id),className:`h-7 w-7 p-0 transition-colors ${a?"text-red-400 hover:text-red-300":"text-red-600 hover:text-red-700"}`,title:"삭제",children:i.jsx(it,{className:"h-3 w-3"})})]})})]},m.id))})]})})})}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:Je?[...Array(6)].map((m,M)=>i.jsx(_e,{className:`p-6 shadow-sm transition-colors ${a?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:i.jsxs("div",{className:"animate-pulse",children:[i.jsx("div",{className:`h-4 rounded mb-3 ${a?"bg-gray-600":"bg-gray-200"}`}),i.jsx("div",{className:`h-3 rounded w-3/4 mb-2 ${a?"bg-gray-600":"bg-gray-200"}`}),i.jsx("div",{className:`h-3 rounded w-1/2 ${a?"bg-gray-600":"bg-gray-200"}`})]})},M)):ue.length===0?i.jsx("div",{className:`col-span-full text-center py-8 transition-colors ${a?"text-gray-400":"text-gray-500"}`,children:d||y!=="all"?"검색 결과가 없습니다":"등록된 품목이 없습니다"}):ue.map(m=>i.jsxs(_e,{className:`p-4 hover:shadow-md transition-shadow shadow-sm ${a?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:`font-semibold cursor-pointer truncate transition-colors ${a?"text-gray-100 hover:text-blue-400":"text-gray-900 hover:text-blue-600"}`,onClick:()=>r(`/items/${m.id}`),children:m.name}),m.category&&i.jsx(Ce,{variant:We(m.category),className:"text-xs mt-1",children:m.category})]}),m.specification&&i.jsx(Ce,{variant:"outline",className:"text-xs ml-2 flex-shrink-0 max-w-[120px] truncate",title:m.specification,children:m.specification})]}),i.jsxs("div",{className:"space-y-2 mb-3",children:[i.jsxs("div",{className:`flex items-center text-sm gap-2 transition-colors ${a?"text-gray-400":"text-gray-600"}`,children:[i.jsx(Fo,{className:"h-4 w-4"}),i.jsx("span",{className:"font-medium",children:"규격:"}),i.jsx("span",{className:"ml-1",children:m.specification||"-"})]}),i.jsxs("div",{className:`flex items-center text-sm gap-2 transition-colors ${a?"text-gray-400":"text-gray-600"}`,children:[i.jsx(Lo,{className:"h-4 w-4"}),i.jsx("span",{className:"font-medium",children:"단위:"}),i.jsx("span",{className:"ml-1",children:m.unit||"-"})]}),i.jsxs("div",{className:"flex items-center text-sm gap-2",children:[i.jsx(Mo,{className:`h-4 w-4 transition-colors ${a?"text-gray-400":"text-gray-600"}`}),i.jsx("span",{className:`font-medium transition-colors ${a?"text-gray-400":"text-gray-600"}`,children:"단가:"}),i.jsx("span",{className:`ml-1 font-semibold transition-colors ${a?"text-blue-400":"text-blue-600"}`,children:et(m.standardPrice)})]})]}),i.jsx("div",{className:`flex items-center justify-between text-xs mb-3 transition-colors ${a?"text-gray-400":"text-gray-500"}`,children:i.jsxs("span",{children:["등록일: ",tt(m.createdAt)]})}),t?.role==="admin"&&i.jsxs("div",{className:`flex items-center justify-end -space-x-1 pt-2 border-t transition-colors ${a?"border-gray-600":"border-gray-200"}`,children:[i.jsx(X,{variant:"ghost",size:"sm",onClick:()=>He(m),className:`h-8 w-8 p-0 transition-colors ${a?"text-blue-400 hover:text-blue-300 hover:bg-blue-900/20":"text-blue-600 hover:text-blue-700 hover:bg-blue-50"}`,title:"수정",children:i.jsx(st,{className:"h-3 w-3"})}),i.jsx(X,{variant:"ghost",size:"sm",onClick:()=>ke(m.id),className:`h-8 w-8 p-0 transition-colors ${a?"text-red-400 hover:text-red-300 hover:bg-red-900/20":"text-red-600 hover:text-red-700 hover:bg-red-50"}`,title:"삭제",children:i.jsx(it,{className:"h-3 w-3"})})]})]},m.id))}),G&&i.jsx(fd,{isOpen:G,item:Q,onClose:()=>T(!1),onSuccess:go})]})})}export{Vd as default};
