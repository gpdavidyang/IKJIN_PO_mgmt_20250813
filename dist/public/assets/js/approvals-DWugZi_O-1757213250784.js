import{c as we,W as Se,r as a,af as Ae,j as e,aX as Te,_ as Y,$ as ke,aY as De,aZ as Re,a_ as Le,d as Ie,u as ie,g as Pe,p as H,q as re,s as l,ap as ne,B as x,ah as _e,b as Oe,t as o,a as qe,f as I,I as Ke,ai as P,aj as _,ak as O,n as C,A as ce,X as de,E as G,k as xe}from"./index-BfDc6Omt-1757213250784.js";import{T as Me,a as Ee,b as W,c as X}from"./tabs-BQBrwsH2-1757213250784.js";import{S as Fe,a as ze,b as Be,c as $e,d as D}from"./select-BLTlOVj9-1757213250784.js";import{T as oe,a as me,b as $,c as U,d as he,e as n}from"./table-DhBDkVL0-1757213250784.js";import{T as Qe}from"./triangle-alert-CrwRroiq-1757213250784.js";import{C as Ve}from"./calendar-Bk7TvZtk-1757213250784.js";import{D as He}from"./dollar-sign-CphQbANq-1757213250784.js";import{F as Ge}from"./filter-9VTB1hRo-1757213250784.js";import{C as je}from"./chevron-down-C_SK49in-1757213250784.js";import{S as We}from"./search-DmjV-y6s-1757213250784.js";import{L as Xe}from"./list-FiavMc-U-1757213250784.js";import{G as Ue}from"./grid-3x3-B90QpvZT-1757213250784.js";import{C as Ye}from"./chevron-up-DBeMyJPH-1757213250784.js";import"./index-38EM6Lo0-1757213250784.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=we("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);var Z="Collapsible",[Je,vs]=Se(Z),[es,J]=Je(Z),pe=a.forwardRef((t,g)=>{const{__scopeCollapsible:j,open:i,defaultOpen:r,disabled:c,onOpenChange:p,...v}=t,[w=!1,f]=Ae({prop:i,defaultProp:r,onChange:p});return e.jsx(es,{scope:j,disabled:c,contentId:Te(),open:w,onOpenToggle:a.useCallback(()=>f(R=>!R),[f]),children:e.jsx(Y.div,{"data-state":se(w),"data-disabled":c?"":void 0,...v,ref:g})})});pe.displayName=Z;var ue="CollapsibleTrigger",ge=a.forwardRef((t,g)=>{const{__scopeCollapsible:j,...i}=t,r=J(ue,j);return e.jsx(Y.button,{type:"button","aria-controls":r.contentId,"aria-expanded":r.open||!1,"data-state":se(r.open),"data-disabled":r.disabled?"":void 0,disabled:r.disabled,...i,ref:g,onClick:ke(t.onClick,r.onOpenToggle)})});ge.displayName=ue;var ee="CollapsibleContent",Ne=a.forwardRef((t,g)=>{const{forceMount:j,...i}=t,r=J(ee,t.__scopeCollapsible);return e.jsx(De,{present:j||r.open,children:({present:c})=>e.jsx(ss,{...i,ref:g,present:c})})});Ne.displayName=ee;var ss=a.forwardRef((t,g)=>{const{__scopeCollapsible:j,present:i,children:r,...c}=t,p=J(ee,j),[v,w]=a.useState(i),f=a.useRef(null),R=Re(g,f),S=a.useRef(0),q=S.current,T=a.useRef(0),L=T.current,u=p.open||v,K=a.useRef(u),N=a.useRef(void 0);return a.useEffect(()=>{const m=requestAnimationFrame(()=>K.current=!1);return()=>cancelAnimationFrame(m)},[]),Le(()=>{const m=f.current;if(m){N.current=N.current||{transitionDuration:m.style.transitionDuration,animationName:m.style.animationName},m.style.transitionDuration="0s",m.style.animationName="none";const M=m.getBoundingClientRect();S.current=M.height,T.current=M.width,K.current||(m.style.transitionDuration=N.current.transitionDuration,m.style.animationName=N.current.animationName),w(i)}},[p.open,i]),e.jsx(Y.div,{"data-state":se(p.open),"data-disabled":p.disabled?"":void 0,id:p.contentId,hidden:!u,...c,ref:R,style:{"--radix-collapsible-content-height":q?`${q}px`:void 0,"--radix-collapsible-content-width":L?`${L}px`:void 0,...t.style},children:u&&r})});function se(t){return t?"open":"closed"}var as=pe;const ts=as,ls=ge,is=Ne;function fs(){const{user:t,isAuthenticated:g}=Ie(),[,j]=ie(),[i,r]=a.useState(""),[c,p]=a.useState("all"),[v,w]=a.useState("table"),[f,R]=a.useState(!1),[S,q]=a.useState("orderDate"),[T,L]=a.useState("desc"),u=Pe(),[,K]=ie(),{data:N,isLoading:m}=H({queryKey:["/api/approvals/stats"]}),{data:M,isLoading:be}=H({queryKey:["/api/approvals/pending"]}),{data:ve,isLoading:fe}=H({queryKey:["/api/approvals/history"]}),Q=re({mutationFn:s=>xe("POST",`/api/approvals/${s}/approve`,{note:"승인 처리되었습니다."}),onSuccess:()=>{u.invalidateQueries({queryKey:["/api/approvals/stats"]}),u.invalidateQueries({queryKey:["/api/approvals/pending"]}),u.invalidateQueries({queryKey:["/api/approvals/history"]})}}),V=re({mutationFn:s=>xe("POST",`/api/approvals/${s}/reject`,{note:"반려 처리되었습니다."}),onSuccess:()=>{u.invalidateQueries({queryKey:["/api/approvals/stats"]}),u.invalidateQueries({queryKey:["/api/approvals/pending"]}),u.invalidateQueries({queryKey:["/api/approvals/history"]})}}),E=s=>{switch(s){case"pending":return e.jsx(C,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-200",children:"승인 대기"});case"approved":return e.jsx(C,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"승인 완료"});case"draft":return e.jsx(C,{variant:"outline",className:"bg-gray-50 text-gray-700 border-gray-200",children:"작성중"});case"sent":return e.jsx(C,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:"발송완료"});case"completed":return e.jsx(C,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"완료"});default:return e.jsx(C,{variant:"secondary",children:s})}},F=s=>{if(!s)return 0;const b=Math.abs(new Date().getTime()-new Date(s).getTime());return Math.ceil(b/(1e3*60*60*24))},ae=s=>{Q.mutate(s)},te=s=>{V.mutate(s)},ye=s=>{S===s?L(T==="asc"?"desc":"asc"):(q(s),L("asc"))},A=s=>{K(`/orders/${s}/standard`)},le=s=>[...s].sort((b,k)=>{let d=b[S],y=k[S];return d instanceof Date&&(d=d.getTime()),y instanceof Date&&(y=y.getTime()),typeof d=="string"&&(d=d.toLowerCase()),typeof y=="string"&&(y=y.toLowerCase()),T==="asc"?d>y?1:-1:d<y?1:-1}),h=({field:s,children:b})=>e.jsx(U,{className:"cursor-pointer hover:bg-gray-100 select-none",onClick:()=>ye(s),children:e.jsxs("div",{className:"flex items-center gap-1",children:[b,S===s&&(T==="asc"?e.jsx(Ye,{className:"h-4 w-4"}):e.jsx(je,{className:"h-4 w-4"}))]})}),z=le(M?.filter(s=>{if(!s)return!1;const b=(s.orderNumber||"").toLowerCase(),k=i===""||b.includes(i.toLowerCase()),d=c==="all"||s.status===c;return k&&d})||[]),B=le(ve?.filter(s=>{if(!s)return!1;const b=(s.orderNumber||"").toLowerCase(),k=i===""||b.includes(i.toLowerCase()),d=c==="all"||s.status===c;return k&&d})||[]),Ce=t&&["admin","executive","hq_management","project_manager"].includes(t.role);return!g||!t?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs(l,{className:"p-8 text-center",children:[e.jsx(ne,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"로그인이 필요합니다"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"승인 관리 기능을 사용하려면 로그인해주세요."}),e.jsx(x,{onClick:()=>j("/login"),children:"로그인하기"})]})}):Ce?e.jsx(_e,{children:e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-[1366px] mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Oe,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"승인 관리"}),e.jsx("p",{className:"text-sm text-gray-600",children:"발주서 승인 요청을 검토하고 처리합니다."})]})]}),e.jsx(l,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200",children:e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Ze,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-2",children:"승인 관리 화면 사용법"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-blue-800",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium mb-1",children:"• 승인 대기 탭:"}),e.jsxs("ul",{className:"text-xs space-y-0.5 ml-3",children:[e.jsx("li",{children:"- 승인 대기 중인 발주서를 확인하고 처리"}),e.jsx("li",{children:"- ✓ 버튼으로 승인, ✗ 버튼으로 반려"}),e.jsx("li",{children:"- 👁 버튼으로 발주서 상세 내용 확인"}),e.jsx("li",{children:"- 3일 이상 대기 시 '지연' 표시"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium mb-1",children:"• 승인 내역 탭:"}),e.jsxs("ul",{className:"text-xs space-y-0.5 ml-3",children:[e.jsx("li",{children:"- 승인/반려 처리된 발주서 이력 조회"}),e.jsx("li",{children:"- 처리 결과 및 날짜 확인 가능"}),e.jsx("li",{children:"- 필터 기능으로 상태별 검색 지원"}),e.jsx("li",{children:"- 테이블/카드 형태 보기 모드 선택"})]})]})]}),e.jsxs("div",{className:"mt-3 p-2 bg-blue-100/50 rounded text-xs text-blue-700",children:[e.jsx("strong",{children:"💡 Tip:"})," 발주번호를 클릭하면 발주서 상세 페이지로 이동하여 모든 첨부서류와 상세 내용을 확인할 수 있습니다. 승인 전 반드시 내용을 검토하세요."]})]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(l,{className:"shadow-sm",children:e.jsx(o,{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qe,{className:"h-5 w-5 text-orange-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"승인 대기"}),e.jsxs("p",{className:"text-xl font-bold",children:[N?.pendingCount||0,"건"]})]})]})})}),e.jsx(l,{className:"shadow-sm",children:e.jsx(o,{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qe,{className:"h-5 w-5 text-red-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"긴급 승인"}),e.jsxs("p",{className:"text-xl font-bold",children:[N?.urgentCount||0,"건"]})]})]})})}),e.jsx(l,{className:"shadow-sm",children:e.jsx(o,{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"h-5 w-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"평균 대기일"}),e.jsxs("p",{className:"text-xl font-bold",children:[N?.averageWaitDays||0,"일"]})]})]})})}),e.jsx(l,{className:"shadow-sm",children:e.jsx(o,{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{className:"h-5 w-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"대기 금액"}),e.jsx("p",{className:"text-xl font-bold text-blue-600 font-semibold",children:I(N?.pendingAmount||0)})]})]})})})]}),e.jsx(ts,{open:f,onOpenChange:R,children:e.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx(ls,{asChild:!0,children:e.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"필터 및 검색"})]}),e.jsx(je,{className:`h-4 w-4 text-gray-600 transition-transform ${f?"rotate-180":""}`})]})}),e.jsx(is,{children:e.jsx("div",{className:"p-4 border-t border-gray-200 space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(We,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(Ke,{placeholder:"발주번호로 검색...",value:i,onChange:s=>r(s.target.value),className:"pl-10"})]}),e.jsxs(Fe,{value:c,onValueChange:p,children:[e.jsx(ze,{children:e.jsx(Be,{placeholder:"상태 선택"})}),e.jsxs($e,{children:[e.jsx(D,{value:"all",children:"전체 상태"}),e.jsx(D,{value:"pending",children:"승인 대기"}),e.jsx(D,{value:"approved",children:"승인 완료"}),e.jsx(D,{value:"draft",children:"작성중"}),e.jsx(D,{value:"sent",children:"발송완료"}),e.jsx(D,{value:"completed",children:"완료"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{variant:"outline",size:"sm",onClick:()=>{r(""),p("all")},children:"초기화"}),e.jsxs("div",{className:"bg-gray-100 rounded p-1 flex",children:[e.jsxs(P,{children:[e.jsx(_,{asChild:!0,children:e.jsx(x,{variant:v==="table"?"default":"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>w("table"),children:e.jsx(Xe,{className:"h-4 w-4"})})}),e.jsx(O,{children:"테이블 보기"})]}),e.jsxs(P,{children:[e.jsx(_,{asChild:!0,children:e.jsx(x,{variant:v==="card"?"default":"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>w("card"),children:e.jsx(Ue,{className:"h-4 w-4"})})}),e.jsx(O,{children:"카드 보기"})]})]})]})]})})})]})}),e.jsxs(Me,{defaultValue:"pending",className:"w-full",children:[e.jsxs(Ee,{children:[e.jsxs(W,{value:"pending",children:["승인 대기 (",z.length,")"]}),e.jsxs(W,{value:"history",children:["승인 내역 (",B.length,")"]}),e.jsx(W,{value:"guide",children:"승인 프로세스 가이드"})]}),e.jsx(X,{value:"pending",className:"space-y-4",children:be?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"승인 대기 목록을 불러오는 중..."})}):z.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"승인 대기 중인 발주서가 없습니다."})}):v==="table"?e.jsx(l,{className:"shadow-sm",children:e.jsxs(oe,{children:[e.jsx(me,{children:e.jsxs($,{children:[e.jsx(h,{field:"orderNumber",children:"발주번호"}),e.jsx(h,{field:"projectId",children:"프로젝트"}),e.jsx(h,{field:"status",children:"상태"}),e.jsx(h,{field:"createdAt",children:"신청일"}),e.jsx(h,{field:"totalAmount",children:"금액"}),e.jsx(h,{field:"createdAt",children:"대기일"}),e.jsx(U,{className:"text-center",children:"작업"})]})}),e.jsx(he,{children:z.map(s=>e.jsxs($,{className:"hover:bg-gray-50",children:[e.jsx(n,{className:"font-medium",children:e.jsx("button",{onClick:()=>A(s.id),className:"text-blue-600 hover:text-blue-800 hover:underline",children:s.orderNumber||"-"})}),e.jsxs(n,{children:["프로젝트 ID: ",s.projectId]}),e.jsx(n,{children:E(s.status)}),e.jsx(n,{children:s.createdAt?new Date(s.createdAt).toLocaleDateString("ko-KR"):"-"}),e.jsx(n,{className:"text-blue-600 font-semibold",children:I(s.totalAmount)}),e.jsx(n,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{children:[F(s.createdAt),"일"]}),F(s.createdAt)>3&&e.jsx(C,{variant:"destructive",className:"text-xs",children:"지연"})]})}),e.jsx(n,{children:e.jsxs("div",{className:"flex items-center justify-center -space-x-1",children:[e.jsxs(P,{children:[e.jsx(_,{asChild:!0,children:e.jsx(x,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0 hover:bg-green-50",onClick:()=>ae(s.id),disabled:Q.isPending,children:e.jsx(ce,{className:"h-4 w-4 text-green-600"})})}),e.jsx(O,{children:"승인"})]}),e.jsxs(P,{children:[e.jsx(_,{asChild:!0,children:e.jsx(x,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0 hover:bg-red-50",onClick:()=>te(s.id),disabled:V.isPending,children:e.jsx(de,{className:"h-4 w-4 text-red-600"})})}),e.jsx(O,{children:"반려"})]}),e.jsxs(P,{children:[e.jsx(_,{asChild:!0,children:e.jsx(x,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0 hover:bg-blue-50",onClick:()=>A(s.id),children:e.jsx(G,{className:"h-4 w-4 text-blue-600"})})}),e.jsx(O,{children:"상세보기"})]})]})})]},s.id))})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:z.map(s=>e.jsx(l,{className:"shadow-sm",children:e.jsxs(o,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:e.jsx("button",{onClick:()=>A(s.id),className:"text-blue-600 hover:text-blue-800 hover:underline",children:s.orderNumber||"-"})}),E(s.status),F(s.createdAt)>3&&e.jsx(C,{variant:"destructive",children:"지연"})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["프로젝트 ID: ",s.projectId]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 mb-3",children:[e.jsxs("span",{children:["신청일: ",s.createdAt?new Date(s.createdAt).toLocaleDateString("ko-KR"):"-"]}),e.jsxs("span",{children:["대기: ",F(s.createdAt),"일"]})]}),e.jsx("p",{className:"text-sm font-medium text-blue-600 mb-3",children:I(s.totalAmount)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(x,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>ae(s.id),disabled:Q.isPending,children:[e.jsx(ce,{className:"h-4 w-4 mr-1"}),"승인"]}),e.jsxs(x,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>te(s.id),disabled:V.isPending,children:[e.jsx(de,{className:"h-4 w-4 mr-1"}),"반려"]})]})]})},s.id))})}),e.jsx(X,{value:"history",className:"space-y-4",children:fe?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"승인 내역을 불러오는 중..."})}):B.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"승인 내역이 없습니다."})}):v==="table"?e.jsx(l,{className:"shadow-sm",children:e.jsxs(oe,{children:[e.jsx(me,{children:e.jsxs($,{children:[e.jsx(h,{field:"orderNumber",children:"발주번호"}),e.jsx(h,{field:"projectId",children:"프로젝트"}),e.jsx(h,{field:"status",children:"상태"}),e.jsx(h,{field:"updatedAt",children:"처리일"}),e.jsx(h,{field:"totalAmount",children:"금액"}),e.jsx(U,{className:"text-center",children:"작업"})]})}),e.jsx(he,{children:B.map(s=>e.jsxs($,{className:"hover:bg-gray-50",children:[e.jsx(n,{className:"font-medium",children:e.jsx("button",{onClick:()=>A(s.id),className:"text-blue-600 hover:text-blue-800 hover:underline",children:s.orderNumber||"-"})}),e.jsxs(n,{children:["프로젝트 ID: ",s.projectId]}),e.jsx(n,{children:E(s.status)}),e.jsx(n,{children:s.updatedAt?new Date(s.updatedAt).toLocaleDateString("ko-KR"):"-"}),e.jsx(n,{className:"text-blue-600 font-semibold",children:I(s.totalAmount)}),e.jsx(n,{className:"text-center",children:e.jsx(x,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0",onClick:()=>A(s.id),children:e.jsx(G,{className:"h-4 w-4"})})})]},s.id))})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:B.map(s=>e.jsx(l,{className:"hover:shadow-md transition-shadow shadow-sm",children:e.jsxs(o,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:e.jsx("button",{onClick:()=>A(s.id),className:"text-blue-600 hover:text-blue-800 hover:underline",children:s.orderNumber||"-"})}),E(s.status)]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["프로젝트 ID: ",s.projectId]}),e.jsx("div",{className:"flex items-center gap-4 text-xs text-gray-500 mb-3",children:e.jsxs("span",{children:["처리일: ",s.updatedAt?new Date(s.updatedAt).toLocaleDateString("ko-KR"):"-"]})}),e.jsx("p",{className:"text-sm font-medium text-blue-600 mb-3",children:I(s.totalAmount)}),e.jsxs(x,{size:"sm",variant:"outline",className:"w-full",onClick:()=>A(s.id),children:[e.jsx(G,{className:"h-4 w-4 mr-1"}),"상세보기"]})]})},s.id))})}),e.jsxs(X,{value:"guide",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsx(l,{className:"shadow-sm",children:e.jsxs(o,{className:"p-4",children:[e.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-3",children:"승인 프로세스"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"border-l-4 border-blue-500 pl-3",children:[e.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1",children:"1. 실무자 (작성)"}),e.jsx("p",{className:"text-xs text-gray-600",children:"현장 실무자가 필요한 자재 및 장비에 대한 발주서를 작성하고 제출합니다."})]}),e.jsxs("div",{className:"border-l-4 border-yellow-500 pl-3",children:[e.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1",children:"2. 현장 책임자 (작성 or 승인)"}),e.jsx("p",{className:"text-xs text-gray-600",children:"현장소장이 발주 필요성과 시급성을 검토하고 승인하거나 추가 작성을 진행합니다."})]}),e.jsxs("div",{className:"border-l-4 border-orange-500 pl-3",children:[e.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1",children:"3. 본사 관리부 (승인)"}),e.jsx("p",{className:"text-xs text-gray-600",children:"본사 관리부에서 계약 조건, 업체 신뢰성 및 예산을 검토하고 승인합니다."})]}),e.jsxs("div",{className:"border-l-4 border-green-500 pl-3",children:[e.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1",children:"4. 임원 또는 대표 (승인)"}),e.jsx("p",{className:"text-xs text-gray-600",children:"일정 금액 이상의 발주는 임원 또는 대표이사의 최종 승인이 필요합니다."})]}),e.jsxs("div",{className:"border-l-4 border-purple-500 pl-3",children:[e.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1",children:"5. 발주 실행"}),e.jsx("p",{className:"text-xs text-gray-600",children:"승인 완료 후 협력업체에 발주서를 전송하고 자재 공급 계약을 체결합니다."})]})]})]})}),e.jsx(l,{className:"shadow-sm",children:e.jsxs(o,{className:"p-4",children:[e.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-3",children:"승인 정책"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1",children:"금액별 승인 권한"}),e.jsxs("div",{className:"space-y-1 text-xs text-gray-600",children:[e.jsx("p",{children:"• 500만원 미만: 현장 책임자 승인"}),e.jsx("p",{children:"• 500만원 ~ 3,000만원: 본사 관리부 + 현장 책임자 승인"}),e.jsx("p",{children:"• 3,000만원 ~ 1억원: 임원 승인 필요"}),e.jsx("p",{children:"• 1억원 이상: 대표이사 승인 필요"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1",children:"승인 기한"}),e.jsxs("div",{className:"space-y-1 text-xs text-gray-600",children:[e.jsx("p",{children:"• 일반 자재: 영업일 기준 3일 이내"}),e.jsx("p",{children:"• 긴급 현장: 당일 또는 익일 처리"}),e.jsx("p",{children:"• 고액 장비: 영업일 기준 7일 이내"}),e.jsx("p",{children:"• 특수 자재: 영업일 기준 5일 이내"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1",children:"필수 첨부 서류"}),e.jsxs("div",{className:"space-y-1 text-xs text-gray-600",children:[e.jsx("p",{children:"• 견적서 (3사 이상 비교 권장)"}),e.jsx("p",{children:"• 협력업체 등록증 (신규 업체)"}),e.jsx("p",{children:"• 자재/장비 사양서 및 카탈로그"}),e.jsx("p",{children:"• 품질시험성적서 (구조 자재)"}),e.jsx("p",{children:"• 계약서 초안 (고액 발주)"})]})]})]})]})}),e.jsx(l,{className:"shadow-sm",children:e.jsxs(o,{className:"p-4",children:[e.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-3",children:"승인 원칙"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1",children:"투명성"}),e.jsx("p",{className:"text-xs text-gray-600",children:"모든 승인 과정과 결정 근거를 명확히 기록하고 공유합니다."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1",children:"공정성"}),e.jsx("p",{className:"text-xs text-gray-600",children:"동일한 기준과 절차를 모든 발주에 일관되게 적용합니다."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1",children:"신속성"}),e.jsx("p",{className:"text-xs text-gray-600",children:"정해진 기한 내에 신속하고 정확한 검토를 수행합니다."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1",children:"책임성"}),e.jsx("p",{className:"text-xs text-gray-600",children:"각 승인자는 자신의 결정에 대해 명확한 책임을 집니다."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1",children:"경제성"}),e.jsx("p",{className:"text-xs text-gray-600",children:"최적의 비용 대비 효과를 고려한 합리적 승인을 추구합니다."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1",children:"리스크 관리"}),e.jsx("p",{className:"text-xs text-gray-600",children:"잠재적 위험 요소를 사전에 식별하고 대응 방안을 검토합니다."})]})]})]})}),e.jsx(l,{className:"shadow-sm",children:e.jsxs(o,{className:"p-4",children:[e.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-3",children:"역할과 책임"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"border border-gray-200 rounded p-2",children:[e.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1",children:"현장 실무자"}),e.jsxs("div",{className:"space-y-0.5 text-xs text-gray-600",children:[e.jsx("p",{children:"• 현장 필요 자재 및 장비 파악"}),e.jsx("p",{children:"• 정확한 규격 및 수량 산정"}),e.jsx("p",{children:"• 납기 일정 및 현장 여건 고려"}),e.jsx("p",{children:"• 견적서 수집 및 비교 검토"})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded p-2",children:[e.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1",children:"현장 책임자"}),e.jsxs("div",{className:"space-y-0.5 text-xs text-gray-600",children:[e.jsx("p",{children:"• 현장 발주 필요성 및 시급성 검토"}),e.jsx("p",{children:"• 공사 일정 대비 자재 투입 계획"}),e.jsx("p",{children:"• 현장 예산 범위 내 발주 확인"}),e.jsx("p",{children:"• 품질 및 안전 기준 적합성 검증"})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded p-2",children:[e.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1",children:"본사 관리부"}),e.jsxs("div",{className:"space-y-0.5 text-xs text-gray-600",children:[e.jsx("p",{children:"• 협력업체 신용도 및 이력 확인"}),e.jsx("p",{children:"• 계약 조건 및 법적 검토"}),e.jsx("p",{children:"• 전체 프로젝트 예산 대비 적정성"}),e.jsx("p",{children:"• 회계 처리 및 세무 검토"})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded p-2",children:[e.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1",children:"임원 / 대표이사"}),e.jsxs("div",{className:"space-y-0.5 text-xs text-gray-600",children:[e.jsx("p",{children:"• 회사 경영 전략 부합성 검토"}),e.jsx("p",{children:"• 고액 발주 최종 승인 결정"}),e.jsx("p",{children:"• 프로젝트 수익성 및 리스크 평가"}),e.jsx("p",{children:"• 발주 정책 수립 및 변경 결정"})]})]})]})]})})]}),e.jsx(l,{className:"bg-blue-50 border-blue-200 shadow-sm",children:e.jsxs(o,{className:"p-4",children:[e.jsx("h2",{className:"text-sm font-medium text-blue-900 mb-3",children:"승인 시 주의사항"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-blue-900 mb-1",children:"승인 전 확인사항"}),e.jsxs("div",{className:"space-y-0.5 text-xs text-blue-800",children:[e.jsx("p",{children:"• 자재/장비 규격 및 수량의 정확성"}),e.jsx("p",{children:"• 현장 납기 일정과의 부합성"}),e.jsx("p",{children:"• 프로젝트 예산 범위 내 발주 확인"}),e.jsx("p",{children:"• 협력업체 신용도 및 공급 능력"}),e.jsx("p",{children:"• 품질 기준 및 안전 규정 충족"}),e.jsx("p",{children:"• 건설업법 및 관련 법규 준수"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-blue-900 mb-1",children:"반려 사유"}),e.jsxs("div",{className:"space-y-0.5 text-xs text-blue-800",children:[e.jsx("p",{children:"• 자재 규격 또는 수량 정보 부정확"}),e.jsx("p",{children:"• 프로젝트 예산 초과 또는 미승인"}),e.jsx("p",{children:"• 협력업체 등록 미완료 또는 신용도 미달"}),e.jsx("p",{children:"• 현장 납기와 공급 일정 불일치"}),e.jsx("p",{children:"• 품질 기준 미달 또는 검증서류 부족"}),e.jsx("p",{children:"• 건설업법 위반 또는 안전 규정 미준수"})]})]})]}),e.jsx("div",{className:"mt-3 p-2 bg-blue-100 rounded",children:e.jsxs("p",{className:"text-xs text-blue-800",children:[e.jsx("strong",{children:"팁:"})," 승인 지연을 방지하려면 자재 규격과 수량을 정확히 산정하고, 현장 일정과 납기를 충분히 검토하세요. 긴급 현장 발주의 경우 현장소장 및 본사 관리부와 사전 협의하시기 바랍니다."]})})]})})]})]})]})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs(l,{className:"p-8 text-center",children:[e.jsx(ne,{className:"h-16 w-16 mx-auto text-red-400 mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"접근 권한이 없습니다"}),e.jsx("p",{className:"text-gray-600 mb-2",children:"승인 관리 기능은 다음 역할의 사용자만 이용할 수 있습니다:"}),e.jsxs("ul",{className:"text-sm text-gray-500 mb-4",children:[e.jsx("li",{children:"• 관리자 (admin)"}),e.jsx("li",{children:"• 임원 (executive)"}),e.jsx("li",{children:"• 본사 관리 (hq_management)"}),e.jsx("li",{children:"• 프로젝트 매니저 (project_manager)"})]}),e.jsxs("p",{className:"text-xs text-gray-400 mb-4",children:["현재 권한: ",t.role]}),e.jsx(x,{variant:"outline",onClick:()=>j("/"),children:"홈으로 돌아가기"})]})})}export{fs as default};
