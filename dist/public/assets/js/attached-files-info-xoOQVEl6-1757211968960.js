import{c as ie,e as re,g as he,r as k,p as le,q as M,j as e,s as _,G as Z,H as J,F as A,t as X,B as y,J as p,I as S,n as j,A as K,X as V,k as b,x as I,bq as ce,P as Ne,a as be,d as we,h as De,N as de,U as qe,w as G}from"./index-DSMc0hwj-1757211968960.js";import{S as O,a as z,b as B,c as H,d as C}from"./select-BiVFjcIA-1757211968960.js";import{T as L}from"./textarea-D5vfdmoU-1757211968960.js";import{D as Y,f as Fe,a as ee,b as se,c as te}from"./dialog-BZBxfzOI-1757211968960.js";import{U as Se}from"./upload-DmjcF9qn-1757211968960.js";import{C as ae}from"./calendar-D1sWkh5a-1757211968960.js";import{D as oe}from"./dollar-sign-CITxebIq-1757211968960.js";import{f as $}from"./format-vTMqd3lv-1757211968960.js";import{C as xe}from"./checkbox-BsItWC0H-1757211968960.js";import{P as ue}from"./package-Cx2B0qFs-1757211968960.js";import{T as pe}from"./trash-2-DhcRrQkx-1757211968960.js";import{T as Ce}from"./triangle-alert-CXFNZvv8-1757211968960.js";import{A as ke,f as Te,a as $e,b as Me,c as Ie,d as Qe,e as Ae,g as Pe,h as Re}from"./alert-dialog-DRJXE2A7-1757211968960.js";import{D as Ee}from"./download-z5H3MLR0-1757211968960.js";import{I as Le}from"./info-DLhhc0oO-1757211968960.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=ie("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=ie("ReceiptText",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M14 8H8",key:"1l3xfs"}],["path",{d:"M16 12H8",key:"1fr5h0"}],["path",{d:"M13 16H8",key:"wsln4y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=ie("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);function is({orderId:c}){const{toast:l}=re(),x=he(),[d,w]=k.useState(!1),[r,v]=k.useState(null),{data:n=[],isLoading:Q}=le({queryKey:["/api/invoices",c],queryFn:async()=>await(await b("GET",`/api/invoices?orderId=${c}`)).json()}),{data:F=[]}=le({queryKey:["/api/verification-logs",c],queryFn:async()=>await(await b("GET",`/api/verification-logs?orderId=${c}`)).json()}),f=M({mutationFn:async s=>{const o=await fetch("/api/invoices",{method:"POST",body:s});if(!o.ok)throw new Error("Failed to upload invoice");return o.json()},onSuccess:()=>{x.invalidateQueries({queryKey:["/api/invoices",c]}),x.invalidateQueries({queryKey:["/api/verification-logs",c]}),w(!1),v(null),l({title:"ì„±ê³µ",description:"ì²­êµ¬ì„œê°€ ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤."})},onError:()=>{l({title:"ì˜¤ë¥˜",description:"ì²­êµ¬ì„œ ì—…ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",variant:"destructive"})}}),D=M({mutationFn:async s=>await(await b("POST",`/api/invoices/${s}/verify`)).json(),onSuccess:()=>{x.invalidateQueries({queryKey:["/api/invoices",c]}),x.invalidateQueries({queryKey:["/api/verification-logs",c]}),l({title:"ì„±ê³µ",description:"ì²­êµ¬ì„œê°€ ê²€ì¦ë˜ì—ˆìŠµë‹ˆë‹¤."})},onError:()=>{l({title:"ì˜¤ë¥˜",description:"ì²­êµ¬ì„œ ê²€ì¦ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",variant:"destructive"})}}),q=M({mutationFn:async s=>await(await b("POST",`/api/invoices/${s}/issue-tax`)).json(),onSuccess:()=>{x.invalidateQueries({queryKey:["/api/invoices",c]}),l({title:"ì„±ê³µ",description:"ì„¸ê¸ˆê³„ì‚°ì„œê°€ ë°œí–‰ë˜ì—ˆìŠµë‹ˆë‹¤."})},onError:()=>{l({title:"ì˜¤ë¥˜",description:"ì„¸ê¸ˆê³„ì‚°ì„œ ë°œí–‰ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",variant:"destructive"})}}),N=M({mutationFn:async s=>await(await b("POST",`/api/invoices/${s}/cancel-tax`)).json(),onSuccess:()=>{x.invalidateQueries({queryKey:["/api/invoices",c]}),l({title:"ì„±ê³µ",description:"ì„¸ê¸ˆê³„ì‚°ì„œ ë°œí–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤."})},onError:()=>{l({title:"ì˜¤ë¥˜",description:"ì„¸ê¸ˆê³„ì‚°ì„œ ë°œí–‰ ì·¨ì†Œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",variant:"destructive"})}}),P=s=>{s.preventDefault();const o=new FormData(s.currentTarget);o.set("orderId",c.toString()),r&&o.set("file",r),f.mutate(o)},a=s=>{switch(s){case"pending":return e.jsx(j,{variant:"secondary",children:"ê²€í† ì¤‘"});case"verified":return e.jsx(j,{variant:"default",children:"ê²€ì¦ì™„ë£Œ"});case"paid":return e.jsx(j,{variant:"outline",children:"ì§€ê¸‰ì™„ë£Œ"});default:return e.jsx(j,{variant:"secondary",children:s})}},g=s=>{switch(s){case"invoice":return e.jsx(j,{variant:"outline",children:"ì²­êµ¬ì„œ"});case"tax_invoice":return e.jsx(j,{variant:"outline",children:"ì„¸ê¸ˆê³„ì‚°ì„œ"});default:return e.jsx(j,{variant:"outline",children:s})}};return Q?e.jsxs(_,{children:[e.jsx(Z,{children:e.jsxs(J,{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5"}),"ì²­êµ¬ì„œ ê´€ë¦¬"]})}),e.jsx(X,{children:e.jsx("div",{className:"text-center py-4",children:"ë¡œë”© ì¤‘..."})})]}):e.jsxs(_,{children:[e.jsx(Z,{className:"pb-2",children:e.jsxs(J,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(A,{className:"h-4 w-4"}),"ì²­êµ¬ì„œ ê´€ë¦¬"]}),e.jsxs(Y,{open:d,onOpenChange:w,children:[e.jsx(Fe,{asChild:!0,children:e.jsxs(y,{size:"sm",children:[e.jsx(Se,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"text-xs",children:"ì²­êµ¬ì„œ ì—…ë¡œë“œ"})]})}),e.jsxs(ee,{children:[e.jsx(se,{children:e.jsx(te,{children:"ì²­êµ¬ì„œ ì—…ë¡œë“œ"})}),e.jsxs("form",{onSubmit:P,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"invoiceNumber",children:"ì²­êµ¬ì„œ ë²ˆí˜¸"}),e.jsx(S,{id:"invoiceNumber",name:"invoiceNumber",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"invoiceType",children:"ìœ í˜•"}),e.jsxs(O,{name:"invoiceType",defaultValue:"invoice",children:[e.jsx(z,{children:e.jsx(B,{})}),e.jsxs(H,{children:[e.jsx(C,{value:"invoice",children:"ì²­êµ¬ì„œ"}),e.jsx(C,{value:"tax_invoice",children:"ì„¸ê¸ˆê³„ì‚°ì„œ"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"issueDate",children:"ë°œí–‰ì¼"}),e.jsx(S,{id:"issueDate",name:"issueDate",type:"date",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"dueDate",children:"ë§ˆê°ì¼"}),e.jsx(S,{id:"dueDate",name:"dueDate",type:"date"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"totalAmount",children:"ì´ê¸ˆì•¡"}),e.jsx(S,{id:"totalAmount",name:"totalAmount",type:"number",step:"0.01",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"vatAmount",children:"ë¶€ê°€ì„¸"}),e.jsx(S,{id:"vatAmount",name:"vatAmount",type:"number",step:"0.01",defaultValue:"0"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"file",children:"ì²¨ë¶€íŒŒì¼"}),e.jsx(S,{id:"file",type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:s=>v(s.target.files?.[0]||null)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"notes",children:"ë©”ëª¨"}),e.jsx(L,{id:"notes",name:"notes",rows:3})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(y,{type:"button",variant:"outline",onClick:()=>w(!1),children:"ì·¨ì†Œ"}),e.jsx(y,{type:"submit",disabled:f.isPending,children:f.isPending?"ì—…ë¡œë“œ ì¤‘...":"ì—…ë¡œë“œ"})]})]})]})]})]})}),e.jsxs(X,{className:"p-3",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"border-2 border-blue-200 rounded-lg p-3 bg-blue-50 dark:bg-blue-900/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-semibold text-blue-800 dark:text-blue-200",children:"ì„¸ê¸ˆê³„ì‚°ì„œ ë°œí–‰ ê´€ë¦¬"}),n.length===0?e.jsx(j,{variant:"outline",className:"text-xs border-blue-300 text-blue-700",children:"ì²­êµ¬ì„œ ì—…ë¡œë“œ í•„ìš”"}):n.some(s=>s.taxInvoiceIssued)?e.jsxs(j,{variant:"default",className:"text-xs bg-green-600",children:[e.jsx(me,{className:"h-2 w-2 mr-1"}),"ë°œí–‰ì™„ë£Œ"]}):e.jsx(j,{variant:"secondary",className:"text-xs",children:"ë¯¸ë°œí–‰"})]}),e.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-300",children:n.length===0?"ì²­êµ¬ì„œë¥¼ ë¨¼ì € ì—…ë¡œë“œí•˜ê³  ê²€ì¦í•´ì£¼ì„¸ìš”":n.some(s=>s.status==="verified")?"ë°œí–‰ ì¤€ë¹„ ì™„ë£Œ":"ì²­êµ¬ì„œ ê²€ì¦ í•„ìš”"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-xs text-gray-600",children:n.length===0?"ì„¸ê¸ˆê³„ì‚°ì„œ ë°œí–‰ ê´€ë¦¬ë¥¼ ìœ„í•´ì„œëŠ” ì²­êµ¬ì„œë¥¼ ì—…ë¡œë“œí•´ì£¼ì„¸ìš”.":n.some(s=>s.taxInvoiceIssued)?"ì„¸ê¸ˆê³„ì‚°ì„œê°€ ë°œí–‰ë˜ì—ˆìŠµë‹ˆë‹¤.":"ì„¸ê¸ˆê³„ì‚°ì„œ ë°œí–‰ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤."}),e.jsx("div",{className:"flex gap-2",children:n.length>0&&n.some(s=>s.status==="verified")?e.jsx(e.Fragment,{children:n.some(s=>s.taxInvoiceIssued)?e.jsxs(y,{size:"sm",variant:"destructive",onClick:()=>{const s=n.find(o=>o.taxInvoiceIssued);s&&N.mutate(s.id)},disabled:N.isPending,children:[e.jsx(V,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"text-xs",children:"ë¯¸í™•ì¸"})]}):e.jsxs(y,{size:"sm",variant:"default",onClick:()=>{const s=n.find(o=>o.status==="verified"&&!o.taxInvoiceIssued);s&&q.mutate(s.id)},disabled:q.isPending,children:[e.jsx(K,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"text-xs",children:"í™•ì¸"})]})}):e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(y,{size:"sm",variant:"outline",disabled:!0,children:[e.jsx(K,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"text-xs",children:"í™•ì¸"})]}),e.jsxs(y,{size:"sm",variant:"outline",disabled:!0,children:[e.jsx(V,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"text-xs",children:"ë¯¸í™•ì¸"})]})]})})]})]}),n.length===0?e.jsx("div",{className:"text-center py-4 text-muted-foreground text-xs",children:"ì•„ì§ ì—…ë¡œë“œëœ ì²­êµ¬ì„œê°€ ì—†ìŠµë‹ˆë‹¤."}):e.jsx("div",{className:"space-y-2",children:n.map(s=>e.jsxs("div",{className:"border rounded-lg p-2 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("h4",{className:"font-medium text-xs",children:s.invoiceNumber}),g(s.invoiceType),a(s.status)]}),s.status==="pending"&&e.jsxs(y,{size:"sm",onClick:()=>D.mutate(s.id),disabled:D.isPending,children:[e.jsx(K,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"text-xs",children:"ê²€ì¦"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ae,{className:"h-3 w-3 text-muted-foreground"}),e.jsxs("span",{children:["ë°œí–‰ì¼: ",$(new Date(s.issueDate),"yyyy-MM-dd",{locale:I})]})]}),s.dueDate&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ae,{className:"h-3 w-3 text-muted-foreground"}),e.jsxs("span",{children:["ë§ˆê°ì¼: ",$(new Date(s.dueDate),"yyyy-MM-dd",{locale:I})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(oe,{className:"h-3 w-3 text-muted-foreground"}),e.jsxs("span",{children:["ì´ì•¡: â‚©",Math.round(s.totalAmount||0).toLocaleString("ko-KR")]})]}),s.vatAmount>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(oe,{className:"h-3 w-3 text-muted-foreground"}),e.jsxs("span",{children:["ë¶€ê°€ì„¸: â‚©",Math.round(s.vatAmount||0).toLocaleString("ko-KR")]})]})]}),s.notes&&e.jsx("div",{className:"text-xs text-muted-foreground bg-muted p-2 rounded",children:s.notes}),e.jsxs("div",{className:"border-t pt-2 space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(W,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"text-xs font-medium",children:"ì„¸ê¸ˆê³„ì‚°ì„œ"}),s.taxInvoiceIssued?e.jsxs(j,{variant:"default",className:"text-xs",children:[e.jsx(me,{className:"h-2 w-2 mr-1"}),"ë°œí–‰ì™„ë£Œ"]}):e.jsx(j,{variant:"secondary",className:"text-xs",children:"ë¯¸ë°œí–‰"})]}),e.jsxs("div",{className:"flex gap-1",children:[s.status==="verified"&&e.jsx(e.Fragment,{children:s.taxInvoiceIssued?e.jsxs(y,{size:"sm",variant:"destructive",onClick:()=>N.mutate(s.id),disabled:N.isPending,children:[e.jsx(V,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"text-xs",children:N.isPending?"ì·¨ì†Œ ì¤‘...":"ë°œí–‰ ì·¨ì†Œ"})]}):e.jsxs(y,{size:"sm",variant:"outline",onClick:()=>q.mutate(s.id),disabled:q.isPending,children:[e.jsx(W,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"text-xs",children:q.isPending?"ì²˜ë¦¬ ì¤‘...":"ë°œí–‰ í™•ì¸"})]})}),s.status!=="verified"&&e.jsx("div",{className:"text-xs text-muted-foreground",children:"ì²­êµ¬ì„œ ê²€ì¦ í›„ ë°œí–‰ ê°€ëŠ¥"})]})]}),s.status==="verified"&&s.taxInvoiceIssued&&s.taxInvoiceIssuedDate&&e.jsxs("div",{className:"text-xs text-muted-foreground bg-green-50 dark:bg-green-900/20 p-2 rounded",children:["ë°œí–‰ì¼: ",$(new Date(s.taxInvoiceIssuedDate),"yyyy-MM-dd HH:mm",{locale:I}),s.taxInvoiceIssuedBy&&` | ë°œí–‰ì: ${s.taxInvoiceIssuedBy}`]})]}),s.verifiedBy&&s.verifiedAt&&e.jsxs("div",{className:"text-xs text-muted-foreground border-t pt-1",children:["ê²€ì¦ì: ",s.verifiedBy," | ê²€ì¦ì¼: ",$(new Date(s.verifiedAt),"yyyy-MM-dd HH:mm",{locale:I})]})]},s.id))})]}),F.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("h4",{className:"font-medium mb-2 text-xs",children:"ê²€ì¦ ë¡œê·¸"}),e.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:F.map(s=>e.jsxs("div",{className:"text-xs p-2 bg-muted rounded",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("span",{children:s.details}),e.jsx("span",{className:"text-xs text-muted-foreground",children:$(new Date(s.createdAt),"MM-dd HH:mm",{locale:I})})]}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:s.performedBy})]},s.id))})]})]})]})}function rs({orderItems:c,orderId:l}){const{toast:x}=re(),d=he(),[w,r]=k.useState(!1),[v,n]=k.useState(null),[Q,F]=k.useState(!1),[f,D]=k.useState(null),[,q]=k.useState(0),N=ce(["/api/item-receipts",l],{queryFn:async()=>{const t=await b("GET","/api/item-receipts"),i=c.map(m=>m.id);return t.filter(m=>i.includes(m.orderItemId))},cacheType:"DYNAMIC",enabled:c.length>0}),{data:P=[]}=ce(["/api/invoices",l],{queryFn:()=>b("GET",`/api/invoices?orderId=${l}`),cacheType:"MASTER",enabled:!!l}),a=M({mutationFn:async t=>{console.log("Sending receipt data to API:",t);try{const i=await b("POST","/api/item-receipts",t);return console.log("API response:",i),i}catch(i){throw console.error("API request failed:",i),i}},onSuccess:async t=>{console.log("ğŸ’¥ Receipt creation successful, forcing refetch:",t),d.resetQueries({queryKey:["/api/item-receipts",l]}),d.invalidateQueries({queryKey:["/api/item-receipts"]}),await N.refetch(),q(i=>i+1),d.invalidateQueries({queryKey:["/api/verification-logs",l]}),r(!1),n(null),x({title:"ì„±ê³µ",description:"ìˆ˜ë ¹ í™•ì¸ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤."})},onError:t=>{console.error("Receipt creation mutation error:",t);const i=t?.message||"ìˆ˜ë ¹ í™•ì¸ ë“±ë¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.";x({title:"ì˜¤ë¥˜",description:i,variant:"destructive"})}}),g=M({mutationFn:async t=>{const{id:i,...u}=t;return await(await b("PATCH",`/api/item-receipts/${i}`,u)).json()},onSuccess:async t=>{console.log("ğŸ’¥ Receipt update successful:",t),d.resetQueries({queryKey:["/api/item-receipts",l]}),d.invalidateQueries({queryKey:["/api/item-receipts"]}),await N.refetch(),q(i=>i+1),d.invalidateQueries({queryKey:["/api/verification-logs",l]}),F(!1),D(null),x({title:"ìˆ˜ë ¹ ì •ë³´ ìˆ˜ì • ì™„ë£Œ",description:"ìˆ˜ë ¹ ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤."})},onError:t=>{x({title:"ìˆ˜ì • ì‹¤íŒ¨",description:t.message||"ìˆ˜ë ¹ ì •ë³´ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",variant:"destructive"})}}),s=M({mutationFn:async t=>await b("DELETE",`/api/item-receipts/${t}`),onSuccess:async()=>{console.log("ğŸ’¥ Receipt deletion successful"),d.resetQueries({queryKey:["/api/item-receipts",l]}),d.invalidateQueries({queryKey:["/api/item-receipts"]}),await N.refetch(),q(t=>t+1),d.invalidateQueries({queryKey:["/api/verification-logs",l]}),x({title:"ìˆ˜ë ¹ ì •ë³´ ì‚­ì œ ì™„ë£Œ",description:"ìˆ˜ë ¹ ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤."})},onError:t=>{x({title:"ì‚­ì œ ì‹¤íŒ¨",description:t.message||"ìˆ˜ë ¹ ì •ë³´ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",variant:"destructive"})}}),o=M({mutationFn:async t=>{const i=t.map(u=>b("POST","/api/item-receipts",u));return await Promise.all(i)},onSuccess:()=>{d.invalidateQueries({queryKey:["/api/item-receipts"]}),d.invalidateQueries({queryKey:["/api/verification-logs",l]}),x({title:"ì„±ê³µ",description:"ì¼ê´„ ìˆ˜ë ¹ ë“±ë¡ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤."})},onError:()=>{x({title:"ì˜¤ë¥˜",description:"ì¼ê´„ ìˆ˜ë ¹ ë“±ë¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",variant:"destructive"})}}),R=t=>{t.preventDefault();const i=new FormData(t.currentTarget),u={orderItemId:v.id,invoiceId:i.get("invoiceId")?parseInt(i.get("invoiceId")):void 0,receivedQuantity:parseFloat(i.get("receivedQuantity")),receivedDate:i.get("receivedDate"),qualityCheck:i.get("qualityCheck")==="on",qualityNotes:i.get("qualityNotes")||"",status:i.get("status")||"approved",notes:i.get("notes")||""};console.log("Submitting receipt data:",u),a.mutate(u)},ge=t=>{if(t.preventDefault(),!f){x({title:"ì˜¤ë¥˜",description:"ì„ íƒëœ ìˆ˜ë ¹ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.",variant:"destructive"});return}const i=new FormData(t.currentTarget),u={id:f.id,receivedQuantity:parseFloat(i.get("receivedQuantity")),receivedDate:i.get("receivedDate"),qualityCheck:i.get("qualityCheck")==="on",qualityNotes:i.get("qualityNotes")||"",status:i.get("status")||"pending",notes:i.get("notes")||""};console.log("Submitting updated receipt data:",u),g.mutate(u)},je=()=>{const t=new Date().toISOString().split("T")[0],i=c.filter(m=>E(m.id)<m.quantity);if(i.length===0){x({title:"ì•Œë¦¼",description:"ëª¨ë“  í•­ëª©ì´ ì´ë¯¸ ìˆ˜ë ¹ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤."});return}const u=i.map(m=>({orderItemId:m.id,receivedQuantity:m.quantity-E(m.id),receivedDate:t,qualityCheck:!0,status:"approved",notes:"ì¼ê´„ ìˆ˜ë ¹ ë“±ë¡"}));o.mutate(u)},ne=t=>{if(N.status==="error")return console.log(`âŒ Query in error state for item ${t}, triggering fresh fetch`),N.refetch(),[];const i=N.data||[];console.log(`ğŸ” Looking for receipts for item ${t}`),console.log(`ğŸ” Current query data length: ${i.length}`),console.log(`ğŸ” Query status: ${N.status}, isFetching: ${N.isFetching}`);const u=i.filter(m=>m.orderItemId===t);return console.log(`ğŸ“‹ Found ${u.length} receipts for item ${t}:`,u),u},E=t=>{const u=ne(t).reduce((m,T)=>{const h=typeof T.receivedQuantity=="string"?parseFloat(T.receivedQuantity):T.receivedQuantity;return m+(h||0)},0);return console.log(`ğŸ’¯ Total received for item ${t}: ${u}`),u},ye=t=>{const m=(N.data||[]).filter(h=>h.orderItemId===t.id).reduce((h,U)=>{const fe=typeof U.receivedQuantity=="string"?parseFloat(U.receivedQuantity):U.receivedQuantity;return h+(fe||0)},0),T=t.quantity;return m===0?{status:"pending",label:"ë¯¸ìˆ˜ë ¹",icon:be,color:"secondary"}:m<T?{status:"partial",label:"ë¶€ë¶„ìˆ˜ë ¹",icon:Ce,color:"warning"}:{status:"complete",label:"ìˆ˜ë ¹ì™„ë£Œ",icon:K,color:"default"}},ve=t=>{switch(t){case"pending":return e.jsx(j,{variant:"secondary",children:"ëŒ€ê¸°ì¤‘"});case"approved":return e.jsx(j,{variant:"default",children:"ìŠ¹ì¸ë¨"});case"rejected":return e.jsx(j,{variant:"destructive",children:"ë°˜ë ¤ë¨"});default:return e.jsx(j,{variant:"secondary",children:t})}};return e.jsxs(_,{children:[e.jsx(Z,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(J,{className:"flex items-center gap-1 text-sm",children:[e.jsx(ue,{className:"h-4 w-4"}),"ìì¬ ìˆ˜ë ¹ í™•ì¸"]}),e.jsxs(y,{onClick:je,disabled:o.isPending,className:"bg-blue-600 hover:bg-blue-700",size:"sm",children:[e.jsx(ue,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"text-xs",children:"ì¼ê´„ ìˆ˜ë ¹ ë“±ë¡"})]})]})}),e.jsxs(X,{className:"p-3",children:[e.jsx("div",{className:"space-y-2",children:c.map(t=>{const i=ne(t.id),u=E(t.id),m=ye(t),T=m.icon;return e.jsxs("div",{className:"border rounded-lg p-2 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx("h4",{className:"font-medium text-xs",children:t.itemName}),e.jsxs(j,{variant:m.color,className:"flex items-center gap-1 text-xs",children:[e.jsx(T,{className:"h-3 w-3"}),m.label]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-xs text-muted-foreground",children:[e.jsxs("div",{children:["ë°œì£¼ìˆ˜ëŸ‰: ",t.quantity.toLocaleString(),t.unit]}),e.jsxs("div",{children:["ìˆ˜ë ¹ìˆ˜ëŸ‰: ",u.toLocaleString(),t.unit]}),e.jsxs("div",{children:["ë¯¸ìˆ˜ë ¹: ",(t.quantity-u).toLocaleString(),t.unit]}),e.jsxs("div",{children:["ë‹¨ê°€: â‚©",Math.round(t.unitPrice||0).toLocaleString("ko-KR")]})]}),t.notes&&e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:t.notes})]}),e.jsxs(y,{size:"sm",onClick:()=>{n(t),r(!0)},disabled:u>=t.quantity,children:[e.jsx(Ne,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"text-xs",children:"ìˆ˜ë ¹ë“±ë¡"})]})]}),i.length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx("h5",{className:"text-xs font-medium mb-1",children:"ìˆ˜ë ¹ ì´ë ¥"}),e.jsx("div",{className:"space-y-1",children:i.map(h=>e.jsx("div",{className:"bg-muted p-2 rounded text-xs",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{className:"font-medium text-xs",children:[(typeof h.receivedQuantity=="string"?parseFloat(h.receivedQuantity):h.receivedQuantity).toLocaleString(),t.unit," ìˆ˜ë ¹"]}),ve(h.status),h.qualityCheck&&e.jsxs(j,{variant:"outline",className:"text-xs",children:[e.jsx(K,{className:"h-2 w-2 mr-1"}),"í’ˆì§ˆê²€ì‚¬"]})]}),e.jsxs("div",{className:"text-muted-foreground text-xs",children:["ìˆ˜ë ¹ì¼: ",$(new Date(h.receivedDate),"yyyy-MM-dd",{locale:I})]}),h.qualityNotes&&e.jsxs("div",{className:"text-muted-foreground text-xs",children:["í’ˆì§ˆë©”ëª¨: ",h.qualityNotes]}),h.notes&&e.jsxs("div",{className:"text-muted-foreground text-xs",children:["ë©”ëª¨: ",h.notes]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(y,{size:"sm",variant:"ghost",onClick:()=>{D(h),F(!0)},className:"h-6 w-6 p-0 hover:bg-blue-50",children:e.jsx(Ke,{className:"h-3 w-3 text-blue-600"})}),e.jsx(y,{size:"sm",variant:"ghost",onClick:()=>{confirm("ì´ ìˆ˜ë ¹ ê¸°ë¡ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&s.mutate(h.id)},className:"h-6 w-6 p-0 hover:bg-red-50",disabled:s.isPending,children:e.jsx(pe,{className:"h-3 w-3 text-red-600"})})]}),e.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[e.jsxs("div",{children:["ë“±ë¡ì: ",h.verifiedBy]}),e.jsx("div",{children:$(new Date(h.createdAt),"MM-dd HH:mm",{locale:I})})]})]})]})},h.id))})]})]},t.id)})}),e.jsx(Y,{open:w,onOpenChange:r,children:e.jsxs(ee,{children:[e.jsx(se,{children:e.jsx(te,{children:"ìì¬ ìˆ˜ë ¹ ë“±ë¡"})}),v&&e.jsxs("form",{onSubmit:R,className:"space-y-4",children:[e.jsxs("div",{className:"bg-muted p-3 rounded",children:[e.jsx("div",{className:"font-medium",children:v.itemName}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["ë°œì£¼ìˆ˜ëŸ‰: ",v.quantity.toLocaleString(),v.unit," | ìˆ˜ë ¹ê°€ëŠ¥: ",(v.quantity-E(v.id)).toLocaleString(),v.unit]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"receivedQuantity",children:"ìˆ˜ë ¹ ìˆ˜ëŸ‰"}),e.jsx(S,{id:"receivedQuantity",name:"receivedQuantity",type:"number",step:"0.01",max:v.quantity-E(v.id),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"receivedDate",children:"ìˆ˜ë ¹ ì¼ì"}),e.jsx(S,{id:"receivedDate",name:"receivedDate",type:"date",defaultValue:new Date().toISOString().split("T")[0],required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"invoiceId",children:"ì—°ê²°ëœ ì²­êµ¬ì„œ (ì„ íƒ)"}),e.jsxs(O,{name:"invoiceId",children:[e.jsx(z,{children:e.jsx(B,{placeholder:"ì²­êµ¬ì„œ ì„ íƒ"})}),e.jsx(H,{children:P.map(t=>e.jsxs(C,{value:t.id.toString(),children:[t.invoiceNumber," - â‚©",t.totalAmount.toLocaleString()]},t.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"status",children:"ìƒíƒœ"}),e.jsxs(O,{name:"status",defaultValue:"pending",children:[e.jsx(z,{children:e.jsx(B,{})}),e.jsxs(H,{children:[e.jsx(C,{value:"pending",children:"ëŒ€ê¸°ì¤‘"}),e.jsx(C,{value:"approved",children:"ìŠ¹ì¸ë¨"}),e.jsx(C,{value:"rejected",children:"ë°˜ë ¤ë¨"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xe,{id:"qualityCheck",name:"qualityCheck"}),e.jsx(p,{htmlFor:"qualityCheck",className:"text-sm",children:"í’ˆì§ˆ ê²€ì‚¬ ì™„ë£Œ"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"qualityNotes",children:"í’ˆì§ˆ ê²€ì‚¬ ë©”ëª¨"}),e.jsx(L,{id:"qualityNotes",name:"qualityNotes",rows:2,placeholder:"í’ˆì§ˆ ê²€ì‚¬ ê²°ê³¼ë‚˜ íŠ¹ì´ì‚¬í•­ì„ ì…ë ¥í•˜ì„¸ìš”"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"notes",children:"ì¶”ê°€ ë©”ëª¨"}),e.jsx(L,{id:"notes",name:"notes",rows:2,placeholder:"ê¸°íƒ€ ë©”ëª¨ì‚¬í•­ì„ ì…ë ¥í•˜ì„¸ìš”"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(y,{type:"button",variant:"outline",onClick:()=>r(!1),children:"ì·¨ì†Œ"}),e.jsx(y,{type:"submit",disabled:a.isPending,children:a.isPending?"ë“±ë¡ ì¤‘...":"ë“±ë¡"})]})]})]})}),e.jsx(Y,{open:Q,onOpenChange:F,children:e.jsxs(ee,{children:[e.jsx(se,{children:e.jsx(te,{children:"ìˆ˜ë ¹ ì •ë³´ ìˆ˜ì •"})}),f&&e.jsxs("form",{onSubmit:ge,className:"space-y-4",children:[e.jsx("div",{className:"bg-muted p-3 rounded",children:e.jsxs("div",{className:"text-sm text-muted-foreground",children:["ìˆ˜ë ¹ ê¸°ë¡ ID: ",f.id]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"edit-receivedQuantity",children:"ìˆ˜ë ¹ ìˆ˜ëŸ‰"}),e.jsx(S,{id:"edit-receivedQuantity",name:"receivedQuantity",type:"number",step:"0.01",defaultValue:f.receivedQuantity,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"edit-receivedDate",children:"ìˆ˜ë ¹ ì¼ì"}),e.jsx(S,{id:"edit-receivedDate",name:"receivedDate",type:"date",defaultValue:new Date(f.receivedDate).toISOString().split("T")[0],required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"edit-status",children:"ìƒíƒœ"}),e.jsxs(O,{name:"status",defaultValue:f.status,children:[e.jsx(z,{children:e.jsx(B,{})}),e.jsxs(H,{children:[e.jsx(C,{value:"pending",children:"ëŒ€ê¸°ì¤‘"}),e.jsx(C,{value:"approved",children:"ìŠ¹ì¸ë¨"}),e.jsx(C,{value:"rejected",children:"ë°˜ë ¤ë¨"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xe,{id:"edit-qualityCheck",name:"qualityCheck",defaultChecked:f.qualityCheck}),e.jsx(p,{htmlFor:"edit-qualityCheck",className:"text-sm",children:"í’ˆì§ˆ ê²€ì‚¬ ì™„ë£Œ"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"edit-qualityNotes",children:"í’ˆì§ˆ ê²€ì‚¬ ë©”ëª¨"}),e.jsx(L,{id:"edit-qualityNotes",name:"qualityNotes",rows:2,defaultValue:f.qualityNotes,placeholder:"í’ˆì§ˆ ê²€ì‚¬ ê²°ê³¼ë‚˜ íŠ¹ì´ì‚¬í•­ì„ ì…ë ¥í•˜ì„¸ìš”"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"edit-notes",children:"ì¶”ê°€ ë©”ëª¨"}),e.jsx(L,{id:"edit-notes",name:"notes",rows:2,defaultValue:f.notes,placeholder:"ê¸°íƒ€ ë©”ëª¨ì‚¬í•­ì„ ì…ë ¥í•˜ì„¸ìš”"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(y,{type:"button",variant:"outline",onClick:()=>F(!1),children:"ì·¨ì†Œ"}),e.jsx(y,{type:"submit",disabled:g.isPending,children:g.isPending?"ìˆ˜ì • ì¤‘...":"ìˆ˜ì • ì™„ë£Œ"})]})]})]})})]})]})}const Oe=async(c,l,x)=>{console.log(`ğŸ”½ Starting download for attachment ${c}, filename: ${l}, mimeType: ${x}`);try{const d=window.location.origin,w=`${d}/api/attachments/${c}/download?download=true`,r=`${d}/api/attachments/${c}/download`;if(console.log("ğŸ“ Download URL:",w),console.log("ğŸ‘ï¸ View URL:",r),x?.toLowerCase().includes("pdf")||l.toLowerCase().endsWith(".pdf"))console.log("ğŸ“„ File is PDF - opening in new tab and downloading"),window.open(r,"_blank"),console.log("âœ… Opened PDF in new tab for viewing"),setTimeout(()=>{const n=document.createElement("a");n.href=w,n.download=l,n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n),console.log("âœ… PDF download triggered via anchor element")},500);else{console.log("ğŸ“ File is not PDF - downloading only");const n=document.createElement("a");n.href=w,n.download=l,n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n),console.log("âœ… File download triggered via anchor element")}return!0}catch(d){throw console.error("âŒ Download error:",d),d}},ze=(c,l,x)=>{const d=x?.toLowerCase().includes("pdf")||c.toLowerCase().endsWith(".pdf");l(d?{title:"ë‹¤ìš´ë¡œë“œ ë° ë¯¸ë¦¬ë³´ê¸°",description:`${c} íŒŒì¼ì´ ìƒˆ íƒ­ì—ì„œ ì—´ë¦¬ê³  ë‹¤ìš´ë¡œë“œ í´ë”ì— ì €ì¥ë©ë‹ˆë‹¤.`}:{title:"ë‹¤ìš´ë¡œë“œ ì™„ë£Œ",description:`${c} íŒŒì¼ì´ ë‹¤ìš´ë¡œë“œ í´ë”ì— ì €ì¥ë©ë‹ˆë‹¤.`})};function ns({attachments:c,orderId:l}){const{user:x}=we(),{toast:d}=re(),{theme:w}=De(),r=w==="dark",[v,n]=k.useState(null),[Q,F]=k.useState(null),f=x?.role==="admin";console.log("ğŸ” AttachedFilesInfo - COMPONENT CALLED!",{attachments:c,orderId:l}),console.log("ğŸ” AttachedFilesInfo - received attachments:",c);const D=c.map(a=>{const g=a.mimeType?.toLowerCase()||"",s=a.originalName?.toLowerCase()||"";let o="other",R=A;return g.includes("excel")||g.includes("spreadsheet")||s.endsWith(".xlsx")||s.endsWith(".xls")||s.endsWith(".xlsm")?(o="excel",R=de):(g.includes("pdf")||s.endsWith(".pdf"))&&(o="pdf",R=A),console.log("ğŸ” Processing attachment:",{originalName:a.originalName,mimeType:a.mimeType,fileName:s,fileType:o}),{...a,fileType:o,icon:R}});if(console.log("ğŸ“Š AttachedFilesInfo - attached files:",D),D.length===0)return console.log("âš ï¸ AttachedFilesInfo - No attached files found, component will not render"),null;console.log("âœ… AttachedFilesInfo - Rendering component with",D.length,"attached files");const q=async a=>{n(a.id);try{await Oe(a.id,a.originalName,a.mimeType),ze(a.originalName,d,a.mimeType)}catch(g){console.error("Download error:",g),d({title:"ë‹¤ìš´ë¡œë“œ ì‹¤íŒ¨",description:g instanceof Error?g.message:"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",variant:"destructive"})}finally{n(null)}},N=async a=>{if(!f){d({title:"ê¶Œí•œ ì—†ìŒ",description:"ê´€ë¦¬ìë§Œ íŒŒì¼ì„ ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",variant:"destructive"});return}F(a.id);try{await b("DELETE",`/api/attachments/${a.id}`),await G.invalidateQueries({queryKey:[`/api/orders/${l}`]}),await G.invalidateQueries({queryKey:["orders-optimized"]}),await G.invalidateQueries({queryKey:["/api/orders"]}),d({title:"íŒŒì¼ ì‚­ì œ ì™„ë£Œ",description:`${a.originalName} íŒŒì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.`})}catch(g){console.error("Delete error:",g),d({title:"íŒŒì¼ ì‚­ì œ ì‹¤íŒ¨",description:g instanceof Error?g.message:"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",variant:"destructive"})}finally{F(null)}},P=a=>{if(a===0)return"0 B";const g=1024,s=["B","KB","MB","GB"],o=Math.floor(Math.log(a)/Math.log(g));return parseFloat((a/Math.pow(g,o)).toFixed(2))+" "+s[o]};return e.jsxs("div",{className:`shadow-sm rounded-lg border transition-colors ${r?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsx("div",{className:`p-6 border-b transition-colors ${r?"border-gray-700":"border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-2 rounded-lg mr-3 transition-colors ${r?"bg-green-900/20":"bg-green-50"}`,children:e.jsx(de,{className:`h-5 w-5 transition-colors ${r?"text-green-400":"text-green-600"}`})}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold transition-colors ${r?"text-white":"text-gray-900"}`,children:"ì²¨ë¶€ ëœ íŒŒì¼"}),e.jsxs("span",{className:`text-sm transition-colors ${r?"text-gray-400":"text-gray-500"}`,children:["ë°œì£¼ì„œì™€ ê´€ë ¨ëœ ì²¨ë¶€ íŒŒì¼ (",D.length,"ê°œ)"]})]})]}),e.jsxs(j,{variant:"outline",className:`transition-colors ${r?"border-blue-600 text-blue-400":"border-blue-200 text-blue-700 bg-blue-50"}`,children:[e.jsx(A,{className:"h-3 w-3 mr-1"}),"ì²¨ë¶€íŒŒì¼"]})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[D.map(a=>e.jsx("div",{className:`border rounded-lg p-4 transition-all hover:shadow-md ${r?"border-gray-600 hover:border-gray-500 bg-gray-750":"border-gray-200 hover:border-gray-300 bg-gray-50/50"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[e.jsx("div",{className:`p-2 rounded-lg transition-colors ${a.fileType==="excel"?r?"bg-green-900/30":"bg-green-100":a.fileType==="pdf"?r?"bg-red-900/30":"bg-red-100":r?"bg-gray-900/30":"bg-gray-100"}`,children:e.jsx(a.icon,{className:`h-5 w-5 transition-colors ${a.fileType==="excel"?r?"text-green-400":"text-green-600":a.fileType==="pdf"?r?"text-red-400":"text-red-600":r?"text-gray-400":"text-gray-600"}`})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:`font-medium text-sm truncate transition-colors ${r?"text-gray-200":"text-gray-900"}`,title:a.originalName,children:a.originalName}),e.jsx(j,{variant:"secondary",className:"text-xs",children:a.fileType==="excel"?"Excel":a.fileType==="pdf"?"PDF":"íŒŒì¼"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(A,{className:`h-3 w-3 transition-colors ${r?"text-gray-500":"text-gray-400"}`}),e.jsx("span",{className:`transition-colors ${r?"text-gray-400":"text-gray-600"}`,children:P(a.fileSize)})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(qe,{className:`h-3 w-3 transition-colors ${r?"text-gray-500":"text-gray-400"}`}),e.jsx("span",{className:`transition-colors ${r?"text-gray-400":"text-gray-600"}`,children:a.uploadedBy||"ì•Œ ìˆ˜ ì—†ìŒ"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ae,{className:`h-3 w-3 transition-colors ${r?"text-gray-500":"text-gray-400"}`}),e.jsx("span",{className:`transition-colors ${r?"text-gray-400":"text-gray-600"}`,children:$(new Date(a.uploadedAt),"yyyy.MM.dd HH:mm")})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx(y,{variant:"outline",size:"sm",onClick:()=>q(a),disabled:v===a.id,className:`h-8 px-3 text-xs transition-colors ${r?"border-gray-600 text-gray-300 hover:bg-gray-700 hover:border-green-500 hover:text-green-400":"border-gray-300 text-gray-700 hover:bg-green-50 hover:border-green-300 hover:text-green-700"}`,children:v===a.id?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-current mr-1"}),"ë‹¤ìš´ë¡œë“œ ì¤‘..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ee,{className:"h-3 w-3 mr-1"}),"ë‹¤ìš´ë¡œë“œ"]})}),f&&e.jsxs(ke,{children:[e.jsx(Te,{asChild:!0,children:e.jsx(y,{variant:"outline",size:"sm",disabled:Q===a.id,className:`h-8 px-3 text-xs transition-colors ${r?"border-red-600 text-red-400 hover:bg-red-900/20 hover:border-red-500":"border-red-300 text-red-700 hover:bg-red-50 hover:border-red-400"}`,children:Q===a.id?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-current mr-1"}),"ì‚­ì œ ì¤‘..."]}):e.jsxs(e.Fragment,{children:[e.jsx(pe,{className:"h-3 w-3 mr-1"}),"ì‚­ì œ"]})})}),e.jsxs($e,{className:r?"bg-gray-800 border-gray-700":"",children:[e.jsxs(Me,{children:[e.jsx(Ie,{className:r?"text-white":"",children:"íŒŒì¼ ì‚­ì œ í™•ì¸"}),e.jsxs(Qe,{className:r?"text-gray-400":"",children:[e.jsx("strong",{children:a.originalName})," íŒŒì¼ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?",e.jsx("br",{}),"ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìœ¼ë©°, íŒŒì¼ì´ ì˜êµ¬ì ìœ¼ë¡œ ì‚­ì œë©ë‹ˆë‹¤."]})]}),e.jsxs(Ae,{children:[e.jsx(Pe,{className:r?"border-gray-600 text-gray-300 hover:bg-gray-700":"",children:"ì·¨ì†Œ"}),e.jsx(Re,{onClick:()=>N(a),className:"bg-red-600 hover:bg-red-700 text-white",children:"ì‚­ì œ"})]})]})]})]})]})},a.id)),e.jsx("div",{className:`mt-4 p-3 rounded-lg border border-dashed transition-colors ${r?"border-gray-600 bg-gray-750":"border-gray-300 bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Le,{className:`h-4 w-4 mt-0.5 flex-shrink-0 transition-colors ${r?"text-blue-400":"text-blue-600"}`}),e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsx("p",{className:`font-medium transition-colors ${r?"text-blue-400":"text-blue-600"}`,children:"ì²¨ë¶€ íŒŒì¼ ì •ë³´"}),e.jsx("p",{className:`transition-colors ${r?"text-gray-400":"text-gray-600"}`,children:"ì´ ì„¹ì…˜ì—ëŠ” ë°œì£¼ì„œì™€ ê´€ë ¨ëœ ëª¨ë“  ì²¨ë¶€ íŒŒì¼ì´ í‘œì‹œë©ë‹ˆë‹¤. Excel íŒŒì¼, PDF ë¬¸ì„œ ë“± ë‹¤ì–‘í•œ í˜•íƒœì˜ íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œí•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."})]})]})})]})]})}export{ns as A,is as I,rs as R,Oe as d,ze as s};
