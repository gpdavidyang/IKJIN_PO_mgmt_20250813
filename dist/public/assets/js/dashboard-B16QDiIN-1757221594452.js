import{p as ee,h as H,u as I,r as N,j as e,s as te,t as se,F as T,J as X,Y as D,f as C,n as R,bn as Y,aX as U,a as E,aE as K,l as F,B as O,E as re,M as ae,D as W,b as _,d as ne,e as ie,g as le,i as ce,C as oe,bo as G,m as de}from"./index-C9dLx8QI-1757221594452.js";import{C as xe}from"./chevrons-up-down-4DsX_SS2-1757221594452.js";import{U as Z}from"./users-CdYq0AQK-1757221594452.js";import{S as me}from"./square-pen-D0RTwtaQ-1757221594452.js";import{D as ue}from"./download-DTu_5jT--1757221594452.js";import{T as ge}from"./trash-2-6RiWJZEb-1757221594452.js";import{C as he}from"./circle-x-B3FxaMDr-1757221594452.js";import{T as ye}from"./truck-Dz5DFSqy-1757221594452.js";import{M as je}from"./mail-check-CpLyK7sb-1757221594452.js";import{D as be}from"./dashboard-skeleton-JqRsn8hy-1757221594452.js";import{AdvancedPieChart as pe}from"./advanced-chart-35zEJud1-1757221594452.js";import{useRealTimeData as fe}from"./dashboard-widgets-DoqqixCO-1757221594452.js";import{A as ve}from"./activity-CA5aEtOn-1757221594452.js";import{P as q}from"./package-BpWHjnjG-1757221594452.js";import{D as Ne}from"./dollar-sign-DkLObQHg-1757221594452.js";import{T as J}from"./trending-up-DP4xXHk7-1757221594452.js";import{R as we,B as $e,C as Ce,X as Se,Y as Ae,T as ke,a as Oe}from"./PieChart-ekpGqdlA-1757221594452.js";import"./AreaChart-BtC84rDD-1757221594452.js";import"./refresh-cw-Dz1lj3sP-1757221594452.js";import"./index-CDO7Vk1L-1757221594452.js";function Te(t={}){const l=new URLSearchParams;return Object.entries(t).forEach(([a,c])=>{c!=null&&c!==""&&l.append(a,String(c))}),l}function M(t={}){const{filters:l={},...a}=t;return ee({queryKey:["unified-orders",l],queryFn:async()=>{const c=Te(l);console.log("🔍 Unified Orders API request:",`/api/orders-optimized?${c.toString()}`);const o=await fetch(`/api/orders-optimized?${c}`,{credentials:"include"});if(!o.ok)throw new Error("Failed to fetch orders");const s=await o.json();return console.log("✅ Unified Orders received:",s.orders?.length,"orders"),s},staleTime:a.staleTime??1e3,gcTime:a.gcTime??6e4,refetchOnWindowFocus:!0,refetchOnMount:!0,enabled:a.enabled??!0,refetchInterval:a.refetchInterval,...a})}function De(t=10){return M({filters:{limit:t,sortBy:"createdAt",sortOrder:"desc"},staleTime:3e4,gcTime:3e5})}function Pe(t){return M({filters:t,staleTime:1e3,gcTime:6e4})}function Le(t,l){switch(l||t){case"draft":return e.jsx(W,{className:"h-3 w-3"});case"pending":return e.jsx(E,{className:"h-3 w-3"});case"approved":case"created":return e.jsx(_,{className:"h-3 w-3"});case"sent":return e.jsx(je,{className:"h-3 w-3"});case"delivered":return e.jsx(ye,{className:"h-3 w-3"});case"completed":return e.jsx(_,{className:"h-3 w-3"});case"rejected":return e.jsx(he,{className:"h-3 w-3"});case"urgent":return e.jsx(X,{className:"h-3 w-3"});default:return e.jsx(W,{className:"h-3 w-3"})}}function Be({order:t,onOrderClick:l,isDarkMode:a}){const c=N.useMemo(()=>(t.orderStatus||t.status,t.orderStatus?t.orderStatus!=="draft"&&["created","sent","delivered"].includes(t.orderStatus):t.status!=="draft"&&["approved","sent","completed"].includes(t.status)),[t.orderStatus,t.status]);return e.jsxs("div",{className:`flex items-center justify-between p-1 rounded cursor-pointer transition-colors ${a?"hover:bg-gray-700":"hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"min-w-0 flex-1",onClick:()=>l?.(t.id),children:[e.jsx("div",{className:`text-xs font-medium truncate transition-colors ${a?"text-gray-100":"text-gray-900"}`,children:t.orderNumber}),e.jsx("div",{className:`text-xs transition-colors ${a?"text-gray-400":"text-gray-500"}`,children:t.vendor?.name||t.vendorName})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-right",children:e.jsx("div",{className:`text-xs font-semibold transition-colors ${a?"text-blue-400":"text-blue-600"}`,children:C(t.totalAmount||0).replace("₩","").replace(",000,000","M")})}),c&&e.jsx("button",{onClick:o=>{o.stopPropagation(),window.open(`/api/orders/${t.id}/download-pdf`,"_blank")},className:`p-1 rounded transition-colors ${a?"text-orange-400 hover:bg-orange-900/20 hover:text-orange-300":"text-orange-500 hover:bg-orange-50 hover:text-orange-700"}`,title:"PDF 다운로드",children:e.jsx(T,{className:"h-3 w-3"})})]})]})}function Fe({order:t,onOrderClick:l,isDarkMode:a,sortBy:c,sortOrder:o,onSort:s}){const y=N.useMemo(()=>(t.orderStatus||t.status,t.orderStatus?t.orderStatus!=="draft"&&["created","sent","delivered"].includes(t.orderStatus):t.status!=="draft"&&["approved","sent","completed"].includes(t.status)),[t.orderStatus,t.status]);return e.jsxs("tr",{className:`hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors ${a?"border-gray-700":"border-gray-200"}`,children:[e.jsx("td",{className:"px-3 py-2",children:e.jsx("button",{onClick:()=>l?.(t.id),className:`text-xs font-medium transition-colors ${a?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-700"}`,children:t.orderNumber})}),e.jsx("td",{className:`px-3 py-2 text-xs ${a?"text-gray-300":"text-gray-700"}`,children:e.jsx("div",{className:"truncate max-w-[120px]",title:t.vendor?.name||t.vendorName,children:t.vendor?.name||t.vendorName||"-"})}),e.jsx("td",{className:`px-3 py-2 text-xs font-medium text-right ${a?"text-gray-100":"text-gray-900"}`,children:C(t.totalAmount||0).replace("₩","").replace(",000,000","M")}),e.jsx("td",{className:"px-3 py-2",children:e.jsx(R,{variant:"secondary",className:D("text-xs px-2 py-0",Y(t.orderStatus||t.status)),children:U(t.orderStatus||t.status)})}),e.jsx("td",{className:"px-3 py-2 text-center",children:y&&e.jsx("button",{onClick:j=>{j.stopPropagation(),window.open(`/api/orders/${t.id}/download-pdf`,"_blank")},className:`p-1 rounded transition-colors ${a?"text-orange-400 hover:bg-orange-900/20 hover:text-orange-300":"text-orange-500 hover:bg-orange-50 hover:text-orange-700"}`,title:"PDF 다운로드",children:e.jsx(T,{className:"h-3 w-3"})})})]})}function Re({order:t,onOrderClick:l,isDarkMode:a}){return e.jsxs("div",{className:D("group flex items-center justify-between p-3 rounded-lg","hover:bg-gray-50 transition-all duration-200","cursor-pointer hover:shadow-sm",a&&"hover:bg-gray-800"),onClick:()=>l?.(t.id),children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:`text-sm font-medium group-hover:text-primary-600 transition-colors ${a?"text-gray-100":"text-gray-900"}`,children:t.orderNumber}),e.jsx(R,{variant:"secondary",className:D("text-xs px-2 py-0",Y(t.orderStatus||t.status)),children:U(t.orderStatus||t.status)})]}),e.jsxs("div",{className:`flex items-center gap-3 text-xs ${a?"text-gray-400":"text-gray-500"}`,children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(E,{className:"h-3 w-3"}),e.jsx("span",{children:K(t.createdAt||t.orderDate)})]}),(t.vendor?.name||t.vendorName)&&e.jsx("span",{className:"truncate",children:t.vendor?.name||t.vendorName})]})]}),e.jsx("div",{className:"text-right ml-4",children:e.jsx("p",{className:`text-sm font-semibold ${a?"text-gray-100":"text-gray-900"}`,children:C(t.totalAmount)})})]})}function Ue({order:t,onOrderClick:l,onStatusChange:a,onDeleteOrder:c,isDarkMode:o,showActions:s=!0}){const[,y]=I(),j=(x,g)=>{x.stopPropagation(),g()};return e.jsxs("div",{className:`p-4 border rounded-lg transition-colors ${o?"border-gray-700 hover:bg-gray-800":"border-gray-200 hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${o?"bg-blue-900/30":"bg-blue-100"}`,children:Le(t.status,t.orderStatus)}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-semibold cursor-pointer transition-colors ${o?"text-gray-100 hover:text-blue-400":"text-gray-900 hover:text-blue-600"}`,onClick:()=>l?.(t.id),children:t.orderNumber}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(R,{variant:"secondary",className:D("text-xs px-2 py-0",Y(t.orderStatus||t.status)),children:U(t.orderStatus||t.status)}),t.approvalStatus&&e.jsx(R,{variant:"outline",className:"text-xs px-2 py-0",children:U(t.approvalStatus)})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:`text-lg font-bold ${o?"text-gray-100":"text-gray-900"}`,children:C(t.totalAmount)}),e.jsx("div",{className:`text-xs ${o?"text-gray-400":"text-gray-500"}`,children:K(t.createdAt||t.orderDate)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{className:`h-4 w-4 ${o?"text-gray-400":"text-gray-500"}`}),e.jsx("span",{className:`text-sm ${o?"text-gray-300":"text-gray-700"}`,children:t.project?.projectName||t.projectName||"프로젝트 없음"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:`h-4 w-4 ${o?"text-gray-400":"text-gray-500"}`}),e.jsx("span",{className:`text-sm ${o?"text-gray-300":"text-gray-700"}`,children:t.vendor?.name||t.vendorName||"거래처 없음"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:`h-4 w-4 ${o?"text-gray-400":"text-gray-500"}`}),e.jsx("span",{className:`text-sm ${o?"text-gray-300":"text-gray-700"}`,children:t.deliveryDate?K(t.deliveryDate):"배송일 미정"})]})]}),s&&e.jsxs("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs(O,{variant:"outline",size:"sm",onClick:x=>j(x,()=>y(`/orders/${t.id}`)),children:[e.jsx(re,{className:"h-4 w-4 mr-1"}),"상세보기"]}),e.jsxs(O,{variant:"outline",size:"sm",onClick:x=>j(x,()=>y(`/orders/${t.id}/edit`)),children:[e.jsx(me,{className:"h-4 w-4 mr-1"}),"수정"]}),t.vendor?.email&&e.jsxs(O,{variant:"outline",size:"sm",onClick:x=>j(x,()=>{}),children:[e.jsx(ae,{className:"h-4 w-4 mr-1"}),"이메일"]}),t.filePath&&e.jsxs(O,{variant:"outline",size:"sm",onClick:x=>j(x,()=>window.open(`/api/orders/${t.id}/download-pdf`,"_blank")),children:[e.jsx(ue,{className:"h-4 w-4 mr-1"}),"PDF"]}),e.jsxs(O,{variant:"destructive",size:"sm",onClick:x=>j(x,()=>c?.(t.id)),children:[e.jsx(ge,{className:"h-4 w-4 mr-1"}),"삭제"]})]})]})}function Ee({mode:t="detailed",maxItems:l,showActions:a=!0,showPagination:c=!1,filters:o,orders:s,onOrderClick:y,onStatusChange:j,onDeleteOrder:x,compact:g=!1,className:z="",enableSelection:P=!1,selectedOrders:m=[],onSelectionChange:L,sortBy:A,sortOrder:v,onSort:b}){const{theme:S}=H(),i=S==="dark",[,k]=I(),w=!s,Q=De(l||10),$=Pe(o||{}),r=t==="compact"?Q:$,{data:n,isLoading:p,error:V}=w?r:{data:null,isLoading:!1,error:null},f=N.useMemo(()=>{if(s)return l?s.slice(0,l):s;const d=n?.orders||[];return l?d.slice(0,l):d},[s,n?.orders,l]),u=d=>{y?y(d):k(`/orders/${d}`)},h=N.useCallback(d=>A!==d?e.jsx(xe,{className:"h-3 w-3 opacity-50"}):v==="asc"?e.jsx(te,{className:"h-3 w-3"}):e.jsx(se,{className:"h-3 w-3"}),[A,v]);if(w&&p)return e.jsxs("div",{className:`flex flex-col items-center justify-center py-8 ${i?"text-gray-400":"text-gray-500"}`,children:[e.jsx(T,{className:`h-12 w-12 mb-2 animate-pulse ${i?"text-gray-600":"text-gray-300"}`}),e.jsx("p",{className:"text-sm",children:"발주서를 불러오는 중..."})]});if(w&&V)return e.jsxs("div",{className:`flex flex-col items-center justify-center py-8 ${i?"text-red-400":"text-red-500"}`,children:[e.jsx(X,{className:"h-12 w-12 mb-2"}),e.jsx("p",{className:"text-sm",children:"발주서를 불러오는데 실패했습니다"})]});if(f.length===0)return e.jsxs("div",{className:`flex flex-col items-center justify-center py-8 ${i?"text-gray-400":"text-gray-500"}`,children:[e.jsx(T,{className:`h-12 w-12 mb-2 ${i?"text-gray-600":"text-gray-300"}`}),e.jsx("p",{className:"text-sm",children:"발주서가 없습니다"})]});const B=()=>{switch(t){case"compact":return e.jsx("div",{className:"space-y-1",children:f.map(d=>e.jsx(Be,{order:d,onOrderClick:u,isDarkMode:i},d.id))});case"compact-table":return e.jsx("div",{className:`overflow-x-auto rounded-lg border ${i?"border-gray-700":"border-gray-200"}`,children:e.jsxs("table",{className:"w-full min-w-full",children:[e.jsx("thead",{className:`${i?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"} border-b`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-3 py-3 text-left text-xs font-medium uppercase tracking-wider ${i?"text-gray-300":"text-gray-500"}`,children:e.jsxs("button",{onClick:()=>b?.("orderNumber"),className:`flex items-center gap-1 transition-colors ${i?"hover:text-gray-100":"hover:text-gray-700"}`,children:["발주번호",h("orderNumber")]})}),e.jsx("th",{className:`px-3 py-3 text-left text-xs font-medium uppercase tracking-wider ${i?"text-gray-300":"text-gray-500"}`,children:e.jsxs("button",{onClick:()=>b?.("vendorName"),className:`flex items-center gap-1 transition-colors ${i?"hover:text-gray-100":"hover:text-gray-700"}`,children:["거래처",h("vendorName")]})}),e.jsx("th",{className:`px-3 py-3 text-right text-xs font-medium uppercase tracking-wider ${i?"text-gray-300":"text-gray-500"}`,children:e.jsxs("button",{onClick:()=>b?.("totalAmount"),className:`flex items-center gap-1 transition-colors ${i?"hover:text-gray-100":"hover:text-gray-700"}`,children:["금액",h("totalAmount")]})}),e.jsx("th",{className:`px-3 py-3 text-left text-xs font-medium uppercase tracking-wider ${i?"text-gray-300":"text-gray-500"}`,children:e.jsxs("button",{onClick:()=>b?.("orderStatus"),className:`flex items-center gap-1 transition-colors ${i?"hover:text-gray-100":"hover:text-gray-700"}`,children:["발주상태",h("orderStatus")]})}),e.jsx("th",{className:`px-3 py-3 text-center text-xs font-medium uppercase tracking-wider ${i?"text-gray-300":"text-gray-500"}`,children:"액션"})]})}),e.jsx("tbody",{className:`divide-y ${i?"bg-gray-800 divide-gray-700":"bg-white divide-gray-200"}`,children:f.map(d=>e.jsx(Fe,{order:d,onOrderClick:u,isDarkMode:i,sortBy:A,sortOrder:v,onSort:b},d.id))})]})});case"detailed":return e.jsx("div",{className:"space-y-2",children:f.map(d=>e.jsx(Re,{order:d,onOrderClick:u,isDarkMode:i},d.id))});case"full":return e.jsx("div",{className:"space-y-4",children:f.map(d=>e.jsx(Ue,{order:d,onOrderClick:u,onStatusChange:j,onDeleteOrder:x,isDarkMode:i,showActions:a},d.id))});default:return null}};return e.jsxs("div",{className:D("unified-orders-list",z),children:[B(),t==="compact"&&n&&n.total>f.length&&e.jsx("div",{className:"text-center pt-2",children:e.jsxs("p",{className:`text-xs ${i?"text-gray-400":"text-gray-500"}`,children:["외 ",n.total-f.length,"개 발주서"]})})]})}function nt(){const{user:t,isLoading:l}=ne(),{toast:a}=ie(),[,c]=I();le();const{theme:o}=H(),s=o==="dark",[y,j]=N.useState({sortBy:"createdAt",sortOrder:"desc"}),x=N.useCallback(r=>{j(n=>({sortBy:r,sortOrder:n.sortBy===r&&n.sortOrder==="desc"?"asc":"desc"}))},[]);N.useEffect(()=>{if(!l&&!t){a({title:"Unauthorized",description:"You are logged out. Redirecting to login...",variant:"destructive"}),setTimeout(()=>{c("/login")},500);return}},[t,l,a]);const{data:g,isLoading:z,error:P}=ce();N.useEffect(()=>{P&&console.error("Dashboard data fetch error:",P),g&&console.log("Dashboard data loaded:",g)},[g,P]);const m=g?.statistics||{},L=g?.recentOrders||[],A=useMemo(()=>L.length?[...L].sort((n,p)=>{const{sortBy:V,sortOrder:f}=y;let u,h;switch(V){case"orderNumber":u=n.orderNumber||"",h=p.orderNumber||"";break;case"vendorName":u=n.vendor?.name||n.vendorName||"",h=p.vendor?.name||p.vendorName||"";break;case"totalAmount":u=n.totalAmount||0,h=p.totalAmount||0;break;case"orderStatus":u=n.orderStatus||n.status||"",h=p.orderStatus||p.status||"";break;case"createdAt":default:u=new Date(n.createdAt||n.orderDate).getTime(),h=new Date(p.createdAt||p.orderDate).getTime();break}if(typeof u=="string"){const B=u.localeCompare(h);return f==="asc"?B:-B}else return f==="asc"?u-h:h-u}):[],[L,y]),v=g?.monthlyStats||[];g?.statusStats;const b=g?.orderStatusStats||[],S=g?.projectStats||[],i=g?.categoryStats||[];m.activeProjects;const{data:k,loading:w,refresh:Q}=fe(m,async()=>(await(await fetch("/api/dashboard/unified")).json()).statistics||{},3e4,!!t);k.totalOrders||m.totalOrders,m.totalOrders,k.totalAmount||m.totalAmount,m.totalAmount,k.completedOrders||m.completedOrders,m.completedOrders;const $=z;return $?e.jsx(be,{}):t?e.jsx("div",{className:`p-2 min-h-screen transition-colors ${s?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("div",{className:"max-w-[1366px] mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("div",{children:e.jsx("h1",{className:`text-sm font-semibold transition-colors ${s?"text-gray-100":"text-gray-900"}`,children:"대시보드"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:Q,disabled:w,className:`text-xs flex items-center gap-1 px-1 py-0.5 rounded transition-colors ${s?"text-gray-400 hover:text-gray-300 hover:bg-gray-700":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(ve,{className:`h-3 w-3 ${w?"animate-spin":""}`}),w?"업데이트":"새로고침"]}),e.jsx("span",{className:`text-xs transition-colors ${s?"text-gray-400":"text-gray-500"}`,children:new Date().toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"})})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-1 mb-2",children:[e.jsx("div",{className:`rounded border p-2 hover:shadow-sm transition-all cursor-pointer ${s?"bg-blue-900/20 border-blue-700 hover:bg-blue-900/30":"bg-blue-50/30 border-blue-300 hover:bg-blue-50/50"}`,onClick:()=>c("/orders?status=completed"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${s?"bg-green-900/30":"bg-green-100"}`,children:e.jsx(q,{className:`h-3 w-3 ${s?"text-green-400":"text-green-600"}`})}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:`text-lg font-bold transition-colors ${s?"text-gray-100":"text-gray-900"}`,children:m.completedOrders||0}),e.jsx("div",{className:`text-xs transition-colors ${s?"text-gray-400":"text-gray-500"}`,children:"발주완료"})]})]})}),e.jsx("div",{className:`rounded border p-2 hover:shadow-sm transition-all cursor-pointer ${s?"bg-blue-900/20 border-blue-700 hover:bg-blue-900/30":"bg-blue-50/30 border-blue-300 hover:bg-blue-50/50"}`,onClick:()=>c("/orders?filter=urgent"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${s?"bg-red-900/30":"bg-red-100"}`,children:e.jsx(X,{className:`h-3 w-3 ${s?"text-red-400":"text-red-600"}`})}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:`text-lg font-bold transition-colors ${s?"text-gray-100":"text-gray-900"}`,children:m.urgentOrders||0}),e.jsx("div",{className:`text-xs transition-colors ${s?"text-gray-400":"text-gray-500"}`,children:"긴급발주"})]})]})}),e.jsx("div",{className:`rounded border p-2 transition-colors ${s?"bg-blue-900/20 border-blue-700":"bg-blue-50/30 border-blue-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${s?"bg-blue-800/30":"bg-blue-100"}`,children:e.jsx(T,{className:`h-3 w-3 ${s?"text-blue-400":"text-blue-600"}`})}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:`text-lg font-bold transition-colors ${s?"text-gray-100":"text-gray-900"}`,children:m.totalOrders||0}),e.jsx("div",{className:`text-xs transition-colors ${s?"text-gray-400":"text-gray-500"}`,children:"총발주서"})]})]})}),e.jsx("div",{className:`rounded border p-2 transition-colors ${s?"bg-blue-900/20 border-blue-700":"bg-blue-50/30 border-blue-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${s?"bg-emerald-900/30":"bg-emerald-100"}`,children:e.jsx(Ne,{className:`h-3 w-3 ${s?"text-emerald-400":"text-emerald-600"}`})}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:`text-sm font-bold transition-colors ${s?"text-blue-400":"text-blue-600"}`,children:C(m.totalAmount||0).replace("₩","").replace(",000,000","M")}),e.jsx("div",{className:`text-xs transition-colors ${s?"text-gray-400":"text-gray-500"}`,children:"총금액"})]})]})}),e.jsx("div",{className:`rounded border p-2 transition-colors ${s?"bg-blue-900/20 border-blue-700":"bg-blue-50/30 border-blue-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${s?"bg-purple-900/30":"bg-purple-100"}`,children:e.jsx(F,{className:`h-3 w-3 ${s?"text-purple-400":"text-purple-600"}`})}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:`text-lg font-bold transition-colors ${s?"text-gray-100":"text-gray-900"}`,children:m.activeProjects||0}),e.jsx("div",{className:`text-xs transition-colors ${s?"text-gray-400":"text-gray-500"}`,children:"활성현장"})]})]})}),e.jsx("div",{className:`rounded border p-2 transition-colors ${s?"bg-blue-900/20 border-blue-700":"bg-blue-50/30 border-blue-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${s?"bg-indigo-900/30":"bg-indigo-100"}`,children:e.jsx(Z,{className:`h-3 w-3 ${s?"text-indigo-400":"text-indigo-600"}`})}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:`text-lg font-bold transition-colors ${s?"text-gray-100":"text-gray-900"}`,children:m.activeVendors||0}),e.jsx("div",{className:`text-xs transition-colors ${s?"text-gray-400":"text-gray-500"}`,children:"활성거래처"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[e.jsxs("div",{className:"space-y-1",children:[!$&&v&&Array.isArray(v)&&v.length>0?(()=>{const r=v.map(n=>({month:n.month.replace("-","/"),orders:Number(n.count)||0}));return e.jsxs("div",{className:`rounded border p-2 transition-colors ${s?"bg-gray-800 border-gray-600":"bg-white border-blue-300"}`,children:[e.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[e.jsx(J,{className:`h-3 w-3 transition-colors ${s?"text-gray-400":"text-gray-600"}`}),e.jsx("h3",{className:`text-xs font-semibold transition-colors ${s?"text-gray-100":"text-gray-900"}`,children:"월별 발주 통계"})]}),e.jsx("div",{className:"h-[140px] w-full",children:e.jsx(we,{width:"100%",height:"100%",children:e.jsxs($e,{data:r,margin:{top:5,right:5,left:5,bottom:5},children:[e.jsx(Ce,{strokeDasharray:"2 2",stroke:"#f3f4f6"}),e.jsx(Se,{dataKey:"month",fontSize:9,axisLine:!1,tickLine:!1}),e.jsx(Ae,{fontSize:9,axisLine:!1,tickLine:!1}),e.jsx(ke,{formatter:n=>[`${n}건`,"발주 건수"]}),e.jsx(Oe,{dataKey:"orders",fill:"#3b82f6",radius:[2,2,0,0]})]})})})]})})():e.jsxs("div",{className:`rounded border p-2 transition-colors ${s?"bg-gray-800 border-gray-600":"bg-white border-blue-300"}`,children:[e.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[e.jsx(J,{className:`h-3 w-3 transition-colors ${s?"text-gray-400":"text-gray-600"}`}),e.jsx("h3",{className:`text-xs font-semibold transition-colors ${s?"text-gray-100":"text-gray-900"}`,children:"월별 발주 통계"})]}),e.jsx("div",{className:`h-[140px] flex items-center justify-center transition-colors ${s?"text-gray-400":"text-gray-500"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx(oe,{className:`h-6 w-6 mx-auto mb-1 transition-colors ${s?"text-gray-600":"text-gray-300"}`}),e.jsx("p",{className:"text-xs",children:"데이터 준비 중..."})]})})]}),e.jsxs("div",{className:`rounded border p-2 transition-colors ${s?"bg-gray-800 border-gray-600":"bg-white border-blue-300"}`,children:[e.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[e.jsx(q,{className:`h-3 w-3 transition-colors ${s?"text-gray-400":"text-gray-600"}`}),e.jsx("h3",{className:`text-xs font-semibold transition-colors ${s?"text-gray-100":"text-gray-900"}`,children:"발주상태분포"})]}),$?e.jsx("div",{className:`h-[140px] flex items-center justify-center transition-colors ${s?"text-gray-400":"text-gray-500"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx(q,{className:`h-6 w-6 mx-auto mb-1 transition-colors ${s?"text-gray-600":"text-gray-300"}`}),e.jsx("p",{className:"text-xs",children:"데이터 준비 중..."})]})}):e.jsx("div",{className:"h-[140px] w-full",children:e.jsx(pe,{data:[{name:"임시저장",value:b.find(r=>r.status==="draft")?.count||0,status:"draft"},{name:"발주생성",value:b.find(r=>r.status==="created")?.count||0,status:"created"},{name:"발주완료",value:b.find(r=>r.status==="sent")?.count||0,status:"sent"},{name:"납품완료",value:b.find(r=>r.status==="delivered")?.count||0,status:"delivered"}],dataKey:"value",nameKey:"name",height:140,showExport:!1,showLabels:!1,showLegend:!1,innerRadius:20,outerRadius:45,colors:["#6b7280","#f59e0b","#3b82f6","#10b981"],formatValue:r=>`${r}건`})})]})]}),e.jsxs("div",{className:`rounded border p-2 transition-colors ${s?"bg-gray-800 border-gray-600":"bg-white border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(F,{className:`h-3 w-3 transition-colors ${s?"text-gray-400":"text-gray-600"}`}),e.jsx("h3",{className:`text-xs font-semibold transition-colors ${s?"text-gray-100":"text-gray-900"}`,children:"현장별 발주 현황"})]}),e.jsx("span",{className:`text-xs transition-colors ${s?"text-gray-400":"text-gray-500"}`,children:"상위 10개"})]}),e.jsx("div",{className:"h-[260px] overflow-y-auto",children:!$&&S&&Array.isArray(S)&&S.length>0?e.jsx("div",{className:"space-y-1",children:S.slice(0,10).map((r,n)=>e.jsxs("div",{className:`flex items-center justify-between p-1.5 rounded cursor-pointer transition-colors ${s?"hover:bg-gray-700":"hover:bg-gray-50"}`,onClick:()=>c(`/projects/${r.id}`),children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[e.jsx("span",{className:`text-xs font-medium w-4 text-center transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:n+1}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:`text-xs font-medium truncate transition-colors ${s?"text-gray-100":"text-gray-900"}`,title:r.projectName,children:r.projectName}),e.jsxs("div",{className:`text-xs transition-colors ${s?"text-gray-400":"text-gray-500"}`,children:[r.orderCount,"건"]})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("div",{className:`text-xs font-semibold transition-colors ${s?"text-blue-400":"text-blue-600"}`,children:C(r.totalAmount||0).replace("₩","").replace(",000,000","M")})})]},n))}):e.jsx("div",{className:`h-[240px] flex items-center justify-center transition-colors ${s?"text-gray-400":"text-gray-500"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx(F,{className:`h-6 w-6 mx-auto mb-1 transition-colors ${s?"text-gray-600":"text-gray-300"}`}),e.jsx("p",{className:"text-xs",children:"데이터 준비 중..."})]})})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:`rounded border p-2 transition-colors ${s?"bg-gray-800 border-gray-600":"bg-white border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(E,{className:`h-3 w-3 transition-colors ${s?"text-gray-400":"text-gray-600"}`}),e.jsx("h3",{className:`text-xs font-semibold transition-colors ${s?"text-gray-100":"text-gray-900"}`,children:"최근 발주서"})]}),e.jsx("button",{onClick:()=>c("/orders"),className:`text-xs font-medium transition-colors ${s?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-800"}`,children:"전체보기"})]}),e.jsx("div",{className:"h-[140px] overflow-y-auto",children:e.jsx(Ee,{mode:"compact-table",maxItems:6,orders:A,onOrderClick:r=>c(`/orders/${r}`),showActions:!1,sortBy:y.sortBy,sortOrder:y.sortOrder,onSort:x})})]}),e.jsxs("div",{className:`rounded border p-2 transition-colors ${s?"bg-gray-800 border-gray-600":"bg-white border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(G,{className:`h-3 w-3 transition-colors ${s?"text-gray-400":"text-gray-600"}`}),e.jsx("h3",{className:`text-xs font-semibold transition-colors ${s?"text-gray-100":"text-gray-900"}`,children:"품목 분류"})]}),e.jsx("button",{onClick:()=>c("/category-management"),className:`text-xs font-medium transition-colors ${s?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-800"}`,children:"관리"})]}),e.jsx("div",{className:"h-[120px] overflow-y-auto",children:!$&&i&&Array.isArray(i)&&i.length>0?e.jsx("div",{className:"space-y-1",children:i.slice(0,6).sort((r,n)=>n.totalAmount-r.totalAmount).map((r,n)=>e.jsxs("div",{className:`flex items-center justify-between p-1 rounded cursor-pointer transition-colors ${s?"hover:bg-gray-700":"hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:`text-xs font-medium transition-colors ${s?"text-gray-100":"text-gray-900"}`,children:r.majorCategory}),r.middleCategory!=="미분류"&&e.jsxs(e.Fragment,{children:[e.jsx(de,{className:`h-2 w-2 transition-colors ${s?"text-gray-500":"text-gray-400"}`}),e.jsx("span",{className:`text-xs truncate transition-colors ${s?"text-gray-400":"text-gray-600"}`,children:r.middleCategory})]})]}),e.jsxs("div",{className:`text-xs transition-colors ${s?"text-gray-400":"text-gray-500"}`,children:[r.orderCount,"건"]})]}),e.jsx("div",{className:"text-right",children:e.jsx("div",{className:`text-xs font-semibold transition-colors ${s?"text-blue-400":"text-blue-600"}`,children:C(r.totalAmount).replace("₩","").replace(",000,000","M")})})]},n))}):e.jsx("div",{className:`h-[100px] flex items-center justify-center transition-colors ${s?"text-gray-400":"text-gray-500"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx(G,{className:`h-6 w-6 mx-auto mb-1 transition-colors ${s?"text-gray-600":"text-gray-300"}`}),e.jsx("p",{className:"text-xs",children:"데이터 준비 중..."})]})})})]})]})]})]})}):null}export{nt as default};
